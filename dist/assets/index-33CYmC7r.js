var Qr=Object.defineProperty;var Kt=r=>{throw TypeError(r)};var Xr=(r,e,t)=>e in r?Qr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var es=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ve=(r,e,t)=>Xr(r,typeof e!="symbol"?e+"":e,t),Nt=(r,e,t)=>e.has(r)||Kt("Cannot "+t);var j=(r,e,t)=>(Nt(r,e,"read from private field"),t?t.call(r):e.get(r)),Ke=(r,e,t)=>e.has(r)?Kt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Ne=(r,e,t,s)=>(Nt(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);var ki=es((Li,ut)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function Q(){}function kr(r){return r()}function Ut(){return Object.create(null)}function Te(r){r.forEach(kr)}function Er(r){return typeof r=="function"}function ke(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let dt;function tt(r,e){return r===e?!0:(dt||(dt=document.createElement("a")),dt.href=e,r===dt.href)}function ts(r){return Object.keys(r).length===0}function rs(r,...e){if(r==null){for(const s of e)s(void 0);return Q}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ae(r,e,t){r.$$.on_destroy.push(rs(e,t))}function o(r,e){r.appendChild(e)}function E(r,e,t){r.insertBefore(e,t||null)}function k(r){r.parentNode&&r.parentNode.removeChild(r)}function nt(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function p(r){return document.createElement(r)}function A(r){return document.createTextNode(r)}function P(){return A(" ")}function He(){return A("")}function re(r,e,t,s){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}function Lr(r){return function(e){return e.preventDefault(),r.call(this,e)}}function ss(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function d(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function ns(r){let e;return{p(...t){e=t,e.forEach(s=>r.push(s))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function is(r){return Array.from(r.childNodes)}function V(r,e){e=""+e,r.data!==e&&(r.data=e)}function he(r,e){r.value=e??""}function Bt(r,e,t){for(let s=0;s<r.options.length;s+=1){const n=r.options[s];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function ls(r,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:s})}let at;function ot(r){at=r}function Pr(){if(!at)throw new Error("Function called outside component initialization");return at}function Ar(r){Pr().$$.on_mount.push(r)}function os(){const r=Pr();return(e,t,{cancelable:s=!1}={})=>{const n=r.$$.callbacks[e];if(n){const i=ls(e,t,{cancelable:s});return n.slice().forEach(l=>{l.call(r,i)}),!i.defaultPrevented}return!0}}function as(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const qe=[],Dt=[];let Qe=[];const Ht=[],cs=Promise.resolve();let Et=!1;function us(){Et||(Et=!0,cs.then(Cr))}function Lt(r){Qe.push(r)}const _t=new Set;let ze=0;function Cr(){if(ze!==0)return;const r=at;do{try{for(;ze<qe.length;){const e=qe[ze];ze++,ot(e),ds(e.$$)}}catch(e){throw qe.length=0,ze=0,e}for(ot(null),qe.length=0,ze=0;Dt.length;)Dt.pop()();for(let e=0;e<Qe.length;e+=1){const t=Qe[e];_t.has(t)||(_t.add(t),t())}Qe.length=0}while(qe.length);for(;Ht.length;)Ht.pop()();Et=!1,_t.clear(),ot(r)}function ds(r){if(r.fragment!==null){r.update(),Te(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Lt)}}function fs(r){const e=[],t=[];Qe.forEach(s=>r.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Qe=e}const pt=new Set;let Je;function rt(){Je={r:0,c:[],p:Je}}function st(){Je.r||Te(Je.c),Je=Je.p}function se(r,e){r&&r.i&&(pt.delete(r),r.i(e))}function ie(r,e,t,s){if(r&&r.o){if(pt.has(r))return;pt.add(r),Je.c.push(()=>{pt.delete(r),s&&(t&&r.d(1),s())}),r.o(e)}else s&&s()}function ge(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Ce(r){r&&r.c()}function we(r,e,t){const{fragment:s,after_update:n}=r.$$;s&&s.m(e,t),Lt(()=>{const i=r.$$.on_mount.map(kr).filter(Er);r.$$.on_destroy?r.$$.on_destroy.push(...i):Te(i),r.$$.on_mount=[]}),n.forEach(Lt)}function Se(r,e){const t=r.$$;t.fragment!==null&&(fs(t.after_update),Te(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ps(r,e){r.$$.dirty[0]===-1&&(qe.push(r),us(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Me(r,e,t,s,n,i,l=null,a=[-1]){const u=at;ot(r);const c=r.$$={fragment:null,ctx:[],props:i,update:Q,not_equal:n,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ut(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};l&&l(c.root);let f=!1;if(c.ctx=t?t(r,e.props||{},(b,g,...y)=>{const _=y.length?y[0]:g;return c.ctx&&n(c.ctx[b],c.ctx[b]=_)&&(!c.skip_bound&&c.bound[b]&&c.bound[b](_),f&&ps(r,b)),g}):[],c.update(),f=!0,Te(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const b=is(e.target);c.fragment&&c.fragment.l(b),b.forEach(k)}else c.fragment&&c.fragment.c();e.intro&&se(r.$$.fragment),we(r,e.target,e.anchor),Cr()}ot(u)}class xe{constructor(){ve(this,"$$");ve(this,"$$set")}$destroy(){Se(this,1),this.$destroy=Q}$on(e,t){if(!Er(t))return Q;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!ts(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ms="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ms);const je=[];function Tr(r,e=Q){let t;const s=new Set;function n(a){if(ke(r,a)&&(r=a,t)){const u=!je.length;for(const c of s)c[1](),je.push(c,r);if(u){for(let c=0;c<je.length;c+=2)je[c][0](je[c+1]);je.length=0}}}function i(a){n(a(r))}function l(a,u=Q){const c=[a,u];return s.add(c),s.size===1&&(t=e(n,i)||Q),a(r),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:n,update:i,subscribe:l}}const Ze=new TextEncoder,mt=new TextDecoder;function hs(...r){const e=r.reduce((n,{length:i})=>n+i,0),t=new Uint8Array(e);let s=0;for(const n of r)t.set(n,s),s+=n.length;return t}function bs(r){if(Uint8Array.prototype.toBase64)return r.toBase64();const e=32768,t=[];for(let s=0;s<r.length;s+=e)t.push(String.fromCharCode.apply(null,r.subarray(s,s+e)));return btoa(t.join(""))}function gs(r){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);const e=atob(r),t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}function Mr(r){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof r=="string"?r:mt.decode(r),{alphabet:"base64url"});let e=r;e instanceof Uint8Array&&(e=mt.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return gs(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function vt(r){let e=r;return typeof e=="string"&&(e=Ze.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):bs(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class bt extends Error{constructor(t,s){var n;super(t,s);ve(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}ve(bt,"code","ERR_JOSE_GENERIC");class Oe extends bt{constructor(){super(...arguments);ve(this,"code","ERR_JOSE_NOT_SUPPORTED")}}ve(Oe,"code","ERR_JOSE_NOT_SUPPORTED");class Ve extends bt{constructor(){super(...arguments);ve(this,"code","ERR_JWS_INVALID")}}ve(Ve,"code","ERR_JWS_INVALID");class xr extends bt{constructor(){super(...arguments);ve(this,"code","ERR_JWT_INVALID")}}ve(xr,"code","ERR_JWT_INVALID");function Re(r,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${r}`)}function it(r,e){return r.name===e}function wt(r){return parseInt(r.name.slice(4),10)}function ys(r){switch(r){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function _s(r,e){if(!r.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function vs(r,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!it(r.algorithm,"HMAC"))throw Re("HMAC");const s=parseInt(e.slice(2),10);if(wt(r.algorithm.hash)!==s)throw Re(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!it(r.algorithm,"RSASSA-PKCS1-v1_5"))throw Re("RSASSA-PKCS1-v1_5");const s=parseInt(e.slice(2),10);if(wt(r.algorithm.hash)!==s)throw Re(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!it(r.algorithm,"RSA-PSS"))throw Re("RSA-PSS");const s=parseInt(e.slice(2),10);if(wt(r.algorithm.hash)!==s)throw Re(`SHA-${s}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!it(r.algorithm,"Ed25519"))throw Re("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!it(r.algorithm,"ECDSA"))throw Re("ECDSA");const s=ys(e);if(r.algorithm.namedCurve!==s)throw Re(s,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}_s(r,t)}function Ir(r,e,...t){var s;if(t=t.filter(Boolean),t.length>2){const n=t.pop();r+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of type ${t[0]} or ${t[1]}.`:r+=`of type ${t[0]}.`;return e==null?r+=` Received ${e}`:typeof e=="function"&&e.name?r+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(s=e.constructor)!=null&&s.name&&(r+=` Received an instance of ${e.constructor.name}`),r}const ws=(r,...e)=>Ir("Key must be ",r,...e);function Rr(r,e,...t){return Ir(`Key for the ${r} algorithm must be `,e,...t)}function Or(r){return(r==null?void 0:r[Symbol.toStringTag])==="CryptoKey"}function Kr(r){return(r==null?void 0:r[Symbol.toStringTag])==="KeyObject"}const Nr=r=>Or(r)||Kr(r),Ss=(...r)=>{const e=r.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const s of e){const n=Object.keys(s);if(!t||t.size===0){t=new Set(n);continue}for(const i of n){if(t.has(i))return!1;t.add(i)}}return!0};function ks(r){return typeof r=="object"&&r!==null}const Ct=r=>{if(!ks(r)||Object.prototype.toString.call(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e},Es=(r,e)=>{if(r.startsWith("RS")||r.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${r} requires key modulusLength to be 2048 bits or larger`)}};function Ls(r){let e,t;switch(r.kty){case"RSA":{switch(r.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${r.alg.slice(-3)}`},t=r.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${r.alg.slice(-3)}`},t=r.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(r.alg.slice(-3),10)||1}`},t=r.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Oe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(r.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=r.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=r.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=r.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:r.crv},t=r.d?["deriveBits"]:[];break;default:throw new Oe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(r.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=r.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:r.crv},t=r.d?["deriveBits"]:[];break;default:throw new Oe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Oe('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const Ur=async r=>{if(!r.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=Ls(r),s={...r};return delete s.alg,delete s.use,crypto.subtle.importKey("jwk",s,e,r.ext??!r.d,r.key_ops??t)};async function Ps(r,e,t){if(!Ct(r))throw new TypeError("JWK must be an object");let s;switch(e??(e=r.alg),s??(s=r.ext),r.kty){case"oct":if(typeof r.k!="string"||!r.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Mr(r.k);case"RSA":if("oth"in r&&r.oth!==void 0)throw new Oe('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Ur({...r,alg:e,ext:s});default:throw new Oe('Unsupported "kty" (Key Type) Parameter value')}}const As=(r,e,t,s,n)=>{if(n.crit!==void 0&&(s==null?void 0:s.crit)===void 0)throw new r('"crit" (Critical) Header Parameter MUST be integrity protected');if(!s||s.crit===void 0)return new Set;if(!Array.isArray(s.crit)||s.crit.length===0||s.crit.some(l=>typeof l!="string"||l.length===0))throw new r('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;t!==void 0?i=new Map([...Object.entries(t),...e.entries()]):i=e;for(const l of s.crit){if(!i.has(l))throw new Oe(`Extension Header Parameter "${l}" is not recognized`);if(n[l]===void 0)throw new r(`Extension Header Parameter "${l}" is missing`);if(i.get(l)&&s[l]===void 0)throw new r(`Extension Header Parameter "${l}" MUST be integrity protected`)}return new Set(s.crit)};function Tt(r){return Ct(r)&&typeof r.kty=="string"}function Cs(r){return r.kty!=="oct"&&typeof r.d=="string"}function Ts(r){return r.kty!=="oct"&&typeof r.d>"u"}function Ms(r){return r.kty==="oct"&&typeof r.k=="string"}let Xe;const Wt=async(r,e,t,s=!1)=>{Xe||(Xe=new WeakMap);let n=Xe.get(r);if(n!=null&&n[t])return n[t];const i=await Ur({...e,alg:t});return s&&Object.freeze(r),n?n[t]=i:Xe.set(r,{[t]:i}),i},xs=(r,e)=>{var l;Xe||(Xe=new WeakMap);let t=Xe.get(r);if(t!=null&&t[e])return t[e];const s=r.type==="public",n=!!s;let i;if(r.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}i=r.toCryptoKey(r.asymmetricKeyType,n,s?[]:["deriveBits"])}if(r.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");i=r.toCryptoKey(r.asymmetricKeyType,n,[s?"verify":"sign"])}if(r.asymmetricKeyType==="rsa"){let a;switch(e){case"RSA-OAEP":a="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":a="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":a="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":a="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return r.toCryptoKey({name:"RSA-OAEP",hash:a},n,s?["encrypt"]:["decrypt"]);i=r.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:a},n,[s?"verify":"sign"])}if(r.asymmetricKeyType==="ec"){const u=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((l=r.asymmetricKeyDetails)==null?void 0:l.namedCurve);if(!u)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&u==="P-256"&&(i=r.toCryptoKey({name:"ECDSA",namedCurve:u},n,[s?"verify":"sign"])),e==="ES384"&&u==="P-384"&&(i=r.toCryptoKey({name:"ECDSA",namedCurve:u},n,[s?"verify":"sign"])),e==="ES512"&&u==="P-521"&&(i=r.toCryptoKey({name:"ECDSA",namedCurve:u},n,[s?"verify":"sign"])),e.startsWith("ECDH-ES")&&(i=r.toCryptoKey({name:"ECDH",namedCurve:u},n,s?[]:["deriveBits"]))}if(!i)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=i:Xe.set(r,{[e]:i}),i},Is=async(r,e)=>{if(r instanceof Uint8Array||Or(r))return r;if(Kr(r)){if(r.type==="secret")return r.export();if("toCryptoKey"in r&&typeof r.toCryptoKey=="function")try{return xs(r,e)}catch(s){if(s instanceof TypeError)throw s}let t=r.export({format:"jwk"});return Wt(r,t,e)}if(Tt(r))return r.k?Mr(r.k):Wt(r,r,e,!0);throw new Error("unreachable")},Ye=r=>r==null?void 0:r[Symbol.toStringTag],Pt=(r,e,t)=>{var s,n;if(e.use!==void 0){let i;switch(t){case"sign":case"verify":i="sig";break;case"encrypt":case"decrypt":i="enc";break}if(e.use!==i)throw new TypeError(`Invalid key for this operation, its "use" must be "${i}" when present`)}if(e.alg!==void 0&&e.alg!==r)throw new TypeError(`Invalid key for this operation, its "alg" must be "${r}" when present`);if(Array.isArray(e.key_ops)){let i;switch(!0){case t==="sign":case r==="dir":case r.includes("CBC-HS"):i=t;break;case r.startsWith("PBES2"):i="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(r):!r.includes("GCM")&&r.endsWith("KW")?i="unwrapKey":i=t;break;case t==="encrypt":i="wrapKey";break;case t==="decrypt":i=r.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(i&&((n=(s=e.key_ops)==null?void 0:s.includes)==null?void 0:n.call(s,i))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${i}" when present`)}return!0},Rs=(r,e,t)=>{if(!(e instanceof Uint8Array)){if(Tt(e)){if(Ms(e)&&Pt(r,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Nr(e))throw new TypeError(Rr(r,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Ye(e)} instances for symmetric algorithms must be of type "secret"`)}},Os=(r,e,t)=>{if(Tt(e))switch(t){case"decrypt":case"sign":if(Cs(e)&&Pt(r,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Ts(e)&&Pt(r,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Nr(e))throw new TypeError(Rr(r,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Ye(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${Ye(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Ye(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${Ye(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Ye(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},Ks=(r,e,t)=>{r.startsWith("HS")||r==="dir"||r.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(r)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(r)?Rs(r,e,t):Os(r,e,t)},Ns=(r,e)=>{const t=`SHA-${r.slice(-3)}`;switch(r){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(r.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new Oe(`alg ${r} is not supported either by JOSE or your javascript runtime`)}},Us=async(r,e,t)=>{if(e instanceof Uint8Array){if(!r.startsWith("HS"))throw new TypeError(ws(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${r.slice(-3)}`,name:"HMAC"},!1,[t])}return vs(e,r,t),e},$e=r=>Math.floor(r.getTime()/1e3),Br=60,Dr=Br*60,Mt=Dr*24,Bs=Mt*7,Ds=Mt*365.25,Hs=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,St=r=>{const e=Hs.exec(r);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),s=e[3].toLowerCase();let n;switch(s){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*Br);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*Dr);break;case"day":case"days":case"d":n=Math.round(t*Mt);break;case"week":case"weeks":case"w":n=Math.round(t*Bs);break;default:n=Math.round(t*Ds);break}return e[1]==="-"||e[4]==="ago"?-n:n};function Fe(r,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${r} input`);return e}var le;class Ws{constructor(e){Ke(this,le);if(!Ct(e))throw new TypeError("JWT Claims Set MUST be an object");Ne(this,le,structuredClone(e))}data(){return Ze.encode(JSON.stringify(j(this,le)))}get iss(){return j(this,le).iss}set iss(e){j(this,le).iss=e}get sub(){return j(this,le).sub}set sub(e){j(this,le).sub=e}get aud(){return j(this,le).aud}set aud(e){j(this,le).aud=e}set jti(e){j(this,le).jti=e}set nbf(e){typeof e=="number"?j(this,le).nbf=Fe("setNotBefore",e):e instanceof Date?j(this,le).nbf=Fe("setNotBefore",$e(e)):j(this,le).nbf=$e(new Date)+St(e)}set exp(e){typeof e=="number"?j(this,le).exp=Fe("setExpirationTime",e):e instanceof Date?j(this,le).exp=Fe("setExpirationTime",$e(e)):j(this,le).exp=$e(new Date)+St(e)}set iat(e){typeof e>"u"?j(this,le).iat=$e(new Date):e instanceof Date?j(this,le).iat=Fe("setIssuedAt",$e(e)):typeof e=="string"?j(this,le).iat=Fe("setIssuedAt",$e(new Date)+St(e)):j(this,le).iat=Fe("setIssuedAt",e)}}le=new WeakMap;const $s=async(r,e,t)=>{const s=await Us(r,e,"sign");Es(r,s);const n=await crypto.subtle.sign(Ns(r,s.algorithm),s,t);return new Uint8Array(n)};var ct,me,Le;class Fs{constructor(e){Ke(this,ct);Ke(this,me);Ke(this,Le);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Ne(this,ct,e)}setProtectedHeader(e){if(j(this,me))throw new TypeError("setProtectedHeader can only be called once");return Ne(this,me,e),this}setUnprotectedHeader(e){if(j(this,Le))throw new TypeError("setUnprotectedHeader can only be called once");return Ne(this,Le,e),this}async sign(e,t){if(!j(this,me)&&!j(this,Le))throw new Ve("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Ss(j(this,me),j(this,Le)))throw new Ve("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const s={...j(this,me),...j(this,Le)},n=As(Ve,new Map([["b64",!0]]),t==null?void 0:t.crit,j(this,me),s);let i=!0;if(n.has("b64")&&(i=j(this,me).b64,typeof i!="boolean"))throw new Ve('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=s;if(typeof l!="string"||!l)throw new Ve('JWS "alg" (Algorithm) Header Parameter missing or invalid');Ks(l,e,"sign");let a=j(this,ct);i&&(a=Ze.encode(vt(a)));let u;j(this,me)?u=Ze.encode(vt(JSON.stringify(j(this,me)))):u=Ze.encode("");const c=hs(u,Ze.encode("."),a),f=await Is(e,l),b=await $s(l,f,c),g={signature:vt(b),payload:""};return i&&(g.payload=mt.decode(a)),j(this,Le)&&(g.header=j(this,Le)),j(this,me)&&(g.protected=mt.decode(u)),g}}ct=new WeakMap,me=new WeakMap,Le=new WeakMap;var et;class Js{constructor(e){Ke(this,et);Ne(this,et,new Fs(e))}setProtectedHeader(e){return j(this,et).setProtectedHeader(e),this}async sign(e,t){const s=await j(this,et).sign(e,t);if(s.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${s.protected}.${s.payload}.${s.signature}`}}et=new WeakMap;var Be,be;class zs{constructor(e={}){Ke(this,Be);Ke(this,be);Ne(this,be,new Ws(e))}setIssuer(e){return j(this,be).iss=e,this}setSubject(e){return j(this,be).sub=e,this}setAudience(e){return j(this,be).aud=e,this}setJti(e){return j(this,be).jti=e,this}setNotBefore(e){return j(this,be).nbf=e,this}setExpirationTime(e){return j(this,be).exp=e,this}setIssuedAt(e){return j(this,be).iat=e,this}setProtectedHeader(e){return Ne(this,Be,e),this}async sign(e,t){var n;const s=new Js(j(this,be).data());if(s.setProtectedHeader(j(this,Be)),Array.isArray((n=j(this,Be))==null?void 0:n.crit)&&j(this,Be).crit.includes("b64")&&j(this,Be).b64===!1)throw new xr("JWTs MUST NOT use unencoded payload");return s.sign(e,t)}}Be=new WeakMap,be=new WeakMap;const At="bluesky_oauth_session",Hr="bluesky_code_verifier",Wr="bluesky_oauth_state",$r="bluesky_server_url";function js(r=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const s=new Uint8Array(r);crypto.getRandomValues(s);for(let n=0;n<r;n++)t+=e[s[n]%e.length];return t}async function qs(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t);return Vs(s)}function Vs(r){return btoa(String.fromCharCode(...new Uint8Array(r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $t(){return await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}async function Ft(r,e,t,s,n){try{const i=await crypto.subtle.exportKey("jwk",r.publicKey),l={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};s&&(l.nonce=s);const a=await Ps(await crypto.subtle.exportKey("jwk",r.privateKey),"ES256");return await new zs(l).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:i.kty,crv:i.crv,x:i.x,y:i.y}}).sign(a)}catch(i){throw console.error("Error creating DPoP JWT:",i),i}}async function Ys(r="https://bsky.social"){try{const e=js();localStorage.setItem(Hr,e);const t=await qs(e),s=crypto.randomUUID();localStorage.setItem(Wr,s),localStorage.setItem($r,r);const i=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5173/client-metadata.json":"https://bluesky-list-manager.vercel.app/client-metadata.json",l=`${window.location.origin}/oauth-callback.html`,a=new URL(`${r}/oauth/authorize`);a.searchParams.append("client_id",i),a.searchParams.append("response_type","code"),a.searchParams.append("redirect_uri",l),a.searchParams.append("scope","atproto transition:generic"),a.searchParams.append("state",s),a.searchParams.append("code_challenge",t),a.searchParams.append("code_challenge_method","S256"),window.location.href=a.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}function lt(){const r=localStorage.getItem(At);if(r)try{return JSON.parse(r)}catch{localStorage.removeItem(At)}return null}function Jt(){localStorage.removeItem(At),localStorage.removeItem(Hr),localStorage.removeItem(Wr),localStorage.removeItem($r)}const pe={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},Ge={OAUTH:"oauth",APP_PASSWORD:"app_password"};function Gs(){const{subscribe:r,set:e,update:t}=Tr({session:null,authType:null,isLoading:!1,error:null});return{subscribe:r,setSession:(s,n=Ge.APP_PASSWORD)=>{s?(localStorage.setItem(pe.SESSION,JSON.stringify(s)),localStorage.setItem(pe.AUTH_TYPE,n)):(localStorage.removeItem(pe.SESSION),localStorage.removeItem(pe.AUTH_TYPE)),e({session:s,authType:n,isLoading:!1,error:null})},setLoading:s=>{t(n=>({...n,isLoading:s}))},setError:s=>{t(n=>({...n,error:s,isLoading:!1}))},getSession:()=>{const s=localStorage.getItem(pe.SESSION),n=localStorage.getItem(pe.AUTH_TYPE)||Ge.APP_PASSWORD;if(s)try{return{session:JSON.parse(s),authType:n}}catch{localStorage.removeItem(pe.SESSION),localStorage.removeItem(pe.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(pe.SESSION),localStorage.removeItem(pe.AUTH_TYPE),Jt(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(pe.SESSION),localStorage.removeItem(pe.AUTH_TYPE),Jt(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:()=>{const s=lt();if(s&&s.accessToken){const l={accessJwt:s.accessToken,refreshJwt:s.refreshToken,handle:s.sub,did:s.sub,email:null};return e({session:l,authType:Ge.OAUTH,isLoading:!1,error:null}),{session:l,authType:Ge.OAUTH}}const{session:n,authType:i}=De.getSession();return n?(e({session:n,authType:i,isLoading:!1,error:null}),{session:n,authType:i}):{session:null,authType:null}},isOAuthSession:()=>localStorage.getItem(pe.AUTH_TYPE)===Ge.OAUTH}}const De=Gs(),ft="https://bsky.social/xrpc";class Zs{async signIn(e,t){const s=await fetch(`${ft}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!s.ok){const n=await s.json();throw new Error(n.message||"Failed to sign in")}return await s.json()}async getAuthHeaders(e,t="app_password"){if(t==="oauth"){const s=lt();if(!s||!s.accessToken)throw new Error("No OAuth session found");const n=await $t(),i=await Ft(n,"GET",`${ft}/app.bsky.graph.getLists`,s.serverNonce);return{Authorization:`Bearer ${s.accessToken}`,DPoP:i,"Content-Type":"application/json"}}else return{Authorization:`Bearer ${e.accessJwt}`,"Content-Type":"application/json"}}async makeBlueskyRequest(e,t,s="app_password",n="GET",i=null){const l=await this.getAuthHeaders(t,s);if(s==="oauth"&&l.DPoP){const c=lt(),f=await $t(),b=await Ft(f,n,`${ft}/${e}`,c.serverNonce);l.DPoP=b}const a={method:n,headers:l};i&&n!=="GET"&&(a.body=JSON.stringify(i));const u=await fetch(`${ft}/${e}`,a);if(!u.ok){const c=await u.json();throw new Error(c.message||`Failed to fetch from ${e}`)}return await u.json()}async getUserLists(e,t="app_password"){if(t==="oauth"){const s=lt();if(!s.sub)throw new Error("No user DID found in OAuth session");const i=(await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${s.sub}`,e,t)).handle;return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${i}`,e,t)).lists||[]}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${e.handle}`,e,t)).lists||[]}async getListInfo(e,t,s="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,s)).list}async getListMembers(e,t,s="app_password",n=25,i=null){var f,b,g;let l=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;i&&(l+=`&cursor=${encodeURIComponent(i)}`);const a=await this.makeBlueskyRequest(l,e,s);return{members:(((f=a.list)==null?void 0:f.items)||[]).map(y=>y.subject),cursor:(b=a.list)==null?void 0:b.cursor,totalCount:((g=a.list)==null?void 0:g.listItemCount)||0}}async getListMembersCount(e,t,s="app_password"){return(await this.getListInfo(e,t,s)).listItemCount||0}async getProfiles(e,t,s="app_password"){if(!t||t.length===0)return[];const n=[];for(const i of t)try{const l=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(i)}`,e,s);n.push(l)}catch(l){console.error(`Failed to fetch profile for ${i}:`,l),n.push({did:i,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,s="app_password",n=25,i=null){let l=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;i&&(l+=`&cursor=${encodeURIComponent(i)}`);const a=await this.makeBlueskyRequest(l,e,s);return{actors:a.actors||[],cursor:a.cursor}}async addToList(e,t,s,n="app_password"){let i;return n==="oauth"?i=lt().sub:i=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:i,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:s,createdAt:new Date().toISOString()}})}async resolveHandle(e,t,s="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,s)).did}}const Pe=new Zs,Ue={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Qs(){const{subscribe:r,update:e}=Tr({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1;return{subscribe:r,setSelectedList:s=>{s?localStorage.setItem(Ue.SELECTED_LIST,JSON.stringify(s)):localStorage.removeItem(Ue.SELECTED_LIST),e(n=>({...n,selectedList:s,isLoadingList:!!s,listMembers:[],listMemberProfiles:[]}))},setListLoading:s=>{e(n=>({...n,isLoadingList:s}))},setUserLists:s=>{localStorage.setItem(Ue.LISTS,JSON.stringify(s)),e(n=>({...n,userLists:s}))},setListMembers:s=>{e(n=>({...n,listMembers:s}))},isProfileInCurrentList:s=>{let n=!1;return e(i=>(n=i.listMembers.includes(s),i)),n},setListMemberProfiles:s=>{e(n=>({...n,listMemberProfiles:s}))},addProfileToList:s=>{e(n=>{const i=n.listMembers.includes(s)?n.listMembers:[s,...n.listMembers];return{...n,listMembers:i}})},addProfileToDisplay:s=>{e(n=>{if(n.listMembers.indexOf(s.did)<25){const l=[s,...n.listMemberProfiles];return{...n,listMemberProfiles:l.slice(0,25)}}return n})},fetchAndAddProfile:(s,n,i="app_password")=>t?Promise.resolve():(t=!0,new Promise(async l=>{try{const a=await Pe.getProfiles(s,[n],i);if(a.length>0){const u=a[0];e(c=>{const f=c.listMembers.includes(n)?c.listMembers:[n,...c.listMembers];if(f.indexOf(n)<25){const g=c.listMemberProfiles.filter(_=>_.did!==n),y=[u,...g];return{...c,listMembers:f,listMemberProfiles:y.slice(0,25)}}return{...c,listMembers:f}})}}catch(a){console.error("Failed to fetch profile data:",a),e(u=>{const c=u.listMembers.includes(n)?u.listMembers:[n,...u.listMembers];return{...u,listMembers:c}})}finally{t=!1}l()})),refreshListMembers:()=>{e(s=>({...s,refreshTrigger:Date.now()}))},setLoading:s=>{e(n=>({...n,isLoading:s}))},setError:s=>{e(n=>({...n,error:s,isLoading:!1}))},getSelectedList:()=>{const s=localStorage.getItem(Ue.SELECTED_LIST);if(s)try{return JSON.parse(s)}catch{localStorage.removeItem(Ue.SELECTED_LIST)}return null},getUserLists:()=>{const s=localStorage.getItem(Ue.LISTS);if(s)try{return JSON.parse(s)}catch{localStorage.removeItem(Ue.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(Ue.SELECTED_LIST),e(s=>({...s,selectedList:null}))}}}const ce=Qs();function Xs(r){let e,t,s,n,i,l,a,u,c,f,b,g,y;return{c(){e=p("div"),t=p("label"),t.textContent="Handle",s=P(),n=p("input"),i=P(),l=p("div"),a=p("label"),a.textContent="App Password",u=P(),c=p("input"),f=P(),b=p("p"),b.textContent="Use an app password, not your main account password",d(t,"for","handle"),d(t,"class","block text-sm font-medium text-gray-700 mb-1"),d(n,"id","handle"),d(n,"type","text"),d(n,"placeholder","your-handle.bsky.social"),d(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,d(a,"for","password"),d(a,"class","block text-sm font-medium text-gray-700 mb-1"),d(c,"id","password"),d(c,"type","password"),d(c,"placeholder","Your app password"),d(c,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c.required=!0,d(b,"class","text-xs text-gray-500 mt-1")},m(_,v){E(_,e,v),o(e,t),o(e,s),o(e,n),he(n,r[0]),E(_,i,v),E(_,l,v),o(l,a),o(l,u),o(l,c),he(c,r[1]),o(l,f),o(l,b),g||(y=[re(n,"input",r[12]),re(c,"input",r[13])],g=!0)},p(_,v){v&1&&n.value!==_[0]&&he(n,_[0]),v&2&&c.value!==_[1]&&he(c,_[1])},d(_){_&&(k(e),k(i),k(l)),g=!1,Te(y)}}}function en(r){let e;return{c(){e=p("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,d(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,s){E(t,e,s)},p:Q,d(t){t&&k(e)}}}function zt(r){let e,t,s;return{c(){e=p("div"),t=p("p"),s=A(r[3]),d(t,"class","text-red-700 text-sm"),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,i){E(n,e,i),o(e,t),o(t,s)},p(n,i){i&8&&V(s,n[3])},d(n){n&&k(e)}}}function tn(r){let e;return{c(){e=A("Sign In")},m(t,s){E(t,e,s)},p:Q,d(t){t&&k(e)}}}function rn(r){let e;return{c(){e=A("Sign in with Bluesky")},m(t,s){E(t,e,s)},p:Q,d(t){t&&k(e)}}}function sn(r){let e,t,s;function n(a,u){return a[4]==="oauth"?ln:nn}let i=n(r),l=i(r);return{c(){e=p("span"),t=P(),l.c(),s=He(),d(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(a,u){E(a,e,u),E(a,t,u),l.m(a,u),E(a,s,u)},p(a,u){i!==(i=n(a))&&(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&(k(e),k(t),k(s)),l.d(a)}}}function nn(r){let e;return{c(){e=A("Signing in...")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function ln(r){let e;return{c(){e=A("Connecting...")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function on(r){let e,t,s,n,i,l,a,u,c,f,b,g,y,_,v,S,x,D,z,N,T,L,q,M,I,w,B,K,F,H,X,de;function ue(R,C){return R[4]==="oauth"?en:Xs}let oe=ue(r),Y=oe(r),h=r[3]&&zt(r);function m(R,C){return R[2]?sn:R[4]==="oauth"?rn:tn}let O=m(r),U=O(r);return H=ns(r[10][0]),{c(){e=p("div"),t=p("div"),s=p("div"),n=p("h2"),n.textContent="Sign in to Bluesky",i=P(),l=p("button"),l.textContent="√ó",a=P(),u=p("form"),c=p("div"),f=p("div"),b=p("label"),b.textContent="Sign in with:",g=P(),y=p("div"),_=p("label"),v=p("input"),S=P(),x=p("span"),x.textContent="OAuth (Coming Soon)",D=P(),z=p("label"),N=p("input"),T=P(),L=p("span"),L.textContent="App Password (Recommended)",q=P(),Y.c(),M=P(),h&&h.c(),I=P(),w=p("div"),B=p("button"),B.textContent="Cancel",K=P(),F=p("button"),U.c(),d(n,"class","text-xl font-semibold text-slate-800"),d(l,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),d(s,"class","flex items-center justify-between mb-4"),d(b,"class","block text-sm font-medium text-gray-700 mb-2"),d(v,"type","radio"),v.__value="oauth",he(v,v.__value),d(v,"class","mr-2"),v.disabled=!0,d(x,"class","text-sm"),d(_,"class","flex items-center opacity-50 cursor-not-allowed"),d(N,"type","radio"),N.__value="app_password",he(N,N.__value),d(N,"class","mr-2"),d(L,"class","text-sm"),d(z,"class","flex items-center"),d(y,"class","space-y-2"),d(B,"type","button"),d(B,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),d(F,"type","submit"),F.disabled=r[2],d(F,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),d(w,"class","flex space-x-3 pt-2"),d(c,"class","space-y-4"),d(t,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6"),d(t,"role","document"),d(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),d(e,"role","dialog"),d(e,"aria-modal","true"),d(e,"tabindex","-1"),H.p(v,N)},m(R,C){E(R,e,C),o(e,t),o(t,s),o(s,n),o(s,i),o(s,l),o(t,a),o(t,u),o(u,c),o(c,f),o(f,b),o(f,g),o(f,y),o(y,_),o(_,v),v.checked=v.__value===r[4],o(_,S),o(_,x),o(y,D),o(y,z),o(z,N),N.checked=N.__value===r[4],o(z,T),o(z,L),o(c,q),Y.m(c,null),o(c,M),h&&h.m(c,null),o(c,I),o(c,w),o(w,B),o(w,K),o(w,F),U.m(F,null),X||(de=[re(l,"click",r[6]),re(v,"change",r[9]),re(N,"change",r[11]),re(B,"click",r[6]),re(u,"submit",Lr(r[5])),re(t,"click",ss(r[8])),re(e,"click",r[7]),re(e,"keydown",r[14])],X=!0)},p(R,[C]){C&16&&(v.checked=v.__value===R[4]),C&16&&(N.checked=N.__value===R[4]),oe===(oe=ue(R))&&Y?Y.p(R,C):(Y.d(1),Y=oe(R),Y&&(Y.c(),Y.m(c,M))),R[3]?h?h.p(R,C):(h=zt(R),h.c(),h.m(c,I)):h&&(h.d(1),h=null),O===(O=m(R))&&U?U.p(R,C):(U.d(1),U=O(R),U&&(U.c(),U.m(F,null))),C&4&&(F.disabled=R[2])},i:Q,o:Q,d(R){R&&k(e),Y.d(),h&&h.d(),U.d(),H.r(),X=!1,Te(de)}}}function an(r,e,t){const s=os();let n="",i="",l=!1,a="",u="app_password";async function c(){t(2,l=!0),t(3,a="");try{await Ys()}catch(T){t(3,a=T.message||"Failed to start OAuth flow"),t(2,l=!1)}}async function f(){if(!n||!i){t(3,a="Please enter both handle and password");return}t(2,l=!0),t(3,a="");try{const T=await Pe.signIn(n,i);De.setSession(T,Ge.APP_PASSWORD),s("close")}catch(T){t(3,a=T.message||"Failed to sign in. Please check your credentials.")}finally{t(2,l=!1)}}async function b(){u==="oauth"?await c():await f()}function g(){s("close")}function y(){g()}const _=[[]];function v(T){as.call(this,r,T)}function S(){u=this.__value,t(4,u)}function x(){u=this.__value,t(4,u)}function D(){n=this.value,t(0,n)}function z(){i=this.value,t(1,i)}return[n,i,l,a,u,b,g,y,v,S,_,x,D,z,T=>T.key==="Escape"&&g()]}class Fr extends xe{constructor(e){super(),Me(this,e,an,on,ke,{})}}const cn=!0,gt={staticBase:"static",isDevelopment:!1,isProduction:cn,buildTime:new Date().toISOString(),getAssetPath:r=>`./${r.replace("static/","")}`};function jt(r,e,t){const s=r.slice();return s[10]=e[t],s}function un(r){let e,t,s;return{c(){e=p("button"),e.textContent="üîê Sign in with Bluesky",d(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200")},m(n,i){E(n,e,i),t||(s=re(e,"click",r[6]),t=!0)},p:Q,d(n){n&&k(e),t=!1,s()}}}function dn(r){let e,t,s,n,i,l,a,u,c,f,b,g=r[1].session.handle+"",y,_,v,S,x;function D(L,q){return L[3]?mn:L[4]?pn:fn}let z=D(r),N=z(r),T=r[3]&&Vt();return{c(){e=p("div"),t=p("label"),t.textContent="List:",s=P(),n=p("select"),i=p("option"),i.textContent="Select a list...",N.c(),a=P(),T&&T.c(),u=P(),c=p("div"),f=p("div"),b=A("@"),y=A(g),_=P(),v=p("button"),v.textContent="Sign out",d(t,"for","list-selector"),d(t,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),i.__value="",he(i,i.__value),d(n,"id","list-selector"),n.disabled=r[3],d(n,"class","bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm w-64 text-slate-800 focus:border-slate-500 focus:ring-1 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed"),d(e,"class","flex items-center space-x-3"),d(f,"class","text-sm text-slate-700"),d(v,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),d(c,"class","text-right")},m(L,q){var M;E(L,e,q),o(e,t),o(e,s),o(e,n),o(n,i),N.m(n,null),Bt(n,((M=r[0].selectedList)==null?void 0:M.uri)||""),o(e,a),T&&T.m(e,null),E(L,u,q),E(L,c,q),o(c,f),o(f,b),o(f,y),o(c,_),o(c,v),S||(x=[re(n,"change",r[5]),re(v,"click",r[8])],S=!0)},p(L,q){var M,I;z===(z=D(L))&&N?N.p(L,q):(N.d(1),N=z(L),N&&(N.c(),N.m(n,null))),q&1&&l!==(l=((M=L[0].selectedList)==null?void 0:M.uri)||"")&&Bt(n,((I=L[0].selectedList)==null?void 0:I.uri)||""),q&8&&(n.disabled=L[3]),L[3]?T||(T=Vt(),T.c(),T.m(e,null)):T&&(T.d(1),T=null),q&2&&g!==(g=L[1].session.handle+"")&&V(y,g)},d(L){L&&(k(e),k(u),k(c)),N.d(),T&&T.d(),S=!1,Te(x)}}}function fn(r){let e,t=ge(r[0].userLists),s=[];for(let n=0;n<t.length;n+=1)s[n]=qt(jt(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=He()},m(n,i){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(n,i);E(n,e,i)},p(n,i){if(i&1){t=ge(n[0].userLists);let l;for(l=0;l<t.length;l+=1){const a=jt(n,t,l);s[l]?s[l].p(a,i):(s[l]=qt(a),s[l].c(),s[l].m(e.parentNode,e))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},d(n){n&&k(e),nt(s,n)}}}function pn(r){let e;return{c(){e=p("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",he(e,e.__value)},m(t,s){E(t,e,s)},p:Q,d(t){t&&k(e)}}}function mn(r){let e;return{c(){e=p("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",he(e,e.__value)},m(t,s){E(t,e,s)},p:Q,d(t){t&&k(e)}}}function qt(r){var c;let e,t=r[10].name+"",s,n,i=(((c=r[0].selectedList)==null?void 0:c.uri)===r[10].uri?r[0].listMembers.length:r[10].memberCount)+"",l,a,u;return{c(){e=p("option"),s=A(t),n=A(" ("),l=A(i),a=A(` members)
									`),e.__value=u=r[10].uri,he(e,e.__value)},m(f,b){E(f,e,b),o(e,s),o(e,n),o(e,l),o(e,a)},p(f,b){var g;b&1&&t!==(t=f[10].name+"")&&V(s,t),b&1&&i!==(i=(((g=f[0].selectedList)==null?void 0:g.uri)===f[10].uri?f[0].listMembers.length:f[10].memberCount)+"")&&V(l,i),b&1&&u!==(u=f[10].uri)&&(e.__value=u,he(e,e.__value))},d(f){f&&k(e)}}}function Vt(r){let e;return{c(){e=p("div"),d(e,"class","loading-spinner svelte-1myfg8v")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function Yt(r){let e,t;return e=new Fr({}),e.$on("close",r[7]),{c(){Ce(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},p:Q,i(s){t||(se(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function hn(r){let e,t,s,n,i,l,a,u,c;function f(_,v){return _[1].session?dn:un}let b=f(r),g=b(r),y=r[2]&&Yt(r);return{c(){e=p("header"),t=p("div"),s=p("div"),n=p("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${gt.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,i=P(),l=p("div"),g.c(),a=P(),y&&y.c(),u=He(),d(l,"class","flex items-center space-x-4"),d(s,"class","flex items-center justify-between mb-4"),d(t,"class","max-w-6xl mx-auto px-6 py-4"),d(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50")},m(_,v){E(_,e,v),o(e,t),o(t,s),o(s,n),o(s,i),o(s,l),g.m(l,null),E(_,a,v),y&&y.m(_,v),E(_,u,v),c=!0},p(_,[v]){b===(b=f(_))&&g?g.p(_,v):(g.d(1),g=b(_),g&&(g.c(),g.m(l,null))),_[2]?y?(y.p(_,v),v&4&&se(y,1)):(y=Yt(_),y.c(),se(y,1),y.m(u.parentNode,u)):y&&(rt(),ie(y,1,1,()=>{y=null}),st())},i(_){c||(se(y),c=!0)},o(_){ie(y),c=!1},d(_){_&&(k(e),k(a),k(u)),g.d(),y&&y.d(_)}}}function bn(r,e,t){let s,n;Ae(r,ce,y=>t(0,s=y)),Ae(r,De,y=>t(1,n=y));let i=!1,l=!1,a="";Ar(async()=>{n.session&&await u()});async function u(){if(n.session){t(3,l=!0),t(4,a="");try{const _=(await Pe.getUserLists(n.session,n.authType)).map(v=>({uri:v.uri,name:v.name,description:v.description||"",purpose:v.purpose||"app.bsky.graph.defs#modlist",createdAt:v.createdAt,memberCount:v.listItemCount||0})).sort((v,S)=>new Date(S.createdAt)-new Date(v.createdAt));ce.setUserLists(_)}catch(y){t(4,a=y.message||"Failed to load your lists")}finally{t(3,l=!1)}}}function c(y){const _=y.target.value;if(_){const v=s.userLists.find(S=>S.uri===_);v&&ce.setSelectedList(v)}else ce.setSelectedList(null)}function f(){t(2,i=!0)}function b(){t(2,i=!1)}function g(){De.signOut(),ce.setSelectedList(null)}return r.$$.update=()=>{r.$$.dirty&3&&n.session&&s.userLists.length===0&&u()},[s,n,i,l,a,c,f,b,g]}class gn extends xe{constructor(e){super(),Me(this,e,bn,hn,ke,{})}}function Gt(r){let e,t;return e=new Fr({}),e.$on("close",r[2]),{c(){Ce(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},p:Q,i(s){t||(se(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function yn(r){let e,t,s,n,i,l,a,u,c,f,b,g,y,_,v,S=r[0]&&Gt(r);return{c(){e=p("div"),t=p("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${gt.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-3xl font-bold text-slate-800 mb-4">Welcome to Bluesky List Manager</h2> <p class="text-lg text-slate-600 mb-6">Find and manage profiles in your Bluesky lists with ease.</p>`,s=P(),n=p("div"),i=p("div"),i.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-3">üîç What you can do:</h3> <ul class="space-y-2 text-blue-700"><li class="flex items-start"><span class="text-blue-500 mr-2">‚Ä¢</span> <span><strong>Search profiles</strong> by keywords in their bio, display name, or handle</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">‚Ä¢</span> <span><strong>Check if profiles</strong> are already in your selected list</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">‚Ä¢</span> <span><strong>Add multiple profiles</strong> to your lists with one click</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">‚Ä¢</span> <span><strong>View and manage</strong> your existing list members</span></li></ul>',l=P(),a=p("div"),a.innerHTML=`<h3 class="text-lg font-semibold text-green-800 mb-3">üîê Privacy &amp; Security</h3> <p class="text-green-700 mb-3">This app is a client-side application. Your Bluesky credentials are stored locally in your
				browser and are never sent to our servers. We only communicate directly with Bluesky&#39;s API
				using your authentication token.</p> <p class="text-sm text-green-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code
				(and contribute!) on
				<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-green-600 hover:text-green-700 underline">GitHub</a>.</p>`,u=P(),c=p("div"),f=p("button"),f.textContent="üîê Get Started - Sign in with Bluesky",b=P(),S&&S.c(),g=He(),d(t,"class","text-center mb-8"),d(i,"class","bg-blue-50 p-6 rounded-lg border border-blue-200"),d(a,"class","bg-green-50 p-6 rounded-lg border border-green-200"),d(f,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-8 py-3 rounded-lg text-lg font-medium cursor-pointer transition-colors duration-200"),d(c,"class","text-center"),d(n,"class","space-y-6"),d(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-2xl mx-auto")},m(x,D){E(x,e,D),o(e,t),o(e,s),o(e,n),o(n,i),o(n,l),o(n,a),o(n,u),o(n,c),o(c,f),E(x,b,D),S&&S.m(x,D),E(x,g,D),y=!0,_||(v=re(f,"click",r[1]),_=!0)},p(x,[D]){x[0]?S?(S.p(x,D),D&1&&se(S,1)):(S=Gt(x),S.c(),se(S,1),S.m(g.parentNode,g)):S&&(rt(),ie(S,1,1,()=>{S=null}),st())},i(x){y||(se(S),y=!0)},o(x){ie(S),y=!1},d(x){x&&(k(e),k(b),k(g)),S&&S.d(x),_=!1,v()}}}function _n(r,e,t){let s=!1;function n(){t(0,s=!0)}function i(){t(0,s=!1)}return[s,n,i]}class vn extends xe{constructor(e){super(),Me(this,e,_n,yn,ke,{})}}function wn(r){let e,t,s;return{c(){e=p("h3"),e.textContent="Select a List",t=P(),s=p("p"),s.textContent="Choose a list from the dropdown above to get started.",d(e,"class","text-lg font-semibold text-slate-800 mb-2"),d(s,"class","text-slate-600")},m(n,i){E(n,e,i),E(n,t,i),E(n,s,i)},d(n){n&&(k(e),k(t),k(s))}}}function Sn(r){let e,t,s;return{c(){e=p("h3"),e.textContent="No Lists Found",t=P(),s=p("p"),s.textContent="You don't have any lists yet. Create a list on Bluesky first!",d(e,"class","text-lg font-semibold text-slate-800 mb-2"),d(s,"class","text-slate-600")},m(n,i){E(n,e,i),E(n,t,i),E(n,s,i)},d(n){n&&(k(e),k(t),k(s))}}}function kn(r){let e,t,s,n,i,l,a;function u(b,g){return b[0].userLists.length===0?Sn:wn}let c=u(r),f=c(r);return{c(){e=p("div"),t=p("div"),s=p("div"),s.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=P(),i=p("div"),l=p("div"),l.innerHTML=`<img src="${gt.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,a=P(),f.c(),d(s,"class","text-center mb-8"),d(l,"class","text-4xl mb-4"),d(i,"class","text-center py-12"),d(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),d(e,"class","max-w-4xl mx-auto")},m(b,g){E(b,e,g),o(e,t),o(t,s),o(t,n),o(t,i),o(i,l),o(i,a),f.m(i,null)},p(b,[g]){c!==(c=u(b))&&(f.d(1),f=c(b),f&&(f.c(),f.m(i,null)))},i:Q,o:Q,d(b){b&&k(e),f.d()}}}function En(r,e,t){let s;return Ae(r,ce,n=>t(0,s=n)),[s]}class Ln extends xe{constructor(e){super(),Me(this,e,En,kn,ke,{})}}function Pn(r){let e,t,s,n,i,l,a,u,c,f,b,g=(r[0].displayName||r[0].handle)+"",y,_,v,S,x=r[0].handle+"",D,z,N,T=r[0].description&&Zt(r);function L(I,w){if(I[3]==="Already in list")return Mn;if(I[3]==="New candidate")return Tn;if(I[2])return Cn}let q=L(r),M=q&&q(r);return{c(){e=p("div"),t=p("div"),s=p("div"),n=p("img"),u=P(),c=p("div"),f=p("div"),b=p("h3"),y=A(g),_=P(),v=p("span"),S=A("@"),D=A(x),z=P(),T&&T.c(),N=P(),M&&M.c(),tt(n.src,i=ht(r[0]))||d(n,"src",i),d(n,"alt",l=r[0].displayName||r[0].handle),d(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),d(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(r[0].displayName||r[0].handle)+"&background=6366f1&color=fff&size=64'"),d(s,"class","flex-shrink-0"),d(b,"class","text-base font-semibold text-gray-900 truncate"),d(v,"class","text-sm text-gray-600 truncate"),d(f,"class","flex items-center space-x-2 mb-1"),d(c,"class","flex-1 min-w-0"),d(t,"class","flex items-start space-x-3"),d(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200")},m(I,w){E(I,e,w),o(e,t),o(t,s),o(s,n),o(t,u),o(t,c),o(c,f),o(f,b),o(b,y),o(f,_),o(f,v),o(v,S),o(v,D),o(c,z),T&&T.m(c,null),o(c,N),M&&M.m(c,null)},p(I,w){w&1&&!tt(n.src,i=ht(I[0]))&&d(n,"src",i),w&1&&l!==(l=I[0].displayName||I[0].handle)&&d(n,"alt",l),w&1&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(I[0].displayName||I[0].handle)+"&background=6366f1&color=fff&size=64'")&&d(n,"onerror",a),w&1&&g!==(g=(I[0].displayName||I[0].handle)+"")&&V(y,g),w&1&&x!==(x=I[0].handle+"")&&V(D,x),I[0].description?T?T.p(I,w):(T=Zt(I),T.c(),T.m(c,N)):T&&(T.d(1),T=null),q===(q=L(I))&&M?M.p(I,w):(M&&M.d(1),M=q&&q(I),M&&(M.c(),M.m(c,null)))},d(I){I&&k(e),T&&T.d(),M&&M.d()}}}function An(r){let e,t,s,n,i,l,a,u,c,f,b,g=(r[0].displayName||r[0].handle)+"",y,_,v,S,x=r[0].handle+"",D,z,N,T,L,q,M,I,w=r[0].description&&Qt(r);function B(H,X){if(H[3]==="Already in list")return Kn;if(H[3]==="New candidate")return On;if(H[2])return Rn}let K=B(r),F=K&&K(r);return{c(){e=p("a"),t=p("div"),s=p("div"),n=p("img"),u=P(),c=p("div"),f=p("div"),b=p("h3"),y=A(g),_=P(),v=p("span"),S=A("@"),D=A(x),z=P(),w&&w.c(),N=P(),F&&F.c(),T=P(),L=p("div"),L.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',tt(n.src,i=ht(r[0]))||d(n,"src",i),d(n,"alt",l=r[0].displayName||r[0].handle),d(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),d(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(r[0].displayName||r[0].handle)+"&background=6366f1&color=fff&size=64'"),d(s,"class","flex-shrink-0"),d(b,"class","text-base font-semibold text-gray-900 truncate"),d(v,"class","text-sm text-gray-600 truncate"),d(f,"class","flex items-center space-x-2 mb-1"),d(c,"class","flex-1 min-w-0"),d(L,"class","flex-shrink-0"),d(t,"class","flex items-start space-x-3"),d(e,"href",q="https://bsky.app/profile/"+r[0].handle),d(e,"target","_blank"),d(e,"rel","noopener noreferrer"),d(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200")},m(H,X){E(H,e,X),o(e,t),o(t,s),o(s,n),o(t,u),o(t,c),o(c,f),o(f,b),o(b,y),o(f,_),o(f,v),o(v,S),o(v,D),o(c,z),w&&w.m(c,null),o(c,N),F&&F.m(c,null),o(t,T),o(t,L),M||(I=re(e,"click",r[8]),M=!0)},p(H,X){X&1&&!tt(n.src,i=ht(H[0]))&&d(n,"src",i),X&1&&l!==(l=H[0].displayName||H[0].handle)&&d(n,"alt",l),X&1&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(H[0].displayName||H[0].handle)+"&background=6366f1&color=fff&size=64'")&&d(n,"onerror",a),X&1&&g!==(g=(H[0].displayName||H[0].handle)+"")&&V(y,g),X&1&&x!==(x=H[0].handle+"")&&V(D,x),H[0].description?w?w.p(H,X):(w=Qt(H),w.c(),w.m(c,N)):w&&(w.d(1),w=null),K===(K=B(H))&&F?F.p(H,X):(F&&F.d(1),F=K&&K(H),F&&(F.c(),F.m(c,null))),X&1&&q!==(q="https://bsky.app/profile/"+H[0].handle)&&d(e,"href",q)},d(H){H&&k(e),w&&w.d(),F&&F.d(),M=!1,I()}}}function Zt(r){let e,t=r[0].description+"",s;return{c(){e=p("p"),s=A(t),d(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,i){E(n,e,i),o(e,s)},p(n,i){i&1&&t!==(t=n[0].description+"")&&V(s,t)},d(n){n&&k(e)}}}function Cn(r){let e,t,s,n,i,l;return{c(){e=p("div"),t=p("input"),s=P(),n=p("span"),n.textContent="Select to add to list",d(t,"type","checkbox"),t.checked=r[1],d(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),d(n,"class","text-sm text-gray-600"),d(e,"class","flex items-center space-x-2")},m(a,u){E(a,e,u),o(e,t),o(e,s),o(e,n),i||(l=re(t,"change",r[6]),i=!0)},p(a,u){u&2&&(t.checked=a[1])},d(a){a&&k(e),i=!1,l()}}}function Tn(r){let e,t,s,n,i,l,a;function u(b,g){return b[5]?In:xn}let c=u(r),f=c(r);return{c(){e=p("div"),t=p("span"),s=A(r[3]),n=P(),i=p("button"),f.c(),d(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),i.disabled=r[5],d(i,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),d(e,"class","flex items-center space-x-2")},m(b,g){E(b,e,g),o(e,t),o(t,s),o(e,n),o(e,i),f.m(i,null),l||(a=re(i,"click",r[7]),l=!0)},p(b,g){g&8&&V(s,b[3]),c!==(c=u(b))&&(f.d(1),f=c(b),f&&(f.c(),f.m(i,null))),g&32&&(i.disabled=b[5])},d(b){b&&k(e),f.d(),l=!1,a()}}}function Mn(r){let e,t,s;return{c(){e=p("div"),t=p("span"),s=A(r[3]),d(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),d(e,"class","flex items-center space-x-2")},m(n,i){E(n,e,i),o(e,t),o(t,s)},p(n,i){i&8&&V(s,n[3])},d(n){n&&k(e)}}}function xn(r){let e;return{c(){e=A("Add to list")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function In(r){let e,t;return{c(){e=p("span"),t=A(`
                Adding...`),d(e,"class","loading-spinner mr-1")},m(s,n){E(s,e,n),E(s,t,n)},d(s){s&&(k(e),k(t))}}}function Qt(r){let e,t=r[0].description+"",s;return{c(){e=p("p"),s=A(t),d(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,i){E(n,e,i),o(e,s)},p(n,i){i&1&&t!==(t=n[0].description+"")&&V(s,t)},d(n){n&&k(e)}}}function Rn(r){let e,t,s,n,i,l;return{c(){e=p("div"),t=p("input"),s=P(),n=p("span"),n.textContent="Select to add to list",d(t,"type","checkbox"),t.checked=r[1],d(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),d(n,"class","text-sm text-gray-600"),d(e,"class","flex items-center space-x-2")},m(a,u){E(a,e,u),o(e,t),o(e,s),o(e,n),i||(l=re(t,"change",r[6]),i=!0)},p(a,u){u&2&&(t.checked=a[1])},d(a){a&&k(e),i=!1,l()}}}function On(r){let e,t,s,n,i,l,a;function u(b,g){return b[5]?Un:Nn}let c=u(r),f=c(r);return{c(){e=p("div"),t=p("span"),s=A(r[3]),n=P(),i=p("button"),f.c(),d(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),i.disabled=r[5],d(i,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),d(e,"class","flex items-center space-x-2")},m(b,g){E(b,e,g),o(e,t),o(t,s),o(e,n),o(e,i),f.m(i,null),l||(a=re(i,"click",r[7]),l=!0)},p(b,g){g&8&&V(s,b[3]),c!==(c=u(b))&&(f.d(1),f=c(b),f&&(f.c(),f.m(i,null))),g&32&&(i.disabled=b[5])},d(b){b&&k(e),f.d(),l=!1,a()}}}function Kn(r){let e,t,s;return{c(){e=p("div"),t=p("span"),s=A(r[3]),d(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),d(e,"class","flex items-center space-x-2")},m(n,i){E(n,e,i),o(e,t),o(t,s)},p(n,i){i&8&&V(s,n[3])},d(n){n&&k(e)}}}function Nn(r){let e;return{c(){e=A("Add to list")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function Un(r){let e,t;return{c(){e=p("span"),t=A(`
                Adding...`),d(e,"class","loading-spinner mr-1")},m(s,n){E(s,e,n),E(s,t,n)},d(s){s&&(k(e),k(t))}}}function Bn(r){let e;function t(i,l){return i[4]?An:Pn}let s=t(r),n=s(r);return{c(){n.c(),e=He()},m(i,l){n.m(i,l),E(i,e,l)},p(i,[l]){s===(s=t(i))&&n?n.p(i,l):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(i){i&&k(e),n.d(i)}}}function ht(r){return r.avatar?r.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.displayName||r.handle)}&background=6366f1&color=fff&size=64`}function Dn(r,e,t){let{profile:s}=e,{isSelected:n=!1}=e,{onSelect:i=()=>{}}=e,{showCheckbox:l=!0}=e,{statusTag:a=null}=e,{clickable:u=!1}=e,{onAddToList:c=()=>{}}=e,{isAddingToList:f=!1}=e;function b(){i(s)}function g(_){_.preventDefault(),_.stopPropagation(),c(s)}function y(_){u&&!l||u&&l&&(_.target.type==="checkbox"||_.target.closest('input[type="checkbox"]'))&&(_.preventDefault(),_.stopPropagation())}return r.$$set=_=>{"profile"in _&&t(0,s=_.profile),"isSelected"in _&&t(1,n=_.isSelected),"onSelect"in _&&t(9,i=_.onSelect),"showCheckbox"in _&&t(2,l=_.showCheckbox),"statusTag"in _&&t(3,a=_.statusTag),"clickable"in _&&t(4,u=_.clickable),"onAddToList"in _&&t(10,c=_.onAddToList),"isAddingToList"in _&&t(5,f=_.isAddingToList)},[s,n,l,a,u,f,b,g,y,i,c]}class Hn extends xe{constructor(e){super(),Me(this,e,Dn,Bn,ke,{profile:0,isSelected:1,onSelect:9,showCheckbox:2,statusTag:3,clickable:4,onAddToList:10,isAddingToList:5})}}var ut={};(function r(e,t,s,n){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),l=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var h=new OffscreenCanvas(1,1),m=h.getContext("2d");m.fillRect(0,0,1,1);var O=h.transferToImageBitmap();try{m.createPattern(O,"no-repeat")}catch{return!1}return!0}();function u(){}function c(h){var m=t.exports.Promise,O=m!==void 0?m:e.Promise;return typeof O=="function"?new O(h):(h(u,u),null)}var f=function(h,m){return{transform:function(O){if(h)return O;if(m.has(O))return m.get(O);var U=new OffscreenCanvas(O.width,O.height),R=U.getContext("2d");return R.drawImage(O,0,0),m.set(O,U),U},clear:function(){m.clear()}}}(a,new Map),b=function(){var h=Math.floor(16.666666666666668),m,O,U={},R=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(m=function(C){var $=Math.random();return U[$]=requestAnimationFrame(function J(W){R===W||R+h-1<W?(R=W,delete U[$],C()):U[$]=requestAnimationFrame(J)}),$},O=function(C){U[C]&&cancelAnimationFrame(U[C])}):(m=function(C){return setTimeout(C,h)},O=function(C){return clearTimeout(C)}),{frame:m,cancel:O}}(),g=function(){var h,m,O={};function U(R){function C($,J){R.postMessage({options:$||{},callback:J})}R.init=function(J){var W=J.transferControlToOffscreen();R.postMessage({canvas:W},[W])},R.fire=function(J,W,G){if(m)return C(J,null),m;var ee=Math.random().toString(36).slice(2);return m=c(function(te){function ne(ae){ae.data.callback===ee&&(delete O[ee],R.removeEventListener("message",ne),m=null,f.clear(),G(),te())}R.addEventListener("message",ne),C(J,ee),O[ee]=ne.bind(null,{data:{callback:ee}})}),m},R.reset=function(){R.postMessage({reset:!0});for(var J in O)O[J](),delete O[J]}}return function(){if(h)return h;if(!s&&i){var R=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{h=new Worker(URL.createObjectURL(new Blob([R])))}catch(C){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",C),null}U(h)}return h}}(),y={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(h,m){return m?m(h):h}function v(h){return h!=null}function S(h,m,O){return _(h&&v(h[m])?h[m]:y[m],O)}function x(h){return h<0?0:Math.floor(h)}function D(h,m){return Math.floor(Math.random()*(m-h))+h}function z(h){return parseInt(h,16)}function N(h){return h.map(T)}function T(h){var m=String(h).replace(/[^0-9a-f]/gi,"");return m.length<6&&(m=m[0]+m[0]+m[1]+m[1]+m[2]+m[2]),{r:z(m.substring(0,2)),g:z(m.substring(2,4)),b:z(m.substring(4,6))}}function L(h){var m=S(h,"origin",Object);return m.x=S(m,"x",Number),m.y=S(m,"y",Number),m}function q(h){h.width=document.documentElement.clientWidth,h.height=document.documentElement.clientHeight}function M(h){var m=h.getBoundingClientRect();h.width=m.width,h.height=m.height}function I(h){var m=document.createElement("canvas");return m.style.position="fixed",m.style.top="0px",m.style.left="0px",m.style.pointerEvents="none",m.style.zIndex=h,m}function w(h,m,O,U,R,C,$,J,W){h.save(),h.translate(m,O),h.rotate(C),h.scale(U,R),h.arc(0,0,1,$,J,W),h.restore()}function B(h){var m=h.angle*(Math.PI/180),O=h.spread*(Math.PI/180);return{x:h.x,y:h.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:h.startVelocity*.5+Math.random()*h.startVelocity,angle2D:-m+(.5*O-Math.random()*O),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:h.color,shape:h.shape,tick:0,totalTicks:h.ticks,decay:h.decay,drift:h.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:h.gravity*3,ovalScalar:.6,scalar:h.scalar,flat:h.flat}}function K(h,m){m.x+=Math.cos(m.angle2D)*m.velocity+m.drift,m.y+=Math.sin(m.angle2D)*m.velocity+m.gravity,m.velocity*=m.decay,m.flat?(m.wobble=0,m.wobbleX=m.x+10*m.scalar,m.wobbleY=m.y+10*m.scalar,m.tiltSin=0,m.tiltCos=0,m.random=1):(m.wobble+=m.wobbleSpeed,m.wobbleX=m.x+10*m.scalar*Math.cos(m.wobble),m.wobbleY=m.y+10*m.scalar*Math.sin(m.wobble),m.tiltAngle+=.1,m.tiltSin=Math.sin(m.tiltAngle),m.tiltCos=Math.cos(m.tiltAngle),m.random=Math.random()+2);var O=m.tick++/m.totalTicks,U=m.x+m.random*m.tiltCos,R=m.y+m.random*m.tiltSin,C=m.wobbleX+m.random*m.tiltCos,$=m.wobbleY+m.random*m.tiltSin;if(h.fillStyle="rgba("+m.color.r+", "+m.color.g+", "+m.color.b+", "+(1-O)+")",h.beginPath(),l&&m.shape.type==="path"&&typeof m.shape.path=="string"&&Array.isArray(m.shape.matrix))h.fill(ue(m.shape.path,m.shape.matrix,m.x,m.y,Math.abs(C-U)*.1,Math.abs($-R)*.1,Math.PI/10*m.wobble));else if(m.shape.type==="bitmap"){var J=Math.PI/10*m.wobble,W=Math.abs(C-U)*.1,G=Math.abs($-R)*.1,ee=m.shape.bitmap.width*m.scalar,te=m.shape.bitmap.height*m.scalar,ne=new DOMMatrix([Math.cos(J)*W,Math.sin(J)*W,-Math.sin(J)*G,Math.cos(J)*G,m.x,m.y]);ne.multiplySelf(new DOMMatrix(m.shape.matrix));var ae=h.createPattern(f.transform(m.shape.bitmap),"no-repeat");ae.setTransform(ne),h.globalAlpha=1-O,h.fillStyle=ae,h.fillRect(m.x-ee/2,m.y-te/2,ee,te),h.globalAlpha=1}else if(m.shape==="circle")h.ellipse?h.ellipse(m.x,m.y,Math.abs(C-U)*m.ovalScalar,Math.abs($-R)*m.ovalScalar,Math.PI/10*m.wobble,0,2*Math.PI):w(h,m.x,m.y,Math.abs(C-U)*m.ovalScalar,Math.abs($-R)*m.ovalScalar,Math.PI/10*m.wobble,0,2*Math.PI);else if(m.shape==="star")for(var Z=Math.PI/2*3,fe=4*m.scalar,ye=8*m.scalar,_e=m.x,Ie=m.y,We=5,Ee=Math.PI/We;We--;)_e=m.x+Math.cos(Z)*ye,Ie=m.y+Math.sin(Z)*ye,h.lineTo(_e,Ie),Z+=Ee,_e=m.x+Math.cos(Z)*fe,Ie=m.y+Math.sin(Z)*fe,h.lineTo(_e,Ie),Z+=Ee;else h.moveTo(Math.floor(m.x),Math.floor(m.y)),h.lineTo(Math.floor(m.wobbleX),Math.floor(R)),h.lineTo(Math.floor(C),Math.floor($)),h.lineTo(Math.floor(U),Math.floor(m.wobbleY));return h.closePath(),h.fill(),m.tick<m.totalTicks}function F(h,m,O,U,R){var C=m.slice(),$=h.getContext("2d"),J,W,G=c(function(ee){function te(){J=W=null,$.clearRect(0,0,U.width,U.height),f.clear(),R(),ee()}function ne(){s&&!(U.width===n.width&&U.height===n.height)&&(U.width=h.width=n.width,U.height=h.height=n.height),!U.width&&!U.height&&(O(h),U.width=h.width,U.height=h.height),$.clearRect(0,0,U.width,U.height),C=C.filter(function(ae){return K($,ae)}),C.length?J=b.frame(ne):te()}J=b.frame(ne),W=te});return{addFettis:function(ee){return C=C.concat(ee),G},canvas:h,promise:G,reset:function(){J&&b.cancel(J),W&&W()}}}function H(h,m){var O=!h,U=!!S(m||{},"resize"),R=!1,C=S(m,"disableForReducedMotion",Boolean),$=i&&!!S(m||{},"useWorker"),J=$?g():null,W=O?q:M,G=h&&J?!!h.__confetti_initialized:!1,ee=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,te;function ne(Z,fe,ye){for(var _e=S(Z,"particleCount",x),Ie=S(Z,"angle",Number),We=S(Z,"spread",Number),Ee=S(Z,"startVelocity",Number),Jr=S(Z,"decay",Number),zr=S(Z,"gravity",Number),jr=S(Z,"drift",Number),xt=S(Z,"colors",N),qr=S(Z,"ticks",Number),It=S(Z,"shapes"),Vr=S(Z,"scalar"),Yr=!!S(Z,"flat"),Rt=L(Z),Ot=_e,yt=[],Gr=h.width*Rt.x,Zr=h.height*Rt.y;Ot--;)yt.push(B({x:Gr,y:Zr,angle:Ie,spread:We,startVelocity:Ee,color:xt[Ot%xt.length],shape:It[D(0,It.length)],ticks:qr,decay:Jr,gravity:zr,drift:jr,scalar:Vr,flat:Yr}));return te?te.addFettis(yt):(te=F(h,yt,W,fe,ye),te.promise)}function ae(Z){var fe=C||S(Z,"disableForReducedMotion",Boolean),ye=S(Z,"zIndex",Number);if(fe&&ee)return c(function(Ee){Ee()});O&&te?h=te.canvas:O&&!h&&(h=I(ye),document.body.appendChild(h)),U&&!G&&W(h);var _e={width:h.width,height:h.height};J&&!G&&J.init(h),G=!0,J&&(h.__confetti_initialized=!0);function Ie(){if(J){var Ee={getBoundingClientRect:function(){if(!O)return h.getBoundingClientRect()}};W(Ee),J.postMessage({resize:{width:Ee.width,height:Ee.height}});return}_e.width=_e.height=null}function We(){te=null,U&&(R=!1,e.removeEventListener("resize",Ie)),O&&h&&(document.body.contains(h)&&document.body.removeChild(h),h=null,G=!1)}return U&&!R&&(R=!0,e.addEventListener("resize",Ie,!1)),J?J.fire(Z,_e,We):ne(Z,_e,We)}return ae.reset=function(){J&&J.reset(),te&&te.reset()},ae}var X;function de(){return X||(X=H(null,{useWorker:!0,resize:!0})),X}function ue(h,m,O,U,R,C,$){var J=new Path2D(h),W=new Path2D;W.addPath(J,new DOMMatrix(m));var G=new Path2D;return G.addPath(W,new DOMMatrix([Math.cos($)*R,Math.sin($)*R,-Math.sin($)*C,Math.cos($)*C,O,U])),G}function oe(h){if(!l)throw new Error("path confetti are not supported in this browser");var m,O;typeof h=="string"?m=h:(m=h.path,O=h.matrix);var U=new Path2D(m),R=document.createElement("canvas"),C=R.getContext("2d");if(!O){for(var $=1e3,J=$,W=$,G=0,ee=0,te,ne,ae=0;ae<$;ae+=2)for(var Z=0;Z<$;Z+=2)C.isPointInPath(U,ae,Z,"nonzero")&&(J=Math.min(J,ae),W=Math.min(W,Z),G=Math.max(G,ae),ee=Math.max(ee,Z));te=G-J,ne=ee-W;var fe=10,ye=Math.min(fe/te,fe/ne);O=[ye,0,0,ye,-Math.round(te/2+J)*ye,-Math.round(ne/2+W)*ye]}return{type:"path",path:m,matrix:O}}function Y(h){var m,O=1,U="#000000",R='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof h=="string"?m=h:(m=h.text,O="scalar"in h?h.scalar:O,R="fontFamily"in h?h.fontFamily:R,U="color"in h?h.color:U);var C=10*O,$=""+C+"px "+R,J=new OffscreenCanvas(C,C),W=J.getContext("2d");W.font=$;var G=W.measureText(m),ee=Math.ceil(G.actualBoundingBoxRight+G.actualBoundingBoxLeft),te=Math.ceil(G.actualBoundingBoxAscent+G.actualBoundingBoxDescent),ne=2,ae=G.actualBoundingBoxLeft+ne,Z=G.actualBoundingBoxAscent+ne;ee+=ne+ne,te+=ne+ne,J=new OffscreenCanvas(ee,te),W=J.getContext("2d"),W.font=$,W.fillStyle=U,W.fillText(m,ae,Z);var fe=1/O;return{type:"bitmap",bitmap:J.transferToImageBitmap(),matrix:[fe,0,0,fe,-ee*fe/2,-te*fe/2]}}t.exports=function(){return de().apply(this,arguments)},t.exports.reset=function(){de().reset()},t.exports.create=H,t.exports.shapeFromPath=oe,t.exports.shapeFromText=Y})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ut,!1);const kt=ut.exports;ut.exports.create;function Xt(r,e,t){const s=r.slice();return s[21]=e[t].profile,s[22]=e[t].status,s}function Wn(r){let e;return{c(){e=A("üîç Search")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function $n(r){let e,t;return{c(){e=p("span"),t=A(`
						Searching...`),d(e,"class","loading-spinner svelte-165a6uh")},m(s,n){E(s,e,n),E(s,t,n)},d(s){s&&(k(e),k(t))}}}function er(r){let e,t,s;return{c(){e=p("div"),t=p("p"),s=A(r[4]),d(t,"class","text-red-700"),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,i){E(n,e,i),o(e,t),o(t,s)},p(n,i){i&16&&V(s,n[4])},d(n){n&&k(e)}}}function Fn(r){let e;return{c(){e=p("div"),e.innerHTML='<div><div class="text-4xl mb-4">üîç</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',d(e,"class","text-center py-8")},m(t,s){E(t,e,s)},p:Q,i:Q,o:Q,d(t){t&&k(e)}}}function Jn(r){let e;return{c(){e=p("div"),e.innerHTML='<div><div class="text-4xl mb-4">üîç</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',d(e,"class","text-center py-8")},m(t,s){E(t,e,s)},p:Q,i:Q,o:Q,d(t){t&&k(e)}}}function zn(r){let e,t,s,n=ge(r[7]),i=[];for(let u=0;u<n.length;u+=1)i[u]=tr(Xt(r,n,u));const l=u=>ie(i[u],1,1,()=>{i[u]=null});let a=r[5]&&rr(r);return{c(){e=p("div");for(let u=0;u<i.length;u+=1)i[u].c();t=P(),a&&a.c(),d(e,"class","space-y-4")},m(u,c){E(u,e,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);o(e,t),a&&a.m(e,null),s=!0},p(u,c){if(c&3266){n=ge(u[7]);let f;for(f=0;f<n.length;f+=1){const b=Xt(u,n,f);i[f]?(i[f].p(b,c),se(i[f],1)):(i[f]=tr(b),i[f].c(),se(i[f],1),i[f].m(e,t))}for(rt(),f=n.length;f<i.length;f+=1)l(f);st()}u[5]?a?a.p(u,c):(a=rr(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){if(!s){for(let c=0;c<n.length;c+=1)se(i[c]);s=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)ie(i[c]);s=!1},d(u){u&&k(e),nt(i,u),a&&a.d()}}}function tr(r){let e,t;return e=new Hn({props:{profile:r[21],isSelected:r[1].has(r[21].did),onSelect:r[10],statusTag:r[22],clickable:!0,onAddToList:r[11],isAddingToList:r[6].has(r[21].did)}}),{c(){Ce(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},p(s,n){const i={};n&128&&(i.profile=s[21]),n&130&&(i.isSelected=s[1].has(s[21].did)),n&128&&(i.statusTag=s[22]),n&192&&(i.isAddingToList=s[6].has(s[21].did)),e.$set(i)},i(s){t||(se(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function rr(r){let e,t,s,n;function i(u,c){return u[3]?qn:jn}let l=i(r),a=l(r);return{c(){e=p("div"),t=p("button"),a.c(),t.disabled=r[3],d(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),d(e,"class","text-center pt-4 border-t border-gray-200")},m(u,c){E(u,e,c),o(e,t),a.m(t,null),s||(n=re(t,"click",r[9]),s=!0)},p(u,c){l!==(l=i(u))&&(a.d(1),a=l(u),a&&(a.c(),a.m(t,null))),c&8&&(t.disabled=u[3])},d(u){u&&k(e),a.d(),s=!1,n()}}}function jn(r){let e;return{c(){e=A("Load More Results")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function qn(r){let e,t;return{c(){e=p("span"),t=A(`
								Loading...`),d(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(s,n){E(s,e,n),E(s,t,n)},d(s){s&&(k(e),k(t))}}}function Vn(r){let e,t,s,n,i,l,a,u,c,f,b,g,y,_,v,S,x,D;function z(w,B){return w[3]?$n:Wn}let N=z(r),T=N(r),L=r[4]&&er(r);const q=[zn,Jn,Fn],M=[];function I(w,B){return w[0].length>0?0:w[2]&&!w[3]?1:w[2]?-1:2}return~(_=I(r))&&(v=M[_]=q[_](r)),{c(){e=p("div"),t=p("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search Profiles</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',s=P(),n=p("div"),i=p("form"),l=p("div"),a=p("label"),a.textContent="Search for:",u=P(),c=p("input"),f=P(),b=p("button"),T.c(),g=P(),L&&L.c(),y=P(),v&&v.c(),d(t,"class","p-6 border-b border-gray-200"),d(a,"for","search-input"),d(a,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),d(c,"id","search-input"),d(c,"type","text"),d(c,"placeholder","e.g., belge, artist, developer..."),d(c,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),c.required=!0,d(b,"type","submit"),b.disabled=r[3],d(b,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),d(l,"class","flex gap-4 items-center flex-wrap"),d(i,"class","mb-6"),d(n,"id","profile-search-container"),d(n,"class","p-6"),d(e,"class","bg-white rounded-lg shadow-sm border border-gray-200")},m(w,B){E(w,e,B),o(e,t),o(e,s),o(e,n),o(n,i),o(i,l),o(l,a),o(l,u),o(l,c),he(c,r[2]),o(l,f),o(l,b),T.m(b,null),o(n,g),L&&L.m(n,null),o(n,y),~_&&M[_].m(n,null),S=!0,x||(D=[re(c,"input",r[15]),re(i,"submit",Lr(r[8]))],x=!0)},p(w,[B]){B&4&&c.value!==w[2]&&he(c,w[2]),N!==(N=z(w))&&(T.d(1),T=N(w),T&&(T.c(),T.m(b,null))),(!S||B&8)&&(b.disabled=w[3]),w[4]?L?L.p(w,B):(L=er(w),L.c(),L.m(n,y)):L&&(L.d(1),L=null);let K=_;_=I(w),_===K?~_&&M[_].p(w,B):(v&&(rt(),ie(M[K],1,1,()=>{M[K]=null}),st()),~_?(v=M[_],v?v.p(w,B):(v=M[_]=q[_](w),v.c()),se(v,1),v.m(n,null)):v=null)},i(w){S||(se(v),S=!0)},o(w){ie(v),S=!1},d(w){w&&k(e),T.d(),L&&L.d(),~_&&M[_].d(),x=!1,Te(D)}}}function Yn(r,e,t){let s,n,i;Ae(r,De,L=>t(17,n=L)),Ae(r,ce,L=>t(14,i=L));let l="",a=[],u=!1,c="",f=new Set,b=null,g=!1,y=new Set;async function _(){if(!(!l.trim()||!n.session)){t(3,u=!0),t(4,c=""),t(0,a=[]),f.clear(),b=null,t(5,g=!1);try{const L=await Pe.searchProfiles(n.session,l,n.authType);t(0,a=L.actors||[]),b=L.cursor,t(5,g=!!L.cursor)}catch(L){t(4,c=L.message||"Failed to search profiles")}finally{t(3,u=!1)}}}async function v(){if(!(!g||u||!n.session)){t(3,u=!0),t(4,c="");try{const L=await Pe.searchProfiles(n.session,l,n.authType,25,b);t(0,a=[...a,...L.actors||[]]),b=L.cursor,t(5,g=!!L.cursor)}catch(L){t(4,c=L.message||"Failed to load more profiles")}finally{t(3,u=!1)}}}function S(L){f.has(L.did)?f.delete(L.did):f.add(L.did),t(1,f)}let x=null,D=!0;async function z(L){if(!(!n.session||!i.selectedList||y.has(L.did))){y.add(L.did),t(6,y);try{await Pe.addToList(n.session,L.did,i.selectedList.uri),await ce.fetchAndAddProfile(n.session,L.did),N()}catch(q){console.error("Failed to add profile to list:",q)}finally{y.delete(L.did),t(6,y)}}}function N(){kt({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{kt({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{kt({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}function T(){l=this.value,t(2,l),t(14,i),t(13,D),t(12,x),t(1,f)}return r.$$.update=()=>{r.$$.dirty&28674&&i.selectedList&&(!D&&x&&x!==i.selectedList.uri&&(t(2,l=""),t(0,a=[]),f.clear(),b=null,t(5,g=!1),t(4,c="")),t(12,x=i.selectedList.uri),t(13,D=!1)),r.$$.dirty&16385&&t(7,s=a.map(L=>({profile:L,status:i.listMembers.includes(L.did)?"Already in list":"New candidate"})))},[a,f,l,u,c,g,y,s,_,v,S,z,x,D,i,T]}class Gn extends xe{constructor(e){super(),Me(this,e,Yn,Vn,ke,{})}}function sr(r){let e,t=r[0].selectedList.description+"",s;return{c(){e=p("p"),s=A(t),d(e,"class","text-slate-600 mt-1")},m(n,i){E(n,e,i),o(e,s)},p(n,i){i&1&&t!==(t=n[0].selectedList.description+"")&&V(s,t)},d(n){n&&k(e)}}}function Zn(r){let e;return{c(){e=A("Unknown")},m(t,s){E(t,e,s)},p:Q,d(t){t&&k(e)}}}function Qn(r){let e=new Date(r[0].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=A(e)},m(s,n){E(s,t,n)},p(s,n){n&1&&e!==(e=new Date(s[0].selectedList.createdAt).toLocaleDateString()+"")&&V(t,e)},d(s){s&&k(t)}}}function Xn(r){var U,R,C,$,J;let e,t,s,n,i=(((U=r[0].selectedList)==null?void 0:U.name)||"List")+"",l,a,u,c,f,b=(((R=r[0].selectedList)==null?void 0:R.listItemCount)||0)+"",g,y,_,v,S,x,D,z,N,T=((C=r[0].selectedList)==null?void 0:C.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",L,q,M,I,w,B,K,F,H,X,de,ue=((($=r[0].selectedList)==null?void 0:$.uri)||"Not available")+"",oe,Y=((J=r[0].selectedList)==null?void 0:J.description)&&sr(r);function h(W,G){var ee;return(ee=W[0].selectedList)!=null&&ee.createdAt?Qn:Zn}let m=h(r),O=m(r);return{c(){e=p("div"),t=p("div"),s=p("div"),n=p("h2"),l=A(i),a=P(),Y&&Y.c(),u=P(),c=p("div"),f=p("div"),g=A(b),y=P(),_=p("div"),_.textContent="Total Members",v=P(),S=p("div"),x=p("div"),D=p("div"),D.textContent="üìä List Type",z=P(),N=p("div"),L=A(T),q=P(),M=p("div"),I=p("div"),I.textContent="üìÖ Created",w=P(),B=p("div"),O.c(),K=P(),F=p("div"),H=p("div"),H.textContent="üîó List URI",X=P(),de=p("div"),oe=A(ue),d(n,"class","text-xl font-bold text-slate-800"),d(f,"class","text-2xl font-bold text-blue-600"),d(_,"class","text-sm text-slate-500"),d(c,"class","text-right"),d(t,"class","flex items-center justify-between mb-4"),d(D,"class","text-blue-600 font-semibold"),d(N,"class","text-sm text-slate-600 mt-1"),d(x,"class","bg-blue-50 p-4 rounded-lg"),d(I,"class","text-green-600 font-semibold"),d(B,"class","text-sm text-slate-600 mt-1"),d(M,"class","bg-green-50 p-4 rounded-lg"),d(H,"class","text-purple-600 font-semibold"),d(de,"class","text-xs text-slate-600 mt-1 break-all"),d(F,"class","bg-purple-50 p-4 rounded-lg"),d(S,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),d(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6")},m(W,G){E(W,e,G),o(e,t),o(t,s),o(s,n),o(n,l),o(s,a),Y&&Y.m(s,null),o(t,u),o(t,c),o(c,f),o(f,g),o(c,y),o(c,_),o(e,v),o(e,S),o(S,x),o(x,D),o(x,z),o(x,N),o(N,L),o(S,q),o(S,M),o(M,I),o(M,w),o(M,B),O.m(B,null),o(S,K),o(S,F),o(F,H),o(F,X),o(F,de),o(de,oe)},p(W,[G]){var ee,te,ne,ae,Z;G&1&&i!==(i=(((ee=W[0].selectedList)==null?void 0:ee.name)||"List")+"")&&V(l,i),(te=W[0].selectedList)!=null&&te.description?Y?Y.p(W,G):(Y=sr(W),Y.c(),Y.m(s,null)):Y&&(Y.d(1),Y=null),G&1&&b!==(b=(((ne=W[0].selectedList)==null?void 0:ne.listItemCount)||0)+"")&&V(g,b),G&1&&T!==(T=((ae=W[0].selectedList)==null?void 0:ae.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&V(L,T),m===(m=h(W))&&O?O.p(W,G):(O.d(1),O=m(W),O&&(O.c(),O.m(B,null))),G&1&&ue!==(ue=(((Z=W[0].selectedList)==null?void 0:Z.uri)||"Not available")+"")&&V(oe,ue)},i:Q,o:Q,d(W){W&&k(e),Y&&Y.d(),O.d()}}}function ei(r,e,t){let s;return Ae(r,ce,n=>t(0,s=n)),[s]}class ti extends xe{constructor(e){super(),Me(this,e,ei,Xn,ke,{})}}function nr(r,e,t){const s=r.slice();return s[25]=e[t],s}function ir(r,e,t){const s=r.slice();return s[31]=e[t],s}function lr(r,e,t){const s=r.slice();return s[28]=e[t],s}function or(r,e,t){const s=r.slice();return s[34]=e[t],s}function ar(r){let e,t,s,n,i,l,a=r[3].size+"",u,c,f,b;function g(v,S){return v[4]?si:ri}let y=g(r),_=y(r);return{c(){e=p("div"),t=p("div"),s=p("div"),n=p("button"),_.c(),i=P(),l=p("div"),u=A(a),c=A(" profiles selected"),n.disabled=r[4],d(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),d(s,"class","flex items-center gap-3"),d(l,"class","text-sm text-slate-600"),d(t,"class","flex items-center justify-between"),d(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm")},m(v,S){E(v,e,S),o(e,t),o(t,s),o(s,n),_.m(n,null),o(t,i),o(t,l),o(l,u),o(l,c),f||(b=re(n,"click",r[12]),f=!0)},p(v,S){y===(y=g(v))&&_?_.p(v,S):(_.d(1),_=y(v),_&&(_.c(),_.m(n,null))),S[0]&16&&(n.disabled=v[4]),S[0]&8&&a!==(a=v[3].size+"")&&V(u,a)},d(v){v&&k(e),_.d(),f=!1,b()}}}function ri(r){let e,t=r[3].size+"",s,n;return{c(){e=A("Add "),s=A(t),n=A(" to List")},m(i,l){E(i,e,l),E(i,s,l),E(i,n,l)},p(i,l){l[0]&8&&t!==(t=i[3].size+"")&&V(s,t)},d(i){i&&(k(e),k(s),k(n))}}}function si(r){let e,t;return{c(){e=p("span"),t=A(`
							Adding...`),d(e,"class","loading-spinner mr-2 svelte-srpbru")},m(s,n){E(s,e,n),E(s,t,n)},p:Q,d(s){s&&(k(e),k(t))}}}function cr(r){let e,t,s,n=r[5].success.length+"",i,l;return{c(){e=p("div"),t=p("p"),s=A("‚úÖ Successfully added "),i=A(n),l=A(" profiles to your list!"),d(t,"class","text-green-700 font-medium"),d(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(a,u){E(a,e,u),o(e,t),o(t,s),o(t,i),o(t,l)},p(a,u){u[0]&32&&n!==(n=a[5].success.length+"")&&V(i,n)},d(a){a&&k(e)}}}function ur(r){let e,t,s,n=r[5].errors.length+"",i,l,a,u,c=ge(r[5].errors),f=[];for(let b=0;b<c.length;b+=1)f[b]=dr(or(r,c,b));return{c(){e=p("div"),t=p("p"),s=A("‚ùå Failed to add "),i=A(n),l=A(" profiles:"),a=P(),u=p("ul");for(let b=0;b<f.length;b+=1)f[b].c();d(t,"class","text-red-700 font-medium mb-2"),d(u,"class","text-red-600 text-sm space-y-1"),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(b,g){E(b,e,g),o(e,t),o(t,s),o(t,i),o(t,l),o(e,a),o(e,u);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(u,null)},p(b,g){if(g[0]&32&&n!==(n=b[5].errors.length+"")&&V(i,n),g[0]&32){c=ge(b[5].errors);let y;for(y=0;y<c.length;y+=1){const _=or(b,c,y);f[y]?f[y].p(_,g):(f[y]=dr(_),f[y].c(),f[y].m(u,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=c.length}},d(b){b&&k(e),nt(f,b)}}}function dr(r){let e,t,s=r[34].error+"",n;return{c(){e=p("li"),t=A("‚Ä¢ "),n=A(s)},m(i,l){E(i,e,l),o(e,t),o(e,n)},p(i,l){l[0]&32&&s!==(s=i[34].error+"")&&V(n,s)},d(i){i&&k(e)}}}function ni(r){let e,t,s;function n(u,c){return u[7]?ui:u[0].listMemberProfiles.length>0?ci:ai}let i=n(r),l=i(r),a=r[8]>1&&br(r);return{c(){e=p("div"),t=p("div"),l.c(),s=P(),a&&a.c(),d(t,"class","space-y-4 flex-1 overflow-y-auto"),d(e,"class","flex flex-col flex-1")},m(u,c){E(u,e,c),o(e,t),l.m(t,null),o(e,s),a&&a.m(e,null)},p(u,c){i===(i=n(u))&&l?l.p(u,c):(l.d(1),l=i(u),l&&(l.c(),l.m(t,null))),u[8]>1?a?a.p(u,c):(a=br(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(u){u&&k(e),l.d(),a&&a.d()}}}function ii(r){let e;return{c(){e=p("div"),e.innerHTML='<div><div class="text-4xl mb-4">üìù</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Members Yet</h3> <p class="text-slate-600">Your list is empty. Use the search to find and add profiles!</p></div>',d(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,s){E(t,e,s)},p:Q,d(t){t&&k(e)}}}function li(r){let e,t,s,n,i,l,a,u;return{c(){e=p("div"),t=p("div"),s=p("p"),n=A(r[2]),i=P(),l=p("button"),l.textContent="Try again",d(s,"class","text-red-700 mb-4"),d(l,"class","text-red-600 hover:text-red-800 underline"),d(t,"class","text-center"),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(c,f){E(c,e,f),o(e,t),o(t,s),o(s,n),o(t,i),o(t,l),a||(u=re(l,"click",r[10]),a=!0)},p(c,f){f[0]&4&&V(n,c[2])},d(c){c&&k(e),a=!1,u()}}}function oi(r){let e;return{c(){e=p("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-srpbru"></div> <p class="text-slate-600">Loading list members...</p></div>',d(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,s){E(t,e,s)},p:Q,d(t){t&&k(e)}}}function ai(r){let e,t,s=r[2]&&fr(r),n=ge(r[0].listMembers.slice(0,100)),i=[];for(let l=0;l<n.length;l+=1)i[l]=pr(ir(r,n,l));return{c(){s&&s.c(),e=P();for(let l=0;l<i.length;l+=1)i[l].c();t=He()},m(l,a){s&&s.m(l,a),E(l,e,a);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,a);E(l,t,a)},p(l,a){if(l[2]?s?s.p(l,a):(s=fr(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),a[0]&1){n=ge(l[0].listMembers.slice(0,100));let u;for(u=0;u<n.length;u+=1){const c=ir(l,n,u);i[u]?i[u].p(c,a):(i[u]=pr(c),i[u].c(),i[u].m(t.parentNode,t))}for(;u<i.length;u+=1)i[u].d(1);i.length=n.length}},d(l){l&&(k(e),k(t)),s&&s.d(l),nt(i,l)}}}function ci(r){let e,t=ge(r[0].listMemberProfiles),s=[];for(let n=0;n<t.length;n+=1)s[n]=hr(lr(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=He()},m(n,i){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(n,i);E(n,e,i)},p(n,i){if(i[0]&1){t=ge(n[0].listMemberProfiles);let l;for(l=0;l<t.length;l+=1){const a=lr(n,t,l);s[l]?s[l].p(a,i):(s[l]=hr(a),s[l].c(),s[l].m(e.parentNode,e))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},d(n){n&&k(e),nt(s,n)}}}function ui(r){let e,t,s,n,i,l,a;return{c(){e=p("div"),t=p("div"),s=P(),n=p("p"),i=A("Loading page "),l=A(r[6]),a=A("..."),d(t,"class","loading-spinner mx-auto mb-4 svelte-srpbru"),d(n,"class","text-slate-600"),d(e,"class","text-center py-8")},m(u,c){E(u,e,c),o(e,t),o(e,s),o(e,n),o(n,i),o(n,l),o(n,a)},p(u,c){c[0]&64&&V(l,u[6])},d(u){u&&k(e)}}}function fr(r){let e,t,s,n,i,l,a,u,c,f,b;return{c(){e=p("div"),t=p("div"),s=p("div"),n=p("p"),n.textContent="‚ö†Ô∏è Profile loading issue",i=P(),l=p("p"),a=A(r[2]),u=P(),c=p("button"),c.textContent="Retry",d(n,"class","text-yellow-800 font-medium"),d(l,"class","text-yellow-700 text-sm mt-1"),d(c,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),d(t,"class","flex items-center justify-between"),d(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(g,y){E(g,e,y),o(e,t),o(t,s),o(s,n),o(s,i),o(s,l),o(l,a),o(t,u),o(t,c),f||(b=re(c,"click",r[19]),f=!0)},p(g,y){y[0]&4&&V(a,g[2])},d(g){g&&k(e),f=!1,b()}}}function pr(r){let e,t,s,n,i,l,a=r[31]+"",u,c,f,b;return{c(){e=p("div"),t=p("div"),s=p("div"),s.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=P(),i=p("div"),l=p("div"),u=A(a),c=P(),f=p("div"),f.textContent="Member of list",b=P(),d(s,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),d(l,"class","text-sm text-gray-600 font-mono text-xs break-all"),d(f,"class","text-xs text-gray-500"),d(i,"class","flex-1"),d(t,"class","flex items-center space-x-3"),d(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(g,y){E(g,e,y),o(e,t),o(t,s),o(t,n),o(t,i),o(i,l),o(l,u),o(i,c),o(i,f),o(e,b)},p(g,y){y[0]&1&&a!==(a=g[31]+"")&&V(u,a)},d(g){g&&k(e)}}}function mr(r){let e,t=r[28].description+"",s;return{c(){e=p("p"),s=A(t),d(e,"class","text-xs text-gray-600 line-clamp-2 svelte-srpbru")},m(n,i){E(n,e,i),o(e,s)},p(n,i){i[0]&1&&t!==(t=n[28].description+"")&&V(s,t)},d(n){n&&k(e)}}}function hr(r){let e,t,s,n,i,l,a,u,c,f,b,g=(r[28].displayName||r[28].handle)+"",y,_,v,S,x=r[28].handle+"",D,z,N,T,L,q,M=r[28].description&&mr(r);return{c(){e=p("a"),t=p("div"),s=p("div"),n=p("img"),u=P(),c=p("div"),f=p("div"),b=p("h4"),y=A(g),_=P(),v=p("span"),S=A("@"),D=A(x),z=P(),M&&M.c(),N=P(),T=p("div"),T.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',L=P(),tt(n.src,i=r[28].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(r[28].displayName||r[28].handle)}&background=6366f1&color=fff&size=64`)||d(n,"src",i),d(n,"alt",l=r[28].displayName||r[28].handle),d(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),d(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(r[28].displayName||r[28].handle)+"&background=6366f1&color=fff&size=64'"),d(s,"class","flex-shrink-0"),d(b,"class","text-sm font-semibold text-gray-900 truncate"),d(v,"class","text-xs text-gray-600 truncate"),d(f,"class","flex items-center space-x-2 mb-1"),d(c,"class","flex-1 min-w-0"),d(T,"class","flex-shrink-0"),d(t,"class","flex items-center space-x-3"),d(e,"href",q="https://bsky.app/profile/"+r[28].handle),d(e,"target","_blank"),d(e,"rel","noopener noreferrer"),d(e,"class","block bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200 cursor-pointer")},m(I,w){E(I,e,w),o(e,t),o(t,s),o(s,n),o(t,u),o(t,c),o(c,f),o(f,b),o(b,y),o(f,_),o(f,v),o(v,S),o(v,D),o(c,z),M&&M.m(c,null),o(t,N),o(t,T),o(e,L)},p(I,w){w[0]&1&&!tt(n.src,i=I[28].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(I[28].displayName||I[28].handle)}&background=6366f1&color=fff&size=64`)&&d(n,"src",i),w[0]&1&&l!==(l=I[28].displayName||I[28].handle)&&d(n,"alt",l),w[0]&1&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(I[28].displayName||I[28].handle)+"&background=6366f1&color=fff&size=64'")&&d(n,"onerror",a),w[0]&1&&g!==(g=(I[28].displayName||I[28].handle)+"")&&V(y,g),w[0]&1&&x!==(x=I[28].handle+"")&&V(D,x),I[28].description?M?M.p(I,w):(M=mr(I),M.c(),M.m(c,null)):M&&(M.d(1),M=null),w[0]&1&&q!==(q="https://bsky.app/profile/"+I[28].handle)&&d(e,"href",q)},d(I){I&&k(e),M&&M.d()}}}function br(r){let e,t,s,n,i,l,a,u,c,f,b,g,y,_,v,S,x,D,z,N,T,L,q,M=r[7]&&r[6]>1&&gr(),I=ge(Array.from({length:Math.min(5,r[8])},r[20])),w=[];for(let K=0;K<I.length;K+=1)w[K]=yr(nr(r,I,K));let B=r[7]&&r[6]<r[8]&&_r();return{c(){e=p("div"),t=p("div"),s=p("div"),n=A("Page "),i=A(r[6]),l=A(" of "),a=A(r[8]),u=A(" ("),c=A(r[9]),f=A(" total members)"),b=P(),g=p("div"),y=p("button"),M&&M.c(),_=A(`
											Previous`),S=P(),x=p("div");for(let K=0;K<w.length;K+=1)w[K].c();D=P(),z=p("button"),N=A(`Next
											`),B&&B.c(),d(s,"class","text-sm text-gray-600"),y.disabled=v=r[6]===1||r[7],d(y,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),d(x,"class","flex items-center space-x-1"),z.disabled=T=r[6]===r[8]||r[7],d(z,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),d(g,"class","flex items-center space-x-2"),d(t,"class","flex items-center justify-between"),d(e,"class","mt-6 pt-4 border-t border-gray-200")},m(K,F){E(K,e,F),o(e,t),o(t,s),o(s,n),o(s,i),o(s,l),o(s,a),o(s,u),o(s,c),o(s,f),o(t,b),o(t,g),o(g,y),M&&M.m(y,null),o(y,_),o(g,S),o(g,x);for(let H=0;H<w.length;H+=1)w[H]&&w[H].m(x,null);o(g,D),o(g,z),o(z,N),B&&B.m(z,null),L||(q=[re(y,"click",r[15]),re(z,"click",r[14])],L=!0)},p(K,F){if(F[0]&64&&V(i,K[6]),F[0]&256&&V(a,K[8]),F[0]&512&&V(c,K[9]),K[7]&&K[6]>1?M||(M=gr(),M.c(),M.m(y,_)):M&&(M.d(1),M=null),F[0]&192&&v!==(v=K[6]===1||K[7])&&(y.disabled=v),F[0]&8640){I=ge(Array.from({length:Math.min(5,K[8])},K[20]));let H;for(H=0;H<I.length;H+=1){const X=nr(K,I,H);w[H]?w[H].p(X,F):(w[H]=yr(X),w[H].c(),w[H].m(x,null))}for(;H<w.length;H+=1)w[H].d(1);w.length=I.length}K[7]&&K[6]<K[8]?B||(B=_r(),B.c(),B.m(z,null)):B&&(B.d(1),B=null),F[0]&448&&T!==(T=K[6]===K[8]||K[7])&&(z.disabled=T)},d(K){K&&k(e),M&&M.d(),nt(w,K),B&&B.d(),L=!1,Te(q)}}}function gr(r){let e;return{c(){e=p("span"),d(e,"class","loading-spinner mr-1 svelte-srpbru")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function yr(r){let e,t=r[25]+"",s,n,i,l,a;function u(){return r[21](r[25])}return{c(){e=p("button"),s=A(t),n=P(),e.disabled=r[7],d(e,"class",i="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(r[6]===r[25]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(c,f){E(c,e,f),o(e,s),o(e,n),l||(a=re(e,"click",u),l=!0)},p(c,f){r=c,f[0]&320&&t!==(t=r[25]+"")&&V(s,t),f[0]&128&&(e.disabled=r[7]),f[0]&320&&i!==(i="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(r[6]===r[25]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&d(e,"class",i)},d(c){c&&k(e),l=!1,a()}}}function _r(r){let e;return{c(){e=p("span"),d(e,"class","loading-spinner ml-1 svelte-srpbru")},m(t,s){E(t,e,s)},d(t){t&&k(e)}}}function di(r){let e,t,s,n,i,l,a,u,c,f,b,g,y,_=(r[7]?"...":r[0].listMemberProfiles.length)+"",v,S,x,D,z,N,T,L,q,M,I=r[0].listMemberProfiles.length+"",w,B,K=r[0].listMembers.length+"",F,H,X,de,ue,oe;t=new ti({});let Y=r[3].size>0&&ar(r),h=r[5].success.length>0&&cr(r),m=r[5].errors.length>0&&ur(r);function O(C,$){return C[1]?oi:C[2]?li:C[0].listMembers.length===0?ii:ni}let U=O(r),R=U(r);return ue=new Gn({}),{c(){e=p("div"),Ce(t.$$.fragment),s=P(),Y&&Y.c(),n=P(),h&&h.c(),i=P(),m&&m.c(),l=P(),a=p("div"),u=p("div"),c=p("div"),f=p("h3"),f.textContent="Latest List Members",b=P(),g=p("p"),y=A("Showing "),v=A(_),S=A(" of "),x=A(r[9]),D=A(`
					total members`),z=P(),N=p("div"),T=p("div"),L=A("Debug: isLoadingMembers="),q=A(r[1]),M=A(", profiles="),w=A(I),B=A(", members="),F=A(K),H=P(),R.c(),X=P(),de=p("div"),Ce(ue.$$.fragment),d(f,"class","text-lg font-semibold text-slate-800 mb-2"),d(g,"class","text-sm text-slate-600"),d(c,"class","p-6 border-b border-gray-200"),d(T,"class","text-xs text-gray-500 mb-2"),d(N,"class","p-6 flex flex-col flex-1"),d(u,"id","list-members-container"),d(u,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),d(a,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),d(e,"class","space-y-6")},m(C,$){E(C,e,$),we(t,e,null),o(e,s),Y&&Y.m(e,null),o(e,n),h&&h.m(e,null),o(e,i),m&&m.m(e,null),o(e,l),o(e,a),o(a,u),o(u,c),o(c,f),o(c,b),o(c,g),o(g,y),o(g,v),o(g,S),o(g,x),o(g,D),o(u,z),o(u,N),o(N,T),o(T,L),o(T,q),o(T,M),o(T,w),o(T,B),o(T,F),o(N,H),R.m(N,null),o(a,X),o(a,de),we(ue,de,null),oe=!0},p(C,$){C[3].size>0?Y?Y.p(C,$):(Y=ar(C),Y.c(),Y.m(e,n)):Y&&(Y.d(1),Y=null),C[5].success.length>0?h?h.p(C,$):(h=cr(C),h.c(),h.m(e,i)):h&&(h.d(1),h=null),C[5].errors.length>0?m?m.p(C,$):(m=ur(C),m.c(),m.m(e,l)):m&&(m.d(1),m=null),(!oe||$[0]&129)&&_!==(_=(C[7]?"...":C[0].listMemberProfiles.length)+"")&&V(v,_),(!oe||$[0]&512)&&V(x,C[9]),(!oe||$[0]&2)&&V(q,C[1]),(!oe||$[0]&1)&&I!==(I=C[0].listMemberProfiles.length+"")&&V(w,I),(!oe||$[0]&1)&&K!==(K=C[0].listMembers.length+"")&&V(F,K),U===(U=O(C))&&R?R.p(C,$):(R.d(1),R=U(C),R&&(R.c(),R.m(N,null)))},i(C){oe||(se(t.$$.fragment,C),se(ue.$$.fragment,C),oe=!0)},o(C){ie(t.$$.fragment,C),ie(ue.$$.fragment,C),oe=!1},d(C){C&&k(e),Se(t),Y&&Y.d(),h&&h.d(),m&&m.d(),R.d(),Se(ue)}}}const vr=25;function fi(r,e,t){let s,n;Ae(r,ce,w=>t(0,s=w)),Ae(r,De,w=>t(18,n=w));let i=!1,l="",a=new Set,u=!1,c={success:[],errors:[]},f=1,b=!1,g=!1,y=0,_=new Map,v=0,S=null;async function x(){if(!(!s.selectedList||!n.session||g)){t(16,g=!0),t(1,i=!0),t(2,l=""),t(6,f=1),_.clear();try{const w=await Pe.getListInfo(n.session,s.selectedList.uri,n.authType),B={...s.selectedList,name:w.name,description:w.description,createdAt:w.createdAt,listItemCount:w.listItemCount};ce.setSelectedList(B),t(9,v=w.listItemCount||0),t(8,y=Math.ceil(v/vr)),console.log("Total pages:",y,"Total count:",v),await D(1),ce.setListLoading(!1)}catch(w){console.error("Error loading list members:",w),t(2,l=w.message||"Failed to load list members"),ce.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(1,i=!1),t(16,g=!1),console.log("Final state - isLoadingMembers:",i,"isCurrentlyLoadingMembers:",g)}}}async function D(w){if(!(!n.session||!s.selectedList)){t(7,b=!0),t(6,f=w);try{let B=_.get(w-1);const K=await Pe.getListMembers(n.session,s.selectedList.uri,n.authType,vr,B);console.log(`Fetched ${K.members.length} members for page ${w}`),console.log("Members received:",K.members),K.cursor&&_.set(w,K.cursor),K.members.length===0?(console.warn("No members returned from API for page",w),t(2,l="No member data received from API")):t(2,l="");const F=await Pe.getProfiles(n.session,K.members,n.authType);console.log(`Fetched ${F.length} profiles for page ${w}`),console.log("Setting profiles in store:",F.length),ce.setListMembers(K.members),ce.setListMemberProfiles(F),console.log("Profiles set in store, current count:",s.listMemberProfiles.length)}catch(B){console.error("Error loading members page:",B),t(2,l=B.message||"Failed to load page"),ce.setListMemberProfiles([])}finally{t(7,b=!1)}}}async function z(){if(a.size===0)return;t(4,u=!0),t(5,c={success:[],errors:[]});const w=Array.from(a);for(const B of w)try{await Pe.addToList(n.session,B,s.selectedList.uri,n.authType),c.success.push(B),await ce.fetchAndAddProfile(n.session,B,n.authType)}catch(K){c.errors.push({did:B,error:K.message})}a.clear(),t(3,a),t(4,u=!1)}async function N(w){w>=1&&w<=y&&await D(w)}async function T(){f<y&&await D(f+1)}async function L(){f>1&&await D(f-1)}const q=()=>D(f),M=(w,B)=>{let K;return y<=5||f<=3?K=B+1:f>=y-2?K=y-4+B:K=f-2+B,K},I=w=>N(w);return r.$$.update=()=>{r.$$.dirty[0]&1&&s.refreshTrigger&&x(),r.$$.dirty[0]&1&&console.log("Profile count changed:",s.listMemberProfiles.length),r.$$.dirty[0]&458753&&s.selectedList&&n.session&&!g&&S!==s.selectedList.uri&&(console.log("List changed, loading members for:",s.selectedList.name),t(17,S=s.selectedList.uri),x())},[s,i,l,a,u,c,f,b,y,v,x,D,z,N,T,L,g,S,n,q,M,I]}class pi extends xe{constructor(e){super(),Me(this,e,fi,di,ke,{},null,[-1,-1])}}function wr(r){let e,t,s,n,i,l,a,u;return{c(){e=p("div"),t=p("div"),s=p("div"),n=P(),i=p("h3"),i.textContent="Getting Ready",l=P(),a=p("p"),u=A(r[1]),d(s,"class","loading-spinner mx-auto mb-4 svelte-3t5r6s"),d(i,"class","text-lg font-semibold text-slate-800 mb-2"),d(a,"class","text-slate-600"),d(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),d(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]")},m(c,f){E(c,e,f),o(e,t),o(t,s),o(t,n),o(t,i),o(t,l),o(t,a),o(a,u)},p(c,f){f&2&&V(u,c[1])},d(c){c&&k(e)}}}function mi(r){let e,t=r[0]&&wr(r);return{c(){t&&t.c(),e=He()},m(s,n){t&&t.m(s,n),E(s,e,n)},p(s,[n]){s[0]?t?t.p(s,n):(t=wr(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Q,o:Q,d(s){s&&k(e),t&&t.d(s)}}}function hi(r,e,t){let{isLoading:s=!1}=e,{message:n="Loading list data..."}=e;return r.$$set=i=>{"isLoading"in i&&t(0,s=i.isLoading),"message"in i&&t(1,n=i.message)},[s,n]}class bi extends xe{constructor(e){super(),Me(this,e,hi,mi,ke,{isLoading:0,message:1})}}function Sr(r){let e,t;return e=new gn({}),{c(){Ce(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},i(s){t||(se(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function gi(r){let e,t;return e=new pi({}),{c(){Ce(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},i(s){t||(se(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function yi(r){let e,t;return e=new Ln({}),{c(){Ce(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},i(s){t||(se(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function _i(r){let e,t;return e=new vn({}),{c(){Ce(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},i(s){t||(se(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function vi(r){let e,t,s,n,i,l,a,u,c,f=r[1]!=="auth"&&Sr(),b=gt.isDevelopment;const g=[_i,yi,gi],y=[];function _(v,S){return v[1]==="auth"?0:v[1]==="list-selector"?1:v[1]==="manager"?2:-1}return~(i=_(r))&&(l=y[i]=g[i](r)),u=new bi({props:{isLoading:r[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=p("main"),f&&f.c(),t=P(),s=p("div"),n=P(),l&&l.c(),a=P(),Ce(u.$$.fragment),d(s,"class","max-w-6xl mx-auto p-6"),d(e,"class","min-h-screen bg-gray-50")},m(v,S){E(v,e,S),f&&f.m(e,null),o(e,t),o(e,s),o(s,n),~i&&y[i].m(s,null),o(e,a),we(u,e,null),c=!0},p(v,[S]){v[1]!=="auth"?f?S&2&&se(f,1):(f=Sr(),f.c(),se(f,1),f.m(e,t)):f&&(rt(),ie(f,1,1,()=>{f=null}),st());let x=i;i=_(v),i!==x&&(l&&(rt(),ie(y[x],1,1,()=>{y[x]=null}),st()),~i?(l=y[i],l||(l=y[i]=g[i](v),l.c()),se(l,1),l.m(s,null)):l=null);const D={};S&1&&(D.isLoading=v[0].isLoadingList),u.$set(D)},i(v){c||(se(f),se(b),se(l),se(u.$$.fragment,v),c=!0)},o(v){ie(f),ie(b),ie(l),ie(u.$$.fragment,v),c=!1},d(v){v&&k(e),f&&f.d(),~i&&y[i].d(),Se(u)}}}function wi(r,e,t){let s,n;Ae(r,ce,l=>t(0,s=l)),Ae(r,De,l=>t(2,n=l));let i="auth";return Ar(()=>{const{session:l,authType:a}=De.initializeSession();l&&(console.log("Session restored:",{authType:a,handle:l.handle||l.did}),t(1,i="list-selector"))}),r.$$.update=()=>{r.$$.dirty&5&&(n.session?s.selectedList?t(1,i="manager"):t(1,i="list-selector"):t(1,i="auth"))},[s,i,n]}class Si extends xe{constructor(e){super(),Me(this,e,wi,vi,ke,{})}}new Si({target:document.getElementById("app")})});export default ki();
