var tn=Object.defineProperty;var ln=(l,e,t)=>e in l?tn(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var sn=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports);var ul=(l,e,t)=>ln(l,typeof e!="symbol"?e+"":e,t);var Mi=sn((Ci,xt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function le(){}function Ks(l){return l()}function Yl(){return Object.create(null)}function Me(l){l.forEach(Ks)}function Ys(l){return typeof l=="function"}function xe(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let Vt;function qe(l,e){return l===e?!0:(Vt||(Vt=document.createElement("a")),Vt.href=e,l===Vt.href)}function nn(l){return Object.keys(l).length===0}function rn(l,...e){if(l==null){for(const s of e)s(void 0);return le}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ae(l,e,t){l.$$.on_destroy.push(rn(e,t))}function i(l,e){l.appendChild(e)}function I(l,e,t){l.insertBefore(e,t||null)}function C(l){l.parentNode&&l.parentNode.removeChild(l)}function Ue(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function f(l){return document.createElement(l)}function $t(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function L(l){return document.createTextNode(l)}function w(){return L(" ")}function Ke(){return L("")}function re(l,e,t,s){return l.addEventListener(e,t,s),()=>l.removeEventListener(e,t,s)}function hl(l){return function(e){return e.preventDefault(),l.call(this,e)}}function a(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Vs(l){let e;return{p(...t){e=t,e.forEach(s=>l.push(s))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function on(l){return Array.from(l.childNodes)}function Y(l,e){e=""+e,l.data!==e&&(l.data=e)}function ge(l,e){l.value=e??""}function ue(l,e,t,s){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Vl(l,e,t){for(let s=0;s<l.options.length;s+=1){const n=l.options[s];if(n.__value===e){n.selected=!0;return}}l.selectedIndex=-1}function an(l,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:s})}let Mt;function St(l){Mt=l}function bl(){if(!Mt)throw new Error("Function called outside component initialization");return Mt}function sl(l){bl().$$.on_mount.push(l)}function Js(l){bl().$$.on_destroy.push(l)}function Zs(){const l=bl();return(e,t,{cancelable:s=!1}={})=>{const n=l.$$.callbacks[e];if(n){const r=an(e,t,{cancelable:s});return n.slice().forEach(o=>{o.call(l,r)}),!r.defaultPrevented}return!0}}const gt=[],el=[];let bt=[];const Jl=[],cn=Promise.resolve();let ml=!1;function un(){ml||(ml=!0,cn.then(Gs))}function pl(l){bt.push(l)}const dl=new Set;let ft=0;function Gs(){if(ft!==0)return;const l=Mt;do{try{for(;ft<gt.length;){const e=gt[ft];ft++,St(e),dn(e.$$)}}catch(e){throw gt.length=0,ft=0,e}for(St(null),gt.length=0,ft=0;el.length;)el.pop()();for(let e=0;e<bt.length;e+=1){const t=bt[e];dl.has(t)||(dl.add(t),t())}bt.length=0}while(gt.length);for(;Jl.length;)Jl.pop()();ml=!1,dl.clear(),St(l)}function dn(l){if(l.fragment!==null){l.update(),Me(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(pl)}}function fn(l){const e=[],t=[];bt.forEach(s=>l.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),bt=e}const Gt=new Set;let Xe;function $e(){Xe={r:0,c:[],p:Xe}}function et(){Xe.r||Me(Xe.c),Xe=Xe.p}function ae(l,e){l&&l.i&&(Gt.delete(l),l.i(e))}function ce(l,e,t,s){if(l&&l.o){if(Gt.has(l))return;Gt.add(l),Xe.c.push(()=>{Gt.delete(l),s&&(t&&l.d(1),s())}),l.o(e)}else s&&s()}function me(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function mn(l,e){l.d(1),e.delete(l.key)}function pn(l,e,t,s,n,r,o,u,d,c,m,p){let b=l.length,h=r.length,y=b;const _={};for(;y--;)_[l[y].key]=y;const S=[],O=new Map,T=new Map,x=[];for(y=h;y--;){const z=p(n,r,y),k=t(z);let U=o.get(k);U?x.push(()=>U.p(z,e)):(U=c(k,z),U.c()),O.set(k,S[y]=U),k in _&&T.set(k,Math.abs(y-_[k]))}const N=new Set,E=new Set;function P(z){ae(z,1),z.m(u,m),o.set(z.key,z),m=z.first,h--}for(;b&&h;){const z=S[h-1],k=l[b-1],U=z.key,M=k.key;z===k?(m=z.first,b--,h--):O.has(M)?!o.has(U)||N.has(U)?P(z):E.has(M)?b--:T.get(U)>T.get(M)?(E.add(U),P(z)):(N.add(M),b--):(d(k,o),b--)}for(;b--;){const z=l[b];O.has(z.key)||d(z,o)}for(;h;)P(S[h-1]);return Me(x),S}function Te(l){l&&l.c()}function Le(l,e,t){const{fragment:s,after_update:n}=l.$$;s&&s.m(e,t),pl(()=>{const r=l.$$.on_mount.map(Ks).filter(Ys);l.$$.on_destroy?l.$$.on_destroy.push(...r):Me(r),l.$$.on_mount=[]}),n.forEach(pl)}function Se(l,e){const t=l.$$;t.fragment!==null&&(fn(t.after_update),Me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function gn(l,e){l.$$.dirty[0]===-1&&(gt.push(l),un(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function Ee(l,e,t,s,n,r,o=null,u=[-1]){const d=Mt;St(l);const c=l.$$={fragment:null,ctx:[],props:r,update:le,not_equal:n,bound:Yl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Yl(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};o&&o(c.root);let m=!1;if(c.ctx=t?t(l,e.props||{},(p,b,...h)=>{const y=h.length?h[0]:b;return c.ctx&&n(c.ctx[p],c.ctx[p]=y)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](y),m&&gn(l,p)),b}):[],c.update(),m=!0,Me(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const p=on(e.target);c.fragment&&c.fragment.l(p),p.forEach(C)}else c.fragment&&c.fragment.c();e.intro&&ae(l.$$.fragment),Le(l,e.target,e.anchor),Gs()}St(d)}class Oe{constructor(){ul(this,"$$");ul(this,"$$set")}$destroy(){Se(this,1),this.$destroy=le}$on(e,t){if(!Ys(t))return le;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!nn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const hn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hn);const mt=[];function vl(l,e=le){let t;const s=new Set;function n(u){if(xe(l,u)&&(l=u,t)){const d=!mt.length;for(const c of s)c[1](),mt.push(c,l);if(d){for(let c=0;c<mt.length;c+=2)mt[c][0](mt[c+1]);mt.length=0}}}function r(u){n(u(l))}function o(u,d=le){const c=[u,d];return s.add(c),s.size===1&&(t=e(n,r)||le),u(l),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:n,update:r,subscribe:o}}const gl="bluesky_oauth_session",Qs="bluesky_code_verifier",Xs="bluesky_oauth_state",$s="bluesky_server_url";function bn(l=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const s=new Uint8Array(l);crypto.getRandomValues(s);for(let n=0;n<l;n++)t+=e[s[n]%e.length];return t}async function vn(l){const t=new TextEncoder().encode(l),s=await crypto.subtle.digest("SHA-256",t);return _n(s)}function _n(l){return btoa(String.fromCharCode(...new Uint8Array(l))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(l="https://bsky.social"){try{const e=bn();localStorage.setItem(Qs,e);const t=await vn(e),s=crypto.randomUUID();localStorage.setItem(Xs,s),localStorage.setItem($s,l);const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",r=n?"http://localhost:5174/.well-known/oauth-client-metadata.json":"https://pixeline.be/bluesky-list-manager/.well-known/oauth-client-metadata.json",u=window.location.pathname.includes("/bluesky-list-manager")?"/bluesky-list-manager":"",d=n?`${window.location.origin}/oauth-callback.html`:`${window.location.origin}${u}/oauth-callback-standalone.html`,c=new URL(`${l}/oauth/authorize`);c.searchParams.append("client_id",r),c.searchParams.append("response_type","code"),c.searchParams.append("redirect_uri",d),c.searchParams.append("scope","atproto transition:generic"),c.searchParams.append("state",s),c.searchParams.append("code_challenge",t),c.searchParams.append("code_challenge_method","S256"),window.location.href=c.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}async function Qe(){const l=localStorage.getItem(gl);if(l)try{const e=JSON.parse(l);if(e.dpopKeypair){const t=await crypto.subtle.importKey("jwk",e.dpopKeypair.privateKey,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]),s=await crypto.subtle.importKey("jwk",e.dpopKeypair.publicKey,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);e.dpopKeypair={privateKey:t,publicKey:s}}return e}catch(e){console.error("Failed to parse stored OAuth session:",e),localStorage.removeItem(gl)}return null}function Zl(){localStorage.removeItem(gl),localStorage.removeItem(Qs),localStorage.removeItem(Xs),localStorage.removeItem($s)}const Ie={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},ht={OAUTH:"oauth",APP_PASSWORD:"app_password"};function wn(){const{subscribe:l,set:e,update:t}=vl({session:null,authType:null,isLoading:!1,error:null});return{subscribe:l,setSession:(s,n=ht.APP_PASSWORD)=>{s?(localStorage.setItem(Ie.SESSION,JSON.stringify(s)),localStorage.setItem(Ie.AUTH_TYPE,n)):(localStorage.removeItem(Ie.SESSION),localStorage.removeItem(Ie.AUTH_TYPE)),e({session:s,authType:n,isLoading:!1,error:null})},setLoading:s=>{t(n=>({...n,isLoading:s}))},setError:s=>{t(n=>({...n,error:s,isLoading:!1}))},getSession:()=>{const s=localStorage.getItem(Ie.SESSION),n=localStorage.getItem(Ie.AUTH_TYPE)||ht.APP_PASSWORD;if(s)try{return{session:JSON.parse(s),authType:n}}catch{localStorage.removeItem(Ie.SESSION),localStorage.removeItem(Ie.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(Ie.SESSION),localStorage.removeItem(Ie.AUTH_TYPE),Zl(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(Ie.SESSION),localStorage.removeItem(Ie.AUTH_TYPE),Zl(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:async()=>{console.log("Initializing session from storage...");const s=await Qe();if(console.log("OAuth session found:",s),s&&s.accessToken){console.log("Converting OAuth session to compatible format...");const o={accessJwt:s.accessToken,refreshJwt:s.refreshToken,handle:s.handle||s.sub,did:s.sub,email:null};return console.log("Converted session:",o),e({session:o,authType:ht.OAUTH,isLoading:!1,error:null}),{session:o,authType:ht.OAUTH}}const{session:n,authType:r}=Pe.getSession();return n?(console.log("Using app password session:",n),e({session:n,authType:r,isLoading:!1,error:null}),{session:n,authType:r}):(console.log("No session found"),{session:null,authType:null})},isOAuthSession:()=>localStorage.getItem(Ie.AUTH_TYPE)===ht.OAUTH}}const Pe=wn(),Gl="https://bsky.social/xrpc";class kn{async signIn(e,t){const s=await fetch(`${Gl}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!s.ok){const n=await s.json();throw new Error(n.message||"Failed to sign in")}return await s.json()}async getAuthHeaders(e,t="app_password",s="GET",n="",r=null){if(t==="oauth"){const o=await Qe();if(!(o!=null&&o.accessToken))throw new Error("No OAuth access token found");return{Authorization:`Bearer ${o.accessToken}`}}else return{Authorization:`Bearer ${e.accessJwt}`}}async makeBlueskyRequest(e,t,s="app_password",n="GET",r=null){const o=`${Gl}/${e}`;console.log(`makeBlueskyRequest: ${n} ${o} (authType: ${s})`);try{let u=await this.getAuthHeaders(t,s,n,o,r);console.log("Request headers:",u),r&&n!=="GET"&&(u["Content-Type"]="application/json");const d=await fetch(o,{method:n,headers:u,body:r?JSON.stringify(r):void 0});if(console.log(`Response status: ${d.status} ${d.statusText}`),!d.ok){const c=await d.json().catch(()=>({}));throw console.log("Response error:",c),s==="oauth"&&c.error==="InvalidToken"&&c.message==="Bad token scope"?(console.error("OAuth token scope insufficient for API access"),new Error("OAuth authentication successful, but tokens lack sufficient scope for API access. Please use app password login instead for full functionality.")):new Error(c.message||`Request failed: ${d.status}`)}return await d.json()}catch(u){throw console.error(`Bluesky API request failed for ${e}:`,u),u}}async getUserLists(e,t="app_password"){if(console.log("getUserLists called with authType:",t),t==="oauth"){const s=await Qe();if(console.log("OAuth session for getUserLists:",s),!(s!=null&&s.sub))throw new Error("No user DID found in OAuth session");const n=s.handle||s.sub;console.log("Using actor for getUserLists:",n);try{const r=await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${encodeURIComponent(n)}`,e,t);return console.log("getUserLists response:",r),r.lists||[]}catch(r){throw console.error("Failed to fetch user lists via OAuth:",r),r}}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${encodeURIComponent(e.handle)}`,e,t)).lists||[]}async getListInfo(e,t,s="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,s)).list}async getListMembers(e,t,s="app_password",n=25,r=null){var p;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;r&&(o+=`&cursor=${encodeURIComponent(r)}`);const u=await this.makeBlueskyRequest(o,e,s),d=u.items||[],c=d.map(b=>b.subject.did),m=d.map(b=>b.subject);return{members:c,profiles:m,cursor:u.cursor,totalCount:((p=u.list)==null?void 0:p.listItemCount)||0}}async getListMembersCount(e,t,s="app_password"){return(await this.getListInfo(e,t,s)).listItemCount||0}async getProfiles(e,t,s="app_password"){if(!t||t.length===0)return[];const n=[];for(const r of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(r)}`,e,s);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${r}:`,o),n.push({did:r,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,s="app_password",n=25,r=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;r&&(o+=`&cursor=${encodeURIComponent(r)}`);const u=await this.makeBlueskyRequest(o,e,s);return{actors:u.actors||[],cursor:u.cursor}}async addToList(e,t,s,n="app_password"){let r;return n==="oauth"?r=(await Qe()).sub:r=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:r,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:s,createdAt:new Date().toISOString()}})}async createList(e,{name:t,description:s="",purpose:n="app.bsky.graph.defs#curatelist"},r="app_password"){if(!t||typeof t!="string"||t.trim().length===0)throw new Error("List name is required");let o;if(r==="oauth"){const c=await Qe();o=c==null?void 0:c.sub}else o=e==null?void 0:e.did;if(!o)throw new Error("Unable to determine user DID for list creation");const u={$type:"app.bsky.graph.list",name:t.trim(),createdAt:new Date().toISOString()};return s&&typeof s=="string"&&(u.description=s.trim()),n&&typeof n=="string"&&(u.purpose=n),await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,r,"POST",{repo:o,collection:"app.bsky.graph.list",record:u})}async removeFromList(e,t,s,n="app_password"){var p;let r;n==="oauth"?r=(await Qe()).sub:r=e.did,console.log("removeFromList: Searching for DID:",t,"in list:",s,"for user:",r);let o=null,u=null,d=0;do{const b=await this.makeBlueskyRequest(`com.atproto.repo.listRecords?repo=${r}&collection=app.bsky.graph.listitem&limit=100${o?`&cursor=${encodeURIComponent(o)}`:""}`,e,n);if(console.log("removeFromList: Found",((p=b.records)==null?void 0:p.length)||0,"records in this batch"),u=b.records.find(h=>{d++;const y=h.value.subject===t&&h.value.list===s;return y&&console.log("removeFromList: Found matching record:",h),y}),u){console.log("removeFromList: Found record with rkey:",u.rkey);break}o=b.cursor}while(o&&!u);if(console.log("removeFromList: Total records checked:",d),!u)throw new Error("List item not found");const c=u.uri.split("/").pop();if(!c)throw console.error("removeFromList: Could not extract rkey from URI:",u.uri),new Error("Could not extract rkey from URI");console.log("removeFromList: Deleting record with rkey:",c);const m=await this.makeBlueskyRequest("com.atproto.repo.deleteRecord",e,n,"POST",{repo:r,collection:"app.bsky.graph.listitem",rkey:c});return console.log("removeFromList: Delete successful"),m}async resolveHandle(e,t,s="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,s)).did}}const be=new kn,ke={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Ln(){const{subscribe:l,update:e}=vl({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1,s=new Map;return{subscribe:l,setSelectedList:n=>{n?localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)):localStorage.removeItem(ke.SELECTED_LIST),e(r=>({...r,selectedList:n,isLoadingList:!!n,listMembers:[],listMemberProfiles:[]})),s.clear()},setListLoading:n=>{e(r=>({...r,isLoadingList:n}))},setUserLists:n=>{localStorage.setItem(ke.LISTS,JSON.stringify(n)),e(r=>({...r,userLists:n}))},insertNewList:(n,r=!0)=>{!n||!n.uri||(e(o=>{const u=[n,...o.userLists];return localStorage.setItem(ke.LISTS,JSON.stringify(u)),r&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)),{...o,userLists:u,selectedList:r?n:o.selectedList,isLoadingList:!!r}}),s.clear())},setListMembers:n=>{e(r=>({...r,listMembers:n}))},isProfileInCurrentList:n=>{let r=!1;return e(o=>(r=o.listMembers.includes(n),o)),r},async isProfileInEntireList(n,r,o="app_password"){var c;let u;e(m=>(u=m,m));const d=`${(c=u.selectedList)==null?void 0:c.uri}-${r}`;if(s.has(d))return s.get(d);if(u.listMembers.includes(r))return s.set(d,!0),!0;try{let m=null;const p=100;do{const b=await be.getListMembers(n,u.selectedList.uri,o,p,m);if(b.members.includes(r))return s.set(d,!0),!0;m=b.cursor}while(m);return s.set(d,!1),!1}catch(m){console.error("Error checking profile membership:",m);const p=u.listMembers.includes(r);return s.set(d,p),p}},setListMemberProfiles:n=>{e(r=>({...r,listMemberProfiles:n}))},addProfileToList:n=>{e(r=>{const o=r.listMembers.includes(n)?r.listMembers:[n,...r.listMembers];return{...r,listMembers:o}})},addProfileToDisplay:n=>{e(r=>{if(r.listMembers.indexOf(n.did)<25){const u=[n,...r.listMemberProfiles];return{...r,listMemberProfiles:u.slice(0,25)}}return r})},fetchAndAddProfile:(n,r,o="app_password")=>t?Promise.resolve():(t=!0,new Promise(async u=>{try{const d=await be.getProfiles(n,[r],o);if(d.length>0){const c=d[0];e(m=>{const p=m.listMembers.includes(r)?m.listMembers:[r,...m.listMembers];if(p.indexOf(r)<25){const h=m.listMemberProfiles.filter(_=>_.did!==r),y=[c,...h];return{...m,listMembers:p,listMemberProfiles:y.slice(0,25)}}return{...m,listMembers:p}}),e(m=>{console.log("Updating member count for DID:",r),console.log("Current selectedList:",m.selectedList),console.log("Current userLists:",m.userLists),console.log("Incrementing member count for successfully added profile");const p=m.selectedList?{...m.selectedList,listItemCount:(m.selectedList.listItemCount||0)+1}:null,b=m.userLists.map(h=>{var y;return h.uri===((y=m.selectedList)==null?void 0:y.uri)?{...h,memberCount:(h.memberCount||0)+1}:h});return console.log("Updated selectedList:",p),console.log("Updated userLists:",b),p&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(p)),localStorage.setItem(ke.LISTS,JSON.stringify(b)),{...m,selectedList:p,userLists:b}})}}catch(d){console.error("Failed to fetch profile data:",d),e(c=>{const m=c.listMembers.includes(r)?c.listMembers:[r,...c.listMembers];return{...c,listMembers:m}}),e(c=>{console.log("Updating member count for DID (error case):",r),console.log("Incrementing member count for profile (error case)");const m=c.selectedList?{...c.selectedList,listItemCount:(c.selectedList.listItemCount||0)+1}:null,p=c.userLists.map(b=>{var h;return b.uri===((h=c.selectedList)==null?void 0:h.uri)?{...b,memberCount:(b.memberCount||0)+1}:b});return m&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(m)),localStorage.setItem(ke.LISTS,JSON.stringify(p)),{...c,selectedList:m,userLists:p}})}finally{t=!1}u()})),refreshListMembers:()=>{e(n=>({...n,refreshTrigger:Date.now()}))},setLoading:n=>{e(r=>({...r,isLoading:n}))},setError:n=>{e(r=>({...r,error:n,isLoading:!1}))},getSelectedList:()=>{const n=localStorage.getItem(ke.SELECTED_LIST);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.SELECTED_LIST)}return null},getUserLists:()=>{const n=localStorage.getItem(ke.LISTS);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(ke.SELECTED_LIST),e(n=>({...n,selectedList:null}))},async getAllListMemberDids(n,r="app_password"){let o;if(e(d=>(o=d,d)),!o.selectedList)return new Set;const u=`${o.selectedList.uri}-all-dids`;if(s.has(u))return s.get(u);try{let d=new Set,c=null;const m=100;do{const p=await be.getListMembers(n,o.selectedList.uri,r,m,c);p.members.forEach(b=>d.add(b)),c=p.cursor}while(c);return s.set(u,d),d}catch(d){console.error("Error getting all list member DIDs:",d);const c=new Set(o.listMembers);return s.set(u,c),c}}}}const fe=Ln();function Sn(l){let e,t,s,n,r,o,u,d,c,m,p,b,h;return{c(){e=f("div"),t=f("label"),t.textContent="Handle",s=w(),n=f("input"),r=w(),o=f("div"),u=f("label"),u.textContent="App Password",d=w(),c=f("input"),m=w(),p=f("p"),p.textContent="Use an app password, not your main account password",a(t,"for","handle"),a(t,"class","block text-sm font-medium text-gray-700 mb-1"),a(n,"id","handle"),a(n,"type","text"),a(n,"placeholder","your-handle.bsky.social"),a(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,a(u,"for","password"),a(u,"class","block text-sm font-medium text-gray-700 mb-1"),a(c,"id","password"),a(c,"type","password"),a(c,"placeholder","Your app password"),a(c,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c.required=!0,a(p,"class","text-xs text-gray-500 mt-1")},m(y,_){I(y,e,_),i(e,t),i(e,s),i(e,n),ge(n,l[0]),I(y,r,_),I(y,o,_),i(o,u),i(o,d),i(o,c),ge(c,l[1]),i(o,m),i(o,p),b||(h=[re(n,"input",l[11]),re(c,"input",l[12])],b=!0)},p(y,_){_&1&&n.value!==y[0]&&ge(n,y[0]),_&2&&c.value!==y[1]&&ge(c,y[1])},d(y){y&&(C(e),C(r),C(o)),b=!1,Me(h)}}}function Mn(l){let e;return{c(){e=f("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function Ql(l){let e,t,s;return{c(){e=f("div"),t=f("p"),s=L(l[3]),a(t,"class","text-red-700 text-sm"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,r){I(n,e,r),i(e,t),i(t,s)},p(n,r){r&8&&Y(s,n[3])},d(n){n&&C(e)}}}function xn(l){let e;return{c(){e=L("Sign In")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function Cn(l){let e;return{c(){e=L("Sign in with Bluesky")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function In(l){let e,t,s;function n(u,d){return u[4]==="oauth"?An:Pn}let r=n(l),o=r(l);return{c(){e=f("span"),t=w(),o.c(),s=Ke(),a(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(u,d){I(u,e,d),I(u,t,d),o.m(u,d),I(u,s,d)},p(u,d){r!==(r=n(u))&&(o.d(1),o=r(u),o&&(o.c(),o.m(s.parentNode,s)))},d(u){u&&(C(e),C(t),C(s)),o.d(u)}}}function Pn(l){let e;return{c(){e=L("Signing in...")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function An(l){let e;return{c(){e=L("Connecting...")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function Tn(l){let e,t,s,n,r,o,u,d,c,m,p,b,h,y,_,S,O,T,x,N,E,P,z,k,U,M,B,q,$,A,F,K,Z,oe,X,v,g,j;function H(V,se){return V[4]==="oauth"?Mn:Sn}let R=H(l),W=R(l),J=l[3]&&Ql(l);function G(V,se){return V[2]?In:V[4]==="oauth"?Cn:xn}let Q=G(l),D=Q(l);return v=Vs(l[9][0]),{c(){e=f("div"),t=f("button"),s=w(),n=f("div"),r=f("div"),o=f("h2"),o.textContent="Sign in to Bluesky",u=w(),d=f("button"),d.textContent="√ó",c=w(),m=f("form"),p=f("div"),b=f("div"),h=f("fieldset"),y=f("legend"),y.textContent="Sign in with:",_=w(),S=f("div"),O=f("div"),T=f("label"),x=f("input"),N=w(),E=f("span"),E.textContent="OAuth (Limited Functionality)",P=w(),z=f("p"),z.textContent=`OAuth login works but tokens lack sufficient scope for API access. Use app
									password login for full functionality.`,k=w(),U=f("label"),M=f("input"),B=w(),q=f("span"),q.textContent="App Password",$=w(),W.c(),A=w(),J&&J.c(),F=w(),K=f("div"),Z=f("button"),Z.textContent="Cancel",oe=w(),X=f("button"),D.c(),a(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),a(t,"aria-label","Close modal"),a(t,"type","button"),a(o,"class","text-xl font-semibold text-slate-800"),a(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),a(r,"class","flex items-center justify-between mb-4"),a(y,"class","block text-sm font-medium text-gray-700 mb-2"),a(x,"type","radio"),x.__value="oauth",ge(x,x.__value),a(x,"class","mr-2"),a(E,"class","text-sm"),a(T,"class","flex items-center"),a(z,"class","text-xs text-gray-500 ml-6 mt-1"),a(O,"class","mb-4"),a(M,"type","radio"),M.__value="app_password",ge(M,M.__value),a(M,"class","mr-2"),a(q,"class","text-sm"),a(U,"class","flex items-center"),a(S,"class","space-y-2"),a(Z,"type","button"),a(Z,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),a(X,"type","submit"),X.disabled=l[2],a(X,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),a(K,"class","flex space-x-3 pt-2"),a(p,"class","space-y-4"),a(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),a(n,"role","document"),a(n,"id","sign-in-modal-content"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),a(e,"role","dialog"),a(e,"aria-modal","true"),a(e,"tabindex","-1"),a(e,"id","sign-in-modal"),v.p(x,M)},m(V,se){I(V,e,se),i(e,t),i(e,s),i(e,n),i(n,r),i(r,o),i(r,u),i(r,d),i(n,c),i(n,m),i(m,p),i(p,b),i(b,h),i(h,y),i(h,_),i(h,S),i(S,O),i(O,T),i(T,x),x.checked=x.__value===l[4],i(T,N),i(T,E),i(O,P),i(O,z),i(S,k),i(S,U),i(U,M),M.checked=M.__value===l[4],i(U,B),i(U,q),i(p,$),W.m(p,null),i(p,A),J&&J.m(p,null),i(p,F),i(p,K),i(K,Z),i(K,oe),i(K,X),D.m(X,null),g||(j=[re(t,"click",l[7]),re(d,"click",l[6]),re(x,"change",l[8]),re(M,"change",l[10]),re(Z,"click",l[6]),re(m,"submit",hl(l[5])),re(e,"keydown",l[13])],g=!0)},p(V,[se]){se&16&&(x.checked=x.__value===V[4]),se&16&&(M.checked=M.__value===V[4]),R===(R=H(V))&&W?W.p(V,se):(W.d(1),W=R(V),W&&(W.c(),W.m(p,A))),V[3]?J?J.p(V,se):(J=Ql(V),J.c(),J.m(p,F)):J&&(J.d(1),J=null),Q===(Q=G(V))&&D?D.p(V,se):(D.d(1),D=Q(V),D&&(D.c(),D.m(X,null))),se&4&&(X.disabled=V[2])},i:le,o:le,d(V){V&&C(e),W.d(),J&&J.d(),D.d(),v.r(),g=!1,Me(j)}}}function En(l,e,t){const s=Zs();let n="",r="",o=!1,u="",d="app_password";async function c(){t(2,o=!0),t(3,u="");try{await yn()}catch(N){t(3,u=N.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function m(){if(!n||!r){t(3,u="Please enter both handle and password");return}t(2,o=!0),t(3,u="");try{const N=await be.signIn(n,r);Pe.setSession(N,ht.APP_PASSWORD),s("close")}catch(N){t(3,u=N.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function p(){d==="oauth"?await c():await m()}function b(){s("close")}function h(){b()}const y=[[]];function _(){d=this.__value,t(4,d)}function S(){d=this.__value,t(4,d)}function O(){n=this.value,t(0,n)}function T(){r=this.value,t(1,r)}return[n,r,o,u,d,p,b,h,_,y,S,O,T,N=>N.key==="Escape"&&b()]}class en extends Oe{constructor(e){super(),Ee(this,e,En,Tn,xe,{})}}function Xl(l){let e,t;return{c(){e=f("div"),t=L(l[4]),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700")},m(s,n){I(s,e,n),i(e,t)},p(s,n){n&16&&Y(t,s[4])},d(s){s&&C(e)}}}function On(l){let e;return{c(){e=L("Create")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function Nn(l){let e;return{c(){e=L("Creating...")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function Rn(l){let e,t,s,n,r,o,u,d,c,m,p,b,h,y,_,S,O,T,x,N,E,P,z,k,U,M,B,q,$,A,F,K,Z,oe,X,v,g,j,H,R,W,J,G,Q,D=l[4]&&Xl(l);function V(ne,ee){return ne[3]?Nn:On}let se=V(l),ie=se(l);return J=Vs(l[10][0]),{c(){e=f("div"),t=f("button"),s=w(),n=f("div"),r=f("div"),o=f("h2"),o.textContent="Create New List",u=w(),d=f("button"),d.textContent="√ó",c=w(),m=f("form"),p=f("div"),b=f("div"),h=f("label"),h.textContent="Name",y=w(),_=f("input"),S=w(),O=f("div"),T=f("label"),T.textContent="Description (optional)",x=w(),N=f("textarea"),E=w(),P=f("div"),z=f("fieldset"),k=f("legend"),k.textContent="Purpose",U=w(),M=f("div"),B=f("label"),q=f("input"),$=w(),A=f("span"),A.textContent="Curated list",F=w(),K=f("label"),Z=f("input"),oe=w(),X=f("span"),X.textContent="Moderation list",v=w(),D&&D.c(),g=w(),j=f("div"),H=f("button"),H.textContent="Cancel",R=w(),W=f("button"),ie.c(),a(t,"class","absolute inset-0 w-full h-full bg-transparent border-0"),a(t,"aria-label","Close"),a(o,"class","text-xl font-semibold text-slate-800"),a(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),a(r,"class","flex items-center justify-between mb-4"),a(h,"class","block text-sm font-medium text-gray-700 mb-1"),a(h,"for","list-name"),a(_,"id","list-name"),a(_,"type","text"),_.required=!0,a(_,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a(T,"class","block text-sm font-medium text-gray-700 mb-1"),a(T,"for","list-description"),a(N,"id","list-description"),a(N,"rows","3"),a(N,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a(k,"class","block text-sm font-medium text-gray-700 mb-2"),a(q,"type","radio"),a(q,"name","purpose"),q.__value="app.bsky.graph.defs#curatelist",ge(q,q.__value),a(q,"class","mr-2"),a(A,"class","text-sm"),a(B,"class","flex items-center"),a(Z,"type","radio"),a(Z,"name","purpose"),Z.__value="app.bsky.graph.defs#modlist",ge(Z,Z.__value),a(Z,"class","mr-2"),a(X,"class","text-sm"),a(K,"class","flex items-center"),a(M,"class","space-y-2"),a(H,"type","button"),a(H,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),a(W,"type","submit"),W.disabled=l[3],a(W,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),a(j,"class","flex space-x-3 pt-2"),a(p,"class","space-y-4"),a(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),a(e,"role","dialog"),a(e,"aria-modal","true"),J.p(q,Z)},m(ne,ee){I(ne,e,ee),i(e,t),i(e,s),i(e,n),i(n,r),i(r,o),i(r,u),i(r,d),i(n,c),i(n,m),i(m,p),i(p,b),i(b,h),i(b,y),i(b,_),ge(_,l[0]),i(p,S),i(p,O),i(O,T),i(O,x),i(O,N),ge(N,l[1]),i(p,E),i(p,P),i(P,z),i(z,k),i(z,U),i(z,M),i(M,B),i(B,q),q.checked=q.__value===l[2],i(B,$),i(B,A),i(M,F),i(M,K),i(K,Z),Z.checked=Z.__value===l[2],i(K,oe),i(K,X),i(p,v),D&&D.m(p,null),i(p,g),i(p,j),i(j,H),i(j,R),i(j,W),ie.m(W,null),G||(Q=[re(t,"click",l[5]),re(d,"click",l[5]),re(_,"input",l[7]),re(N,"input",l[8]),re(q,"change",l[9]),re(Z,"change",l[11]),re(H,"click",l[5]),re(m,"submit",hl(l[6]))],G=!0)},p(ne,[ee]){ee&1&&_.value!==ne[0]&&ge(_,ne[0]),ee&2&&ge(N,ne[1]),ee&4&&(q.checked=q.__value===ne[2]),ee&4&&(Z.checked=Z.__value===ne[2]),ne[4]?D?D.p(ne,ee):(D=Xl(ne),D.c(),D.m(p,g)):D&&(D.d(1),D=null),se!==(se=V(ne))&&(ie.d(1),ie=se(ne),ie&&(ie.c(),ie.m(W,null))),ee&8&&(W.disabled=ne[3])},i:le,o:le,d(ne){ne&&C(e),D&&D.d(),ie.d(),J.r(),G=!1,Me(Q)}}}function zn(l,e,t){let s;Ae(l,Pe,O=>t(12,s=O));const n=Zs();let r="",o="",u="app.bsky.graph.defs#curatelist",d=!1,c="";function m(){n("close")}async function p(){var O;if(t(4,c=""),!r||r.trim().length===0){t(4,c="Please enter a list name");return}t(3,d=!0);try{const T=await be.createList(s.session,{name:r.trim(),description:o.trim(),purpose:u},s.authType),x=(T==null?void 0:T.uri)||((O=T==null?void 0:T.cid)==null?void 0:O.uri)||null,N=new Date().toISOString(),E={uri:x,name:r.trim(),description:o.trim()||"",purpose:u,createdAt:N,memberCount:0};n("success",E),n("close")}catch(T){t(4,c=(T==null?void 0:T.message)||"Failed to create list")}finally{t(3,d=!1)}}const b=[[]];function h(){r=this.value,t(0,r)}function y(){o=this.value,t(1,o)}function _(){u=this.__value,t(2,u)}function S(){u=this.__value,t(2,u)}return[r,o,u,d,c,m,p,h,y,_,b,S]}class Bn extends Oe{constructor(e){super(),Ee(this,e,zn,Rn,xe,{})}}const Fn=!0,tl={staticBase:"static",isDevelopment:!1,isProduction:Fn,buildTime:new Date().toISOString(),getAssetPath:l=>`./${l.replace("static/","")}`};function $l(l,e,t){const s=l.slice();return s[16]=e[t],s}function Un(l){let e,t,s;return{c(){e=f("button"),e.textContent="üîê Sign in with Bluesky",a(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200"),a(e,"id","sign-in-button")},m(n,r){I(n,e,r),t||(s=re(e,"click",l[7]),t=!0)},p:le,d(n){n&&C(e),t=!1,s()}}}function Dn(l){let e,t,s,n,r,o,u,d,c,m,p,b,h,y=l[1].session.handle+"",_,S,O,T,x;function N(k,U){return k[4]?Wn:k[5]?Hn:jn}let E=N(l),P=E(l),z=l[5]&&ts(l);return{c(){e=f("div"),t=f("label"),t.textContent="List:",s=w(),n=f("select"),r=f("option"),r.textContent="Select a list...",P.c(),u=w(),z&&z.c(),d=w(),c=f("button"),c.textContent="+ New List",m=w(),p=f("div"),b=f("div"),h=L("@"),_=L(y),S=w(),O=f("button"),O.textContent="Sign out",a(t,"for","list-selector"),a(t,"class","block text-sm font-medium text-gray-700 mb-1"),r.__value="",ge(r,r.__value),a(n,"id","list-selector"),a(n,"class","w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),n.disabled=l[4],a(e,"class","flex-1"),a(c,"class","bg-white hover:bg-gray-50 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),a(c,"id","new-list-button"),a(c,"title","Create a new list"),a(b,"class","text-sm text-slate-700"),a(O,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),a(O,"id","sign-out-button"),a(p,"class","text-right"),a(p,"id","user-info")},m(k,U){var M;I(k,e,U),i(e,t),i(e,s),i(e,n),i(n,r),P.m(n,null),Vl(n,((M=l[0].selectedList)==null?void 0:M.uri)||""),i(e,u),z&&z.m(e,null),I(k,d,U),I(k,c,U),I(k,m,U),I(k,p,U),i(p,b),i(b,h),i(b,_),i(p,S),i(p,O),T||(x=[re(n,"change",l[6]),re(c,"click",l[8]),re(O,"click",l[12])],T=!0)},p(k,U){var M,B;E===(E=N(k))&&P?P.p(k,U):(P.d(1),P=E(k),P&&(P.c(),P.m(n,null))),U&1&&o!==(o=((M=k[0].selectedList)==null?void 0:M.uri)||"")&&Vl(n,((B=k[0].selectedList)==null?void 0:B.uri)||""),U&16&&(n.disabled=k[4]),k[5]?z?z.p(k,U):(z=ts(k),z.c(),z.m(e,null)):z&&(z.d(1),z=null),U&2&&y!==(y=k[1].session.handle+"")&&Y(_,y)},d(k){k&&(C(e),C(d),C(c),C(m),C(p)),P.d(),z&&z.d(),T=!1,Me(x)}}}function jn(l){let e,t=me(l[0].userLists),s=[];for(let n=0;n<t.length;n+=1)s[n]=es($l(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Ke()},m(n,r){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,r);I(n,e,r)},p(n,r){if(r&1){t=me(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const u=$l(n,t,o);s[o]?s[o].p(u,r):(s[o]=es(u),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&C(e),Ue(s,n)}}}function Hn(l){let e;return{c(){e=f("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",ge(e,e.__value)},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function Wn(l){let e;return{c(){e=f("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",ge(e,e.__value)},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function es(l){let e,t=l[16].name+"",s,n,r=l[16].memberCount.toLocaleString()+"",o,u,d;return{c(){e=f("option"),s=L(t),n=L(" ("),o=L(r),u=L(` members)
									`),e.__value=d=l[16].uri,ge(e,e.__value)},m(c,m){I(c,e,m),i(e,s),i(e,n),i(e,o),i(e,u)},p(c,m){m&1&&t!==(t=c[16].name+"")&&Y(s,t),m&1&&r!==(r=c[16].memberCount.toLocaleString()+"")&&Y(o,r),m&1&&d!==(d=c[16].uri)&&(e.__value=d,ge(e,e.__value))},d(c){c&&C(e)}}}function ts(l){let e,t,s,n=l[5].includes("OAuth authentication successful, but tokens lack sufficient scope"),r=n&&ls(l);return{c(){e=f("p"),t=L(l[5]),s=w(),r&&r.c(),a(e,"class","text-sm text-red-600 mt-1")},m(o,u){I(o,e,u),i(e,t),i(e,s),r&&r.m(e,null)},p(o,u){u&32&&Y(t,o[5]),u&32&&(n=o[5].includes("OAuth authentication successful, but tokens lack sufficient scope")),n?r||(r=ls(o),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(o){o&&C(e),r&&r.d()}}}function ls(l){let e;return{c(){e=f("button"),e.textContent="Switch to app password login",a(e,"onclick",l[13]),a(e,"class","ml-2 text-blue-600 hover:text-blue-800 underline")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function ss(l){let e,t;return e=new en({}),e.$on("close",l[11]),{c(){Te(e.$$.fragment)},m(s,n){Le(e,s,n),t=!0},p:le,i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function ns(l){let e,t;return e=new Bn({}),e.$on("close",l[9]),e.$on("success",l[10]),{c(){Te(e.$$.fragment)},m(s,n){Le(e,s,n),t=!0},p:le,i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function qn(l){let e,t,s,n,r,o,u,d,c,m;function p(S,O){return S[1].session?Dn:Un}let b=p(l),h=b(l),y=l[2]&&ss(l),_=l[3]&&ns(l);return{c(){e=f("header"),t=f("div"),s=f("div"),n=f("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${tl.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,r=w(),o=f("div"),h.c(),u=w(),y&&y.c(),d=w(),_&&_.c(),c=Ke(),a(o,"class","flex items-center space-x-4"),a(s,"class","flex items-center justify-between mb-4"),a(t,"class","max-w-6xl mx-auto px-6 py-4"),a(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50"),a(e,"id","app-header")},m(S,O){I(S,e,O),i(e,t),i(t,s),i(s,n),i(s,r),i(s,o),h.m(o,null),I(S,u,O),y&&y.m(S,O),I(S,d,O),_&&_.m(S,O),I(S,c,O),m=!0},p(S,[O]){b===(b=p(S))&&h?h.p(S,O):(h.d(1),h=b(S),h&&(h.c(),h.m(o,null))),S[2]?y?(y.p(S,O),O&4&&ae(y,1)):(y=ss(S),y.c(),ae(y,1),y.m(d.parentNode,d)):y&&($e(),ce(y,1,1,()=>{y=null}),et()),S[3]?_?(_.p(S,O),O&8&&ae(_,1)):(_=ns(S),_.c(),ae(_,1),_.m(c.parentNode,c)):_&&($e(),ce(_,1,1,()=>{_=null}),et())},i(S){m||(ae(y),ae(_),m=!0)},o(S){ce(y),ce(_),m=!1},d(S){S&&(C(e),C(u),C(d),C(c)),h.d(),y&&y.d(S),_&&_.d(S)}}}function Kn(l,e,t){let s,n;Ae(l,fe,x=>t(0,s=x)),Ae(l,Pe,x=>t(1,n=x));let r=!1,o=!1,u=!1,d="";sl(async()=>{n.session&&await m()});async function c(){try{const x=await Qe();if(console.log("OAuth session from storage:",x),x!=null&&x.handle&&!x.handle.startsWith("did:")){console.log("Using handle from OAuth storage:",x.handle),Pe.setSession({...n.session,handle:x.handle},n.authType);return}console.log("Fetching profile from API for DID:",n.session.did);const N=await be.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${n.session.did}`,n.session,n.authType);N!=null&&N.handle&&(console.log("Got handle from API:",N.handle),Pe.setSession({...n.session,handle:N.handle},n.authType))}catch(x){console.error("Failed to resolve OAuth handle:",x)}}async function m(){if(n.session)try{t(4,u=!0),t(5,d="");const N=(await be.getUserLists(n.session,n.authType)).map(E=>({uri:E.uri,name:E.name,description:E.description||"",purpose:E.purpose||"app.bsky.graph.defs#modlist",createdAt:E.createdAt,memberCount:E.listItemCount||0})).sort((E,P)=>new Date(P.createdAt)-new Date(E.createdAt));fe.setUserLists(N)}catch(x){console.error("Failed to load user lists:",x),x.message.includes("OAuth authentication successful, but tokens lack sufficient scope")?t(5,d="OAuth login successful, but tokens lack sufficient permissions for API access. Please use app password login instead for full functionality."):t(5,d=x.message||"Failed to load lists")}finally{t(4,u=!1)}}function p(x){const N=x.target.value;if(N){const E=s.userLists.find(P=>P.uri===N);E&&fe.setSelectedList(E)}else fe.setSelectedList(null)}function b(){t(2,r=!0)}function h(){t(3,o=!0)}function y(){t(3,o=!1)}async function _(x){const N=x.detail;fe.insertNewList(N,!0)}function S(){t(2,r=!1)}function O(){Pe.signOut(),fe.setSelectedList(null)}const T=()=>Pe.clearSession();return l.$$.update=()=>{var x;l.$$.dirty&2&&n.session&&n.authType==="oauth"&&(x=n.session.handle)!=null&&x.startsWith("did:")&&c(),l.$$.dirty&3&&n.session&&s.userLists.length===0&&m(),l.$$.dirty&1&&s.userLists.length>0&&console.log("Header: userLists updated:",s.userLists)},[s,n,r,o,u,d,p,b,h,y,_,S,O,T]}class Yn extends Oe{constructor(e){super(),Ee(this,e,Kn,qn,xe,{})}}function Qt(l){l.preventDefault()}var Vn=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]);function Jn(l){if(Vn.has(l.key))return Qt(l),!1}var Xt=new AbortController,Jt=Xt.signal;function Zn(){window.addEventListener("DOMMouseScroll",Qt,{signal:Jt}),window.addEventListener("wheel",Qt,{passive:!1,signal:Jt}),window.addEventListener("touchmove",Qt,{passive:!1,signal:Jt}),window.addEventListener("keydown",Jn,{signal:Jt})}function Gn(){Xt==null||Xt.abort()}function Qn(l){if(!l)throw new Error("Please specify a container for the zoom image");const e=l.querySelector("img");if(!e)throw new Error("Please place an image inside the container");return e}var Xn=50,$n=()=>({createZoomImage:(e,t,s)=>{if(e.src===t)return;e.src=t;let n=!1;e.onload=()=>{n=!0,s.setState({zoomedImgStatus:"loaded"})},e.onerror=()=>{n=!0,s.setState({zoomedImgStatus:"error"})},setTimeout(()=>{n||s.setState({zoomedImgStatus:"loading"})},Xn)}}),er=$n();function tr(l){let e=new Set,t=!1,s=l,n,r=(u={})=>{n={...n,...u},o()},o=()=>{if(t)return;let u=!1;if(n){for(let d in n)if(s[d]!==n[d]){u=!0;break}}u&&(s={...s,...n},e.forEach(d=>d({state:s,updatedProperties:n})),n=void 0)};return{subscribe:u=>(e.add(u),()=>{e.delete(u)}),cleanup:()=>e.clear(),getState:()=>s,setState:r,batch:u=>{t=!0,u(),t=!1,o()}}}function lr(l,e={}){var x,N;let t=null;const s=Qn(l),n={zoomFactor:e.zoomFactor??4,zoomImageSource:e.zoomImageSource??s.src,disabledContextMenu:e.disabledContextMenu??!1},{disabledContextMenu:r,zoomFactor:o,zoomImageSource:u}=n,d=tr({zoomedImgStatus:"idle"}),c=document.createElement("img");(x=e.zoomImageProps)!=null&&x.alt&&(c.alt=e.zoomImageProps.alt),(N=e.zoomImageProps)!=null&&N.className&&(c.className=e.zoomImageProps.className),c.style.maxWidth="none",c.style.position="absolute",c.style.top="0",c.style.left="0",r&&(c.style["-webkit-user-select"]="none",c.style["-webkit-touch-callout"]="none",c.oncontextmenu=()=>!1);const m=E=>t&&E.pointerId===t;function p(E){if(t===null){t=E.pointerId,l.appendChild(c),c.style.display="block";const P=s.clientWidth*o,z=s.clientHeight*o;c.style.width=`${P}px`,c.style.height=`${z}px`,er.createZoomImage(c,u,d),S(E),E.pointerType!=="mouse"&&Zn()}}function b(E){m(E)&&S(E)}function h(E){m(E)&&(l.contains(c)&&l.removeChild(c),c.style.display="none",c.style.transform="none",Gn(),t=null)}const y=E=>{const P=l.clientWidth;return E>0?0:E+P*o<P?-P*(o-1):E},_=E=>{const P=l.clientHeight;return E>0?0:E+P*o<P?-P*(o-1):E};function S(E){c.style.display="block";const P=l.getBoundingClientRect(),z=E.clientX-P.left,k=E.clientY-P.top,U=y(-z*o+z),M=_(-k*o+k);c.style.transform=`translate(${U}px, ${M}px)`}const O=new AbortController,{signal:T}=O;return l.addEventListener("pointerenter",p,{signal:T}),l.addEventListener("pointermove",b,{signal:T}),l.addEventListener("pointerleave",h,{signal:T}),l.addEventListener("touchstart",E=>{r&&E.preventDefault()},{signal:T}),{cleanup:()=>{O.abort(),l.contains(c)&&l.removeChild(c),d.cleanup()},subscribe:d.subscribe,getState:d.getState}}function sr(){let l;const{set:e,subscribe:t}=vl({zoomedImgStatus:"idle"}),s=(...n)=>{l==null||l.cleanup(),l=lr(...n),e(l.getState()),l.subscribe(({state:r})=>{e(r)})};return Js(()=>{l==null||l.cleanup()}),{createZoomImage:s,zoomImageState:{subscribe:t}}}function nr(l){let e,t,s,n;return{c(){e=f("div"),t=f("img"),qe(t.src,s=l[0])||a(t,"src",s),a(t,"alt",l[1]),a(t,"class","base-image svelte-6dnnuj"),ue(t,"width","100%"),ue(t,"height","100%"),ue(t,"object-fit","cover"),a(e,"class",n="zoom-image-container "+l[4]+" svelte-6dnnuj"),ue(e,"width",l[2]),ue(e,"height",l[3]),ue(e,"overflow","hidden"),ue(e,"position","relative"),a(e,"id","zoomable-image-"+Math.random().toString(36).substr(2,9))},m(r,o){I(r,e,o),i(e,t),l[7](e)},p(r,[o]){o&1&&!qe(t.src,s=r[0])&&a(t,"src",s),o&2&&a(t,"alt",r[1]),o&16&&n!==(n="zoom-image-container "+r[4]+" svelte-6dnnuj")&&a(e,"class",n),o&4&&ue(e,"width",r[2]),o&8&&ue(e,"height",r[3])},i:le,o:le,d(r){r&&C(e),l[7](null)}}}function rr(l,e,t){let{src:s=""}=e,{alt:n=""}=e,{width:r="auto"}=e,{height:o="auto"}=e,{className:u=""}=e,{zoomFactor:d=2}=e,c,m;const{createZoomImage:p}=sr();sl(()=>{c&&(m=p(c,{zoomFactor:d,zoomImageSource:s,zoomImageProps:{alt:n,className:"zoom-image"}}))}),Js(()=>{m&&m.cleanup&&m.cleanup()});function b(h){el[h?"unshift":"push"](()=>{c=h,t(5,c)})}return l.$$set=h=>{"src"in h&&t(0,s=h.src),"alt"in h&&t(1,n=h.alt),"width"in h&&t(2,r=h.width),"height"in h&&t(3,o=h.height),"className"in h&&t(4,u=h.className),"zoomFactor"in h&&t(6,d=h.zoomFactor)},[s,n,r,o,u,c,d,b]}class ir extends Oe{constructor(e){super(),Ee(this,e,rr,nr,xe,{src:0,alt:1,width:2,height:3,className:4,zoomFactor:6})}}function rs(l){let e,t;return e=new en({}),e.$on("close",l[2]),{c(){Te(e.$$.fragment)},m(s,n){Le(e,s,n),t=!0},p:le,i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function or(l){let e,t,s,n,r,o,u,d,c,m,p,b,h,y,_,S,O,T,x,N,E,P,z,k,U,M,B,q,$,A,F,K,Z,oe;b=new ir({props:{src:tl.getAssetPath("static/screencapture.png"),alt:"Bluesky List Manager Preview - Showing list statistics and member management interface",width:"100%",height:"auto",className:"screenshot-zoom-image",zoomFactor:3}});let X=l[0]&&rs(l);return{c(){e=f("div"),t=f("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${tl.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-4xl font-bold text-slate-800 mb-4">Bluesky List Manager</h2> <p class="text-xl text-slate-600 mb-2">Manage your lists like a pro.</p> <p class="text-xl text-slate-600 mb-6"><strong class="text-blue-600">Get insights and powerful tools to grow your curated lists.</strong></p>`,s=w(),n=f("div"),r=f("button"),r.textContent="üöÄ Sign in with Bluesky to manage your lists",o=w(),u=f("p"),u.textContent="100% free ‚Ä¢ No registration required ‚Ä¢ Works instantly ‚Ä¢ Zero data stored on our servers",d=w(),c=f("div"),m=f("div"),p=f("div"),Te(b.$$.fragment),h=w(),y=f("div"),y.innerHTML='<div class="zoom-hint svelte-163esy5">üîç Move mouse to zoom and explore the interface</div>',_=w(),S=f("p"),S.textContent="See your list insights and manage members with powerful analytics",O=w(),T=f("div"),T.innerHTML='<div class="bg-red-50 p-6 rounded-lg border border-red-200"><h3 class="text-lg font-semibold text-red-800 mb-3">üò§ The Manual Way (Slow &amp; Painful)</h3> <ul class="space-y-2 text-red-700"><li class="flex items-start"><span class="text-red-500 mr-2">‚Ä¢</span> <span>Search one profile at a time</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">‚Ä¢</span> <span>Forget who you&#39;ve already added</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">‚Ä¢</span> <span>Hours of repetitive clicking</span></li></ul></div> <div class="bg-green-50 p-6 rounded-lg border border-green-200"><h3 class="text-lg font-semibold text-green-800 mb-3">‚ö° The Smart Way (Fast &amp; Easy)</h3> <ul class="space-y-2 text-green-700"><li class="flex items-start"><span class="text-green-500 mr-2">‚Ä¢</span> <span><strong>Bulk search</strong> by keywords, bio, or handle</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">‚Ä¢</span> <span><strong>Instant filtering</strong> - see who&#39;s already in your list</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">‚Ä¢</span> <span><strong>Minutes instead of hours</strong></span></li></ul></div>',x=w(),N=f("div"),N.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-4">üéØ Perfect for:</h3> <div class="grid md:grid-cols-3 gap-4 text-blue-700"><div class="text-center"><div class="text-2xl mb-2">üë•</div> <div class="font-medium">Community Builders</div> <div class="text-sm">Grow your curated lists quickly</div></div> <div class="text-center"><div class="text-2xl mb-2">üîç</div> <div class="font-medium">Content Creators</div> <div class="text-sm">Find your target audience</div></div> <div class="text-center"><div class="text-2xl mb-2">üìä</div> <div class="font-medium">List Managers</div> <div class="text-sm">Maintain and expand your lists</div></div></div>',E=w(),P=f("div"),P.innerHTML='<h3 class="text-lg font-semibold text-purple-800 mb-3">‚ú® Key Features</h3> <div class="grid md:grid-cols-2 gap-4 text-purple-700"><div><div class="font-medium mb-1">üîç Smart Search</div> <div class="text-sm">Search across bios, display names, and handles with powerful filters</div></div> <div><div class="font-medium mb-1">üìä Real-time Stats</div> <div class="text-sm">See engagement rates, verification status, and growth metrics</div></div> <div><div class="font-medium mb-1">üîí Privacy First</div> <div class="text-sm">Client-side app - your data never leaves your browser</div></div></div>',z=w(),k=f("div"),k.innerHTML=`<h3 class="text-lg font-semibold text-gray-800 mb-3">üîê Privacy &amp; Security</h3> <p class="text-gray-700 mb-3">This is a <strong>client-side application</strong>. Your Bluesky credentials are stored
			locally in your browser and are never sent to our servers. We only communicate directly with
			Bluesky&#39;s API using your authentication token.</p> <p class="text-sm text-gray-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code (and
			contribute!) on
			<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-gray-600 hover:text-gray-700 underline">GitHub</a>.</p>`,U=w(),M=f("div"),B=f("button"),B.textContent="üöÄ Start Building Better Lists - Sign in with Bluesky",q=w(),$=f("p"),$.textContent="100% free ‚Ä¢ No registration required ‚Ä¢ Works instantly ‚Ä¢ Zero data stored on our servers",A=w(),X&&X.c(),F=Ke(),a(t,"class","text-center mb-8"),a(r,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),a(r,"id","auth-sign-in-button"),a(u,"class","text-sm text-gray-500 mt-3"),a(n,"class","text-center mb-8"),a(n,"id","auth-cta"),a(y,"class","zoom-overlay svelte-163esy5"),a(p,"class","screenshot-container svelte-163esy5"),a(S,"class","text-sm text-gray-600 mt-4"),a(m,"class","bg-gray-50 p-6 rounded-lg border border-gray-200"),a(c,"class","mb-8 text-center"),a(T,"class","grid md:grid-cols-2 gap-8 mb-8"),a(N,"class","bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8"),a(P,"class","bg-purple-50 p-6 rounded-lg border border-purple-200 mb-8"),a(k,"class","bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8"),a(B,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),a($,"class","text-sm text-gray-500 mt-3"),a(M,"class","text-center"),a(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-4xl mx-auto relative z-100"),a(e,"id","auth-instructions")},m(v,g){I(v,e,g),i(e,t),i(e,s),i(e,n),i(n,r),i(n,o),i(n,u),i(e,d),i(e,c),i(c,m),i(m,p),Le(b,p,null),i(p,h),i(p,y),i(m,_),i(m,S),i(e,O),i(e,T),i(e,x),i(e,N),i(e,E),i(e,P),i(e,z),i(e,k),i(e,U),i(e,M),i(M,B),i(M,q),i(M,$),I(v,A,g),X&&X.m(v,g),I(v,F,g),K=!0,Z||(oe=[re(r,"click",l[1]),re(B,"click",l[1])],Z=!0)},p(v,[g]){v[0]?X?(X.p(v,g),g&1&&ae(X,1)):(X=rs(v),X.c(),ae(X,1),X.m(F.parentNode,F)):X&&($e(),ce(X,1,1,()=>{X=null}),et())},i(v){K||(ae(b.$$.fragment,v),ae(X),K=!0)},o(v){ce(b.$$.fragment,v),ce(X),K=!1},d(v){v&&(C(e),C(A),C(F)),Se(b),X&&X.d(v),Z=!1,Me(oe)}}}function ar(l,e,t){let s=!1;function n(){t(0,s=!0)}function r(){t(0,s=!1)}return[s,n,r]}class cr extends Oe{constructor(e){super(),Ee(this,e,ar,or,xe,{})}}function ur(l){let e,t,s;return{c(){e=f("h3"),e.textContent="Select a List",t=w(),s=f("p"),s.textContent="Choose a list from the dropdown above to get started.",a(e,"class","text-lg font-semibold text-slate-800 mb-2"),a(s,"class","text-slate-600")},m(n,r){I(n,e,r),I(n,t,r),I(n,s,r)},d(n){n&&(C(e),C(t),C(s))}}}function dr(l){let e,t,s;return{c(){e=f("h3"),e.textContent="No Lists Found",t=w(),s=f("p"),s.textContent="You don't have any lists yet. Create a list on Bluesky first!",a(e,"class","text-lg font-semibold text-slate-800 mb-2"),a(s,"class","text-slate-600")},m(n,r){I(n,e,r),I(n,t,r),I(n,s,r)},d(n){n&&(C(e),C(t),C(s))}}}function fr(l){let e,t,s,n,r,o,u;function d(p,b){return p[0].userLists.length===0?dr:ur}let c=d(l),m=c(l);return{c(){e=f("div"),t=f("div"),s=f("div"),s.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=w(),r=f("div"),o=f("div"),o.innerHTML=`<img src="${tl.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,u=w(),m.c(),a(s,"class","text-center mb-8"),a(o,"class","text-4xl mb-4"),a(r,"class","text-center py-12"),a(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),a(t,"id","list-selector-content"),a(e,"class","max-w-4xl mx-auto"),a(e,"id","list-selector")},m(p,b){I(p,e,b),i(e,t),i(t,s),i(t,n),i(t,r),i(r,o),i(r,u),m.m(r,null)},p(p,[b]){c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(r,null)))},i:le,o:le,d(p){p&&C(e),m.d()}}}function mr(l,e,t){let s;return Ae(l,fe,n=>t(0,s=n)),[s]}class pr extends Oe{constructor(e){super(),Ee(this,e,mr,fr,xe,{})}}function gr(l){let e,t,s,n,r,o,u,d,c,m,p,b=(l[0].displayName||l[0].handle)+"",h,y,_,S,O=l[0].handle+"",T,x,N,E,P=l[0].description&&is(l);function z(M,B){if(M[3]==="Already in list")return yr;if(M[3]==="New candidate")return _r;if(M[6])return vr;if(M[2])return br}let k=z(l),U=k&&k(l);return{c(){e=f("div"),t=f("div"),s=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h3"),h=L(b),y=w(),_=f("span"),S=L("@"),T=L(O),x=w(),P&&P.c(),N=w(),U&&U.c(),qe(n.src,r=ll(l[0]))||a(n,"src",r),a(n,"alt",o=l[0].displayName||l[0].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(l[0].displayName||l[0].handle)+"&background=6366f1&color=fff&size=64'"),a(s,"class","flex-shrink-0"),a(p,"class","text-base font-semibold text-gray-900 truncate"),a(_,"class","text-sm text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(c,"class","flex-1 min-w-0"),a(t,"class","flex items-start space-x-3"),a(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200"),a(e,"id",E="profile-card-"+l[0].did)},m(M,B){I(M,e,B),i(e,t),i(t,s),i(s,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,h),i(m,y),i(m,_),i(_,S),i(_,T),i(c,x),P&&P.m(c,null),i(c,N),U&&U.m(c,null)},p(M,B){B&1&&!qe(n.src,r=ll(M[0]))&&a(n,"src",r),B&1&&o!==(o=M[0].displayName||M[0].handle)&&a(n,"alt",o),B&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(M[0].displayName||M[0].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),B&1&&b!==(b=(M[0].displayName||M[0].handle)+"")&&Y(h,b),B&1&&O!==(O=M[0].handle+"")&&Y(T,O),M[0].description?P?P.p(M,B):(P=is(M),P.c(),P.m(c,N)):P&&(P.d(1),P=null),k===(k=z(M))&&U?U.p(M,B):(U&&U.d(1),U=k&&k(M),U&&(U.c(),U.m(c,null))),B&1&&E!==(E="profile-card-"+M[0].did)&&a(e,"id",E)},d(M){M&&C(e),P&&P.d(),U&&U.d()}}}function hr(l){let e,t,s,n,r,o,u,d,c,m,p,b=(l[0].displayName||l[0].handle)+"",h,y,_,S,O=l[0].handle+"",T,x,N,E,P,z,k,U,M,B=l[0].description&&os(l);function q(F,K){if(F[3]==="Already in list")return xr;if(F[3]==="New candidate")return Mr;if(F[6])return Sr;if(F[2])return Lr}let $=q(l),A=$&&$(l);return{c(){e=f("a"),t=f("div"),s=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h3"),h=L(b),y=w(),_=f("span"),S=L("@"),T=L(O),x=w(),B&&B.c(),N=w(),A&&A.c(),E=w(),P=f("div"),P.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',qe(n.src,r=ll(l[0]))||a(n,"src",r),a(n,"alt",o=l[0].displayName||l[0].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(l[0].displayName||l[0].handle)+"&background=6366f1&color=fff&size=64'"),a(s,"class","flex-shrink-0"),a(p,"class","text-base font-semibold text-gray-900 truncate"),a(_,"class","text-sm text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(c,"class","flex-1 min-w-0"),a(P,"class","flex-shrink-0"),a(t,"class","flex items-start space-x-3"),a(e,"href",z="https://bsky.app/profile/"+l[0].handle),a(e,"target","_blank"),a(e,"rel","noopener noreferrer"),a(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200"),a(e,"id",k="profile-card-"+l[0].did)},m(F,K){I(F,e,K),i(e,t),i(t,s),i(s,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,h),i(m,y),i(m,_),i(_,S),i(_,T),i(c,x),B&&B.m(c,null),i(c,N),A&&A.m(c,null),i(t,E),i(t,P),U||(M=re(e,"click",l[9]),U=!0)},p(F,K){K&1&&!qe(n.src,r=ll(F[0]))&&a(n,"src",r),K&1&&o!==(o=F[0].displayName||F[0].handle)&&a(n,"alt",o),K&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(F[0].displayName||F[0].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),K&1&&b!==(b=(F[0].displayName||F[0].handle)+"")&&Y(h,b),K&1&&O!==(O=F[0].handle+"")&&Y(T,O),F[0].description?B?B.p(F,K):(B=os(F),B.c(),B.m(c,N)):B&&(B.d(1),B=null),$===($=q(F))&&A?A.p(F,K):(A&&A.d(1),A=$&&$(F),A&&(A.c(),A.m(c,null))),K&1&&z!==(z="https://bsky.app/profile/"+F[0].handle)&&a(e,"href",z),K&1&&k!==(k="profile-card-"+F[0].did)&&a(e,"id",k)},d(F){F&&C(e),B&&B.d(),A&&A.d(),U=!1,M()}}}function is(l){let e,t=l[0].description+"",s;return{c(){e=f("p"),s=L(t),a(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,r){I(n,e,r),i(e,s)},p(n,r){r&1&&t!==(t=n[0].description+"")&&Y(s,t)},d(n){n&&C(e)}}}function br(l){let e,t,s,n,r,o;return{c(){e=f("div"),t=f("input"),s=w(),n=f("span"),n.textContent="Select to add to list",a(t,"type","checkbox"),t.checked=l[1],a(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),a(n,"class","text-sm text-gray-600"),a(e,"class","flex items-center space-x-2")},m(u,d){I(u,e,d),i(e,t),i(e,s),i(e,n),r||(o=re(t,"change",l[7]),r=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&C(e),r=!1,o()}}}function vr(l){let e;return{c(){e=f("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,a(e,"class","flex items-center space-x-2")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function _r(l){let e,t,s,n,r,o,u;function d(p,b){return p[5]?kr:wr}let c=d(l),m=c(l);return{c(){e=f("div"),t=f("span"),s=L(l[3]),n=w(),r=f("button"),m.c(),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),r.disabled=l[5],a(r,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-2")},m(p,b){I(p,e,b),i(e,t),i(t,s),i(e,n),i(e,r),m.m(r,null),o||(u=re(r,"click",l[8]),o=!0)},p(p,b){b&8&&Y(s,p[3]),c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(r,null))),b&32&&(r.disabled=p[5])},d(p){p&&C(e),m.d(),o=!1,u()}}}function yr(l){let e,t,s;return{c(){e=f("div"),t=f("span"),s=L(l[3]),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),a(e,"class","flex items-center space-x-2")},m(n,r){I(n,e,r),i(e,t),i(t,s)},p(n,r){r&8&&Y(s,n[3])},d(n){n&&C(e)}}}function wr(l){let e;return{c(){e=L("Add to list")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function kr(l){let e,t;return{c(){e=f("span"),t=L(`
								Adding...`),a(e,"class","loading-spinner mr-1")},m(s,n){I(s,e,n),I(s,t,n)},d(s){s&&(C(e),C(t))}}}function os(l){let e,t=l[0].description+"",s;return{c(){e=f("p"),s=L(t),a(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,r){I(n,e,r),i(e,s)},p(n,r){r&1&&t!==(t=n[0].description+"")&&Y(s,t)},d(n){n&&C(e)}}}function Lr(l){let e,t,s,n,r,o;return{c(){e=f("div"),t=f("input"),s=w(),n=f("span"),n.textContent="Select to add to list",a(t,"type","checkbox"),t.checked=l[1],a(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),a(n,"class","text-sm text-gray-600"),a(e,"class","flex items-center space-x-2")},m(u,d){I(u,e,d),i(e,t),i(e,s),i(e,n),r||(o=re(t,"change",l[7]),r=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&C(e),r=!1,o()}}}function Sr(l){let e;return{c(){e=f("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,a(e,"class","flex items-center space-x-2")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function Mr(l){let e,t,s,n,r,o,u;function d(p,b){return p[5]?Ir:Cr}let c=d(l),m=c(l);return{c(){e=f("div"),t=f("span"),s=L(l[3]),n=w(),r=f("button"),m.c(),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),r.disabled=l[5],a(r,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-2")},m(p,b){I(p,e,b),i(e,t),i(t,s),i(e,n),i(e,r),m.m(r,null),o||(u=re(r,"click",l[8]),o=!0)},p(p,b){b&8&&Y(s,p[3]),c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(r,null))),b&32&&(r.disabled=p[5])},d(p){p&&C(e),m.d(),o=!1,u()}}}function xr(l){let e,t,s;return{c(){e=f("div"),t=f("span"),s=L(l[3]),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),a(e,"class","flex items-center space-x-2")},m(n,r){I(n,e,r),i(e,t),i(t,s)},p(n,r){r&8&&Y(s,n[3])},d(n){n&&C(e)}}}function Cr(l){let e;return{c(){e=L("Add to list")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function Ir(l){let e,t;return{c(){e=f("span"),t=L(`
								Adding...`),a(e,"class","loading-spinner mr-1")},m(s,n){I(s,e,n),I(s,t,n)},d(s){s&&(C(e),C(t))}}}function Pr(l){let e;function t(r,o){return r[4]?hr:gr}let s=t(l),n=s(l);return{c(){n.c(),e=Ke()},m(r,o){n.m(r,o),I(r,e,o)},p(r,[o]){s===(s=t(r))&&n?n.p(r,o):(n.d(1),n=s(r),n&&(n.c(),n.m(e.parentNode,e)))},i:le,o:le,d(r){r&&C(e),n.d(r)}}}function ll(l){return l.avatar?l.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(l.displayName||l.handle)}&background=6366f1&color=fff&size=64`}function Ar(l,e,t){let{profile:s}=e,{isSelected:n=!1}=e,{onSelect:r=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:u=null}=e,{clickable:d=!1}=e,{onAddToList:c=()=>{}}=e,{isAddingToList:m=!1}=e,{isCheckingMembership:p=!1}=e;function b(){r(s)}function h(_){_.preventDefault(),_.stopPropagation(),c(s)}function y(_){d&&!o||d&&o&&(_.target.type==="checkbox"||_.target.closest('input[type="checkbox"]'))&&(_.preventDefault(),_.stopPropagation())}return l.$$set=_=>{"profile"in _&&t(0,s=_.profile),"isSelected"in _&&t(1,n=_.isSelected),"onSelect"in _&&t(10,r=_.onSelect),"showCheckbox"in _&&t(2,o=_.showCheckbox),"statusTag"in _&&t(3,u=_.statusTag),"clickable"in _&&t(4,d=_.clickable),"onAddToList"in _&&t(11,c=_.onAddToList),"isAddingToList"in _&&t(5,m=_.isAddingToList),"isCheckingMembership"in _&&t(6,p=_.isCheckingMembership)},[s,n,o,u,d,m,p,b,h,y,r,c]}class Tr extends Oe{constructor(e){super(),Ee(this,e,Ar,Pr,xe,{profile:0,isSelected:1,onSelect:10,showCheckbox:2,statusTag:3,clickable:4,onAddToList:11,isAddingToList:5,isCheckingMembership:6})}}var xt={};(function l(e,t,s,n){var r=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!e.OffscreenCanvas)return!1;var v=new OffscreenCanvas(1,1),g=v.getContext("2d");g.fillRect(0,0,1,1);var j=v.transferToImageBitmap();try{g.createPattern(j,"no-repeat")}catch{return!1}return!0}();function d(){}function c(v){var g=t.exports.Promise,j=g!==void 0?g:e.Promise;return typeof j=="function"?new j(v):(v(d,d),null)}var m=function(v,g){return{transform:function(j){if(v)return j;if(g.has(j))return g.get(j);var H=new OffscreenCanvas(j.width,j.height),R=H.getContext("2d");return R.drawImage(j,0,0),g.set(j,H),H},clear:function(){g.clear()}}}(u,new Map),p=function(){var v=Math.floor(16.666666666666668),g,j,H={},R=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(g=function(W){var J=Math.random();return H[J]=requestAnimationFrame(function G(Q){R===Q||R+v-1<Q?(R=Q,delete H[J],W()):H[J]=requestAnimationFrame(G)}),J},j=function(W){H[W]&&cancelAnimationFrame(H[W])}):(g=function(W){return setTimeout(W,v)},j=function(W){return clearTimeout(W)}),{frame:g,cancel:j}}(),b=function(){var v,g,j={};function H(R){function W(J,G){R.postMessage({options:J||{},callback:G})}R.init=function(G){var Q=G.transferControlToOffscreen();R.postMessage({canvas:Q},[Q])},R.fire=function(G,Q,D){if(g)return W(G,null),g;var V=Math.random().toString(36).slice(2);return g=c(function(se){function ie(ne){ne.data.callback===V&&(delete j[V],R.removeEventListener("message",ie),g=null,m.clear(),D(),se())}R.addEventListener("message",ie),W(G,V),j[V]=ie.bind(null,{data:{callback:V}})}),g},R.reset=function(){R.postMessage({reset:!0});for(var G in j)j[G](),delete j[G]}}return function(){if(v)return v;if(!s&&r){var R=["var CONFETTI, SIZE = {}, module = {};","("+l.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{v=new Worker(URL.createObjectURL(new Blob([R])))}catch(W){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",W),null}H(v)}return v}}(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(v,g){return g?g(v):v}function _(v){return v!=null}function S(v,g,j){return y(v&&_(v[g])?v[g]:h[g],j)}function O(v){return v<0?0:Math.floor(v)}function T(v,g){return Math.floor(Math.random()*(g-v))+v}function x(v){return parseInt(v,16)}function N(v){return v.map(E)}function E(v){var g=String(v).replace(/[^0-9a-f]/gi,"");return g.length<6&&(g=g[0]+g[0]+g[1]+g[1]+g[2]+g[2]),{r:x(g.substring(0,2)),g:x(g.substring(2,4)),b:x(g.substring(4,6))}}function P(v){var g=S(v,"origin",Object);return g.x=S(g,"x",Number),g.y=S(g,"y",Number),g}function z(v){v.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight}function k(v){var g=v.getBoundingClientRect();v.width=g.width,v.height=g.height}function U(v){var g=document.createElement("canvas");return g.style.position="fixed",g.style.top="0px",g.style.left="0px",g.style.pointerEvents="none",g.style.zIndex=v,g}function M(v,g,j,H,R,W,J,G,Q){v.save(),v.translate(g,j),v.rotate(W),v.scale(H,R),v.arc(0,0,1,J,G,Q),v.restore()}function B(v){var g=v.angle*(Math.PI/180),j=v.spread*(Math.PI/180);return{x:v.x,y:v.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:v.startVelocity*.5+Math.random()*v.startVelocity,angle2D:-g+(.5*j-Math.random()*j),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:v.color,shape:v.shape,tick:0,totalTicks:v.ticks,decay:v.decay,drift:v.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:v.gravity*3,ovalScalar:.6,scalar:v.scalar,flat:v.flat}}function q(v,g){g.x+=Math.cos(g.angle2D)*g.velocity+g.drift,g.y+=Math.sin(g.angle2D)*g.velocity+g.gravity,g.velocity*=g.decay,g.flat?(g.wobble=0,g.wobbleX=g.x+10*g.scalar,g.wobbleY=g.y+10*g.scalar,g.tiltSin=0,g.tiltCos=0,g.random=1):(g.wobble+=g.wobbleSpeed,g.wobbleX=g.x+10*g.scalar*Math.cos(g.wobble),g.wobbleY=g.y+10*g.scalar*Math.sin(g.wobble),g.tiltAngle+=.1,g.tiltSin=Math.sin(g.tiltAngle),g.tiltCos=Math.cos(g.tiltAngle),g.random=Math.random()+2);var j=g.tick++/g.totalTicks,H=g.x+g.random*g.tiltCos,R=g.y+g.random*g.tiltSin,W=g.wobbleX+g.random*g.tiltCos,J=g.wobbleY+g.random*g.tiltSin;if(v.fillStyle="rgba("+g.color.r+", "+g.color.g+", "+g.color.b+", "+(1-j)+")",v.beginPath(),o&&g.shape.type==="path"&&typeof g.shape.path=="string"&&Array.isArray(g.shape.matrix))v.fill(Z(g.shape.path,g.shape.matrix,g.x,g.y,Math.abs(W-H)*.1,Math.abs(J-R)*.1,Math.PI/10*g.wobble));else if(g.shape.type==="bitmap"){var G=Math.PI/10*g.wobble,Q=Math.abs(W-H)*.1,D=Math.abs(J-R)*.1,V=g.shape.bitmap.width*g.scalar,se=g.shape.bitmap.height*g.scalar,ie=new DOMMatrix([Math.cos(G)*Q,Math.sin(G)*Q,-Math.sin(G)*D,Math.cos(G)*D,g.x,g.y]);ie.multiplySelf(new DOMMatrix(g.shape.matrix));var ne=v.createPattern(m.transform(g.shape.bitmap),"no-repeat");ne.setTransform(ie),v.globalAlpha=1-j,v.fillStyle=ne,v.fillRect(g.x-V/2,g.y-se/2,V,se),v.globalAlpha=1}else if(g.shape==="circle")v.ellipse?v.ellipse(g.x,g.y,Math.abs(W-H)*g.ovalScalar,Math.abs(J-R)*g.ovalScalar,Math.PI/10*g.wobble,0,2*Math.PI):M(v,g.x,g.y,Math.abs(W-H)*g.ovalScalar,Math.abs(J-R)*g.ovalScalar,Math.PI/10*g.wobble,0,2*Math.PI);else if(g.shape==="star")for(var ee=Math.PI/2*3,pe=4*g.scalar,ve=8*g.scalar,he=g.x,_e=g.y,Ne=5,Ce=Math.PI/Ne;Ne--;)he=g.x+Math.cos(ee)*ve,_e=g.y+Math.sin(ee)*ve,v.lineTo(he,_e),ee+=Ce,he=g.x+Math.cos(ee)*pe,_e=g.y+Math.sin(ee)*pe,v.lineTo(he,_e),ee+=Ce;else v.moveTo(Math.floor(g.x),Math.floor(g.y)),v.lineTo(Math.floor(g.wobbleX),Math.floor(R)),v.lineTo(Math.floor(W),Math.floor(J)),v.lineTo(Math.floor(H),Math.floor(g.wobbleY));return v.closePath(),v.fill(),g.tick<g.totalTicks}function $(v,g,j,H,R){var W=g.slice(),J=v.getContext("2d"),G,Q,D=c(function(V){function se(){G=Q=null,J.clearRect(0,0,H.width,H.height),m.clear(),R(),V()}function ie(){s&&!(H.width===n.width&&H.height===n.height)&&(H.width=v.width=n.width,H.height=v.height=n.height),!H.width&&!H.height&&(j(v),H.width=v.width,H.height=v.height),J.clearRect(0,0,H.width,H.height),W=W.filter(function(ne){return q(J,ne)}),W.length?G=p.frame(ie):se()}G=p.frame(ie),Q=se});return{addFettis:function(V){return W=W.concat(V),D},canvas:v,promise:D,reset:function(){G&&p.cancel(G),Q&&Q()}}}function A(v,g){var j=!v,H=!!S(g||{},"resize"),R=!1,W=S(g,"disableForReducedMotion",Boolean),J=r&&!!S(g||{},"useWorker"),G=J?b():null,Q=j?z:k,D=v&&G?!!v.__confetti_initialized:!1,V=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,se;function ie(ee,pe,ve){for(var he=S(ee,"particleCount",O),_e=S(ee,"angle",Number),Ne=S(ee,"spread",Number),Ce=S(ee,"startVelocity",Number),tt=S(ee,"decay",Number),Ct=S(ee,"gravity",Number),lt=S(ee,"drift",Number),Ye=S(ee,"colors",N),vt=S(ee,"ticks",Number),_t=S(ee,"shapes"),De=S(ee,"scalar"),je=!!S(ee,"flat"),He=P(ee),Ve=he,st=[],nt=v.width*He.x,rt=v.height*He.y;Ve--;)st.push(B({x:nt,y:rt,angle:_e,spread:Ne,startVelocity:Ce,color:Ye[Ve%Ye.length],shape:_t[T(0,_t.length)],ticks:vt,decay:tt,gravity:Ct,drift:lt,scalar:De,flat:je}));return se?se.addFettis(st):(se=$(v,st,Q,pe,ve),se.promise)}function ne(ee){var pe=W||S(ee,"disableForReducedMotion",Boolean),ve=S(ee,"zIndex",Number);if(pe&&V)return c(function(Ce){Ce()});j&&se?v=se.canvas:j&&!v&&(v=U(ve),document.body.appendChild(v)),H&&!D&&Q(v);var he={width:v.width,height:v.height};G&&!D&&G.init(v),D=!0,G&&(v.__confetti_initialized=!0);function _e(){if(G){var Ce={getBoundingClientRect:function(){if(!j)return v.getBoundingClientRect()}};Q(Ce),G.postMessage({resize:{width:Ce.width,height:Ce.height}});return}he.width=he.height=null}function Ne(){se=null,H&&(R=!1,e.removeEventListener("resize",_e)),j&&v&&(document.body.contains(v)&&document.body.removeChild(v),v=null,D=!1)}return H&&!R&&(R=!0,e.addEventListener("resize",_e,!1)),G?G.fire(ee,he,Ne):ie(ee,he,Ne)}return ne.reset=function(){G&&G.reset(),se&&se.reset()},ne}var F;function K(){return F||(F=A(null,{useWorker:!0,resize:!0})),F}function Z(v,g,j,H,R,W,J){var G=new Path2D(v),Q=new Path2D;Q.addPath(G,new DOMMatrix(g));var D=new Path2D;return D.addPath(Q,new DOMMatrix([Math.cos(J)*R,Math.sin(J)*R,-Math.sin(J)*W,Math.cos(J)*W,j,H])),D}function oe(v){if(!o)throw new Error("path confetti are not supported in this browser");var g,j;typeof v=="string"?g=v:(g=v.path,j=v.matrix);var H=new Path2D(g),R=document.createElement("canvas"),W=R.getContext("2d");if(!j){for(var J=1e3,G=J,Q=J,D=0,V=0,se,ie,ne=0;ne<J;ne+=2)for(var ee=0;ee<J;ee+=2)W.isPointInPath(H,ne,ee,"nonzero")&&(G=Math.min(G,ne),Q=Math.min(Q,ee),D=Math.max(D,ne),V=Math.max(V,ee));se=D-G,ie=V-Q;var pe=10,ve=Math.min(pe/se,pe/ie);j=[ve,0,0,ve,-Math.round(se/2+G)*ve,-Math.round(ie/2+Q)*ve]}return{type:"path",path:g,matrix:j}}function X(v){var g,j=1,H="#000000",R='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof v=="string"?g=v:(g=v.text,j="scalar"in v?v.scalar:j,R="fontFamily"in v?v.fontFamily:R,H="color"in v?v.color:H);var W=10*j,J=""+W+"px "+R,G=new OffscreenCanvas(W,W),Q=G.getContext("2d");Q.font=J;var D=Q.measureText(g),V=Math.ceil(D.actualBoundingBoxRight+D.actualBoundingBoxLeft),se=Math.ceil(D.actualBoundingBoxAscent+D.actualBoundingBoxDescent),ie=2,ne=D.actualBoundingBoxLeft+ie,ee=D.actualBoundingBoxAscent+ie;V+=ie+ie,se+=ie+ie,G=new OffscreenCanvas(V,se),Q=G.getContext("2d"),Q.font=J,Q.fillStyle=H,Q.fillText(g,ne,ee);var pe=1/j;return{type:"bitmap",bitmap:G.transferToImageBitmap(),matrix:[pe,0,0,pe,-V*pe/2,-se*pe/2]}}t.exports=function(){return K().apply(this,arguments)},t.exports.reset=function(){K().reset()},t.exports.create=A,t.exports.shapeFromPath=oe,t.exports.shapeFromText=X})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),xt,!1);const fl=xt.exports;xt.exports.create;function as(l,e,t){const s=l.slice();return s[23]=e[t].profile,s[24]=e[t].status,s}function Er(l){let e;return{c(){e=L("üîç Search")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function Or(l){let e,t;return{c(){e=f("span"),t=L(`
						Checking membership...`),a(e,"class","loading-spinner svelte-165a6uh")},m(s,n){I(s,e,n),I(s,t,n)},d(s){s&&(C(e),C(t))}}}function Nr(l){let e,t;return{c(){e=f("span"),t=L(`
						Searching...`),a(e,"class","loading-spinner svelte-165a6uh")},m(s,n){I(s,e,n),I(s,t,n)},d(s){s&&(C(e),C(t))}}}function cs(l){let e,t,s;return{c(){e=f("div"),t=f("p"),s=L(l[5]),a(t,"class","text-red-700"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,r){I(n,e,r),i(e,t),i(t,s)},p(n,r){r&32&&Y(s,n[5])},d(n){n&&C(e)}}}function Rr(l){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">üîç</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',a(e,"class","text-center py-8")},m(t,s){I(t,e,s)},p:le,i:le,o:le,d(t){t&&C(e)}}}function zr(l){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">üîç</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',a(e,"class","text-center py-8")},m(t,s){I(t,e,s)},p:le,i:le,o:le,d(t){t&&C(e)}}}function Br(l){let e,t,s,n=me(l[8]),r=[];for(let d=0;d<n.length;d+=1)r[d]=us(as(l,n,d));const o=d=>ce(r[d],1,1,()=>{r[d]=null});let u=l[6]&&ds(l);return{c(){e=f("div");for(let d=0;d<r.length;d+=1)r[d].c();t=w(),u&&u.c(),a(e,"class","space-y-4")},m(d,c){I(d,e,c);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(e,null);i(e,t),u&&u.m(e,null),s=!0},p(d,c){if(c&6530){n=me(d[8]);let m;for(m=0;m<n.length;m+=1){const p=as(d,n,m);r[m]?(r[m].p(p,c),ae(r[m],1)):(r[m]=us(p),r[m].c(),ae(r[m],1),r[m].m(e,t))}for($e(),m=n.length;m<r.length;m+=1)o(m);et()}d[6]?u?u.p(d,c):(u=ds(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(d){if(!s){for(let c=0;c<n.length;c+=1)ae(r[c]);s=!0}},o(d){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)ce(r[c]);s=!1},d(d){d&&C(e),Ue(r,d),u&&u.d()}}}function Fr(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="loading-spinner mx-auto mb-4 svelte-165a6uh"></div> <p class="text-slate-600">Checking membership status...</p>',a(e,"class","text-center py-8")},m(t,s){I(t,e,s)},p:le,i:le,o:le,d(t){t&&C(e)}}}function us(l){let e,t;return e=new Tr({props:{profile:l[23],isSelected:l[1].has(l[23].did),onSelect:l[11],statusTag:l[24],clickable:!0,onAddToList:l[12],isAddingToList:l[7].has(l[23].did)}}),{c(){Te(e.$$.fragment)},m(s,n){Le(e,s,n),t=!0},p(s,n){const r={};n&256&&(r.profile=s[23]),n&258&&(r.isSelected=s[1].has(s[23].did)),n&256&&(r.statusTag=s[24]),n&384&&(r.isAddingToList=s[7].has(s[23].did)),e.$set(r)},i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function ds(l){let e,t,s,n;function r(d,c){return d[3]?Dr:Ur}let o=r(l),u=o(l);return{c(){e=f("div"),t=f("button"),u.c(),t.disabled=l[3],a(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","text-center pt-4 border-t border-gray-200")},m(d,c){I(d,e,c),i(e,t),u.m(t,null),s||(n=re(t,"click",l[10]),s=!0)},p(d,c){o!==(o=r(d))&&(u.d(1),u=o(d),u&&(u.c(),u.m(t,null))),c&8&&(t.disabled=d[3])},d(d){d&&C(e),u.d(),s=!1,n()}}}function Ur(l){let e;return{c(){e=L("Load More Results")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function Dr(l){let e,t;return{c(){e=f("span"),t=L(`
								Loading...`),a(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(s,n){I(s,e,n),I(s,t,n)},d(s){s&&(C(e),C(t))}}}function jr(l){let e,t,s,n,r,o,u,d,c,m,p,b,h,y,_,S,O,T;function x(M,B){return M[3]?Nr:M[4]?Or:Er}let N=x(l),E=N(l),P=l[5]&&cs(l);const z=[Fr,Br,zr,Rr],k=[];function U(M,B){return M[4]?0:M[0].length>0?1:M[2]&&!M[3]?2:M[2]?-1:3}return~(y=U(l))&&(_=k[y]=z[y](l)),{c(){e=f("div"),t=f("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',s=w(),n=f("div"),r=f("form"),o=f("div"),u=f("label"),u.textContent="Search for:",d=w(),c=f("input"),m=w(),p=f("button"),E.c(),b=w(),P&&P.c(),h=w(),_&&_.c(),a(t,"class","p-6 border-b border-gray-200"),a(u,"for","search-input"),a(u,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),a(c,"id","search-input"),a(c,"type","text"),a(c,"placeholder","e.g., belge, artist, developer..."),a(c,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),c.required=!0,a(p,"type","submit"),p.disabled=l[3],a(p,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(o,"class","flex gap-4 items-center flex-wrap"),a(r,"class","mb-6"),a(n,"id","profile-search-container"),a(n,"class","p-6"),a(e,"class","bg-white rounded-lg shadow-sm border border-gray-200"),a(e,"id","profile-search")},m(M,B){I(M,e,B),i(e,t),i(e,s),i(e,n),i(n,r),i(r,o),i(o,u),i(o,d),i(o,c),ge(c,l[2]),i(o,m),i(o,p),E.m(p,null),i(n,b),P&&P.m(n,null),i(n,h),~y&&k[y].m(n,null),S=!0,O||(T=[re(c,"input",l[16]),re(r,"submit",hl(l[9]))],O=!0)},p(M,[B]){B&4&&c.value!==M[2]&&ge(c,M[2]),N!==(N=x(M))&&(E.d(1),E=N(M),E&&(E.c(),E.m(p,null))),(!S||B&8)&&(p.disabled=M[3]),M[5]?P?P.p(M,B):(P=cs(M),P.c(),P.m(n,h)):P&&(P.d(1),P=null);let q=y;y=U(M),y===q?~y&&k[y].p(M,B):(_&&($e(),ce(k[q],1,1,()=>{k[q]=null}),et()),~y?(_=k[y],_?_.p(M,B):(_=k[y]=z[y](M),_.c()),ae(_,1),_.m(n,null)):_=null)},i(M){S||(ae(_),S=!0)},o(M){ce(_),S=!1},d(M){M&&C(e),E.d(),P&&P.d(),~y&&k[y].d(),O=!1,Me(T)}}}function Hr(l,e,t){let s,n,r;Ae(l,Pe,k=>t(18,n=k)),Ae(l,fe,k=>t(15,r=k));let o="",u=[],d=!1,c=!1,m="",p=new Set,b=null,h=!1,y=new Set;async function _(){if(!(!o.trim()||!n.session)){t(3,d=!0),t(4,c=!1),t(5,m=""),t(0,u=[]),p.clear(),b=null,t(6,h=!1);try{const k=await be.searchProfiles(n.session,o,n.authType);t(4,c=!0);const U=await P(k.actors||[]);t(0,u=U),b=k.cursor,t(6,h=!!k.cursor)}catch(k){t(5,m=k.message||"Failed to search profiles")}finally{t(3,d=!1),t(4,c=!1)}}}async function S(){if(!(!h||d||!n.session)){t(3,d=!0),t(4,c=!1),t(5,m="");try{const k=await be.searchProfiles(n.session,o,n.authType,25,b);t(4,c=!0);const U=await P(k.actors||[]);t(0,u=[...u,...U]),b=k.cursor,t(6,h=!!k.cursor)}catch(k){t(5,m=k.message||"Failed to load more profiles")}finally{t(3,d=!1),t(4,c=!1)}}}function O(k){p.has(k.did)?p.delete(k.did):p.add(k.did),t(1,p)}let T=null,x=!0;async function N(k){if(!(!n.session||!r.selectedList||y.has(k.did))){y.add(k.did),t(7,y);try{await be.addToList(n.session,k.did,r.selectedList.uri),await fe.fetchAndAddProfile(n.session,k.did),E()}catch(U){console.error("Failed to add profile to list:",U)}finally{y.delete(k.did),t(7,y)}}}function E(){fl({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{fl({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{fl({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}async function P(k){if(!k.length||!r.selectedList)return k;const U=await fe.getAllListMemberDids(n.session,n.authType);return k.map(B=>({...B,_isInList:U.has(B.did)}))}function z(){o=this.value,t(2,o),t(15,r),t(14,x),t(13,T),t(1,p)}return l.$$.update=()=>{l.$$.dirty&57346&&r.selectedList&&(!x&&T&&T!==r.selectedList.uri&&(t(2,o=""),t(0,u=[]),p.clear(),b=null,t(6,h=!1),t(5,m="")),t(13,T=r.selectedList.uri),t(14,x=!1)),l.$$.dirty&32769&&t(8,s=u.map(k=>({profile:k,status:k._isInList||r.listMembers.includes(k.did)?"Already in list":"New candidate"})))},[u,p,o,d,c,m,h,y,s,_,S,O,N,T,x,r,z]}class Wr extends Oe{constructor(e){super(),Ee(this,e,Hr,jr,xe,{})}}function fs(l,e,t){const s=l.slice();return s[15]=e[t],s}function ms(l,e,t){const s=l.slice();return s[18]=e[t],s}function ps(l){let e,t=l[2].selectedList.description+"",s;return{c(){e=f("p"),s=L(t),a(e,"class","text-slate-600 mt-1")},m(n,r){I(n,e,r),i(e,s)},p(n,r){r&4&&t!==(t=n[2].selectedList.description+"")&&Y(s,t)},d(n){n&&C(e)}}}function gs(l){let e,t,s,n,r,o,u,d,c,m=l[4].length.toLocaleString()+"",p,b,h=l[0].totalMembers.toLocaleString()+"",y,_,S,O,T,x,N;return{c(){e=f("div"),t=f("div"),s=f("div"),n=w(),r=f("div"),o=f("div"),o.textContent="Calculating comprehensive statistics...",u=w(),d=f("div"),c=L("Processing "),p=L(m),b=L(" of "),y=L(h),_=L(`
						members (`),S=L(l[3]),O=L("%)"),T=w(),x=f("div"),N=f("div"),a(s,"class","loading-spinner svelte-1myfg8v"),a(o,"class","text-blue-700 font-medium"),a(d,"class","text-blue-600 text-sm"),a(t,"class","flex items-center justify-center space-x-3"),a(N,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),ue(N,"width",l[3]+"%"),a(x,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(E,P){I(E,e,P),i(e,t),i(t,s),i(t,n),i(t,r),i(r,o),i(r,u),i(r,d),i(d,c),i(d,p),i(d,b),i(d,y),i(d,_),i(d,S),i(d,O),i(e,T),i(e,x),i(x,N)},p(E,P){P&16&&m!==(m=E[4].length.toLocaleString()+"")&&Y(p,m),P&1&&h!==(h=E[0].totalMembers.toLocaleString()+"")&&Y(y,h),P&8&&Y(S,E[3]),P&8&&ue(N,"width",E[3]+"%")},d(E){E&&C(e)}}}function qr(l){let e,t,s,n,r,o=l[0].avgBioLength+"",u,d,c,m,p,b,h,y=l[0].accountsWithBios.toLocaleString()+"",_,S,O=l[0].totalMembers.toLocaleString()+"",T,x,N,E,P,z,k=l[0].accountsWithDisplayNames.toLocaleString()+"",U,M,B=l[0].totalMembers.toLocaleString()+"",q,$,A=l[0].mostCommonWords.length>0&&hs(l);return{c(){e=f("div"),t=f("div"),s=f("span"),s.textContent="Average bio length:",n=w(),r=f("span"),u=L(o),d=L(" characters"),c=w(),m=f("div"),p=f("span"),p.textContent="Bios with content:",b=w(),h=f("span"),_=L(y),S=L(" / "),T=L(O),x=w(),N=f("div"),E=f("span"),E.textContent="Display names:",P=w(),z=f("span"),U=L(k),M=L(" / "),q=L(B),$=w(),A&&A.c(),a(s,"class","text-gray-600"),a(r,"class","font-medium"),a(t,"class","flex justify-between text-sm"),a(p,"class","text-gray-600"),a(h,"class","font-medium"),a(m,"class","flex justify-between text-sm"),a(E,"class","text-gray-600"),a(z,"class","font-medium"),a(N,"class","flex justify-between text-sm"),a(e,"class","space-y-2")},m(F,K){I(F,e,K),i(e,t),i(t,s),i(t,n),i(t,r),i(r,u),i(r,d),i(e,c),i(e,m),i(m,p),i(m,b),i(m,h),i(h,_),i(h,S),i(h,T),i(e,x),i(e,N),i(N,E),i(N,P),i(N,z),i(z,U),i(z,M),i(z,q),i(e,$),A&&A.m(e,null)},p(F,K){K&1&&o!==(o=F[0].avgBioLength+"")&&Y(u,o),K&1&&y!==(y=F[0].accountsWithBios.toLocaleString()+"")&&Y(_,y),K&1&&O!==(O=F[0].totalMembers.toLocaleString()+"")&&Y(T,O),K&1&&k!==(k=F[0].accountsWithDisplayNames.toLocaleString()+"")&&Y(U,k),K&1&&B!==(B=F[0].totalMembers.toLocaleString()+"")&&Y(q,B),F[0].mostCommonWords.length>0?A?A.p(F,K):(A=hs(F),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},d(F){F&&C(e),A&&A.d()}}}function Kr(l){let e;return{c(){e=f("div"),e.textContent="Calculating comprehensive bio statistics...",a(e,"class","text-gray-500 text-sm")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function hs(l){let e,t,s,n,r=me(l[0].mostCommonWords),o=[];for(let u=0;u<r.length;u+=1)o[u]=bs(ms(l,r,u));return{c(){e=f("div"),t=f("div"),t.textContent="Most common words:",s=w(),n=f("div");for(let u=0;u<o.length;u+=1)o[u].c();a(t,"class","text-xs text-gray-500 mb-2"),a(n,"class","flex flex-wrap gap-1"),a(e,"class","mt-3")},m(u,d){I(u,e,d),i(e,t),i(e,s),i(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(u,d){if(d&1){r=me(u[0].mostCommonWords);let c;for(c=0;c<r.length;c+=1){const m=ms(u,r,c);o[c]?o[c].p(m,d):(o[c]=bs(m),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(u){u&&C(e),Ue(o,u)}}}function bs(l){let e,t=l[18].word+"",s,n,r=l[18].count+"",o,u;return{c(){e=f("span"),s=L(t),n=L(" ("),o=L(r),u=L(`)
									`),a(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(d,c){I(d,e,c),i(e,s),i(e,n),i(e,o),i(e,u)},p(d,c){c&1&&t!==(t=d[18].word+"")&&Y(s,t),c&1&&r!==(r=d[18].count+"")&&Y(o,r)},d(d){d&&C(e)}}}function Yr(l){let e,t,s,n,r,o=l[0].avgHandleLength+"",u,d,c,m=l[0].topDomains.length>0&&vs(l);return{c(){e=f("div"),t=f("div"),s=f("span"),s.textContent="Average handle length:",n=w(),r=f("span"),u=L(o),d=L(" characters"),c=w(),m&&m.c(),a(s,"class","text-gray-600"),a(r,"class","font-medium"),a(t,"class","flex justify-between text-sm"),a(e,"class","space-y-2")},m(p,b){I(p,e,b),i(e,t),i(t,s),i(t,n),i(t,r),i(r,u),i(r,d),i(e,c),m&&m.m(e,null)},p(p,b){b&1&&o!==(o=p[0].avgHandleLength+"")&&Y(u,o),p[0].topDomains.length>0?m?m.p(p,b):(m=vs(p),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(p){p&&C(e),m&&m.d()}}}function Vr(l){let e;return{c(){e=f("div"),e.textContent="Calculating handle statistics...",a(e,"class","text-gray-500 text-sm")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function vs(l){let e,t,s,n,r=me(l[0].topDomains),o=[];for(let u=0;u<r.length;u+=1)o[u]=_s(fs(l,r,u));return{c(){e=f("div"),t=f("div"),t.textContent="Top domains:",s=w(),n=f("div");for(let u=0;u<o.length;u+=1)o[u].c();a(t,"class","text-xs text-gray-500 mb-2"),a(n,"class","space-y-1"),a(e,"class","mt-3")},m(u,d){I(u,e,d),i(e,t),i(e,s),i(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(u,d){if(d&1){r=me(u[0].topDomains);let c;for(c=0;c<r.length;c+=1){const m=fs(u,r,c);o[c]?o[c].p(m,d):(o[c]=_s(m),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(u){u&&C(e),Ue(o,u)}}}function _s(l){let e,t,s,n=l[15].domain+"",r,o,u,d=l[15].count+"",c,m,p;return{c(){e=f("div"),t=f("span"),s=L("."),r=L(n),o=w(),u=f("span"),c=L(d),m=L(" users"),p=w(),a(t,"class","font-medium"),a(u,"class","text-gray-600"),a(e,"class","flex justify-between text-xs")},m(b,h){I(b,e,h),i(e,t),i(t,s),i(t,r),i(e,o),i(e,u),i(u,c),i(u,m),i(e,p)},p(b,h){h&1&&n!==(n=b[15].domain+"")&&Y(r,n),h&1&&d!==(d=b[15].count+"")&&Y(c,d)},d(b){b&&C(e)}}}function Jr(l){let e;return{c(){e=L("Unknown")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function Zr(l){let e=new Date(l[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=L(e)},m(s,n){I(s,t,n)},p(s,n){n&4&&e!==(e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"")&&Y(t,e)},d(s){s&&C(t)}}}function Gr(l){var jl,Hl,Wl;let e,t,s,n,r=(((jl=l[2].selectedList)==null?void 0:jl.name)||"List")+"",o,u,d,c,m,p=l[0].totalMembers.toLocaleString()+"",b,h,y,_,S,O,T,x,N,E,P,z,k=l[1]?"...":pt(l[0].accountsWithBios,l[0].totalMembers)+"%",U,M,B,q,$,A=l[1]?"Calculating...":`${l[0].accountsWithBios.toLocaleString()} have bios`,F,K,Z,oe,X,v,g,j,H=l[1]?"...":pt(l[0].verifiedAccounts,l[0].totalMembers)+"%",R,W,J,G,Q,D=l[1]?"Calculating...":`${l[0].verifiedAccounts.toLocaleString()} verified accounts`,V,se,ie,ne,ee,pe,ve,he,_e=l[1]?"...":pt(l[0].accountsWithAvatars,l[0].totalMembers)+"%",Ne,Ce,tt,Ct,lt,Ye=l[1]?"Calculating...":`${l[0].accountsWithAvatars.toLocaleString()} have avatars`,vt,_t,De,je,He,Ve,st,nt,rt=l[0].listAge+"",nl,_l,It,yl,Pt,wl,We,Je,At,kl,Ll,Ze,Tt,Sl,Ml,it,Et,xl,Re,ot,Ot,Cl,Nt,Rt=((Hl=l[2].selectedList)==null?void 0:Hl.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",rl,Il,at,zt,Pl,yt,Al,ct,Bt,Tl,wt,Ft=l[0].growthRate+"",il,El,Ol,ut,Ut,Nl,Dt,jt=l[1]?"Calculating...":`${l[0].recentAdditions} in last batch`,ol,Rl,Ht,dt,kt,zl,Ge,Wt=l[1]?"Calculating...":"Refresh Stats",al,cl,Bl,ye=((Wl=l[2].selectedList)==null?void 0:Wl.description)&&ps(l),we=l[1]&&gs(l);function Fl(te,de){return te[1]?Kr:qr}let qt=Fl(l),ze=qt(l);function Ul(te,de){return te[1]?Vr:Yr}let Kt=Ul(l),Be=Kt(l);function Dl(te,de){var Lt;return(Lt=te[2].selectedList)!=null&&Lt.createdAt?Zr:Jr}let Yt=Dl(l),Fe=Yt(l);return{c(){e=f("div"),t=f("div"),s=f("div"),n=f("h2"),o=L(r),u=w(),ye&&ye.c(),d=w(),c=f("div"),m=f("div"),b=L(p),h=w(),y=f("div"),y.textContent="Total Members",_=w(),we&&we.c(),S=w(),O=f("div"),T=f("div"),x=f("div"),N=f("div"),E=f("div"),E.textContent="üìä Engagement",P=w(),z=f("div"),U=L(k),M=w(),B=f("div"),B.textContent="üí¨",q=w(),$=f("div"),F=L(A),K=w(),Z=f("div"),oe=f("div"),X=f("div"),v=f("div"),v.textContent="‚úÖ Verified",g=w(),j=f("div"),R=L(H),W=w(),J=f("div"),J.textContent="‚úì",G=w(),Q=f("div"),V=L(D),se=w(),ie=f("div"),ne=f("div"),ee=f("div"),pe=f("div"),pe.textContent="üñºÔ∏è Complete",ve=w(),he=f("div"),Ne=L(_e),Ce=w(),tt=f("div"),tt.textContent="üë§",Ct=w(),lt=f("div"),vt=L(Ye),_t=w(),De=f("div"),je=f("div"),He=f("div"),Ve=f("div"),Ve.textContent="üìÖ Age",st=w(),nt=f("div"),nl=L(rt),_l=w(),It=f("div"),It.textContent="üìÜ",yl=w(),Pt=f("div"),Pt.textContent="days old",wl=w(),We=f("div"),Je=f("div"),At=f("h3"),At.textContent="üìù Bio Analysis",kl=w(),ze.c(),Ll=w(),Ze=f("div"),Tt=f("h3"),Tt.textContent="üîó Handle Analysis",Sl=w(),Be.c(),Ml=w(),it=f("div"),Et=f("h3"),Et.textContent="üìã List Details",xl=w(),Re=f("div"),ot=f("div"),Ot=f("span"),Ot.textContent="Type:",Cl=w(),Nt=f("span"),rl=L(Rt),Il=w(),at=f("div"),zt=f("span"),zt.textContent="Created:",Pl=w(),yt=f("span"),Fe.c(),Al=w(),ct=f("div"),Bt=f("span"),Bt.textContent="Growth rate:",Tl=w(),wt=f("span"),il=L(Ft),El=L(" members/day"),Ol=w(),ut=f("div"),Ut=f("span"),Ut.textContent="Recent activity:",Nl=w(),Dt=f("span"),ol=L(jt),Rl=w(),Ht=f("div"),dt=f("div"),kt=f("button"),kt.textContent="View on Bluesky",zl=w(),Ge=f("button"),al=L(Wt),a(n,"class","text-xl font-bold text-slate-800"),a(m,"class","text-3xl font-bold text-blue-600"),a(y,"class","text-sm text-slate-500"),a(c,"class","text-right"),a(t,"class","flex items-center justify-between mb-6"),a(E,"class","text-blue-600 font-semibold text-sm"),a(z,"class","text-2xl font-bold text-blue-700"),a(B,"class","text-blue-400 text-3xl"),a(x,"class","flex items-center justify-between"),a($,"class","text-xs text-blue-600 mt-1"),a(T,"class","bg-blue-50 p-4 rounded-lg"),a(v,"class","text-green-600 font-semibold text-sm"),a(j,"class","text-2xl font-bold text-green-700"),a(J,"class","text-green-400 text-3xl"),a(oe,"class","flex items-center justify-between"),a(Q,"class","text-xs text-green-600 mt-1"),a(Z,"class","bg-green-50 p-4 rounded-lg"),a(pe,"class","text-purple-600 font-semibold text-sm"),a(he,"class","text-2xl font-bold text-purple-700"),a(tt,"class","text-purple-400 text-3xl"),a(ne,"class","flex items-center justify-between"),a(lt,"class","text-xs text-purple-600 mt-1"),a(ie,"class","bg-purple-50 p-4 rounded-lg"),a(Ve,"class","text-yellow-600 font-semibold text-sm"),a(nt,"class","text-2xl font-bold text-yellow-700"),a(It,"class","text-yellow-400 text-3xl"),a(je,"class","flex items-center justify-between"),a(Pt,"class","text-xs text-yellow-600 mt-1"),a(De,"class","bg-yellow-50 p-4 rounded-lg"),a(O,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),a(At,"class","text-sm font-semibold text-gray-700 mb-3"),a(Je,"class","bg-gray-50 p-4 rounded-lg"),a(Tt,"class","text-sm font-semibold text-gray-700 mb-3"),a(Ze,"class","bg-gray-50 p-4 rounded-lg"),a(Et,"class","text-sm font-semibold text-gray-700 mb-3"),a(Ot,"class","text-gray-600"),a(Nt,"class","font-medium"),a(ot,"class","flex justify-between text-sm"),a(zt,"class","text-gray-600"),a(yt,"class","font-medium"),a(at,"class","flex justify-between text-sm"),a(Bt,"class","text-gray-600"),a(wt,"class","font-medium"),a(ct,"class","flex justify-between text-sm"),a(Ut,"class","text-gray-600"),a(Dt,"class","font-medium"),a(ut,"class","flex justify-between text-sm"),a(Re,"class","space-y-2"),a(it,"class","bg-gray-50 p-4 rounded-lg"),a(We,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),a(kt,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),a(Ge,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),Ge.disabled=l[1],a(dt,"class","flex flex-wrap gap-2"),a(Ht,"class","mt-6 pt-4 border-t border-gray-200"),a(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),a(e,"id","list-statistics")},m(te,de){I(te,e,de),i(e,t),i(t,s),i(s,n),i(n,o),i(s,u),ye&&ye.m(s,null),i(t,d),i(t,c),i(c,m),i(m,b),i(c,h),i(c,y),i(e,_),we&&we.m(e,null),i(e,S),i(e,O),i(O,T),i(T,x),i(x,N),i(N,E),i(N,P),i(N,z),i(z,U),i(x,M),i(x,B),i(T,q),i(T,$),i($,F),i(O,K),i(O,Z),i(Z,oe),i(oe,X),i(X,v),i(X,g),i(X,j),i(j,R),i(oe,W),i(oe,J),i(Z,G),i(Z,Q),i(Q,V),i(O,se),i(O,ie),i(ie,ne),i(ne,ee),i(ee,pe),i(ee,ve),i(ee,he),i(he,Ne),i(ne,Ce),i(ne,tt),i(ie,Ct),i(ie,lt),i(lt,vt),i(O,_t),i(O,De),i(De,je),i(je,He),i(He,Ve),i(He,st),i(He,nt),i(nt,nl),i(je,_l),i(je,It),i(De,yl),i(De,Pt),i(e,wl),i(e,We),i(We,Je),i(Je,At),i(Je,kl),ze.m(Je,null),i(We,Ll),i(We,Ze),i(Ze,Tt),i(Ze,Sl),Be.m(Ze,null),i(We,Ml),i(We,it),i(it,Et),i(it,xl),i(it,Re),i(Re,ot),i(ot,Ot),i(ot,Cl),i(ot,Nt),i(Nt,rl),i(Re,Il),i(Re,at),i(at,zt),i(at,Pl),i(at,yt),Fe.m(yt,null),i(Re,Al),i(Re,ct),i(ct,Bt),i(ct,Tl),i(ct,wt),i(wt,il),i(wt,El),i(Re,Ol),i(Re,ut),i(ut,Ut),i(ut,Nl),i(ut,Dt),i(Dt,ol),i(e,Rl),i(e,Ht),i(Ht,dt),i(dt,kt),i(dt,zl),i(dt,Ge),i(Ge,al),cl||(Bl=[re(kt,"click",l[8]),re(Ge,"click",l[6])],cl=!0)},p(te,[de]){var Lt,ql,Kl;de&4&&r!==(r=(((Lt=te[2].selectedList)==null?void 0:Lt.name)||"List")+"")&&Y(o,r),(ql=te[2].selectedList)!=null&&ql.description?ye?ye.p(te,de):(ye=ps(te),ye.c(),ye.m(s,null)):ye&&(ye.d(1),ye=null),de&1&&p!==(p=te[0].totalMembers.toLocaleString()+"")&&Y(b,p),te[1]?we?we.p(te,de):(we=gs(te),we.c(),we.m(e,S)):we&&(we.d(1),we=null),de&3&&k!==(k=te[1]?"...":pt(te[0].accountsWithBios,te[0].totalMembers)+"%")&&Y(U,k),de&3&&A!==(A=te[1]?"Calculating...":`${te[0].accountsWithBios.toLocaleString()} have bios`)&&Y(F,A),de&3&&H!==(H=te[1]?"...":pt(te[0].verifiedAccounts,te[0].totalMembers)+"%")&&Y(R,H),de&3&&D!==(D=te[1]?"Calculating...":`${te[0].verifiedAccounts.toLocaleString()} verified accounts`)&&Y(V,D),de&3&&_e!==(_e=te[1]?"...":pt(te[0].accountsWithAvatars,te[0].totalMembers)+"%")&&Y(Ne,_e),de&3&&Ye!==(Ye=te[1]?"Calculating...":`${te[0].accountsWithAvatars.toLocaleString()} have avatars`)&&Y(vt,Ye),de&1&&rt!==(rt=te[0].listAge+"")&&Y(nl,rt),qt===(qt=Fl(te))&&ze?ze.p(te,de):(ze.d(1),ze=qt(te),ze&&(ze.c(),ze.m(Je,null))),Kt===(Kt=Ul(te))&&Be?Be.p(te,de):(Be.d(1),Be=Kt(te),Be&&(Be.c(),Be.m(Ze,null))),de&4&&Rt!==(Rt=((Kl=te[2].selectedList)==null?void 0:Kl.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&Y(rl,Rt),Yt===(Yt=Dl(te))&&Fe?Fe.p(te,de):(Fe.d(1),Fe=Yt(te),Fe&&(Fe.c(),Fe.m(yt,null))),de&1&&Ft!==(Ft=te[0].growthRate+"")&&Y(il,Ft),de&3&&jt!==(jt=te[1]?"Calculating...":`${te[0].recentAdditions} in last batch`)&&Y(ol,jt),de&2&&Wt!==(Wt=te[1]?"Calculating...":"Refresh Stats")&&Y(al,Wt),de&2&&(Ge.disabled=te[1])},i:le,o:le,d(te){te&&C(e),ye&&ye.d(),we&&we.d(),ze.d(),Be.d(),Fe.d(),cl=!1,Me(Bl)}}}function pt(l,e){return e===0?0:Math.round(l/e*100)}function Qr(l,e,t){let s,n;Ae(l,fe,T=>t(2,s=T)),Ae(l,Pe,T=>t(5,n=T));let r={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,u=0,d=[],c=null,m=!1,p=null;function b(){t(0,r={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,u=0),t(4,d=[])}function h(){var P,z;s.listMemberProfiles;const T=((P=s.selectedList)==null?void 0:P.listItemCount)||0,x=(z=s.selectedList)==null?void 0:z.createdAt,N=x?Math.floor((Date.now()-new Date(x).getTime())/(1e3*60*60*24)):0,E=N>0?Math.round(T/N):0;t(0,r={...r,totalMembers:T,listAge:N,growthRate:E})}async function y(){if(!n.session||!s.selectedList||o)return;const T=Date.now();c=T,t(1,o=!0),t(3,u=0),t(4,d=[]);try{const x=s.selectedList.listItemCount||0;if(x===0){_([]),m=!0;return}let N=null,E=0;const P=100;do{E++,t(3,u=Math.round(d.length/x*100));const z=await be.getListMembers(n.session,s.selectedList.uri,n.authType,P,N);if(c!==T)return;t(4,d=[...d,...z.profiles]),N=z.cursor,t(3,u=Math.round(d.length/x*100))}while(N&&d.length<x);if(c!==T)return;_(d),m=!0}catch(x){console.error("Error loading all members for statistics:",x),h(),m=!0}finally{c===T&&(t(1,o=!1),t(3,u=0))}}function _(T){var H;const x=T.length,N=T.filter(R=>R.verified).length,E=T.filter(R=>R.avatar).length,P=T.filter(R=>R.description&&R.description.trim().length>0).length,z=T.filter(R=>R.displayName&&R.displayName.trim().length>0).length,k=T.map(R=>R.description||"").filter(R=>R.trim().length>0),U=k.length>0?Math.round(k.reduce((R,W)=>R+W.length,0)/k.length):0,M=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],B=k.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(R=>R.length>2&&!M.includes(R)),q={};B.forEach(R=>{q[R]=(q[R]||0)+1});const $=Object.entries(q).sort(([,R],[,W])=>W-R).slice(0,5).map(([R,W])=>({word:R,count:W})),A=T.map(R=>R.handle||"").filter(R=>R.length>0),F=A.length>0?Math.round(A.reduce((R,W)=>R+W.length,0)/A.length):0,K=A.map(R=>{const W=R.split(".");return W.length>1?W[W.length-1]:null}).filter(R=>R&&R.length>0),Z={};K.forEach(R=>{Z[R]=(Z[R]||0)+1});const oe=Object.entries(Z).sort(([,R],[,W])=>W-R).slice(0,3).map(([R,W])=>({domain:R,count:W})),X=(H=s.selectedList)==null?void 0:H.createdAt,v=X?Math.floor((Date.now()-new Date(X).getTime())/(1e3*60*60*24)):0,g=v>0?Math.round(x/v):0,j=Math.min(25,T.length);t(0,r={totalMembers:x,recentAdditions:j,verifiedAccounts:N,accountsWithAvatars:E,accountsWithBios:P,avgBioLength:U,mostCommonWords:$,listAge:v,accountsWithDisplayNames:z,avgHandleLength:F,topDomains:oe,growthRate:g})}function S(){o||(m=!1,y())}const O=()=>{var x,N,E;const T=(x=s.selectedList)==null?void 0:x.uri;if(T){const P=T.split("/"),z=P[P.length-1],k=`https://bsky.app/profile/${(N=n.session)==null?void 0:N.handle}/lists/${z}`;window.open(k,"_blank")}else window.open(`https://bsky.app/profile/${(E=n.session)==null?void 0:E.handle}/lists`,"_blank")};return l.$$.update=()=>{var T,x;l.$$.dirty&4&&s.selectedList&&h(),l.$$.dirty&7&&((T=s.selectedList)==null?void 0:T.listItemCount)!==r.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(x=s.selectedList)==null?void 0:x.listItemCount),console.log("Current stats.totalMembers:",r.totalMembers),h()),l.$$.dirty&132&&!s.selectedList&&p!==null&&(t(7,p=null),m=!1,b()),l.$$.dirty&134&&s.selectedList&&s.selectedList.uri!==p&&!o&&(t(7,p=s.selectedList.uri),m=!1,b(),y())},[r,o,s,u,d,n,S,p,O]}class Xr extends Oe{constructor(e){super(),Ee(this,e,Qr,Gr,xe,{})}}function ys(l,e,t){const s=l.slice();return s[29]=e[t],s}function ws(l,e,t){const s=l.slice();return s[35]=e[t],s}function ks(l,e,t){const s=l.slice();return s[32]=e[t],s}function Ls(l,e,t){const s=l.slice();return s[38]=e[t],s}function Ss(l,e,t){const s=l.slice();return s[38]=e[t],s}function Ms(l){let e,t,s,n,r,o,u=l[4].size+"",d,c,m,p;function b(_,S){return _[5]?ei:$r}let h=b(l),y=h(l);return{c(){e=f("div"),t=f("div"),s=f("div"),n=f("button"),y.c(),r=w(),o=f("div"),d=L(u),c=L(" profiles selected"),n.disabled=l[5],a(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),a(s,"class","flex items-center gap-3"),a(o,"class","text-sm text-slate-600"),a(t,"class","flex items-center justify-between"),a(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm"),a(e,"id","action-bar")},m(_,S){I(_,e,S),i(e,t),i(t,s),i(s,n),y.m(n,null),i(t,r),i(t,o),i(o,d),i(o,c),m||(p=re(n,"click",l[14]),m=!0)},p(_,S){h===(h=b(_))&&y?y.p(_,S):(y.d(1),y=h(_),y&&(y.c(),y.m(n,null))),S[0]&32&&(n.disabled=_[5]),S[0]&16&&u!==(u=_[4].size+"")&&Y(d,u)},d(_){_&&C(e),y.d(),m=!1,p()}}}function $r(l){let e,t=l[4].size+"",s,n;return{c(){e=L("Add "),s=L(t),n=L(" to List")},m(r,o){I(r,e,o),I(r,s,o),I(r,n,o)},p(r,o){o[0]&16&&t!==(t=r[4].size+"")&&Y(s,t)},d(r){r&&(C(e),C(s),C(n))}}}function ei(l){let e,t;return{c(){e=f("span"),t=L(`
							Adding...`),a(e,"class","loading-spinner mr-2 svelte-qhxb3n")},m(s,n){I(s,e,n),I(s,t,n)},p:le,d(s){s&&(C(e),C(t))}}}function xs(l){let e,t,s,n=l[6].success.length+"",r,o;return{c(){e=f("div"),t=f("p"),s=L("‚úÖ Successfully added "),r=L(n),o=L(" profiles to your list!"),a(t,"class","text-green-700 font-medium"),a(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(u,d){I(u,e,d),i(e,t),i(t,s),i(t,r),i(t,o)},p(u,d){d[0]&64&&n!==(n=u[6].success.length+"")&&Y(r,n)},d(u){u&&C(e)}}}function Cs(l){let e,t,s,n=l[6].errors.length+"",r,o,u,d,c=me(l[6].errors),m=[];for(let p=0;p<c.length;p+=1)m[p]=Is(Ss(l,c,p));return{c(){e=f("div"),t=f("p"),s=L("‚ùå Failed to add "),r=L(n),o=L(" profiles:"),u=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();a(t,"class","text-red-700 font-medium mb-2"),a(d,"class","text-red-600 text-sm space-y-1"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){I(p,e,b),i(e,t),i(t,s),i(t,r),i(t,o),i(e,u),i(e,d);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(d,null)},p(p,b){if(b[0]&64&&n!==(n=p[6].errors.length+"")&&Y(r,n),b[0]&64){c=me(p[6].errors);let h;for(h=0;h<c.length;h+=1){const y=Ss(p,c,h);m[h]?m[h].p(y,b):(m[h]=Is(y),m[h].c(),m[h].m(d,null))}for(;h<m.length;h+=1)m[h].d(1);m.length=c.length}},d(p){p&&C(e),Ue(m,p)}}}function Is(l){let e,t,s=l[38].error+"",n;return{c(){e=f("li"),t=L("‚Ä¢ "),n=L(s)},m(r,o){I(r,e,o),i(e,t),i(e,n)},p(r,o){o[0]&64&&s!==(s=r[38].error+"")&&Y(n,s)},d(r){r&&C(e)}}}function Ps(l){let e,t,s,n=l[7].success.length+"",r,o;return{c(){e=f("div"),t=f("p"),s=L("üóëÔ∏è Successfully removed "),r=L(n),o=L(" profiles from your list!"),a(t,"class","text-blue-700 font-medium"),a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(u,d){I(u,e,d),i(e,t),i(t,s),i(t,r),i(t,o)},p(u,d){d[0]&128&&n!==(n=u[7].success.length+"")&&Y(r,n)},d(u){u&&C(e)}}}function As(l){let e,t,s,n=l[7].errors.length+"",r,o,u,d,c=me(l[7].errors),m=[];for(let p=0;p<c.length;p+=1)m[p]=Ts(Ls(l,c,p));return{c(){e=f("div"),t=f("p"),s=L("‚ùå Failed to remove "),r=L(n),o=L(" profiles:"),u=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();a(t,"class","text-red-700 font-medium mb-2"),a(d,"class","text-red-600 text-sm space-y-1"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){I(p,e,b),i(e,t),i(t,s),i(t,r),i(t,o),i(e,u),i(e,d);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(d,null)},p(p,b){if(b[0]&128&&n!==(n=p[7].errors.length+"")&&Y(r,n),b[0]&128){c=me(p[7].errors);let h;for(h=0;h<c.length;h+=1){const y=Ls(p,c,h);m[h]?m[h].p(y,b):(m[h]=Ts(y),m[h].c(),m[h].m(d,null))}for(;h<m.length;h+=1)m[h].d(1);m.length=c.length}},d(p){p&&C(e),Ue(m,p)}}}function Ts(l){let e,t,s=l[38].error+"",n;return{c(){e=f("li"),t=L("‚Ä¢ "),n=L(s)},m(r,o){I(r,e,o),i(e,t),i(e,n)},p(r,o){o[0]&128&&s!==(s=r[38].error+"")&&Y(n,s)},d(r){r&&C(e)}}}function ti(l){let e,t,s;function n(d,c){return d[9]?oi:d[1].listMemberProfiles.length>0?ii:ri}let r=n(l),o=r(l),u=l[10]>1&&zs(l);return{c(){e=f("div"),t=f("div"),o.c(),s=w(),u&&u.c(),a(t,"class","space-y-4 flex-1 overflow-y-auto"),a(e,"class","flex flex-col flex-1")},m(d,c){I(d,e,c),i(e,t),o.m(t,null),i(e,s),u&&u.m(e,null)},p(d,c){r===(r=n(d))&&o?o.p(d,c):(o.d(1),o=r(d),o&&(o.c(),o.m(t,null))),d[10]>1?u?u.p(d,c):(u=zs(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&C(e),o.d(),u&&u.d()}}}function li(l){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">ü¶ã</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">This list is brand new</h3> <p class="text-slate-600">Use the search on the right to find profiles and start building your list.</p></div>',a(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function si(l){let e,t,s,n,r,o,u,d;return{c(){e=f("div"),t=f("div"),s=f("p"),n=L(l[3]),r=w(),o=f("button"),o.textContent="Try again",a(s,"class","text-red-700 mb-4"),a(o,"class","text-red-600 hover:text-red-800 underline"),a(t,"class","text-center"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(c,m){I(c,e,m),i(e,t),i(t,s),i(s,n),i(t,r),i(t,o),u||(d=re(o,"click",l[12]),u=!0)},p(c,m){m[0]&8&&Y(n,c[3])},d(c){c&&C(e),u=!1,d()}}}function ni(l){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-qhxb3n"></div> <p class="text-slate-600">Loading list members...</p></div>',a(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,s){I(t,e,s)},p:le,d(t){t&&C(e)}}}function ri(l){let e,t,s=l[3]&&Es(l),n=me(l[1].listMembers.slice(0,100)),r=[];for(let o=0;o<n.length;o+=1)r[o]=Os(ws(l,n,o));return{c(){s&&s.c(),e=w();for(let o=0;o<r.length;o+=1)r[o].c();t=Ke()},m(o,u){s&&s.m(o,u),I(o,e,u);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(o,u);I(o,t,u)},p(o,u){if(o[3]?s?s.p(o,u):(s=Es(o),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),u[0]&2){n=me(o[1].listMembers.slice(0,100));let d;for(d=0;d<n.length;d+=1){const c=ws(o,n,d);r[d]?r[d].p(c,u):(r[d]=Os(c),r[d].c(),r[d].m(t.parentNode,t))}for(;d<r.length;d+=1)r[d].d(1);r.length=n.length}},d(o){o&&(C(e),C(t)),s&&s.d(o),Ue(r,o)}}}function ii(l){let e,t=me(l[1].listMemberProfiles),s=[];for(let n=0;n<t.length;n+=1)s[n]=Rs(ks(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=Ke()},m(n,r){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,r);I(n,e,r)},p(n,r){if(r[0]&34818){t=me(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const u=ks(n,t,o);s[o]?s[o].p(u,r):(s[o]=Rs(u),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&C(e),Ue(s,n)}}}function oi(l){let e,t,s,n,r,o,u;return{c(){e=f("div"),t=f("div"),s=w(),n=f("p"),r=L("Loading page "),o=L(l[8]),u=L("..."),a(t,"class","loading-spinner mx-auto mb-4 svelte-qhxb3n"),a(n,"class","text-slate-600"),a(e,"class","text-center py-8")},m(d,c){I(d,e,c),i(e,t),i(e,s),i(e,n),i(n,r),i(n,o),i(n,u)},p(d,c){c[0]&256&&Y(o,d[8])},d(d){d&&C(e)}}}function Es(l){let e,t,s,n,r,o,u,d,c,m,p;return{c(){e=f("div"),t=f("div"),s=f("div"),n=f("p"),n.textContent="‚ö†Ô∏è Profile loading issue",r=w(),o=f("p"),u=L(l[3]),d=w(),c=f("button"),c.textContent="Retry",a(n,"class","text-yellow-800 font-medium"),a(o,"class","text-yellow-700 text-sm mt-1"),a(c,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),a(t,"class","flex items-center justify-between"),a(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(b,h){I(b,e,h),i(e,t),i(t,s),i(s,n),i(s,r),i(s,o),i(o,u),i(t,d),i(t,c),m||(p=re(c,"click",l[23]),m=!0)},p(b,h){h[0]&8&&Y(u,b[3])},d(b){b&&C(e),m=!1,p()}}}function Os(l){let e,t,s,n,r,o,u=l[35]+"",d,c,m,p;return{c(){e=f("div"),t=f("div"),s=f("div"),s.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=w(),r=f("div"),o=f("div"),d=L(u),c=w(),m=f("div"),m.textContent="Member of list",p=w(),a(s,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),a(o,"class","text-sm text-gray-600 font-mono break-all"),a(m,"class","text-xs text-gray-500"),a(r,"class","flex-1"),a(t,"class","flex items-center space-x-3"),a(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(b,h){I(b,e,h),i(e,t),i(t,s),i(t,n),i(t,r),i(r,o),i(o,d),i(r,c),i(r,m),i(e,p)},p(b,h){h[0]&2&&u!==(u=b[35]+"")&&Y(d,u)},d(b){b&&C(e)}}}function Ns(l){let e,t=l[32].description+"",s;return{c(){e=f("p"),s=L(t),a(e,"class","text-xs text-gray-600 line-clamp-2 svelte-qhxb3n")},m(n,r){I(n,e,r),i(e,s)},p(n,r){r[0]&2&&t!==(t=n[32].description+"")&&Y(s,t)},d(n){n&&C(e)}}}function ai(l){let e;return{c(){e=L("üóëÔ∏è Remove")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function ci(l){let e,t;return{c(){e=f("span"),t=L(`
														Removing...`),a(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(s,n){I(s,e,n),I(s,t,n)},d(s){s&&(C(e),C(t))}}}function Rs(l){let e,t,s,n,r,o,u,d,c,m,p,b,h=(l[32].displayName||l[32].handle)+"",y,_,S,O,T=l[32].handle+"",x,N,E,P,z,k,U,M,B,q,$,A,F,K,Z=l[32].description&&Ns(l);function oe(j,H){return H[0]&2&&(q=null),q==null&&(q=!!j[11].has(j[32].did)),q?ci:ai}let X=oe(l,[-1,-1]),v=X(l);function g(){return l[22](l[32])}return{c(){e=f("div"),t=f("div"),s=f("div"),n=f("img"),d=w(),c=f("div"),m=f("a"),p=f("div"),b=f("h4"),y=L(h),_=w(),S=f("span"),O=L("@"),x=L(T),N=w(),E=$t("svg"),P=$t("path"),z=w(),Z&&Z.c(),U=w(),M=f("div"),B=f("button"),v.c(),A=w(),qe(n.src,r=l[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(l[32].displayName||l[32].handle)}&background=6366f1&color=fff&size=64`)||a(n,"src",r),a(n,"alt",o=l[32].displayName||l[32].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(l[32].displayName||l[32].handle)+"&background=6366f1&color=fff&size=64'"),a(s,"class","flex-shrink-0"),a(b,"class","text-sm font-semibold text-gray-900 truncate"),a(S,"class","text-xs text-gray-600 truncate"),a(P,"stroke-linecap","round"),a(P,"stroke-linejoin","round"),a(P,"stroke-width","2"),a(P,"d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"),a(E,"class","w-3 h-3 text-gray-400"),a(E,"fill","none"),a(E,"stroke","currentColor"),a(E,"viewBox","0 0 24 24"),a(p,"class","flex items-center space-x-2 mb-1"),a(m,"href",k="https://bsky.app/profile/"+l[32].handle),a(m,"target","_blank"),a(m,"rel","noopener noreferrer"),a(m,"class","block hover:underline"),a(c,"class","flex-1 min-w-0"),B.disabled=$=l[11].has(l[32].did),a(B,"class","bg-red-100 hover:bg-red-200 text-red-700 border border-red-300 px-3 py-1.5 rounded text-xs font-medium cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"),a(B,"title","Remove from list"),a(M,"class","flex-shrink-0"),a(t,"class","flex items-center space-x-3"),a(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200")},m(j,H){I(j,e,H),i(e,t),i(t,s),i(s,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,b),i(b,y),i(p,_),i(p,S),i(S,O),i(S,x),i(p,N),i(p,E),i(E,P),i(m,z),Z&&Z.m(m,null),i(t,U),i(t,M),i(M,B),v.m(B,null),i(e,A),F||(K=re(B,"click",g),F=!0)},p(j,H){l=j,H[0]&2&&!qe(n.src,r=l[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(l[32].displayName||l[32].handle)}&background=6366f1&color=fff&size=64`)&&a(n,"src",r),H[0]&2&&o!==(o=l[32].displayName||l[32].handle)&&a(n,"alt",o),H[0]&2&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(l[32].displayName||l[32].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),H[0]&2&&h!==(h=(l[32].displayName||l[32].handle)+"")&&Y(y,h),H[0]&2&&T!==(T=l[32].handle+"")&&Y(x,T),l[32].description?Z?Z.p(l,H):(Z=Ns(l),Z.c(),Z.m(m,null)):Z&&(Z.d(1),Z=null),H[0]&2&&k!==(k="https://bsky.app/profile/"+l[32].handle)&&a(m,"href",k),X!==(X=oe(l,H))&&(v.d(1),v=X(l),v&&(v.c(),v.m(B,null))),H[0]&2&&$!==($=l[11].has(l[32].did))&&(B.disabled=$)},d(j){j&&C(e),Z&&Z.d(),v.d(),F=!1,K()}}}function zs(l){let e,t,s,n,r,o,u,d,c,m,p,b,h,y,_,S,O,T,x,N,E,P,z,k=l[9]&&l[8]>1&&Bs(),U=me(Array.from({length:Math.min(5,l[10])},l[24])),M=[];for(let q=0;q<U.length;q+=1)M[q]=Fs(ys(l,U,q));let B=l[9]&&l[8]<l[10]&&Us();return{c(){e=f("div"),t=f("div"),s=f("div"),n=L("Page "),r=L(l[8]),o=L(" of "),u=L(l[10]),d=L(" ("),c=L(l[0]),m=L(" total members)"),p=w(),b=f("div"),h=f("button"),k&&k.c(),y=L(`
											Previous`),S=w(),O=f("div");for(let q=0;q<M.length;q+=1)M[q].c();T=w(),x=f("button"),N=L(`Next
											`),B&&B.c(),a(s,"class","text-sm text-gray-600"),h.disabled=_=l[8]===1||l[9],a(h,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),a(O,"class","flex items-center space-x-1"),x.disabled=E=l[8]===l[10]||l[9],a(x,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),a(b,"class","flex items-center space-x-2"),a(t,"class","flex items-center justify-between"),a(e,"class","mt-6 pt-4 border-t border-gray-200")},m(q,$){I(q,e,$),i(e,t),i(t,s),i(s,n),i(s,r),i(s,o),i(s,u),i(s,d),i(s,c),i(s,m),i(t,p),i(t,b),i(b,h),k&&k.m(h,null),i(h,y),i(b,S),i(b,O);for(let A=0;A<M.length;A+=1)M[A]&&M[A].m(O,null);i(b,T),i(b,x),i(x,N),B&&B.m(x,null),P||(z=[re(h,"click",l[18]),re(x,"click",l[17])],P=!0)},p(q,$){if($[0]&256&&Y(r,q[8]),$[0]&1024&&Y(u,q[10]),$[0]&1&&Y(c,q[0]),q[9]&&q[8]>1?k||(k=Bs(),k.c(),k.m(h,y)):k&&(k.d(1),k=null),$[0]&768&&_!==(_=q[8]===1||q[9])&&(h.disabled=_),$[0]&67328){U=me(Array.from({length:Math.min(5,q[10])},q[24]));let A;for(A=0;A<U.length;A+=1){const F=ys(q,U,A);M[A]?M[A].p(F,$):(M[A]=Fs(F),M[A].c(),M[A].m(O,null))}for(;A<M.length;A+=1)M[A].d(1);M.length=U.length}q[9]&&q[8]<q[10]?B||(B=Us(),B.c(),B.m(x,null)):B&&(B.d(1),B=null),$[0]&1792&&E!==(E=q[8]===q[10]||q[9])&&(x.disabled=E)},d(q){q&&C(e),k&&k.d(),Ue(M,q),B&&B.d(),P=!1,Me(z)}}}function Bs(l){let e;return{c(){e=f("span"),a(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function Fs(l){let e,t=l[29]+"",s,n,r,o,u;function d(){return l[25](l[29])}return{c(){e=f("button"),s=L(t),n=w(),e.disabled=l[9],a(e,"class",r="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(l[8]===l[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(c,m){I(c,e,m),i(e,s),i(e,n),o||(u=re(e,"click",d),o=!0)},p(c,m){l=c,m[0]&1280&&t!==(t=l[29]+"")&&Y(s,t),m[0]&512&&(e.disabled=l[9]),m[0]&1280&&r!==(r="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(l[8]===l[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&a(e,"class",r)},d(c){c&&C(e),o=!1,u()}}}function Us(l){let e;return{c(){e=f("span"),a(e,"class","loading-spinner ml-1 svelte-qhxb3n")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function ui(l){let e,t,s,n,r,o,u,d,c,m,p,b,h,y,_,S=(l[9]?"...":l[1].listMemberProfiles.length)+"",O,T,x,N,E,P,z,k,U,M,B=l[1].listMemberProfiles.length+"",q,$,A=l[1].listMembers.length+"",F,K,Z,oe,X,v;t=new Xr({});let g=l[4].size>0&&Ms(l),j=l[6].success.length>0&&xs(l),H=l[6].errors.length>0&&Cs(l),R=l[7].success.length>0&&Ps(l),W=l[7].errors.length>0&&As(l);function J(D,V){return D[2]?ni:D[3]?si:D[1].listMembers.length===0?li:ti}let G=J(l),Q=G(l);return X=new Wr({}),{c(){e=f("div"),Te(t.$$.fragment),s=w(),g&&g.c(),n=w(),j&&j.c(),r=w(),H&&H.c(),o=w(),R&&R.c(),u=w(),W&&W.c(),d=w(),c=f("div"),m=f("div"),p=f("div"),b=f("h3"),b.textContent="Latest list members",h=w(),y=f("p"),_=L("Showing "),O=L(S),T=L(" of "),x=L(l[0]),N=L(`
					total members`),E=w(),P=f("div"),z=f("div"),k=L("Debug: isLoadingMembers="),U=L(l[2]),M=L(", profiles="),q=L(B),$=L(", members="),F=L(A),K=w(),Q.c(),Z=w(),oe=f("div"),Te(X.$$.fragment),a(b,"class","text-lg font-semibold text-slate-800 mb-2"),a(y,"class","text-sm text-slate-600"),a(p,"class","p-6 border-b border-gray-200"),a(z,"class","text-xs text-gray-500 mb-2"),a(P,"class","p-6 flex flex-col flex-1"),a(m,"id","list-members-container"),a(m,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),a(c,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),a(c,"id","list-manager-layout"),a(e,"class","space-y-6 relative z-100"),a(e,"id","list-manager")},m(D,V){I(D,e,V),Le(t,e,null),i(e,s),g&&g.m(e,null),i(e,n),j&&j.m(e,null),i(e,r),H&&H.m(e,null),i(e,o),R&&R.m(e,null),i(e,u),W&&W.m(e,null),i(e,d),i(e,c),i(c,m),i(m,p),i(p,b),i(p,h),i(p,y),i(y,_),i(y,O),i(y,T),i(y,x),i(y,N),i(m,E),i(m,P),i(P,z),i(z,k),i(z,U),i(z,M),i(z,q),i(z,$),i(z,F),i(P,K),Q.m(P,null),i(c,Z),i(c,oe),Le(X,oe,null),v=!0},p(D,V){D[4].size>0?g?g.p(D,V):(g=Ms(D),g.c(),g.m(e,n)):g&&(g.d(1),g=null),D[6].success.length>0?j?j.p(D,V):(j=xs(D),j.c(),j.m(e,r)):j&&(j.d(1),j=null),D[6].errors.length>0?H?H.p(D,V):(H=Cs(D),H.c(),H.m(e,o)):H&&(H.d(1),H=null),D[7].success.length>0?R?R.p(D,V):(R=Ps(D),R.c(),R.m(e,u)):R&&(R.d(1),R=null),D[7].errors.length>0?W?W.p(D,V):(W=As(D),W.c(),W.m(e,d)):W&&(W.d(1),W=null),(!v||V[0]&514)&&S!==(S=(D[9]?"...":D[1].listMemberProfiles.length)+"")&&Y(O,S),(!v||V[0]&1)&&Y(x,D[0]),(!v||V[0]&4)&&Y(U,D[2]),(!v||V[0]&2)&&B!==(B=D[1].listMemberProfiles.length+"")&&Y(q,B),(!v||V[0]&2)&&A!==(A=D[1].listMembers.length+"")&&Y(F,A),G===(G=J(D))&&Q?Q.p(D,V):(Q.d(1),Q=G(D),Q&&(Q.c(),Q.m(P,null)))},i(D){v||(ae(t.$$.fragment,D),ae(X.$$.fragment,D),v=!0)},o(D){ce(t.$$.fragment,D),ce(X.$$.fragment,D),v=!1},d(D){D&&C(e),Se(t),g&&g.d(),j&&j.d(),H&&H.d(),R&&R.d(),W&&W.d(),Q.d(),Se(X)}}}const Zt=25;function di(l,e,t){let s,n;Ae(l,fe,A=>t(1,s=A)),Ae(l,Pe,A=>t(21,n=A));let r=!1,o="",u=new Set,d=!1,c={success:[],errors:[]},m=new Set,p={success:[],errors:[]},b=1,h=!1,y=!1,_=0,S=new Map,O=0,T=null;async function x(){if(!(!s.selectedList||!n.session||y)){t(19,y=!0),t(2,r=!0),t(3,o=""),t(8,b=1),S.clear();try{const A=await be.getListInfo(n.session,s.selectedList.uri,n.authType),F={...s.selectedList,name:A.name,description:A.description,createdAt:A.createdAt,listItemCount:A.listItemCount};fe.setSelectedList(F),t(0,O=A.listItemCount||0),t(10,_=Math.ceil(O/Zt)),console.log("Total pages:",_,"Total count:",O),await N(1),fe.setListLoading(!1)}catch(A){console.error("Error loading list members:",A),t(3,o=A.message||"Failed to load list members"),fe.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,r=!1),t(19,y=!1),console.log("Final state - isLoadingMembers:",r,"isCurrentlyLoadingMembers:",y)}}}async function N(A){if(!(!n.session||!s.selectedList)){t(9,h=!0),t(8,b=A);try{let F=S.get(A-1);const K=await be.getListMembers(n.session,s.selectedList.uri,n.authType,Zt,F);console.log(`Fetched ${K.members.length} members for page ${A}`),console.log("Members received:",K.members),K.cursor&&S.set(A,K.cursor),K.members.length===0?O===0?t(3,o=""):(console.warn("No members returned from API for page",A),t(3,o="We couldn‚Äôt load members right now.")):t(3,o="");const Z=K.profiles||[];console.log(`Using ${Z.length} profiles from API response for page ${A}`),console.log("Setting profiles in store:",Z.length),fe.setListMembers(K.members),fe.setListMemberProfiles(Z),console.log("Profiles set in store, current count:",s.listMemberProfiles.length)}catch(F){console.error("Error loading members page:",F),t(3,o=F.message||"Failed to load page"),fe.setListMemberProfiles([])}finally{t(9,h=!1)}}}async function E(){if(u.size===0)return;t(5,d=!0),t(6,c={success:[],errors:[]});const A=Array.from(u);for(const F of A)try{await be.addToList(n.session,F,s.selectedList.uri,n.authType),c.success.push(F),await fe.fetchAndAddProfile(n.session,F,n.authType)}catch(K){c.errors.push({did:F,error:K.message})}u.clear(),t(4,u),t(5,d=!1)}async function P(A){if(!(!A||!s.selectedList||!n.session)){m.add(A);try{await be.removeFromList(n.session,A,s.selectedList.uri,n.authType),p.success.push(A);const F=s.listMemberProfiles.filter(oe=>oe.did!==A);fe.setListMemberProfiles(F);const K=s.listMembers.filter(oe=>oe!==A);fe.setListMembers(K),t(0,O=Math.max(0,O-1)),t(10,_=Math.ceil(O/Zt));const Z=s.userLists.map(oe=>oe.uri===s.selectedList.uri?{...oe,memberCount:Math.max(0,(oe.memberCount||0)-1)}:oe);fe.setUserLists(Z)}catch(F){console.error("Failed to remove profile from list:",F),p.errors.push({profileDid:A,error:F.message})}finally{m.delete(A),setTimeout(()=>{t(7,p={success:[],errors:[]})},5e3)}}}async function z(A){A>=1&&A<=_&&await N(A)}async function k(){b<_&&await N(b+1)}async function U(){b>1&&await N(b-1)}const M=A=>P(A.did),B=()=>N(b),q=(A,F)=>{let K;return _<=5||b<=3?K=F+1:b>=_-2?K=_-4+F:K=b-2+F,K},$=A=>z(A);return l.$$.update=()=>{var A,F,K;l.$$.dirty[0]&2&&s.refreshTrigger&&x(),l.$$.dirty[0]&2&&console.log("Profile count changed:",s.listMemberProfiles.length),l.$$.dirty[0]&3&&((A=s.selectedList)==null?void 0:A.listItemCount)!==O&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(F=s.selectedList)==null?void 0:F.listItemCount),console.log("Current totalMemberCount:",O),t(0,O=((K=s.selectedList)==null?void 0:K.listItemCount)||0),t(10,_=Math.ceil(O/Zt))),l.$$.dirty[0]&3670018&&s.selectedList&&n.session&&!y&&T!==s.selectedList.uri&&(console.log("List changed, loading members for:",s.selectedList.name),t(20,T=s.selectedList.uri),x())},[O,s,r,o,u,d,c,p,b,h,_,m,x,N,E,P,z,k,U,y,T,n,M,B,q,$]}class fi extends Oe{constructor(e){super(),Ee(this,e,di,ui,xe,{},null,[-1,-1])}}function Ds(l){let e,t,s,n,r,o,u,d;return{c(){e=f("div"),t=f("div"),s=f("div"),n=w(),r=f("h3"),r.textContent="Getting Ready",o=w(),u=f("p"),d=L(l[1]),a(s,"class","loading-spinner mx-auto mb-4 svelte-847qwb"),a(r,"class","text-lg font-semibold text-slate-800 mb-2"),a(u,"class","text-slate-600"),a(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),a(t,"id","loading-overlay-content"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"),a(e,"id","loading-overlay")},m(c,m){I(c,e,m),i(e,t),i(t,s),i(t,n),i(t,r),i(t,o),i(t,u),i(u,d)},p(c,m){m&2&&Y(d,c[1])},d(c){c&&C(e)}}}function mi(l){let e,t=l[0]&&Ds(l);return{c(){t&&t.c(),e=Ke()},m(s,n){t&&t.m(s,n),I(s,e,n)},p(s,[n]){s[0]?t?t.p(s,n):(t=Ds(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:le,o:le,d(s){s&&C(e),t&&t.d(s)}}}function pi(l,e,t){let{isLoading:s=!1}=e,{message:n="Loading list data..."}=e;return l.$$set=r=>{"isLoading"in r&&t(0,s=r.isLoading),"message"in r&&t(1,n=r.message)},[s,n]}class gi extends Oe{constructor(e){super(),Ee(this,e,pi,mi,xe,{isLoading:0,message:1})}}function js(l,e,t){const s=l.slice();return s[8]=e[t],s}function Hs(l,e){let t,s,n;return{key:l,first:null,c(){t=f("div"),s=$t("svg"),n=$t("path"),a(n,"d","m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"),a(n,"fill","#1185fe"),a(n,"opacity","0.4"),a(s,"width","100%"),a(s,"height","100%"),a(s,"viewBox","0 0 600 530"),a(s,"xmlns","http://www.w3.org/2000/svg"),a(s,"class","butterfly-svg svelte-1l7ozht"),a(t,"class","butterfly svelte-1l7ozht"),ue(t,"left",e[8].x+"%"),ue(t,"top",e[8].y+"%"),ue(t,"width",e[8].size+"px"),ue(t,"height",e[8].size+"px"),ue(t,"animation-duration",e[8].speed+"s"),ue(t,"animation-delay",e[8].delay+"s"),ue(t,"transform","rotate("+e[8].rotation+"deg)"),ue(t,"opacity",.6+Math.random()*.4),this.first=t},m(r,o){I(r,t,o),i(t,s),i(s,n)},p(r,o){e=r,o&1&&ue(t,"left",e[8].x+"%"),o&1&&ue(t,"top",e[8].y+"%"),o&1&&ue(t,"width",e[8].size+"px"),o&1&&ue(t,"height",e[8].size+"px"),o&1&&ue(t,"animation-duration",e[8].speed+"s"),o&1&&ue(t,"animation-delay",e[8].delay+"s"),o&1&&ue(t,"transform","rotate("+e[8].rotation+"deg)")},d(r){r&&C(t)}}}function Ws(l){let e;return{c(){e=f("div"),e.innerHTML='<div class="message-content svelte-1l7ozht" id="empty-list-content"><svg width="60" height="53" viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg" class="svelte-1l7ozht"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe" opacity="0.3"></path></svg> <p class="svelte-1l7ozht">Add members to your list to see butterflies flutter by!</p></div>',a(e,"class","empty-list-message svelte-1l7ozht"),a(e,"id","empty-list-message")},m(t,s){I(t,e,s)},d(t){t&&C(e)}}}function hi(l){let e,t=[],s=new Map,n,r=me(l[0]);const o=d=>d[8].id;for(let d=0;d<r.length;d+=1){let c=js(l,r,d),m=o(c);s.set(m,t[d]=Hs(m,c))}let u=l[2].selectedList&&l[1]===0&&Ws();return{c(){e=f("div");for(let d=0;d<t.length;d+=1)t[d].c();n=w(),u&&u.c(),a(e,"class","butterfly-background svelte-1l7ozht"),a(e,"id","butterfly-background")},m(d,c){I(d,e,c);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i(e,n),u&&u.m(e,null),l[5](e)},p(d,[c]){c&1&&(r=me(d[0]),t=pn(t,c,o,1,d,r,s,e,mn,Hs,n,js)),d[2].selectedList&&d[1]===0?u||(u=Ws(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:le,o:le,d(d){d&&C(e);for(let c=0;c<t.length;c+=1)t[c].d();u&&u.d(),l[5](null)}}}function bi(l,e,t){let s,n,r;Ae(l,fe,p=>t(2,r=p));let o,u=[];const d={baseCount:12,maxCount:50,minSize:20,maxSize:45,minSpeed:15,maxSpeed:45,minDelay:0,maxDelay:15};sl(()=>{c()});function c(){t(0,u=[]);for(let p=0;p<n;p++)u.push({id:p,x:Math.random()*100,y:Math.random()*100,size:Math.random()*(d.maxSize-d.minSize)+d.minSize,speed:Math.random()*(d.maxSpeed-d.minSpeed)+d.minSpeed,delay:Math.random()*(d.maxDelay-d.minDelay)+d.minDelay,rotation:Math.random()*60-30,rotationSpeed:(Math.random()-.5)*2,floatingDirection:Math.random()*360,floatingSpeed:Math.random()*.5+.1})}function m(p){el[p?"unshift":"push"](()=>{o=p,t(3,o)})}return l.$$.update=()=>{var p;l.$$.dirty&4&&t(1,s=((p=r.selectedList)==null?void 0:p.listItemCount)||0),l.$$.dirty&6&&t(4,n=r.selectedList?Math.min(d.maxCount,Math.max(d.baseCount,Math.floor(s/2))):d.baseCount),l.$$.dirty&17&&n!==u.length&&c()},[u,s,r,o,n,m]}class vi extends Oe{constructor(e){super(),Ee(this,e,bi,hi,xe,{})}}function qs(l){let e,t;return e=new Yn({}),{c(){Te(e.$$.fragment)},m(s,n){Le(e,s,n),t=!0},i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function _i(l){let e,t;return e=new fi({}),{c(){Te(e.$$.fragment)},m(s,n){Le(e,s,n),t=!0},i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function yi(l){let e,t;return e=new pr({}),{c(){Te(e.$$.fragment)},m(s,n){Le(e,s,n),t=!0},i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function wi(l){let e,t;return e=new cr({}),{c(){Te(e.$$.fragment)},m(s,n){Le(e,s,n),t=!0},i(s){t||(ae(e.$$.fragment,s),t=!0)},o(s){ce(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function ki(l){let e,t,s,n,r,o,u,d,c,m;t=new vi({});let p=l[1]!=="auth"&&qs();const b=[wi,yi,_i],h=[];function y(_,S){return _[1]==="auth"?0:_[1]==="list-selector"?1:_[1]==="manager"?2:-1}return~(o=y(l))&&(u=h[o]=b[o](l)),c=new gi({props:{isLoading:l[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=f("main"),Te(t.$$.fragment),s=w(),p&&p.c(),n=w(),r=f("div"),u&&u.c(),d=w(),Te(c.$$.fragment),a(r,"class","max-w-6xl mx-auto p-6"),a(r,"id","app-content"),a(e,"class","min-h-screen bg-gray-50"),a(e,"id","app-main")},m(_,S){I(_,e,S),Le(t,e,null),i(e,s),p&&p.m(e,null),i(e,n),i(e,r),~o&&h[o].m(r,null),i(e,d),Le(c,e,null),m=!0},p(_,[S]){_[1]!=="auth"?p?S&2&&ae(p,1):(p=qs(),p.c(),ae(p,1),p.m(e,n)):p&&($e(),ce(p,1,1,()=>{p=null}),et());let O=o;o=y(_),o!==O&&(u&&($e(),ce(h[O],1,1,()=>{h[O]=null}),et()),~o?(u=h[o],u||(u=h[o]=b[o](_),u.c()),ae(u,1),u.m(r,null)):u=null);const T={};S&1&&(T.isLoading=_[0].isLoadingList),c.$set(T)},i(_){m||(ae(t.$$.fragment,_),ae(p),ae(u),ae(c.$$.fragment,_),m=!0)},o(_){ce(t.$$.fragment,_),ce(p),ce(u),ce(c.$$.fragment,_),m=!1},d(_){_&&C(e),Se(t),p&&p.d(),~o&&h[o].d(),Se(c)}}}function Li(l,e,t){let s,n;Ae(l,fe,o=>t(0,s=o)),Ae(l,Pe,o=>t(2,n=o));let r="auth";return sl(async()=>{const{session:o,authType:u}=await Pe.initializeSession();o&&(console.log("Session restored:",{authType:u,handle:o.handle||o.did}),t(1,r="list-selector"))}),l.$$.update=()=>{l.$$.dirty&5&&(n.session?s.selectedList?t(1,r="manager"):t(1,r="list-selector"):t(1,r="auth"))},[s,r,n]}class Si extends Oe{constructor(e){super(),Ee(this,e,Li,ki,xe,{})}}new Si({target:document.getElementById("app")})});export default Mi();
