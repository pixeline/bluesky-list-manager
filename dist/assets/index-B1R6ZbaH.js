var jn=Object.defineProperty;var wr=s=>{throw TypeError(s)};var Jn=(s,e,t)=>e in s?jn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var qn=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Be=(s,e,t)=>Jn(s,typeof e!="symbol"?e+"":e,t),Sr=(s,e,t)=>e.has(s)||wr("Cannot "+t);var te=(s,e,t)=>(Sr(s,e,"read from private field"),t?t.call(s):e.get(s)),Xe=(s,e,t)=>e.has(s)?wr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Qe=(s,e,t,r)=>(Sr(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);var Jo=qn((Vo,qt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function se(){}function kn(s){return s()}function kr(){return Object.create(null)}function Me(s){s.forEach(kn)}function Ln(s){return typeof s=="function"}function Ee(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let ms;function tt(s,e){return s===e?!0:(ms||(ms=document.createElement("a")),ms.href=e,s===ms.href)}function Vn(s){return Object.keys(s).length===0}function Yn(s,...e){if(s==null){for(const r of e)r(void 0);return se}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ie(s,e,t){s.$$.on_destroy.push(Yn(e,t))}function i(s,e){s.appendChild(e)}function A(s,e,t){s.insertBefore(e,t||null)}function M(s){s.parentNode&&s.parentNode.removeChild(s)}function Ve(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function f(s){return document.createElement(s)}function _s(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function k(s){return document.createTextNode(s)}function w(){return k(" ")}function st(){return k("")}function le(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function zs(s){return function(e){return e.preventDefault(),s.call(this,e)}}function a(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Cn(s){let e;return{p(...t){e=t,e.forEach(r=>s.push(r))},r(){e.forEach(t=>s.splice(s.indexOf(t),1))}}}function Zn(s){return Array.from(s.childNodes)}function V(s,e){e=""+e,s.data!==e&&(s.data=e)}function be(s,e){s.value=e??""}function de(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function Lr(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}s.selectedIndex=-1}function Gn(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}let jt;function Ft(s){jt=s}function Fs(){if(!jt)throw new Error("Function called outside component initialization");return jt}function Cs(s){Fs().$$.on_mount.push(s)}function xn(s){Fs().$$.on_destroy.push(s)}function Mn(){const s=Fs();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const l=Gn(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,l)}),!l.defaultPrevented}return!0}}const Et=[],ws=[];let Rt=[];const Cr=[],$n=Promise.resolve();let Bs=!1;function Xn(){Bs||(Bs=!0,$n.then(En))}function Ws(s){Rt.push(s)}const Rs=new Set;let Ct=0;function En(){if(Ct!==0)return;const s=jt;do{try{for(;Ct<Et.length;){const e=Et[Ct];Ct++,Ft(e),Qn(e.$$)}}catch(e){throw Et.length=0,Ct=0,e}for(Ft(null),Et.length=0,Ct=0;ws.length;)ws.pop()();for(let e=0;e<Rt.length;e+=1){const t=Rt[e];Rs.has(t)||(Rs.add(t),t())}Rt.length=0}while(Et.length);for(;Cr.length;)Cr.pop()();Bs=!1,Rs.clear(),Ft(s)}function Qn(s){if(s.fragment!==null){s.update(),Me(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Ws)}}function el(s){const e=[],t=[];Rt.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Rt=e}const bs=new Set;let dt;function ft(){dt={r:0,c:[],p:dt}}function mt(){dt.r||Me(dt.c),dt=dt.p}function ae(s,e){s&&s.i&&(bs.delete(s),s.i(e))}function ue(s,e,t,r){if(s&&s.o){if(bs.has(s))return;bs.add(s),dt.c.push(()=>{bs.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}function he(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function tl(s,e){s.d(1),e.delete(s.key)}function sl(s,e,t,r,n,l,o,u,d,c,m,p){let g=s.length,b=l.length,_=g;const v={};for(;_--;)v[s[_].key]=_;const L=[],x=new Map,C=new Map,D=[];for(_=b;_--;){const I=p(n,l,_),S=t(I);let H=o.get(S);H?D.push(()=>H.p(I,e)):(H=c(S,I),H.c()),x.set(S,L[_]=H),S in v&&C.set(S,Math.abs(_-v[S]))}const N=new Set,R=new Set;function E(I){ae(I,1),I.m(u,m),o.set(I.key,I),m=I.first,b--}for(;g&&b;){const I=L[b-1],S=s[g-1],H=I.key,T=S.key;I===S?(m=I.first,g--,b--):x.has(T)?!o.has(H)||N.has(H)?E(I):R.has(T)?g--:C.get(H)>C.get(T)?(R.add(H),E(I)):(N.add(T),g--):(d(S,o),g--)}for(;g--;){const I=s[g];x.has(I.key)||d(I,o)}for(;b;)E(L[b-1]);return Me(D),L}function Re(s){s&&s.c()}function Ce(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Ws(()=>{const l=s.$$.on_mount.map(kn).filter(Ln);s.$$.on_destroy?s.$$.on_destroy.push(...l):Me(l),s.$$.on_mount=[]}),n.forEach(Ws)}function xe(s,e){const t=s.$$;t.fragment!==null&&(el(t.after_update),Me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function rl(s,e){s.$$.dirty[0]===-1&&(Et.push(s),Xn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function Oe(s,e,t,r,n,l,o=null,u=[-1]){const d=jt;Ft(s);const c=s.$$={fragment:null,ctx:[],props:l,update:se,not_equal:n,bound:kr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:kr(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};o&&o(c.root);let m=!1;if(c.ctx=t?t(s,e.props||{},(p,g,...b)=>{const _=b.length?b[0]:g;return c.ctx&&n(c.ctx[p],c.ctx[p]=_)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](_),m&&rl(s,p)),g}):[],c.update(),m=!0,Me(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const p=Zn(e.target);c.fragment&&c.fragment.l(p),p.forEach(M)}else c.fragment&&c.fragment.c();e.intro&&ae(s.$$.fragment),Ce(s,e.target,e.anchor),En()}Ft(d)}class De{constructor(){Be(this,"$$");Be(this,"$$set")}$destroy(){xe(this,1),this.$destroy=se}$on(e,t){if(!Ln(t))return se;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Vn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const nl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(nl);const xt=[];function js(s,e=se){let t;const r=new Set;function n(u){if(Ee(s,u)&&(s=u,t)){const d=!xt.length;for(const c of r)c[1](),xt.push(c,s);if(d){for(let c=0;c<xt.length;c+=2)xt[c][0](xt[c+1]);xt.length=0}}}function l(u){n(u(s))}function o(u,d=se){const c=[u,d];return r.add(c),r.size===1&&(t=e(n,l)||se),u(s),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:n,update:l,subscribe:o}}const It=new TextEncoder,Ss=new TextDecoder;function ll(...s){const e=s.reduce((n,{length:l})=>n+l,0),t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function il(s){if(Uint8Array.prototype.toBase64)return s.toBase64();const e=32768,t=[];for(let r=0;r<s.length;r+=e)t.push(String.fromCharCode.apply(null,s.subarray(r,r+e)));return btoa(t.join(""))}function ol(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(s);const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function An(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof s=="string"?s:Ss.decode(s),{alphabet:"base64url"});let e=s;e instanceof Uint8Array&&(e=Ss.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return ol(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Os(s){let e=s;return typeof e=="string"&&(e=It.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):il(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class xs extends Error{constructor(t,r){var n;super(t,r);Be(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Be(xs,"code","ERR_JOSE_GENERIC");class qe extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Be(qe,"code","ERR_JOSE_NOT_SUPPORTED");class At extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JWS_INVALID")}}Be(At,"code","ERR_JWS_INVALID");class Pn extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JWT_INVALID")}}Be(Pn,"code","ERR_JWT_INVALID");function Je(s,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${s}`)}function zt(s,e){return s.name===e}function Ds(s){return parseInt(s.name.slice(4),10)}function al(s){switch(s){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function cl(s,e){if(!s.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function ul(s,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!zt(s.algorithm,"HMAC"))throw Je("HMAC");const r=parseInt(e.slice(2),10);if(Ds(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!zt(s.algorithm,"RSASSA-PKCS1-v1_5"))throw Je("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(Ds(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!zt(s.algorithm,"RSA-PSS"))throw Je("RSA-PSS");const r=parseInt(e.slice(2),10);if(Ds(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!zt(s.algorithm,"Ed25519"))throw Je("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!zt(s.algorithm,"ECDSA"))throw Je("ECDSA");const r=al(e);if(s.algorithm.namedCurve!==r)throw Je(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}cl(s,t)}function Tn(s,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const n=t.pop();s+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?s+=`one of type ${t[0]} or ${t[1]}.`:s+=`of type ${t[0]}.`;return e==null?s+=` Received ${e}`:typeof e=="function"&&e.name?s+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(s+=` Received an instance of ${e.constructor.name}`),s}const dl=(s,...e)=>Tn("Key must be ",s,...e);function In(s,e,...t){return Tn(`Key for the ${s} algorithm must be `,e,...t)}function Rn(s){return(s==null?void 0:s[Symbol.toStringTag])==="CryptoKey"}function On(s){return(s==null?void 0:s[Symbol.toStringTag])==="KeyObject"}const Dn=s=>Rn(s)||On(s),fl=(...s)=>{const e=s.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const n=Object.keys(r);if(!t||t.size===0){t=new Set(n);continue}for(const l of n){if(t.has(l))return!1;t.add(l)}}return!0};function ml(s){return typeof s=="object"&&s!==null}const Js=s=>{if(!ml(s)||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e},pl=(s,e)=>{if(s.startsWith("RS")||s.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${s} requires key modulusLength to be 2048 bits or larger`)}};function hl(s){let e,t;switch(s.kty){case"RSA":{switch(s.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.slice(-3),10)||1}`},t=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(s.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=s.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=s.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(s.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new qe('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const Nn=async s=>{if(!s.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=hl(s),r={...s};return delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,s.ext??!s.d,s.key_ops??t)};async function gl(s,e,t){if(!Js(s))throw new TypeError("JWK must be an object");let r;switch(e??(e=s.alg),r??(r=s.ext),s.kty){case"oct":if(typeof s.k!="string"||!s.k)throw new TypeError('missing "k" (Key Value) Parameter value');return An(s.k);case"RSA":if("oth"in s&&s.oth!==void 0)throw new qe('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Nn({...s,alg:e,ext:r});default:throw new qe('Unsupported "kty" (Key Type) Parameter value')}}const bl=(s,e,t,r,n)=>{if(n.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new s('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new s('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;t!==void 0?l=new Map([...Object.entries(t),...e.entries()]):l=e;for(const o of r.crit){if(!l.has(o))throw new qe(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new s(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&r[o]===void 0)throw new s(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)};function qs(s){return Js(s)&&typeof s.kty=="string"}function yl(s){return s.kty!=="oct"&&typeof s.d=="string"}function vl(s){return s.kty!=="oct"&&typeof s.d>"u"}function _l(s){return s.kty==="oct"&&typeof s.k=="string"}let Ot;const xr=async(s,e,t,r=!1)=>{Ot||(Ot=new WeakMap);let n=Ot.get(s);if(n!=null&&n[t])return n[t];const l=await Nn({...e,alg:t});return r&&Object.freeze(s),n?n[t]=l:Ot.set(s,{[t]:l}),l},wl=(s,e)=>{var o;Ot||(Ot=new WeakMap);let t=Ot.get(s);if(t!=null&&t[e])return t[e];const r=s.type==="public",n=!!r;let l;if(s.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}l=s.toCryptoKey(s.asymmetricKeyType,n,r?[]:["deriveBits"])}if(s.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");l=s.toCryptoKey(s.asymmetricKeyType,n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="rsa"){let u;switch(e){case"RSA-OAEP":u="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":u="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":u="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":u="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return s.toCryptoKey({name:"RSA-OAEP",hash:u},n,r?["encrypt"]:["decrypt"]);l=s.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:u},n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="ec"){const d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=s.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!d)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&d==="P-256"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES384"&&d==="P-384"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES512"&&d==="P-521"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(l=s.toCryptoKey({name:"ECDH",namedCurve:d},n,r?[]:["deriveBits"]))}if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=l:Ot.set(s,{[e]:l}),l},Sl=async(s,e)=>{if(s instanceof Uint8Array||Rn(s))return s;if(On(s)){if(s.type==="secret")return s.export();if("toCryptoKey"in s&&typeof s.toCryptoKey=="function")try{return wl(s,e)}catch(r){if(r instanceof TypeError)throw r}let t=s.export({format:"jwk"});return xr(s,t,e)}if(qs(s))return s.k?An(s.k):xr(s,s,e,!0);throw new Error("unreachable")},Pt=s=>s==null?void 0:s[Symbol.toStringTag],Us=(s,e,t)=>{var r,n;if(e.use!==void 0){let l;switch(t){case"sign":case"verify":l="sig";break;case"encrypt":case"decrypt":l="enc";break}if(e.use!==l)throw new TypeError(`Invalid key for this operation, its "use" must be "${l}" when present`)}if(e.alg!==void 0&&e.alg!==s)throw new TypeError(`Invalid key for this operation, its "alg" must be "${s}" when present`);if(Array.isArray(e.key_ops)){let l;switch(!0){case t==="sign":case s==="dir":case s.includes("CBC-HS"):l=t;break;case s.startsWith("PBES2"):l="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(s):!s.includes("GCM")&&s.endsWith("KW")?l="unwrapKey":l=t;break;case t==="encrypt":l="wrapKey";break;case t==="decrypt":l=s.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(l&&((n=(r=e.key_ops)==null?void 0:r.includes)==null?void 0:n.call(r,l))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${l}" when present`)}return!0},kl=(s,e,t)=>{if(!(e instanceof Uint8Array)){if(qs(e)){if(_l(e)&&Us(s,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Dn(e))throw new TypeError(In(s,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Pt(e)} instances for symmetric algorithms must be of type "secret"`)}},Ll=(s,e,t)=>{if(qs(e))switch(t){case"decrypt":case"sign":if(yl(e)&&Us(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(vl(e)&&Us(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Dn(e))throw new TypeError(In(s,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Pt(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},Cl=(s,e,t)=>{s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(s)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(s)?kl(s,e,t):Ll(s,e,t)},xl=(s,e)=>{const t=`SHA-${s.slice(-3)}`;switch(s){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(s.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new qe(`alg ${s} is not supported either by JOSE or your javascript runtime`)}},Ml=async(s,e,t)=>{if(e instanceof Uint8Array){if(!s.startsWith("HS"))throw new TypeError(dl(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${s.slice(-3)}`,name:"HMAC"},!1,[t])}return ul(e,s,t),e},at=s=>Math.floor(s.getTime()/1e3),Kn=60,Bn=Kn*60,Vs=Bn*24,El=Vs*7,Al=Vs*365.25,Pl=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Ns=s=>{const e=Pl.exec(s);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let n;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*Kn);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*Bn);break;case"day":case"days":case"d":n=Math.round(t*Vs);break;case"week":case"weeks":case"w":n=Math.round(t*El);break;default:n=Math.round(t*Al);break}return e[1]==="-"||e[4]==="ago"?-n:n};function ct(s,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${s} input`);return e}var pe;class Tl{constructor(e){Xe(this,pe);if(!Js(e))throw new TypeError("JWT Claims Set MUST be an object");Qe(this,pe,structuredClone(e))}data(){return It.encode(JSON.stringify(te(this,pe)))}get iss(){return te(this,pe).iss}set iss(e){te(this,pe).iss=e}get sub(){return te(this,pe).sub}set sub(e){te(this,pe).sub=e}get aud(){return te(this,pe).aud}set aud(e){te(this,pe).aud=e}set jti(e){te(this,pe).jti=e}set nbf(e){typeof e=="number"?te(this,pe).nbf=ct("setNotBefore",e):e instanceof Date?te(this,pe).nbf=ct("setNotBefore",at(e)):te(this,pe).nbf=at(new Date)+Ns(e)}set exp(e){typeof e=="number"?te(this,pe).exp=ct("setExpirationTime",e):e instanceof Date?te(this,pe).exp=ct("setExpirationTime",at(e)):te(this,pe).exp=at(new Date)+Ns(e)}set iat(e){typeof e>"u"?te(this,pe).iat=at(new Date):e instanceof Date?te(this,pe).iat=ct("setIssuedAt",at(e)):typeof e=="string"?te(this,pe).iat=ct("setIssuedAt",at(new Date)+Ns(e)):te(this,pe).iat=ct("setIssuedAt",e)}}pe=new WeakMap;const Il=async(s,e,t)=>{const r=await Ml(s,e,"sign");pl(s,r);const n=await crypto.subtle.sign(xl(s,r.algorithm),r,t);return new Uint8Array(n)};var Jt,Te,Fe;class Rl{constructor(e){Xe(this,Jt);Xe(this,Te);Xe(this,Fe);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Qe(this,Jt,e)}setProtectedHeader(e){if(te(this,Te))throw new TypeError("setProtectedHeader can only be called once");return Qe(this,Te,e),this}setUnprotectedHeader(e){if(te(this,Fe))throw new TypeError("setUnprotectedHeader can only be called once");return Qe(this,Fe,e),this}async sign(e,t){if(!te(this,Te)&&!te(this,Fe))throw new At("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!fl(te(this,Te),te(this,Fe)))throw new At("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...te(this,Te),...te(this,Fe)},n=bl(At,new Map([["b64",!0]]),t==null?void 0:t.crit,te(this,Te),r);let l=!0;if(n.has("b64")&&(l=te(this,Te).b64,typeof l!="boolean"))throw new At('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if(typeof o!="string"||!o)throw new At('JWS "alg" (Algorithm) Header Parameter missing or invalid');Cl(o,e,"sign");let u=te(this,Jt);l&&(u=It.encode(Os(u)));let d;te(this,Te)?d=It.encode(Os(JSON.stringify(te(this,Te)))):d=It.encode("");const c=ll(d,It.encode("."),u),m=await Sl(e,o),p=await Il(o,m,c),g={signature:Os(p),payload:""};return l&&(g.payload=Ss.decode(u)),te(this,Fe)&&(g.header=te(this,Fe)),te(this,Te)&&(g.protected=Ss.decode(d)),g}}Jt=new WeakMap,Te=new WeakMap,Fe=new WeakMap;var Dt;class Ol{constructor(e){Xe(this,Dt);Qe(this,Dt,new Rl(e))}setProtectedHeader(e){return te(this,Dt).setProtectedHeader(e),this}async sign(e,t){const r=await te(this,Dt).sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}Dt=new WeakMap;var et,Ne;class Dl{constructor(e={}){Xe(this,et);Xe(this,Ne);Qe(this,Ne,new Tl(e))}setIssuer(e){return te(this,Ne).iss=e,this}setSubject(e){return te(this,Ne).sub=e,this}setAudience(e){return te(this,Ne).aud=e,this}setJti(e){return te(this,Ne).jti=e,this}setNotBefore(e){return te(this,Ne).nbf=e,this}setExpirationTime(e){return te(this,Ne).exp=e,this}setIssuedAt(e){return te(this,Ne).iat=e,this}setProtectedHeader(e){return Qe(this,et,e),this}async sign(e,t){var n;const r=new Ol(te(this,Ne).data());if(r.setProtectedHeader(te(this,et)),Array.isArray((n=te(this,et))==null?void 0:n.crit)&&te(this,et).crit.includes("b64")&&te(this,et).b64===!1)throw new Pn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}et=new WeakMap,Ne=new WeakMap;const Hs="bluesky_oauth_session",Wn="bluesky_code_verifier",Un="bluesky_oauth_state",Hn="bluesky_server_url";function Nl(s=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const r=new Uint8Array(s);crypto.getRandomValues(r);for(let n=0;n<s;n++)t+=e[r[n]%e.length];return t}async function Kl(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t);return zn(r)}function zn(s){return btoa(String.fromCharCode(...new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bl(){return await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}async function Mr(s,e,t,r,n){try{const l=await crypto.subtle.exportKey("jwk",s.publicKey),o={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};if(r&&(o.nonce=r),n){const m=new TextEncoder().encode(n),p=await crypto.subtle.digest("SHA-256",m);o.ath=zn(p)}const u=await gl(await crypto.subtle.exportKey("jwk",s.privateKey),"ES256");return await new Dl(o).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:l.kty,crv:l.crv,x:l.x,y:l.y}}).sign(u)}catch(l){throw console.error("Error creating DPoP JWT:",l),l}}async function Wl(s="https://bsky.social"){try{const e=Nl();localStorage.setItem(Wn,e);const t=await Kl(e),r=crypto.randomUUID();localStorage.setItem(Un,r),localStorage.setItem(Hn,s);const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l=n?"http://localhost:5174/.well-known/oauth-client-metadata.json":"https://pixeline.be/bluesky-list-manager/.well-known/oauth-client-metadata.json",u=window.location.pathname.includes("/bluesky-list-manager")?"/bluesky-list-manager":"",d=n?`${window.location.origin}/oauth-callback.html`:`${window.location.origin}${u}/oauth-callback-standalone.html`,c=new URL(`${s}/oauth/authorize`);c.searchParams.append("client_id",l),c.searchParams.append("response_type","code"),c.searchParams.append("redirect_uri",d),c.searchParams.append("scope","atproto transition:generic"),c.searchParams.append("state",r),c.searchParams.append("code_challenge",t),c.searchParams.append("code_challenge_method","S256"),window.location.href=c.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}async function ut(){const s=localStorage.getItem(Hs);if(s)try{const e=JSON.parse(s);if(e.dpopKeypair){const t=await crypto.subtle.importKey("jwk",e.dpopKeypair.privateKey,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]),r=await crypto.subtle.importKey("jwk",e.dpopKeypair.publicKey,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);e.dpopKeypair={privateKey:t,publicKey:r}}return e}catch(e){console.error("Failed to parse stored OAuth session:",e),localStorage.removeItem(Hs)}return null}function Er(){localStorage.removeItem(Hs),localStorage.removeItem(Wn),localStorage.removeItem(Un),localStorage.removeItem(Hn)}const Pe={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},Tt={OAUTH:"oauth",APP_PASSWORD:"app_password"};function Ul(){const{subscribe:s,set:e,update:t}=js({session:null,authType:null,isLoading:!1,error:null});return{subscribe:s,setSession:(r,n=Tt.APP_PASSWORD)=>{r?(localStorage.setItem(Pe.SESSION,JSON.stringify(r)),localStorage.setItem(Pe.AUTH_TYPE,n)):(localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE)),e({session:r,authType:n,isLoading:!1,error:null})},setLoading:r=>{t(n=>({...n,isLoading:r}))},setError:r=>{t(n=>({...n,error:r,isLoading:!1}))},getSession:()=>{const r=localStorage.getItem(Pe.SESSION),n=localStorage.getItem(Pe.AUTH_TYPE)||Tt.APP_PASSWORD;if(r)try{return{session:JSON.parse(r),authType:n}}catch{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE),Er(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE),Er(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:async()=>{const r=await ut();if(r&&r.accessToken){const o={accessJwt:r.accessToken,refreshJwt:r.refreshToken,handle:r.handle||r.sub,did:r.sub,email:null};return e({session:o,authType:Tt.OAUTH,isLoading:!1,error:null}),{session:o,authType:Tt.OAUTH}}const{session:n,authType:l}=je.getSession();return n?(e({session:n,authType:l,isLoading:!1,error:null}),{session:n,authType:l}):{session:null,authType:null}},isOAuthSession:()=>localStorage.getItem(Pe.AUTH_TYPE)===Tt.OAUTH}}const je=Ul(),ps="https://bsky.social/xrpc";class Hl{async signIn(e,t){const r=await fetch(`${ps}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to sign in")}return await r.json()}async getAuthHeaders(e,t="app_password"){if(t==="oauth"){const r=await ut();if(!r||!r.accessToken)throw new Error("No OAuth session found");const n=await Bl(),l=await Mr(n,"GET",`${ps}/app.bsky.graph.getLists`,r.serverNonce);return{Authorization:`Bearer ${r.accessToken}`,DPoP:l,"Content-Type":"application/json"}}else return{Authorization:`Bearer ${e.accessJwt}`,"Content-Type":"application/json"}}async makeBlueskyRequest(e,t,r="app_password",n="GET",l=null){const o=await this.getAuthHeaders(t,r);if(r==="oauth"&&o.DPoP){const c=await ut();if(!c.dpopKeypair)throw new Error("No DPoP keypair found in OAuth session");const m=await Mr(c.dpopKeypair,n,`${ps}/${e}`,c.serverNonce,c.accessToken);o.DPoP=m}const u={method:n,headers:o};l&&n!=="GET"&&(u.body=JSON.stringify(l));const d=await fetch(`${ps}/${e}`,u);if(!d.ok){const c=await d.json();throw new Error(c.message||`Failed to fetch from ${e}`)}return await d.json()}async getUserLists(e,t="app_password"){if(t==="oauth"){const r=await ut();if(!r.sub)throw new Error("No user DID found in OAuth session");const l=(await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${r.sub}`,e,t)).handle;return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${l}`,e,t)).lists||[]}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${e.handle}`,e,t)).lists||[]}async getListInfo(e,t,r="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,r)).list}async getListMembers(e,t,r="app_password",n=25,l=null){var p;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r),d=u.items||[],c=d.map(g=>g.subject.did),m=d.map(g=>g.subject);return{members:c,profiles:m,cursor:u.cursor,totalCount:((p=u.list)==null?void 0:p.listItemCount)||0}}async getListMembersCount(e,t,r="app_password"){return(await this.getListInfo(e,t,r)).listItemCount||0}async getProfiles(e,t,r="app_password"){if(!t||t.length===0)return[];const n=[];for(const l of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(l)}`,e,r);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${l}:`,o),n.push({did:l,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,r="app_password",n=25,l=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r);return{actors:u.actors||[],cursor:u.cursor}}async addToList(e,t,r,n="app_password"){let l;return n==="oauth"?l=ut().sub:l=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:r,createdAt:new Date().toISOString()}})}async createList(e,{name:t,description:r="",purpose:n="app.bsky.graph.defs#curatelist"},l="app_password"){if(!t||typeof t!="string"||t.trim().length===0)throw new Error("List name is required");let o;if(l==="oauth"){const c=ut();o=c==null?void 0:c.sub}else o=e==null?void 0:e.did;if(!o)throw new Error("Unable to determine user DID for list creation");const u={$type:"app.bsky.graph.list",name:t.trim(),createdAt:new Date().toISOString()};return r&&typeof r=="string"&&(u.description=r.trim()),n&&typeof n=="string"&&(u.purpose=n),await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,l,"POST",{repo:o,collection:"app.bsky.graph.list",record:u})}async removeFromList(e,t,r,n="app_password"){var p;let l;n==="oauth"?l=ut().sub:l=e.did,console.log("removeFromList: Searching for DID:",t,"in list:",r,"for user:",l);let o=null,u=null,d=0;do{const g=await this.makeBlueskyRequest(`com.atproto.repo.listRecords?repo=${l}&collection=app.bsky.graph.listitem&limit=100${o?`&cursor=${encodeURIComponent(o)}`:""}`,e,n);if(console.log("removeFromList: Found",((p=g.records)==null?void 0:p.length)||0,"records in this batch"),u=g.records.find(b=>{d++;const _=b.value.subject===t&&b.value.list===r;return _&&console.log("removeFromList: Found matching record:",b),_}),u){console.log("removeFromList: Found record with rkey:",u.rkey);break}o=g.cursor}while(o&&!u);if(console.log("removeFromList: Total records checked:",d),!u)throw new Error("List item not found");const c=u.uri.split("/").pop();if(!c)throw console.error("removeFromList: Could not extract rkey from URI:",u.uri),new Error("Could not extract rkey from URI");console.log("removeFromList: Deleting record with rkey:",c);const m=await this.makeBlueskyRequest("com.atproto.repo.deleteRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",rkey:c});return console.log("removeFromList: Delete successful"),m}async resolveHandle(e,t,r="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,r)).did}}const Le=new Hl,ke={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function zl(){const{subscribe:s,update:e}=js({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1,r=new Map;return{subscribe:s,setSelectedList:n=>{n?localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)):localStorage.removeItem(ke.SELECTED_LIST),e(l=>({...l,selectedList:n,isLoadingList:!!n,listMembers:[],listMemberProfiles:[]})),r.clear()},setListLoading:n=>{e(l=>({...l,isLoadingList:n}))},setUserLists:n=>{localStorage.setItem(ke.LISTS,JSON.stringify(n)),e(l=>({...l,userLists:n}))},insertNewList:(n,l=!0)=>{!n||!n.uri||(e(o=>{const u=[n,...o.userLists];return localStorage.setItem(ke.LISTS,JSON.stringify(u)),l&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)),{...o,userLists:u,selectedList:l?n:o.selectedList,isLoadingList:!!l}}),r.clear())},setListMembers:n=>{e(l=>({...l,listMembers:n}))},isProfileInCurrentList:n=>{let l=!1;return e(o=>(l=o.listMembers.includes(n),o)),l},async isProfileInEntireList(n,l,o="app_password"){var c;let u;e(m=>(u=m,m));const d=`${(c=u.selectedList)==null?void 0:c.uri}-${l}`;if(r.has(d))return r.get(d);if(u.listMembers.includes(l))return r.set(d,!0),!0;try{let m=null;const p=100;do{const g=await Le.getListMembers(n,u.selectedList.uri,o,p,m);if(g.members.includes(l))return r.set(d,!0),!0;m=g.cursor}while(m);return r.set(d,!1),!1}catch(m){console.error("Error checking profile membership:",m);const p=u.listMembers.includes(l);return r.set(d,p),p}},setListMemberProfiles:n=>{e(l=>({...l,listMemberProfiles:n}))},addProfileToList:n=>{e(l=>{const o=l.listMembers.includes(n)?l.listMembers:[n,...l.listMembers];return{...l,listMembers:o}})},addProfileToDisplay:n=>{e(l=>{if(l.listMembers.indexOf(n.did)<25){const u=[n,...l.listMemberProfiles];return{...l,listMemberProfiles:u.slice(0,25)}}return l})},fetchAndAddProfile:(n,l,o="app_password")=>t?Promise.resolve():(t=!0,new Promise(async u=>{try{const d=await Le.getProfiles(n,[l],o);if(d.length>0){const c=d[0];e(m=>{const p=m.listMembers.includes(l)?m.listMembers:[l,...m.listMembers];if(p.indexOf(l)<25){const b=m.listMemberProfiles.filter(v=>v.did!==l),_=[c,...b];return{...m,listMembers:p,listMemberProfiles:_.slice(0,25)}}return{...m,listMembers:p}}),e(m=>{console.log("Updating member count for DID:",l),console.log("Current selectedList:",m.selectedList),console.log("Current userLists:",m.userLists),console.log("Incrementing member count for successfully added profile");const p=m.selectedList?{...m.selectedList,listItemCount:(m.selectedList.listItemCount||0)+1}:null,g=m.userLists.map(b=>{var _;return b.uri===((_=m.selectedList)==null?void 0:_.uri)?{...b,memberCount:(b.memberCount||0)+1}:b});return console.log("Updated selectedList:",p),console.log("Updated userLists:",g),p&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(p)),localStorage.setItem(ke.LISTS,JSON.stringify(g)),{...m,selectedList:p,userLists:g}})}}catch(d){console.error("Failed to fetch profile data:",d),e(c=>{const m=c.listMembers.includes(l)?c.listMembers:[l,...c.listMembers];return{...c,listMembers:m}}),e(c=>{console.log("Updating member count for DID (error case):",l),console.log("Incrementing member count for profile (error case)");const m=c.selectedList?{...c.selectedList,listItemCount:(c.selectedList.listItemCount||0)+1}:null,p=c.userLists.map(g=>{var b;return g.uri===((b=c.selectedList)==null?void 0:b.uri)?{...g,memberCount:(g.memberCount||0)+1}:g});return m&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(m)),localStorage.setItem(ke.LISTS,JSON.stringify(p)),{...c,selectedList:m,userLists:p}})}finally{t=!1}u()})),refreshListMembers:()=>{e(n=>({...n,refreshTrigger:Date.now()}))},setLoading:n=>{e(l=>({...l,isLoading:n}))},setError:n=>{e(l=>({...l,error:n,isLoading:!1}))},getSelectedList:()=>{const n=localStorage.getItem(ke.SELECTED_LIST);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.SELECTED_LIST)}return null},getUserLists:()=>{const n=localStorage.getItem(ke.LISTS);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(ke.SELECTED_LIST),e(n=>({...n,selectedList:null}))},async getAllListMemberDids(n,l="app_password"){let o;if(e(d=>(o=d,d)),!o.selectedList)return new Set;const u=`${o.selectedList.uri}-all-dids`;if(r.has(u))return r.get(u);try{let d=new Set,c=null;const m=100;do{const p=await Le.getListMembers(n,o.selectedList.uri,l,m,c);p.members.forEach(g=>d.add(g)),c=p.cursor}while(c);return r.set(u,d),d}catch(d){console.error("Error getting all list member DIDs:",d);const c=new Set(o.listMembers);return r.set(u,c),c}}}}const me=zl();function Fl(s){let e,t,r,n,l,o,u,d,c,m,p,g,b;return{c(){e=f("div"),t=f("label"),t.textContent="Handle",r=w(),n=f("input"),l=w(),o=f("div"),u=f("label"),u.textContent="App Password",d=w(),c=f("input"),m=w(),p=f("p"),p.textContent="Use an app password, not your main account password",a(t,"for","handle"),a(t,"class","block text-sm font-medium text-gray-700 mb-1"),a(n,"id","handle"),a(n,"type","text"),a(n,"placeholder","your-handle.bsky.social"),a(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,a(u,"for","password"),a(u,"class","block text-sm font-medium text-gray-700 mb-1"),a(c,"id","password"),a(c,"type","password"),a(c,"placeholder","Your app password"),a(c,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c.required=!0,a(p,"class","text-xs text-gray-500 mt-1")},m(_,v){A(_,e,v),i(e,t),i(e,r),i(e,n),be(n,s[0]),A(_,l,v),A(_,o,v),i(o,u),i(o,d),i(o,c),be(c,s[1]),i(o,m),i(o,p),g||(b=[le(n,"input",s[11]),le(c,"input",s[12])],g=!0)},p(_,v){v&1&&n.value!==_[0]&&be(n,_[0]),v&2&&c.value!==_[1]&&be(c,_[1])},d(_){_&&(M(e),M(l),M(o)),g=!1,Me(b)}}}function jl(s){let e;return{c(){e=f("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function Ar(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=k(s[3]),a(t,"class","text-red-700 text-sm"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&V(r,n[3])},d(n){n&&M(e)}}}function Jl(s){let e;return{c(){e=k("Sign In")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function ql(s){let e;return{c(){e=k("Sign in with Bluesky")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function Vl(s){let e,t,r;function n(u,d){return u[4]==="oauth"?Zl:Yl}let l=n(s),o=l(s);return{c(){e=f("span"),t=w(),o.c(),r=st(),a(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(u,d){A(u,e,d),A(u,t,d),o.m(u,d),A(u,r,d)},p(u,d){l!==(l=n(u))&&(o.d(1),o=l(u),o&&(o.c(),o.m(r.parentNode,r)))},d(u){u&&(M(e),M(t),M(r)),o.d(u)}}}function Yl(s){let e;return{c(){e=k("Signing in...")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Zl(s){let e;return{c(){e=k("Connecting...")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Gl(s){let e,t,r,n,l,o,u,d,c,m,p,g,b,_,v,L,x,C,D,N,R,E,I,S,H,T,K,j,$,P,U,q,Z,oe,X;function y(J,Y){return J[4]==="oauth"?jl:Fl}let h=y(s),W=h(s),B=s[3]&&Ar(s);function O(J,Y){return J[2]?Vl:J[4]==="oauth"?ql:Jl}let z=O(s),G=z(s);return Z=Cn(s[9][0]),{c(){e=f("div"),t=f("button"),r=w(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Sign in to Bluesky",u=w(),d=f("button"),d.textContent="×",c=w(),m=f("form"),p=f("div"),g=f("div"),b=f("fieldset"),_=f("legend"),_.textContent="Sign in with:",v=w(),L=f("div"),x=f("label"),C=f("input"),D=w(),N=f("span"),N.textContent="OAuth (Not working yet)",R=w(),E=f("label"),I=f("input"),S=w(),H=f("span"),H.textContent="App Password",T=w(),W.c(),K=w(),B&&B.c(),j=w(),$=f("div"),P=f("button"),P.textContent="Cancel",U=w(),q=f("button"),G.c(),a(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),a(t,"aria-label","Close modal"),a(t,"type","button"),a(o,"class","text-xl font-semibold text-slate-800"),a(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),a(l,"class","flex items-center justify-between mb-4"),a(_,"class","block text-sm font-medium text-gray-700 mb-2"),a(C,"type","radio"),C.__value="oauth",be(C,C.__value),a(C,"class","mr-2"),a(N,"class","text-sm"),a(x,"class","flex items-center"),a(I,"type","radio"),I.__value="app_password",be(I,I.__value),a(I,"class","mr-2"),a(H,"class","text-sm"),a(E,"class","flex items-center"),a(L,"class","space-y-2"),a(P,"type","button"),a(P,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),a(q,"type","submit"),q.disabled=s[2],a(q,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),a($,"class","flex space-x-3 pt-2"),a(p,"class","space-y-4"),a(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),a(n,"role","document"),a(n,"id","sign-in-modal-content"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),a(e,"role","dialog"),a(e,"aria-modal","true"),a(e,"tabindex","-1"),a(e,"id","sign-in-modal"),Z.p(C,I)},m(J,Y){A(J,e,Y),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,c),i(n,m),i(m,p),i(p,g),i(g,b),i(b,_),i(b,v),i(b,L),i(L,x),i(x,C),C.checked=C.__value===s[4],i(x,D),i(x,N),i(L,R),i(L,E),i(E,I),I.checked=I.__value===s[4],i(E,S),i(E,H),i(p,T),W.m(p,null),i(p,K),B&&B.m(p,null),i(p,j),i(p,$),i($,P),i($,U),i($,q),G.m(q,null),oe||(X=[le(t,"click",s[7]),le(d,"click",s[6]),le(C,"change",s[8]),le(I,"change",s[10]),le(P,"click",s[6]),le(m,"submit",zs(s[5])),le(e,"keydown",s[13])],oe=!0)},p(J,[Y]){Y&16&&(C.checked=C.__value===J[4]),Y&16&&(I.checked=I.__value===J[4]),h===(h=y(J))&&W?W.p(J,Y):(W.d(1),W=h(J),W&&(W.c(),W.m(p,K))),J[3]?B?B.p(J,Y):(B=Ar(J),B.c(),B.m(p,j)):B&&(B.d(1),B=null),z===(z=O(J))&&G?G.p(J,Y):(G.d(1),G=z(J),G&&(G.c(),G.m(q,null))),Y&4&&(q.disabled=J[2])},i:se,o:se,d(J){J&&M(e),W.d(),B&&B.d(),G.d(),Z.r(),oe=!1,Me(X)}}}function $l(s,e,t){const r=Mn();let n="",l="",o=!1,u="",d="app_password";async function c(){t(2,o=!0),t(3,u="");try{await Wl()}catch(N){t(3,u=N.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function m(){if(!n||!l){t(3,u="Please enter both handle and password");return}t(2,o=!0),t(3,u="");try{const N=await Le.signIn(n,l);je.setSession(N,Tt.APP_PASSWORD),r("close")}catch(N){t(3,u=N.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function p(){d==="oauth"?await c():await m()}function g(){r("close")}function b(){g()}const _=[[]];function v(){d=this.__value,t(4,d)}function L(){d=this.__value,t(4,d)}function x(){n=this.value,t(0,n)}function C(){l=this.value,t(1,l)}return[n,l,o,u,d,p,g,b,v,_,L,x,C,N=>N.key==="Escape"&&g()]}class Fn extends De{constructor(e){super(),Oe(this,e,$l,Gl,Ee,{})}}function Pr(s){let e,t;return{c(){e=f("div"),t=k(s[4]),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700")},m(r,n){A(r,e,n),i(e,t)},p(r,n){n&16&&V(t,r[4])},d(r){r&&M(e)}}}function Xl(s){let e;return{c(){e=k("Create")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Ql(s){let e;return{c(){e=k("Creating...")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function ei(s){let e,t,r,n,l,o,u,d,c,m,p,g,b,_,v,L,x,C,D,N,R,E,I,S,H,T,K,j,$,P,U,q,Z,oe,X,y,h,W,B,O,z,G,J,Y,F=s[4]&&Pr(s);function re(ne,Q){return ne[3]?Ql:Xl}let ce=re(s),ie=ce(s);return G=Cn(s[10][0]),{c(){e=f("div"),t=f("button"),r=w(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Create New List",u=w(),d=f("button"),d.textContent="×",c=w(),m=f("form"),p=f("div"),g=f("div"),b=f("label"),b.textContent="Name",_=w(),v=f("input"),L=w(),x=f("div"),C=f("label"),C.textContent="Description (optional)",D=w(),N=f("textarea"),R=w(),E=f("div"),I=f("fieldset"),S=f("legend"),S.textContent="Purpose",H=w(),T=f("div"),K=f("label"),j=f("input"),$=w(),P=f("span"),P.textContent="Curated list",U=w(),q=f("label"),Z=f("input"),oe=w(),X=f("span"),X.textContent="Moderation list",y=w(),F&&F.c(),h=w(),W=f("div"),B=f("button"),B.textContent="Cancel",O=w(),z=f("button"),ie.c(),a(t,"class","absolute inset-0 w-full h-full bg-transparent border-0"),a(t,"aria-label","Close"),a(o,"class","text-xl font-semibold text-slate-800"),a(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),a(l,"class","flex items-center justify-between mb-4"),a(b,"class","block text-sm font-medium text-gray-700 mb-1"),a(b,"for","list-name"),a(v,"id","list-name"),a(v,"type","text"),v.required=!0,a(v,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a(C,"class","block text-sm font-medium text-gray-700 mb-1"),a(C,"for","list-description"),a(N,"id","list-description"),a(N,"rows","3"),a(N,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a(S,"class","block text-sm font-medium text-gray-700 mb-2"),a(j,"type","radio"),a(j,"name","purpose"),j.__value="app.bsky.graph.defs#curatelist",be(j,j.__value),a(j,"class","mr-2"),a(P,"class","text-sm"),a(K,"class","flex items-center"),a(Z,"type","radio"),a(Z,"name","purpose"),Z.__value="app.bsky.graph.defs#modlist",be(Z,Z.__value),a(Z,"class","mr-2"),a(X,"class","text-sm"),a(q,"class","flex items-center"),a(T,"class","space-y-2"),a(B,"type","button"),a(B,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),a(z,"type","submit"),z.disabled=s[3],a(z,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),a(W,"class","flex space-x-3 pt-2"),a(p,"class","space-y-4"),a(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),a(e,"role","dialog"),a(e,"aria-modal","true"),G.p(j,Z)},m(ne,Q){A(ne,e,Q),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,c),i(n,m),i(m,p),i(p,g),i(g,b),i(g,_),i(g,v),be(v,s[0]),i(p,L),i(p,x),i(x,C),i(x,D),i(x,N),be(N,s[1]),i(p,R),i(p,E),i(E,I),i(I,S),i(I,H),i(I,T),i(T,K),i(K,j),j.checked=j.__value===s[2],i(K,$),i(K,P),i(T,U),i(T,q),i(q,Z),Z.checked=Z.__value===s[2],i(q,oe),i(q,X),i(p,y),F&&F.m(p,null),i(p,h),i(p,W),i(W,B),i(W,O),i(W,z),ie.m(z,null),J||(Y=[le(t,"click",s[5]),le(d,"click",s[5]),le(v,"input",s[7]),le(N,"input",s[8]),le(j,"change",s[9]),le(Z,"change",s[11]),le(B,"click",s[5]),le(m,"submit",zs(s[6]))],J=!0)},p(ne,[Q]){Q&1&&v.value!==ne[0]&&be(v,ne[0]),Q&2&&be(N,ne[1]),Q&4&&(j.checked=j.__value===ne[2]),Q&4&&(Z.checked=Z.__value===ne[2]),ne[4]?F?F.p(ne,Q):(F=Pr(ne),F.c(),F.m(p,h)):F&&(F.d(1),F=null),ce!==(ce=re(ne))&&(ie.d(1),ie=ce(ne),ie&&(ie.c(),ie.m(z,null))),Q&8&&(z.disabled=ne[3])},i:se,o:se,d(ne){ne&&M(e),F&&F.d(),ie.d(),G.r(),J=!1,Me(Y)}}}function ti(s,e,t){let r;Ie(s,je,x=>t(12,r=x));const n=Mn();let l="",o="",u="app.bsky.graph.defs#curatelist",d=!1,c="";function m(){n("close")}async function p(){var x;if(t(4,c=""),!l||l.trim().length===0){t(4,c="Please enter a list name");return}t(3,d=!0);try{const C=await Le.createList(r.session,{name:l.trim(),description:o.trim(),purpose:u},r.authType),D=(C==null?void 0:C.uri)||((x=C==null?void 0:C.cid)==null?void 0:x.uri)||null,N=new Date().toISOString(),R={uri:D,name:l.trim(),description:o.trim()||"",purpose:u,createdAt:N,memberCount:0};n("success",R),n("close")}catch(C){t(4,c=(C==null?void 0:C.message)||"Failed to create list")}finally{t(3,d=!1)}}const g=[[]];function b(){l=this.value,t(0,l)}function _(){o=this.value,t(1,o)}function v(){u=this.__value,t(2,u)}function L(){u=this.__value,t(2,u)}return[l,o,u,d,c,m,p,b,_,v,g,L]}class si extends De{constructor(e){super(),Oe(this,e,ti,ei,Ee,{})}}const ri=!0,ks={staticBase:"static",isDevelopment:!1,isProduction:ri,buildTime:new Date().toISOString(),getAssetPath:s=>`./${s.replace("static/","")}`};function Tr(s,e,t){const r=s.slice();return r[14]=e[t],r}function ni(s){let e,t,r;return{c(){e=f("button"),e.textContent="🔐 Sign in with Bluesky",a(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200"),a(e,"id","sign-in-button")},m(n,l){A(n,e,l),t||(r=le(e,"click",s[7]),t=!0)},p:se,d(n){n&&M(e),t=!1,r()}}}function li(s){let e,t,r,n,l,o,u,d,c,m,p,g,b,_=s[1].session.handle+"",v,L,x,C,D;function N(S,H){return S[4]?ai:S[5]?oi:ii}let R=N(s),E=R(s),I=s[4]&&Rr();return{c(){e=f("div"),t=f("label"),t.textContent="List:",r=w(),n=f("select"),l=f("option"),l.textContent="Select a list...",E.c(),u=w(),I&&I.c(),d=w(),c=f("button"),c.textContent="+ New List",m=w(),p=f("div"),g=f("div"),b=k("@"),v=k(_),L=w(),x=f("button"),x.textContent="Sign out",a(t,"for","list-selector"),a(t,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),l.__value="",be(l,l.__value),a(n,"id","list-selector"),n.disabled=s[4],a(n,"class","bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm w-64 text-slate-800 focus:border-slate-500 focus:ring-1 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-3"),a(e,"id","list-selector-container"),a(c,"class","bg-white hover:bg-gray-50 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),a(c,"id","new-list-button"),a(c,"title","Create a new list"),a(g,"class","text-sm text-slate-700"),a(x,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),a(x,"id","sign-out-button"),a(p,"class","text-right"),a(p,"id","user-info")},m(S,H){var T;A(S,e,H),i(e,t),i(e,r),i(e,n),i(n,l),E.m(n,null),Lr(n,((T=s[0].selectedList)==null?void 0:T.uri)||""),i(e,u),I&&I.m(e,null),A(S,d,H),A(S,c,H),A(S,m,H),A(S,p,H),i(p,g),i(g,b),i(g,v),i(p,L),i(p,x),C||(D=[le(n,"change",s[6]),le(c,"click",s[8]),le(x,"click",s[12])],C=!0)},p(S,H){var T,K;R===(R=N(S))&&E?E.p(S,H):(E.d(1),E=R(S),E&&(E.c(),E.m(n,null))),H&1&&o!==(o=((T=S[0].selectedList)==null?void 0:T.uri)||"")&&Lr(n,((K=S[0].selectedList)==null?void 0:K.uri)||""),H&16&&(n.disabled=S[4]),S[4]?I||(I=Rr(),I.c(),I.m(e,null)):I&&(I.d(1),I=null),H&2&&_!==(_=S[1].session.handle+"")&&V(v,_)},d(S){S&&(M(e),M(d),M(c),M(m),M(p)),E.d(),I&&I.d(),C=!1,Me(D)}}}function ii(s){let e,t=he(s[0].userLists),r=[];for(let n=0;n<t.length;n+=1)r[n]=Ir(Tr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);A(n,e,l)},p(n,l){if(l&1){t=he(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const u=Tr(n,t,o);r[o]?r[o].p(u,l):(r[o]=Ir(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&M(e),Ve(r,n)}}}function oi(s){let e;return{c(){e=f("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",be(e,e.__value)},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function ai(s){let e;return{c(){e=f("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",be(e,e.__value)},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function Ir(s){let e,t=s[14].name+"",r,n,l=s[14].memberCount.toLocaleString()+"",o,u,d;return{c(){e=f("option"),r=k(t),n=k(" ("),o=k(l),u=k(` members)
									`),e.__value=d=s[14].uri,be(e,e.__value)},m(c,m){A(c,e,m),i(e,r),i(e,n),i(e,o),i(e,u)},p(c,m){m&1&&t!==(t=c[14].name+"")&&V(r,t),m&1&&l!==(l=c[14].memberCount.toLocaleString()+"")&&V(o,l),m&1&&d!==(d=c[14].uri)&&(e.__value=d,be(e,e.__value))},d(c){c&&M(e)}}}function Rr(s){let e;return{c(){e=f("div"),a(e,"class","loading-spinner svelte-1myfg8v")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Or(s){let e,t;return e=new Fn({}),e.$on("close",s[11]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:se,i(r){t||(ae(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Dr(s){let e,t;return e=new si({}),e.$on("close",s[9]),e.$on("success",s[10]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:se,i(r){t||(ae(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function ci(s){let e,t,r,n,l,o,u,d,c,m;function p(L,x){return L[1].session?li:ni}let g=p(s),b=g(s),_=s[2]&&Or(s),v=s[3]&&Dr(s);return{c(){e=f("header"),t=f("div"),r=f("div"),n=f("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,l=w(),o=f("div"),b.c(),u=w(),_&&_.c(),d=w(),v&&v.c(),c=st(),a(o,"class","flex items-center space-x-4"),a(r,"class","flex items-center justify-between mb-4"),a(t,"class","max-w-6xl mx-auto px-6 py-4"),a(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50"),a(e,"id","app-header")},m(L,x){A(L,e,x),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),b.m(o,null),A(L,u,x),_&&_.m(L,x),A(L,d,x),v&&v.m(L,x),A(L,c,x),m=!0},p(L,[x]){g===(g=p(L))&&b?b.p(L,x):(b.d(1),b=g(L),b&&(b.c(),b.m(o,null))),L[2]?_?(_.p(L,x),x&4&&ae(_,1)):(_=Or(L),_.c(),ae(_,1),_.m(d.parentNode,d)):_&&(ft(),ue(_,1,1,()=>{_=null}),mt()),L[3]?v?(v.p(L,x),x&8&&ae(v,1)):(v=Dr(L),v.c(),ae(v,1),v.m(c.parentNode,c)):v&&(ft(),ue(v,1,1,()=>{v=null}),mt())},i(L){m||(ae(_),ae(v),m=!0)},o(L){ue(_),ue(v),m=!1},d(L){L&&(M(e),M(u),M(d),M(c)),b.d(),_&&_.d(L),v&&v.d(L)}}}function ui(s,e,t){let r,n;Ie(s,me,x=>t(0,r=x)),Ie(s,je,x=>t(1,n=x));let l=!1,o=!1,u=!1,d="";Cs(async()=>{n.session&&await c()});async function c(){if(n.session){t(4,u=!0),t(5,d="");try{const C=(await Le.getUserLists(n.session,n.authType)).map(D=>({uri:D.uri,name:D.name,description:D.description||"",purpose:D.purpose||"app.bsky.graph.defs#modlist",createdAt:D.createdAt,memberCount:D.listItemCount||0})).sort((D,N)=>new Date(N.createdAt)-new Date(D.createdAt));me.setUserLists(C)}catch(x){t(5,d=x.message||"Failed to load your lists")}finally{t(4,u=!1)}}}function m(x){const C=x.target.value;if(C){const D=r.userLists.find(N=>N.uri===C);D&&me.setSelectedList(D)}else me.setSelectedList(null)}function p(){t(2,l=!0)}function g(){t(3,o=!0)}function b(){t(3,o=!1)}async function _(x){const C=x.detail;me.insertNewList(C,!0)}function v(){t(2,l=!1)}function L(){je.signOut(),me.setSelectedList(null)}return s.$$.update=()=>{s.$$.dirty&3&&n.session&&r.userLists.length===0&&c(),s.$$.dirty&1&&r.userLists.length>0&&console.log("Header: userLists updated:",r.userLists)},[r,n,l,o,u,d,m,p,g,b,_,v,L]}class di extends De{constructor(e){super(),Oe(this,e,ui,ci,Ee,{})}}function ys(s){s.preventDefault()}var fi=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]);function mi(s){if(fi.has(s.key))return ys(s),!1}var vs=new AbortController,hs=vs.signal;function pi(){window.addEventListener("DOMMouseScroll",ys,{signal:hs}),window.addEventListener("wheel",ys,{passive:!1,signal:hs}),window.addEventListener("touchmove",ys,{passive:!1,signal:hs}),window.addEventListener("keydown",mi,{signal:hs})}function hi(){vs==null||vs.abort()}function gi(s){if(!s)throw new Error("Please specify a container for the zoom image");const e=s.querySelector("img");if(!e)throw new Error("Please place an image inside the container");return e}var bi=50,yi=()=>({createZoomImage:(e,t,r)=>{if(e.src===t)return;e.src=t;let n=!1;e.onload=()=>{n=!0,r.setState({zoomedImgStatus:"loaded"})},e.onerror=()=>{n=!0,r.setState({zoomedImgStatus:"error"})},setTimeout(()=>{n||r.setState({zoomedImgStatus:"loading"})},bi)}}),vi=yi();function _i(s){let e=new Set,t=!1,r=s,n,l=(u={})=>{n={...n,...u},o()},o=()=>{if(t)return;let u=!1;if(n){for(let d in n)if(r[d]!==n[d]){u=!0;break}}u&&(r={...r,...n},e.forEach(d=>d({state:r,updatedProperties:n})),n=void 0)};return{subscribe:u=>(e.add(u),()=>{e.delete(u)}),cleanup:()=>e.clear(),getState:()=>r,setState:l,batch:u=>{t=!0,u(),t=!1,o()}}}function wi(s,e={}){var D,N;let t=null;const r=gi(s),n={zoomFactor:e.zoomFactor??4,zoomImageSource:e.zoomImageSource??r.src,disabledContextMenu:e.disabledContextMenu??!1},{disabledContextMenu:l,zoomFactor:o,zoomImageSource:u}=n,d=_i({zoomedImgStatus:"idle"}),c=document.createElement("img");(D=e.zoomImageProps)!=null&&D.alt&&(c.alt=e.zoomImageProps.alt),(N=e.zoomImageProps)!=null&&N.className&&(c.className=e.zoomImageProps.className),c.style.maxWidth="none",c.style.position="absolute",c.style.top="0",c.style.left="0",l&&(c.style["-webkit-user-select"]="none",c.style["-webkit-touch-callout"]="none",c.oncontextmenu=()=>!1);const m=R=>t&&R.pointerId===t;function p(R){if(t===null){t=R.pointerId,s.appendChild(c),c.style.display="block";const E=r.clientWidth*o,I=r.clientHeight*o;c.style.width=`${E}px`,c.style.height=`${I}px`,vi.createZoomImage(c,u,d),L(R),R.pointerType!=="mouse"&&pi()}}function g(R){m(R)&&L(R)}function b(R){m(R)&&(s.contains(c)&&s.removeChild(c),c.style.display="none",c.style.transform="none",hi(),t=null)}const _=R=>{const E=s.clientWidth;return R>0?0:R+E*o<E?-E*(o-1):R},v=R=>{const E=s.clientHeight;return R>0?0:R+E*o<E?-E*(o-1):R};function L(R){c.style.display="block";const E=s.getBoundingClientRect(),I=R.clientX-E.left,S=R.clientY-E.top,H=_(-I*o+I),T=v(-S*o+S);c.style.transform=`translate(${H}px, ${T}px)`}const x=new AbortController,{signal:C}=x;return s.addEventListener("pointerenter",p,{signal:C}),s.addEventListener("pointermove",g,{signal:C}),s.addEventListener("pointerleave",b,{signal:C}),s.addEventListener("touchstart",R=>{l&&R.preventDefault()},{signal:C}),{cleanup:()=>{x.abort(),s.contains(c)&&s.removeChild(c),d.cleanup()},subscribe:d.subscribe,getState:d.getState}}function Si(){let s;const{set:e,subscribe:t}=js({zoomedImgStatus:"idle"}),r=(...n)=>{s==null||s.cleanup(),s=wi(...n),e(s.getState()),s.subscribe(({state:l})=>{e(l)})};return xn(()=>{s==null||s.cleanup()}),{createZoomImage:r,zoomImageState:{subscribe:t}}}function ki(s){let e,t,r,n;return{c(){e=f("div"),t=f("img"),tt(t.src,r=s[0])||a(t,"src",r),a(t,"alt",s[1]),a(t,"class","base-image svelte-6dnnuj"),de(t,"width","100%"),de(t,"height","100%"),de(t,"object-fit","cover"),a(e,"class",n="zoom-image-container "+s[4]+" svelte-6dnnuj"),de(e,"width",s[2]),de(e,"height",s[3]),de(e,"overflow","hidden"),de(e,"position","relative"),a(e,"id","zoomable-image-"+Math.random().toString(36).substr(2,9))},m(l,o){A(l,e,o),i(e,t),s[7](e)},p(l,[o]){o&1&&!tt(t.src,r=l[0])&&a(t,"src",r),o&2&&a(t,"alt",l[1]),o&16&&n!==(n="zoom-image-container "+l[4]+" svelte-6dnnuj")&&a(e,"class",n),o&4&&de(e,"width",l[2]),o&8&&de(e,"height",l[3])},i:se,o:se,d(l){l&&M(e),s[7](null)}}}function Li(s,e,t){let{src:r=""}=e,{alt:n=""}=e,{width:l="auto"}=e,{height:o="auto"}=e,{className:u=""}=e,{zoomFactor:d=2}=e,c,m;const{createZoomImage:p}=Si();Cs(()=>{c&&(m=p(c,{zoomFactor:d,zoomImageSource:r,zoomImageProps:{alt:n,className:"zoom-image"}}))}),xn(()=>{m&&m.cleanup&&m.cleanup()});function g(b){ws[b?"unshift":"push"](()=>{c=b,t(5,c)})}return s.$$set=b=>{"src"in b&&t(0,r=b.src),"alt"in b&&t(1,n=b.alt),"width"in b&&t(2,l=b.width),"height"in b&&t(3,o=b.height),"className"in b&&t(4,u=b.className),"zoomFactor"in b&&t(6,d=b.zoomFactor)},[r,n,l,o,u,c,d,g]}class Ci extends De{constructor(e){super(),Oe(this,e,Li,ki,Ee,{src:0,alt:1,width:2,height:3,className:4,zoomFactor:6})}}function Nr(s){let e,t;return e=new Fn({}),e.$on("close",s[2]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:se,i(r){t||(ae(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function xi(s){let e,t,r,n,l,o,u,d,c,m,p,g,b,_,v,L,x,C,D,N,R,E,I,S,H,T,K,j,$,P,U,q,Z,oe;g=new Ci({props:{src:ks.getAssetPath("static/screencapture.png"),alt:"Bluesky List Manager Preview - Showing list statistics and member management interface",width:"100%",height:"auto",className:"screenshot-zoom-image",zoomFactor:3}});let X=s[0]&&Nr(s);return{c(){e=f("div"),t=f("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-4xl font-bold text-slate-800 mb-4">Bluesky List Manager</h2> <p class="text-xl text-slate-600 mb-2">Manage your lists like a pro.</p> <p class="text-xl text-slate-600 mb-6"><strong class="text-blue-600">Get insights and powerful tools to grow your curated lists.</strong></p>`,r=w(),n=f("div"),l=f("button"),l.textContent="🚀 Sign in with Bluesky to manage your lists",o=w(),u=f("p"),u.textContent="100% free • No registration required • Works instantly • Zero data stored on our servers",d=w(),c=f("div"),m=f("div"),p=f("div"),Re(g.$$.fragment),b=w(),_=f("div"),_.innerHTML='<div class="zoom-hint svelte-163esy5">🔍 Move mouse to zoom and explore the interface</div>',v=w(),L=f("p"),L.textContent="See your list insights and manage members with powerful analytics",x=w(),C=f("div"),C.innerHTML='<div class="bg-red-50 p-6 rounded-lg border border-red-200"><h3 class="text-lg font-semibold text-red-800 mb-3">😤 The Manual Way (Slow &amp; Painful)</h3> <ul class="space-y-2 text-red-700"><li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Search one profile at a time</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Forget who you&#39;ve already added</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Hours of repetitive clicking</span></li></ul></div> <div class="bg-green-50 p-6 rounded-lg border border-green-200"><h3 class="text-lg font-semibold text-green-800 mb-3">⚡ The Smart Way (Fast &amp; Easy)</h3> <ul class="space-y-2 text-green-700"><li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Bulk search</strong> by keywords, bio, or handle</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Instant filtering</strong> - see who&#39;s already in your list</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Minutes instead of hours</strong></span></li></ul></div>',D=w(),N=f("div"),N.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-4">🎯 Perfect for:</h3> <div class="grid md:grid-cols-3 gap-4 text-blue-700"><div class="text-center"><div class="text-2xl mb-2">👥</div> <div class="font-medium">Community Builders</div> <div class="text-sm">Grow your curated lists quickly</div></div> <div class="text-center"><div class="text-2xl mb-2">🔍</div> <div class="font-medium">Content Creators</div> <div class="text-sm">Find your target audience</div></div> <div class="text-center"><div class="text-2xl mb-2">📊</div> <div class="font-medium">List Managers</div> <div class="text-sm">Maintain and expand your lists</div></div></div>',R=w(),E=f("div"),E.innerHTML='<h3 class="text-lg font-semibold text-purple-800 mb-3">✨ Key Features</h3> <div class="grid md:grid-cols-2 gap-4 text-purple-700"><div><div class="font-medium mb-1">🔍 Smart Search</div> <div class="text-sm">Search across bios, display names, and handles with powerful filters</div></div> <div><div class="font-medium mb-1">📊 Real-time Stats</div> <div class="text-sm">See engagement rates, verification status, and growth metrics</div></div> <div><div class="font-medium mb-1">🔒 Privacy First</div> <div class="text-sm">Client-side app - your data never leaves your browser</div></div></div>',I=w(),S=f("div"),S.innerHTML=`<h3 class="text-lg font-semibold text-gray-800 mb-3">🔐 Privacy &amp; Security</h3> <p class="text-gray-700 mb-3">This is a <strong>client-side application</strong>. Your Bluesky credentials are stored
			locally in your browser and are never sent to our servers. We only communicate directly with
			Bluesky&#39;s API using your authentication token.</p> <p class="text-sm text-gray-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code (and
			contribute!) on
			<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-gray-600 hover:text-gray-700 underline">GitHub</a>.</p>`,H=w(),T=f("div"),K=f("button"),K.textContent="🚀 Start Building Better Lists - Sign in with Bluesky",j=w(),$=f("p"),$.textContent="100% free • No registration required • Works instantly • Zero data stored on our servers",P=w(),X&&X.c(),U=st(),a(t,"class","text-center mb-8"),a(l,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),a(l,"id","auth-sign-in-button"),a(u,"class","text-sm text-gray-500 mt-3"),a(n,"class","text-center mb-8"),a(n,"id","auth-cta"),a(_,"class","zoom-overlay svelte-163esy5"),a(p,"class","screenshot-container svelte-163esy5"),a(L,"class","text-sm text-gray-600 mt-4"),a(m,"class","bg-gray-50 p-6 rounded-lg border border-gray-200"),a(c,"class","mb-8 text-center"),a(C,"class","grid md:grid-cols-2 gap-8 mb-8"),a(N,"class","bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8"),a(E,"class","bg-purple-50 p-6 rounded-lg border border-purple-200 mb-8"),a(S,"class","bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8"),a(K,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),a($,"class","text-sm text-gray-500 mt-3"),a(T,"class","text-center"),a(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-4xl mx-auto relative z-100"),a(e,"id","auth-instructions")},m(y,h){A(y,e,h),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u),i(e,d),i(e,c),i(c,m),i(m,p),Ce(g,p,null),i(p,b),i(p,_),i(m,v),i(m,L),i(e,x),i(e,C),i(e,D),i(e,N),i(e,R),i(e,E),i(e,I),i(e,S),i(e,H),i(e,T),i(T,K),i(T,j),i(T,$),A(y,P,h),X&&X.m(y,h),A(y,U,h),q=!0,Z||(oe=[le(l,"click",s[1]),le(K,"click",s[1])],Z=!0)},p(y,[h]){y[0]?X?(X.p(y,h),h&1&&ae(X,1)):(X=Nr(y),X.c(),ae(X,1),X.m(U.parentNode,U)):X&&(ft(),ue(X,1,1,()=>{X=null}),mt())},i(y){q||(ae(g.$$.fragment,y),ae(X),q=!0)},o(y){ue(g.$$.fragment,y),ue(X),q=!1},d(y){y&&(M(e),M(P),M(U)),xe(g),X&&X.d(y),Z=!1,Me(oe)}}}function Mi(s,e,t){let r=!1;function n(){t(0,r=!0)}function l(){t(0,r=!1)}return[r,n,l]}class Ei extends De{constructor(e){super(),Oe(this,e,Mi,xi,Ee,{})}}function Ai(s){let e,t,r;return{c(){e=f("h3"),e.textContent="Select a List",t=w(),r=f("p"),r.textContent="Choose a list from the dropdown above to get started.",a(e,"class","text-lg font-semibold text-slate-800 mb-2"),a(r,"class","text-slate-600")},m(n,l){A(n,e,l),A(n,t,l),A(n,r,l)},d(n){n&&(M(e),M(t),M(r))}}}function Pi(s){let e,t,r;return{c(){e=f("h3"),e.textContent="No Lists Found",t=w(),r=f("p"),r.textContent="You don't have any lists yet. Create a list on Bluesky first!",a(e,"class","text-lg font-semibold text-slate-800 mb-2"),a(r,"class","text-slate-600")},m(n,l){A(n,e,l),A(n,t,l),A(n,r,l)},d(n){n&&(M(e),M(t),M(r))}}}function Ti(s){let e,t,r,n,l,o,u;function d(p,g){return p[0].userLists.length===0?Pi:Ai}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=w(),l=f("div"),o=f("div"),o.innerHTML=`<img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,u=w(),m.c(),a(r,"class","text-center mb-8"),a(o,"class","text-4xl mb-4"),a(l,"class","text-center py-12"),a(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),a(t,"id","list-selector-content"),a(e,"class","max-w-4xl mx-auto"),a(e,"id","list-selector")},m(p,g){A(p,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),m.m(l,null)},p(p,[g]){c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null)))},i:se,o:se,d(p){p&&M(e),m.d()}}}function Ii(s,e,t){let r;return Ie(s,me,n=>t(0,r=n)),[r]}class Ri extends De{constructor(e){super(),Oe(this,e,Ii,Ti,Ee,{})}}function Oi(s){let e,t,r,n,l,o,u,d,c,m,p,g=(s[0].displayName||s[0].handle)+"",b,_,v,L,x=s[0].handle+"",C,D,N,R,E=s[0].description&&Kr(s);function I(T,K){if(T[3]==="Already in list")return Wi;if(T[3]==="New candidate")return Bi;if(T[6])return Ki;if(T[2])return Ni}let S=I(s),H=S&&S(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h3"),b=k(g),_=w(),v=f("span"),L=k("@"),C=k(x),D=w(),E&&E.c(),N=w(),H&&H.c(),tt(n.src,l=Ls(s[0]))||a(n,"src",l),a(n,"alt",o=s[0].displayName||s[0].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(p,"class","text-base font-semibold text-gray-900 truncate"),a(v,"class","text-sm text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(c,"class","flex-1 min-w-0"),a(t,"class","flex items-start space-x-3"),a(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200"),a(e,"id",R="profile-card-"+s[0].did)},m(T,K){A(T,e,K),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,b),i(m,_),i(m,v),i(v,L),i(v,C),i(c,D),E&&E.m(c,null),i(c,N),H&&H.m(c,null)},p(T,K){K&1&&!tt(n.src,l=Ls(T[0]))&&a(n,"src",l),K&1&&o!==(o=T[0].displayName||T[0].handle)&&a(n,"alt",o),K&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(T[0].displayName||T[0].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),K&1&&g!==(g=(T[0].displayName||T[0].handle)+"")&&V(b,g),K&1&&x!==(x=T[0].handle+"")&&V(C,x),T[0].description?E?E.p(T,K):(E=Kr(T),E.c(),E.m(c,N)):E&&(E.d(1),E=null),S===(S=I(T))&&H?H.p(T,K):(H&&H.d(1),H=S&&S(T),H&&(H.c(),H.m(c,null))),K&1&&R!==(R="profile-card-"+T[0].did)&&a(e,"id",R)},d(T){T&&M(e),E&&E.d(),H&&H.d()}}}function Di(s){let e,t,r,n,l,o,u,d,c,m,p,g=(s[0].displayName||s[0].handle)+"",b,_,v,L,x=s[0].handle+"",C,D,N,R,E,I,S,H,T,K=s[0].description&&Br(s);function j(U,q){if(U[3]==="Already in list")return Ji;if(U[3]==="New candidate")return ji;if(U[6])return Fi;if(U[2])return zi}let $=j(s),P=$&&$(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h3"),b=k(g),_=w(),v=f("span"),L=k("@"),C=k(x),D=w(),K&&K.c(),N=w(),P&&P.c(),R=w(),E=f("div"),E.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',tt(n.src,l=Ls(s[0]))||a(n,"src",l),a(n,"alt",o=s[0].displayName||s[0].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(p,"class","text-base font-semibold text-gray-900 truncate"),a(v,"class","text-sm text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(c,"class","flex-1 min-w-0"),a(E,"class","flex-shrink-0"),a(t,"class","flex items-start space-x-3"),a(e,"href",I="https://bsky.app/profile/"+s[0].handle),a(e,"target","_blank"),a(e,"rel","noopener noreferrer"),a(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200"),a(e,"id",S="profile-card-"+s[0].did)},m(U,q){A(U,e,q),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,b),i(m,_),i(m,v),i(v,L),i(v,C),i(c,D),K&&K.m(c,null),i(c,N),P&&P.m(c,null),i(t,R),i(t,E),H||(T=le(e,"click",s[9]),H=!0)},p(U,q){q&1&&!tt(n.src,l=Ls(U[0]))&&a(n,"src",l),q&1&&o!==(o=U[0].displayName||U[0].handle)&&a(n,"alt",o),q&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(U[0].displayName||U[0].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),q&1&&g!==(g=(U[0].displayName||U[0].handle)+"")&&V(b,g),q&1&&x!==(x=U[0].handle+"")&&V(C,x),U[0].description?K?K.p(U,q):(K=Br(U),K.c(),K.m(c,N)):K&&(K.d(1),K=null),$===($=j(U))&&P?P.p(U,q):(P&&P.d(1),P=$&&$(U),P&&(P.c(),P.m(c,null))),q&1&&I!==(I="https://bsky.app/profile/"+U[0].handle)&&a(e,"href",I),q&1&&S!==(S="profile-card-"+U[0].did)&&a(e,"id",S)},d(U){U&&M(e),K&&K.d(),P&&P.d(),H=!1,T()}}}function Kr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=k(t),a(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&V(r,t)},d(n){n&&M(e)}}}function Ni(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",a(t,"type","checkbox"),t.checked=s[1],a(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),a(n,"class","text-sm text-gray-600"),a(e,"class","flex items-center space-x-2")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=le(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&M(e),l=!1,o()}}}function Ki(s){let e;return{c(){e=f("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,a(e,"class","flex items-center space-x-2")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function Bi(s){let e,t,r,n,l,o,u;function d(p,g){return p[5]?Hi:Ui}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("span"),r=k(s[3]),n=w(),l=f("button"),m.c(),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],a(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-2")},m(p,g){A(p,e,g),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(u=le(l,"click",s[8]),o=!0)},p(p,g){g&8&&V(r,p[3]),c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null))),g&32&&(l.disabled=p[5])},d(p){p&&M(e),m.d(),o=!1,u()}}}function Wi(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=k(s[3]),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),a(e,"class","flex items-center space-x-2")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&V(r,n[3])},d(n){n&&M(e)}}}function Ui(s){let e;return{c(){e=k("Add to list")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Hi(s){let e,t;return{c(){e=f("span"),t=k(`
								Adding...`),a(e,"class","loading-spinner mr-1")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function Br(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=k(t),a(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&V(r,t)},d(n){n&&M(e)}}}function zi(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",a(t,"type","checkbox"),t.checked=s[1],a(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),a(n,"class","text-sm text-gray-600"),a(e,"class","flex items-center space-x-2")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=le(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&M(e),l=!1,o()}}}function Fi(s){let e;return{c(){e=f("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,a(e,"class","flex items-center space-x-2")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function ji(s){let e,t,r,n,l,o,u;function d(p,g){return p[5]?Vi:qi}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("span"),r=k(s[3]),n=w(),l=f("button"),m.c(),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],a(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-2")},m(p,g){A(p,e,g),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(u=le(l,"click",s[8]),o=!0)},p(p,g){g&8&&V(r,p[3]),c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null))),g&32&&(l.disabled=p[5])},d(p){p&&M(e),m.d(),o=!1,u()}}}function Ji(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=k(s[3]),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),a(e,"class","flex items-center space-x-2")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&V(r,n[3])},d(n){n&&M(e)}}}function qi(s){let e;return{c(){e=k("Add to list")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Vi(s){let e,t;return{c(){e=f("span"),t=k(`
								Adding...`),a(e,"class","loading-spinner mr-1")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function Yi(s){let e;function t(l,o){return l[4]?Di:Oi}let r=t(s),n=r(s);return{c(){n.c(),e=st()},m(l,o){n.m(l,o),A(l,e,o)},p(l,[o]){r===(r=t(l))&&n?n.p(l,o):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:se,o:se,d(l){l&&M(e),n.d(l)}}}function Ls(s){return s.avatar?s.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName||s.handle)}&background=6366f1&color=fff&size=64`}function Zi(s,e,t){let{profile:r}=e,{isSelected:n=!1}=e,{onSelect:l=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:u=null}=e,{clickable:d=!1}=e,{onAddToList:c=()=>{}}=e,{isAddingToList:m=!1}=e,{isCheckingMembership:p=!1}=e;function g(){l(r)}function b(v){v.preventDefault(),v.stopPropagation(),c(r)}function _(v){d&&!o||d&&o&&(v.target.type==="checkbox"||v.target.closest('input[type="checkbox"]'))&&(v.preventDefault(),v.stopPropagation())}return s.$$set=v=>{"profile"in v&&t(0,r=v.profile),"isSelected"in v&&t(1,n=v.isSelected),"onSelect"in v&&t(10,l=v.onSelect),"showCheckbox"in v&&t(2,o=v.showCheckbox),"statusTag"in v&&t(3,u=v.statusTag),"clickable"in v&&t(4,d=v.clickable),"onAddToList"in v&&t(11,c=v.onAddToList),"isAddingToList"in v&&t(5,m=v.isAddingToList),"isCheckingMembership"in v&&t(6,p=v.isCheckingMembership)},[r,n,o,u,d,m,p,g,b,_,l,c]}class Gi extends De{constructor(e){super(),Oe(this,e,Zi,Yi,Ee,{profile:0,isSelected:1,onSelect:10,showCheckbox:2,statusTag:3,clickable:4,onAddToList:11,isAddingToList:5,isCheckingMembership:6})}}var qt={};(function s(e,t,r,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!e.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),h=y.getContext("2d");h.fillRect(0,0,1,1);var W=y.transferToImageBitmap();try{h.createPattern(W,"no-repeat")}catch{return!1}return!0}();function d(){}function c(y){var h=t.exports.Promise,W=h!==void 0?h:e.Promise;return typeof W=="function"?new W(y):(y(d,d),null)}var m=function(y,h){return{transform:function(W){if(y)return W;if(h.has(W))return h.get(W);var B=new OffscreenCanvas(W.width,W.height),O=B.getContext("2d");return O.drawImage(W,0,0),h.set(W,B),B},clear:function(){h.clear()}}}(u,new Map),p=function(){var y=Math.floor(16.666666666666668),h,W,B={},O=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(z){var G=Math.random();return B[G]=requestAnimationFrame(function J(Y){O===Y||O+y-1<Y?(O=Y,delete B[G],z()):B[G]=requestAnimationFrame(J)}),G},W=function(z){B[z]&&cancelAnimationFrame(B[z])}):(h=function(z){return setTimeout(z,y)},W=function(z){return clearTimeout(z)}),{frame:h,cancel:W}}(),g=function(){var y,h,W={};function B(O){function z(G,J){O.postMessage({options:G||{},callback:J})}O.init=function(J){var Y=J.transferControlToOffscreen();O.postMessage({canvas:Y},[Y])},O.fire=function(J,Y,F){if(h)return z(J,null),h;var re=Math.random().toString(36).slice(2);return h=c(function(ce){function ie(ne){ne.data.callback===re&&(delete W[re],O.removeEventListener("message",ie),h=null,m.clear(),F(),ce())}O.addEventListener("message",ie),z(J,re),W[re]=ie.bind(null,{data:{callback:re}})}),h},O.reset=function(){O.postMessage({reset:!0});for(var J in W)W[J](),delete W[J]}}return function(){if(y)return y;if(!r&&l){var O=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([O])))}catch(z){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",z),null}B(y)}return y}}(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(y,h){return h?h(y):y}function v(y){return y!=null}function L(y,h,W){return _(y&&v(y[h])?y[h]:b[h],W)}function x(y){return y<0?0:Math.floor(y)}function C(y,h){return Math.floor(Math.random()*(h-y))+y}function D(y){return parseInt(y,16)}function N(y){return y.map(R)}function R(y){var h=String(y).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:D(h.substring(0,2)),g:D(h.substring(2,4)),b:D(h.substring(4,6))}}function E(y){var h=L(y,"origin",Object);return h.x=L(h,"x",Number),h.y=L(h,"y",Number),h}function I(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function S(y){var h=y.getBoundingClientRect();y.width=h.width,y.height=h.height}function H(y){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=y,h}function T(y,h,W,B,O,z,G,J,Y){y.save(),y.translate(h,W),y.rotate(z),y.scale(B,O),y.arc(0,0,1,G,J,Y),y.restore()}function K(y){var h=y.angle*(Math.PI/180),W=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-h+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function j(y,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var W=h.tick++/h.totalTicks,B=h.x+h.random*h.tiltCos,O=h.y+h.random*h.tiltSin,z=h.wobbleX+h.random*h.tiltCos,G=h.wobbleY+h.random*h.tiltSin;if(y.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-W)+")",y.beginPath(),o&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))y.fill(Z(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(z-B)*.1,Math.abs(G-O)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var J=Math.PI/10*h.wobble,Y=Math.abs(z-B)*.1,F=Math.abs(G-O)*.1,re=h.shape.bitmap.width*h.scalar,ce=h.shape.bitmap.height*h.scalar,ie=new DOMMatrix([Math.cos(J)*Y,Math.sin(J)*Y,-Math.sin(J)*F,Math.cos(J)*F,h.x,h.y]);ie.multiplySelf(new DOMMatrix(h.shape.matrix));var ne=y.createPattern(m.transform(h.shape.bitmap),"no-repeat");ne.setTransform(ie),y.globalAlpha=1-W,y.fillStyle=ne,y.fillRect(h.x-re/2,h.y-ce/2,re,ce),y.globalAlpha=1}else if(h.shape==="circle")y.ellipse?y.ellipse(h.x,h.y,Math.abs(z-B)*h.ovalScalar,Math.abs(G-O)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):T(y,h.x,h.y,Math.abs(z-B)*h.ovalScalar,Math.abs(G-O)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var Q=Math.PI/2*3,ge=4*h.scalar,ve=8*h.scalar,ye=h.x,_e=h.y,Ke=5,Ae=Math.PI/Ke;Ke--;)ye=h.x+Math.cos(Q)*ve,_e=h.y+Math.sin(Q)*ve,y.lineTo(ye,_e),Q+=Ae,ye=h.x+Math.cos(Q)*ge,_e=h.y+Math.sin(Q)*ge,y.lineTo(ye,_e),Q+=Ae;else y.moveTo(Math.floor(h.x),Math.floor(h.y)),y.lineTo(Math.floor(h.wobbleX),Math.floor(O)),y.lineTo(Math.floor(z),Math.floor(G)),y.lineTo(Math.floor(B),Math.floor(h.wobbleY));return y.closePath(),y.fill(),h.tick<h.totalTicks}function $(y,h,W,B,O){var z=h.slice(),G=y.getContext("2d"),J,Y,F=c(function(re){function ce(){J=Y=null,G.clearRect(0,0,B.width,B.height),m.clear(),O(),re()}function ie(){r&&!(B.width===n.width&&B.height===n.height)&&(B.width=y.width=n.width,B.height=y.height=n.height),!B.width&&!B.height&&(W(y),B.width=y.width,B.height=y.height),G.clearRect(0,0,B.width,B.height),z=z.filter(function(ne){return j(G,ne)}),z.length?J=p.frame(ie):ce()}J=p.frame(ie),Y=ce});return{addFettis:function(re){return z=z.concat(re),F},canvas:y,promise:F,reset:function(){J&&p.cancel(J),Y&&Y()}}}function P(y,h){var W=!y,B=!!L(h||{},"resize"),O=!1,z=L(h,"disableForReducedMotion",Boolean),G=l&&!!L(h||{},"useWorker"),J=G?g():null,Y=W?I:S,F=y&&J?!!y.__confetti_initialized:!1,re=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ce;function ie(Q,ge,ve){for(var ye=L(Q,"particleCount",x),_e=L(Q,"angle",Number),Ke=L(Q,"spread",Number),Ae=L(Q,"startVelocity",Number),pt=L(Q,"decay",Number),Vt=L(Q,"gravity",Number),ht=L(Q,"drift",Number),rt=L(Q,"colors",N),Nt=L(Q,"ticks",Number),Kt=L(Q,"shapes"),Ye=L(Q,"scalar"),Ze=!!L(Q,"flat"),Ge=E(Q),nt=ye,gt=[],bt=y.width*Ge.x,yt=y.height*Ge.y;nt--;)gt.push(K({x:bt,y:yt,angle:_e,spread:Ke,startVelocity:Ae,color:rt[nt%rt.length],shape:Kt[C(0,Kt.length)],ticks:Nt,decay:pt,gravity:Vt,drift:ht,scalar:Ye,flat:Ze}));return ce?ce.addFettis(gt):(ce=$(y,gt,Y,ge,ve),ce.promise)}function ne(Q){var ge=z||L(Q,"disableForReducedMotion",Boolean),ve=L(Q,"zIndex",Number);if(ge&&re)return c(function(Ae){Ae()});W&&ce?y=ce.canvas:W&&!y&&(y=H(ve),document.body.appendChild(y)),B&&!F&&Y(y);var ye={width:y.width,height:y.height};J&&!F&&J.init(y),F=!0,J&&(y.__confetti_initialized=!0);function _e(){if(J){var Ae={getBoundingClientRect:function(){if(!W)return y.getBoundingClientRect()}};Y(Ae),J.postMessage({resize:{width:Ae.width,height:Ae.height}});return}ye.width=ye.height=null}function Ke(){ce=null,B&&(O=!1,e.removeEventListener("resize",_e)),W&&y&&(document.body.contains(y)&&document.body.removeChild(y),y=null,F=!1)}return B&&!O&&(O=!0,e.addEventListener("resize",_e,!1)),J?J.fire(Q,ye,Ke):ie(Q,ye,Ke)}return ne.reset=function(){J&&J.reset(),ce&&ce.reset()},ne}var U;function q(){return U||(U=P(null,{useWorker:!0,resize:!0})),U}function Z(y,h,W,B,O,z,G){var J=new Path2D(y),Y=new Path2D;Y.addPath(J,new DOMMatrix(h));var F=new Path2D;return F.addPath(Y,new DOMMatrix([Math.cos(G)*O,Math.sin(G)*O,-Math.sin(G)*z,Math.cos(G)*z,W,B])),F}function oe(y){if(!o)throw new Error("path confetti are not supported in this browser");var h,W;typeof y=="string"?h=y:(h=y.path,W=y.matrix);var B=new Path2D(h),O=document.createElement("canvas"),z=O.getContext("2d");if(!W){for(var G=1e3,J=G,Y=G,F=0,re=0,ce,ie,ne=0;ne<G;ne+=2)for(var Q=0;Q<G;Q+=2)z.isPointInPath(B,ne,Q,"nonzero")&&(J=Math.min(J,ne),Y=Math.min(Y,Q),F=Math.max(F,ne),re=Math.max(re,Q));ce=F-J,ie=re-Y;var ge=10,ve=Math.min(ge/ce,ge/ie);W=[ve,0,0,ve,-Math.round(ce/2+J)*ve,-Math.round(ie/2+Y)*ve]}return{type:"path",path:h,matrix:W}}function X(y){var h,W=1,B="#000000",O='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?h=y:(h=y.text,W="scalar"in y?y.scalar:W,O="fontFamily"in y?y.fontFamily:O,B="color"in y?y.color:B);var z=10*W,G=""+z+"px "+O,J=new OffscreenCanvas(z,z),Y=J.getContext("2d");Y.font=G;var F=Y.measureText(h),re=Math.ceil(F.actualBoundingBoxRight+F.actualBoundingBoxLeft),ce=Math.ceil(F.actualBoundingBoxAscent+F.actualBoundingBoxDescent),ie=2,ne=F.actualBoundingBoxLeft+ie,Q=F.actualBoundingBoxAscent+ie;re+=ie+ie,ce+=ie+ie,J=new OffscreenCanvas(re,ce),Y=J.getContext("2d"),Y.font=G,Y.fillStyle=B,Y.fillText(h,ne,Q);var ge=1/W;return{type:"bitmap",bitmap:J.transferToImageBitmap(),matrix:[ge,0,0,ge,-re*ge/2,-ce*ge/2]}}t.exports=function(){return q().apply(this,arguments)},t.exports.reset=function(){q().reset()},t.exports.create=P,t.exports.shapeFromPath=oe,t.exports.shapeFromText=X})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),qt,!1);const Ks=qt.exports;qt.exports.create;function Wr(s,e,t){const r=s.slice();return r[23]=e[t].profile,r[24]=e[t].status,r}function $i(s){let e;return{c(){e=k("🔍 Search")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Xi(s){let e,t;return{c(){e=f("span"),t=k(`
						Checking membership...`),a(e,"class","loading-spinner svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function Qi(s){let e,t;return{c(){e=f("span"),t=k(`
						Searching...`),a(e,"class","loading-spinner svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function Ur(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=k(s[5]),a(t,"class","text-red-700"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&32&&V(r,n[5])},d(n){n&&M(e)}}}function eo(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',a(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:se,i:se,o:se,d(t){t&&M(e)}}}function to(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',a(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:se,i:se,o:se,d(t){t&&M(e)}}}function so(s){let e,t,r,n=he(s[8]),l=[];for(let d=0;d<n.length;d+=1)l[d]=Hr(Wr(s,n,d));const o=d=>ue(l[d],1,1,()=>{l[d]=null});let u=s[6]&&zr(s);return{c(){e=f("div");for(let d=0;d<l.length;d+=1)l[d].c();t=w(),u&&u.c(),a(e,"class","space-y-4")},m(d,c){A(d,e,c);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);i(e,t),u&&u.m(e,null),r=!0},p(d,c){if(c&6530){n=he(d[8]);let m;for(m=0;m<n.length;m+=1){const p=Wr(d,n,m);l[m]?(l[m].p(p,c),ae(l[m],1)):(l[m]=Hr(p),l[m].c(),ae(l[m],1),l[m].m(e,t))}for(ft(),m=n.length;m<l.length;m+=1)o(m);mt()}d[6]?u?u.p(d,c):(u=zr(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(d){if(!r){for(let c=0;c<n.length;c+=1)ae(l[c]);r=!0}},o(d){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)ue(l[c]);r=!1},d(d){d&&M(e),Ve(l,d),u&&u.d()}}}function ro(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="loading-spinner mx-auto mb-4 svelte-165a6uh"></div> <p class="text-slate-600">Checking membership status...</p>',a(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:se,i:se,o:se,d(t){t&&M(e)}}}function Hr(s){let e,t;return e=new Gi({props:{profile:s[23],isSelected:s[1].has(s[23].did),onSelect:s[11],statusTag:s[24],clickable:!0,onAddToList:s[12],isAddingToList:s[7].has(s[23].did)}}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p(r,n){const l={};n&256&&(l.profile=r[23]),n&258&&(l.isSelected=r[1].has(r[23].did)),n&256&&(l.statusTag=r[24]),n&384&&(l.isAddingToList=r[7].has(r[23].did)),e.$set(l)},i(r){t||(ae(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function zr(s){let e,t,r,n;function l(d,c){return d[3]?lo:no}let o=l(s),u=o(s);return{c(){e=f("div"),t=f("button"),u.c(),t.disabled=s[3],a(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","text-center pt-4 border-t border-gray-200")},m(d,c){A(d,e,c),i(e,t),u.m(t,null),r||(n=le(t,"click",s[10]),r=!0)},p(d,c){o!==(o=l(d))&&(u.d(1),u=o(d),u&&(u.c(),u.m(t,null))),c&8&&(t.disabled=d[3])},d(d){d&&M(e),u.d(),r=!1,n()}}}function no(s){let e;return{c(){e=k("Load More Results")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function lo(s){let e,t;return{c(){e=f("span"),t=k(`
								Loading...`),a(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function io(s){let e,t,r,n,l,o,u,d,c,m,p,g,b,_,v,L,x,C;function D(T,K){return T[3]?Qi:T[4]?Xi:$i}let N=D(s),R=N(s),E=s[5]&&Ur(s);const I=[ro,so,to,eo],S=[];function H(T,K){return T[4]?0:T[0].length>0?1:T[2]&&!T[3]?2:T[2]?-1:3}return~(_=H(s))&&(v=S[_]=I[_](s)),{c(){e=f("div"),t=f("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',r=w(),n=f("div"),l=f("form"),o=f("div"),u=f("label"),u.textContent="Search for:",d=w(),c=f("input"),m=w(),p=f("button"),R.c(),g=w(),E&&E.c(),b=w(),v&&v.c(),a(t,"class","p-6 border-b border-gray-200"),a(u,"for","search-input"),a(u,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),a(c,"id","search-input"),a(c,"type","text"),a(c,"placeholder","e.g., belge, artist, developer..."),a(c,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),c.required=!0,a(p,"type","submit"),p.disabled=s[3],a(p,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(o,"class","flex gap-4 items-center flex-wrap"),a(l,"class","mb-6"),a(n,"id","profile-search-container"),a(n,"class","p-6"),a(e,"class","bg-white rounded-lg shadow-sm border border-gray-200"),a(e,"id","profile-search")},m(T,K){A(T,e,K),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(o,u),i(o,d),i(o,c),be(c,s[2]),i(o,m),i(o,p),R.m(p,null),i(n,g),E&&E.m(n,null),i(n,b),~_&&S[_].m(n,null),L=!0,x||(C=[le(c,"input",s[16]),le(l,"submit",zs(s[9]))],x=!0)},p(T,[K]){K&4&&c.value!==T[2]&&be(c,T[2]),N!==(N=D(T))&&(R.d(1),R=N(T),R&&(R.c(),R.m(p,null))),(!L||K&8)&&(p.disabled=T[3]),T[5]?E?E.p(T,K):(E=Ur(T),E.c(),E.m(n,b)):E&&(E.d(1),E=null);let j=_;_=H(T),_===j?~_&&S[_].p(T,K):(v&&(ft(),ue(S[j],1,1,()=>{S[j]=null}),mt()),~_?(v=S[_],v?v.p(T,K):(v=S[_]=I[_](T),v.c()),ae(v,1),v.m(n,null)):v=null)},i(T){L||(ae(v),L=!0)},o(T){ue(v),L=!1},d(T){T&&M(e),R.d(),E&&E.d(),~_&&S[_].d(),x=!1,Me(C)}}}function oo(s,e,t){let r,n,l;Ie(s,je,S=>t(18,n=S)),Ie(s,me,S=>t(15,l=S));let o="",u=[],d=!1,c=!1,m="",p=new Set,g=null,b=!1,_=new Set;async function v(){if(!(!o.trim()||!n.session)){t(3,d=!0),t(4,c=!1),t(5,m=""),t(0,u=[]),p.clear(),g=null,t(6,b=!1);try{const S=await Le.searchProfiles(n.session,o,n.authType);t(4,c=!0);const H=await E(S.actors||[]);t(0,u=H),g=S.cursor,t(6,b=!!S.cursor)}catch(S){t(5,m=S.message||"Failed to search profiles")}finally{t(3,d=!1),t(4,c=!1)}}}async function L(){if(!(!b||d||!n.session)){t(3,d=!0),t(4,c=!1),t(5,m="");try{const S=await Le.searchProfiles(n.session,o,n.authType,25,g);t(4,c=!0);const H=await E(S.actors||[]);t(0,u=[...u,...H]),g=S.cursor,t(6,b=!!S.cursor)}catch(S){t(5,m=S.message||"Failed to load more profiles")}finally{t(3,d=!1),t(4,c=!1)}}}function x(S){p.has(S.did)?p.delete(S.did):p.add(S.did),t(1,p)}let C=null,D=!0;async function N(S){if(!(!n.session||!l.selectedList||_.has(S.did))){_.add(S.did),t(7,_);try{await Le.addToList(n.session,S.did,l.selectedList.uri),await me.fetchAndAddProfile(n.session,S.did),R()}catch(H){console.error("Failed to add profile to list:",H)}finally{_.delete(S.did),t(7,_)}}}function R(){Ks({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Ks({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Ks({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}async function E(S){if(!S.length||!l.selectedList)return S;const H=await me.getAllListMemberDids(n.session,n.authType);return S.map(K=>({...K,_isInList:H.has(K.did)}))}function I(){o=this.value,t(2,o),t(15,l),t(14,D),t(13,C),t(1,p)}return s.$$.update=()=>{s.$$.dirty&57346&&l.selectedList&&(!D&&C&&C!==l.selectedList.uri&&(t(2,o=""),t(0,u=[]),p.clear(),g=null,t(6,b=!1),t(5,m="")),t(13,C=l.selectedList.uri),t(14,D=!1)),s.$$.dirty&32769&&t(8,r=u.map(S=>({profile:S,status:S._isInList||l.listMembers.includes(S.did)?"Already in list":"New candidate"})))},[u,p,o,d,c,m,b,_,r,v,L,x,N,C,D,l,I]}class ao extends De{constructor(e){super(),Oe(this,e,oo,io,Ee,{})}}function Fr(s,e,t){const r=s.slice();return r[15]=e[t],r}function jr(s,e,t){const r=s.slice();return r[18]=e[t],r}function Jr(s){let e,t=s[2].selectedList.description+"",r;return{c(){e=f("p"),r=k(t),a(e,"class","text-slate-600 mt-1")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&4&&t!==(t=n[2].selectedList.description+"")&&V(r,t)},d(n){n&&M(e)}}}function qr(s){let e,t,r,n,l,o,u,d,c,m=s[4].length.toLocaleString()+"",p,g,b=s[0].totalMembers.toLocaleString()+"",_,v,L,x,C,D,N;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("div"),o=f("div"),o.textContent="Calculating comprehensive statistics...",u=w(),d=f("div"),c=k("Processing "),p=k(m),g=k(" of "),_=k(b),v=k(`
						members (`),L=k(s[3]),x=k("%)"),C=w(),D=f("div"),N=f("div"),a(r,"class","loading-spinner svelte-1myfg8v"),a(o,"class","text-blue-700 font-medium"),a(d,"class","text-blue-600 text-sm"),a(t,"class","flex items-center justify-center space-x-3"),a(N,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),de(N,"width",s[3]+"%"),a(D,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(R,E){A(R,e,E),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),i(l,d),i(d,c),i(d,p),i(d,g),i(d,_),i(d,v),i(d,L),i(d,x),i(e,C),i(e,D),i(D,N)},p(R,E){E&16&&m!==(m=R[4].length.toLocaleString()+"")&&V(p,m),E&1&&b!==(b=R[0].totalMembers.toLocaleString()+"")&&V(_,b),E&8&&V(L,R[3]),E&8&&de(N,"width",R[3]+"%")},d(R){R&&M(e)}}}function co(s){let e,t,r,n,l,o=s[0].avgBioLength+"",u,d,c,m,p,g,b,_=s[0].accountsWithBios.toLocaleString()+"",v,L,x=s[0].totalMembers.toLocaleString()+"",C,D,N,R,E,I,S=s[0].accountsWithDisplayNames.toLocaleString()+"",H,T,K=s[0].totalMembers.toLocaleString()+"",j,$,P=s[0].mostCommonWords.length>0&&Vr(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average bio length:",n=w(),l=f("span"),u=k(o),d=k(" characters"),c=w(),m=f("div"),p=f("span"),p.textContent="Bios with content:",g=w(),b=f("span"),v=k(_),L=k(" / "),C=k(x),D=w(),N=f("div"),R=f("span"),R.textContent="Display names:",E=w(),I=f("span"),H=k(S),T=k(" / "),j=k(K),$=w(),P&&P.c(),a(r,"class","text-gray-600"),a(l,"class","font-medium"),a(t,"class","flex justify-between text-sm"),a(p,"class","text-gray-600"),a(b,"class","font-medium"),a(m,"class","flex justify-between text-sm"),a(R,"class","text-gray-600"),a(I,"class","font-medium"),a(N,"class","flex justify-between text-sm"),a(e,"class","space-y-2")},m(U,q){A(U,e,q),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,c),i(e,m),i(m,p),i(m,g),i(m,b),i(b,v),i(b,L),i(b,C),i(e,D),i(e,N),i(N,R),i(N,E),i(N,I),i(I,H),i(I,T),i(I,j),i(e,$),P&&P.m(e,null)},p(U,q){q&1&&o!==(o=U[0].avgBioLength+"")&&V(u,o),q&1&&_!==(_=U[0].accountsWithBios.toLocaleString()+"")&&V(v,_),q&1&&x!==(x=U[0].totalMembers.toLocaleString()+"")&&V(C,x),q&1&&S!==(S=U[0].accountsWithDisplayNames.toLocaleString()+"")&&V(H,S),q&1&&K!==(K=U[0].totalMembers.toLocaleString()+"")&&V(j,K),U[0].mostCommonWords.length>0?P?P.p(U,q):(P=Vr(U),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(U){U&&M(e),P&&P.d()}}}function uo(s){let e;return{c(){e=f("div"),e.textContent="Calculating comprehensive bio statistics...",a(e,"class","text-gray-500 text-sm")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function Vr(s){let e,t,r,n,l=he(s[0].mostCommonWords),o=[];for(let u=0;u<l.length;u+=1)o[u]=Yr(jr(s,l,u));return{c(){e=f("div"),t=f("div"),t.textContent="Most common words:",r=w(),n=f("div");for(let u=0;u<o.length;u+=1)o[u].c();a(t,"class","text-xs text-gray-500 mb-2"),a(n,"class","flex flex-wrap gap-1"),a(e,"class","mt-3")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(u,d){if(d&1){l=he(u[0].mostCommonWords);let c;for(c=0;c<l.length;c+=1){const m=jr(u,l,c);o[c]?o[c].p(m,d):(o[c]=Yr(m),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},d(u){u&&M(e),Ve(o,u)}}}function Yr(s){let e,t=s[18].word+"",r,n,l=s[18].count+"",o,u;return{c(){e=f("span"),r=k(t),n=k(" ("),o=k(l),u=k(`)
									`),a(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(d,c){A(d,e,c),i(e,r),i(e,n),i(e,o),i(e,u)},p(d,c){c&1&&t!==(t=d[18].word+"")&&V(r,t),c&1&&l!==(l=d[18].count+"")&&V(o,l)},d(d){d&&M(e)}}}function fo(s){let e,t,r,n,l,o=s[0].avgHandleLength+"",u,d,c,m=s[0].topDomains.length>0&&Zr(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average handle length:",n=w(),l=f("span"),u=k(o),d=k(" characters"),c=w(),m&&m.c(),a(r,"class","text-gray-600"),a(l,"class","font-medium"),a(t,"class","flex justify-between text-sm"),a(e,"class","space-y-2")},m(p,g){A(p,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,c),m&&m.m(e,null)},p(p,g){g&1&&o!==(o=p[0].avgHandleLength+"")&&V(u,o),p[0].topDomains.length>0?m?m.p(p,g):(m=Zr(p),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(p){p&&M(e),m&&m.d()}}}function mo(s){let e;return{c(){e=f("div"),e.textContent="Calculating handle statistics...",a(e,"class","text-gray-500 text-sm")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function Zr(s){let e,t,r,n,l=he(s[0].topDomains),o=[];for(let u=0;u<l.length;u+=1)o[u]=Gr(Fr(s,l,u));return{c(){e=f("div"),t=f("div"),t.textContent="Top domains:",r=w(),n=f("div");for(let u=0;u<o.length;u+=1)o[u].c();a(t,"class","text-xs text-gray-500 mb-2"),a(n,"class","space-y-1"),a(e,"class","mt-3")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(u,d){if(d&1){l=he(u[0].topDomains);let c;for(c=0;c<l.length;c+=1){const m=Fr(u,l,c);o[c]?o[c].p(m,d):(o[c]=Gr(m),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},d(u){u&&M(e),Ve(o,u)}}}function Gr(s){let e,t,r,n=s[15].domain+"",l,o,u,d=s[15].count+"",c,m,p;return{c(){e=f("div"),t=f("span"),r=k("."),l=k(n),o=w(),u=f("span"),c=k(d),m=k(" users"),p=w(),a(t,"class","font-medium"),a(u,"class","text-gray-600"),a(e,"class","flex justify-between text-xs")},m(g,b){A(g,e,b),i(e,t),i(t,r),i(t,l),i(e,o),i(e,u),i(u,c),i(u,m),i(e,p)},p(g,b){b&1&&n!==(n=g[15].domain+"")&&V(l,n),b&1&&d!==(d=g[15].count+"")&&V(c,d)},d(g){g&&M(e)}}}function po(s){let e;return{c(){e=k("Unknown")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function ho(s){let e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=k(e)},m(r,n){A(r,t,n)},p(r,n){n&4&&e!==(e=new Date(r[2].selectedList.createdAt).toLocaleDateString()+"")&&V(t,e)},d(r){r&&M(t)}}}function go(s){var gr,br,yr;let e,t,r,n,l=(((gr=s[2].selectedList)==null?void 0:gr.name)||"List")+"",o,u,d,c,m,p=s[0].totalMembers.toLocaleString()+"",g,b,_,v,L,x,C,D,N,R,E,I,S=s[1]?"...":Mt(s[0].accountsWithBios,s[0].totalMembers)+"%",H,T,K,j,$,P=s[1]?"Calculating...":`${s[0].accountsWithBios.toLocaleString()} have bios`,U,q,Z,oe,X,y,h,W,B=s[1]?"...":Mt(s[0].verifiedAccounts,s[0].totalMembers)+"%",O,z,G,J,Y,F=s[1]?"Calculating...":`${s[0].verifiedAccounts.toLocaleString()} verified accounts`,re,ce,ie,ne,Q,ge,ve,ye,_e=s[1]?"...":Mt(s[0].accountsWithAvatars,s[0].totalMembers)+"%",Ke,Ae,pt,Vt,ht,rt=s[1]?"Calculating...":`${s[0].accountsWithAvatars.toLocaleString()} have avatars`,Nt,Kt,Ye,Ze,Ge,nt,gt,bt,yt=s[0].listAge+"",Ms,Ys,Yt,Zs,Zt,Gs,$e,lt,Gt,$s,Xs,it,$t,Qs,er,vt,Xt,tr,We,_t,Qt,sr,es,ts=((br=s[2].selectedList)==null?void 0:br.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",Es,rr,wt,ss,nr,Bt,lr,St,rs,ir,Wt,ns=s[0].growthRate+"",As,or,ar,kt,ls,cr,is,os=s[1]?"Calculating...":`${s[0].recentAdditions} in last batch`,Ps,ur,as,Lt,Ut,dr,ot,cs=s[1]?"Calculating...":"Refresh Stats",Ts,Is,fr,we=((yr=s[2].selectedList)==null?void 0:yr.description)&&Jr(s),Se=s[1]&&qr(s);function mr(ee,fe){return ee[1]?uo:co}let us=mr(s),Ue=us(s);function pr(ee,fe){return ee[1]?mo:fo}let ds=pr(s),He=ds(s);function hr(ee,fe){var Ht;return(Ht=ee[2].selectedList)!=null&&Ht.createdAt?ho:po}let fs=hr(s),ze=fs(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("h2"),o=k(l),u=w(),we&&we.c(),d=w(),c=f("div"),m=f("div"),g=k(p),b=w(),_=f("div"),_.textContent="Total Members",v=w(),Se&&Se.c(),L=w(),x=f("div"),C=f("div"),D=f("div"),N=f("div"),R=f("div"),R.textContent="📊 Engagement",E=w(),I=f("div"),H=k(S),T=w(),K=f("div"),K.textContent="💬",j=w(),$=f("div"),U=k(P),q=w(),Z=f("div"),oe=f("div"),X=f("div"),y=f("div"),y.textContent="✅ Verified",h=w(),W=f("div"),O=k(B),z=w(),G=f("div"),G.textContent="✓",J=w(),Y=f("div"),re=k(F),ce=w(),ie=f("div"),ne=f("div"),Q=f("div"),ge=f("div"),ge.textContent="🖼️ Complete",ve=w(),ye=f("div"),Ke=k(_e),Ae=w(),pt=f("div"),pt.textContent="👤",Vt=w(),ht=f("div"),Nt=k(rt),Kt=w(),Ye=f("div"),Ze=f("div"),Ge=f("div"),nt=f("div"),nt.textContent="📅 Age",gt=w(),bt=f("div"),Ms=k(yt),Ys=w(),Yt=f("div"),Yt.textContent="📆",Zs=w(),Zt=f("div"),Zt.textContent="days old",Gs=w(),$e=f("div"),lt=f("div"),Gt=f("h3"),Gt.textContent="📝 Bio Analysis",$s=w(),Ue.c(),Xs=w(),it=f("div"),$t=f("h3"),$t.textContent="🔗 Handle Analysis",Qs=w(),He.c(),er=w(),vt=f("div"),Xt=f("h3"),Xt.textContent="📋 List Details",tr=w(),We=f("div"),_t=f("div"),Qt=f("span"),Qt.textContent="Type:",sr=w(),es=f("span"),Es=k(ts),rr=w(),wt=f("div"),ss=f("span"),ss.textContent="Created:",nr=w(),Bt=f("span"),ze.c(),lr=w(),St=f("div"),rs=f("span"),rs.textContent="Growth rate:",ir=w(),Wt=f("span"),As=k(ns),or=k(" members/day"),ar=w(),kt=f("div"),ls=f("span"),ls.textContent="Recent activity:",cr=w(),is=f("span"),Ps=k(os),ur=w(),as=f("div"),Lt=f("div"),Ut=f("button"),Ut.textContent="View on Bluesky",dr=w(),ot=f("button"),Ts=k(cs),a(n,"class","text-xl font-bold text-slate-800"),a(m,"class","text-3xl font-bold text-blue-600"),a(_,"class","text-sm text-slate-500"),a(c,"class","text-right"),a(t,"class","flex items-center justify-between mb-6"),a(R,"class","text-blue-600 font-semibold text-sm"),a(I,"class","text-2xl font-bold text-blue-700"),a(K,"class","text-blue-400 text-3xl"),a(D,"class","flex items-center justify-between"),a($,"class","text-xs text-blue-600 mt-1"),a(C,"class","bg-blue-50 p-4 rounded-lg"),a(y,"class","text-green-600 font-semibold text-sm"),a(W,"class","text-2xl font-bold text-green-700"),a(G,"class","text-green-400 text-3xl"),a(oe,"class","flex items-center justify-between"),a(Y,"class","text-xs text-green-600 mt-1"),a(Z,"class","bg-green-50 p-4 rounded-lg"),a(ge,"class","text-purple-600 font-semibold text-sm"),a(ye,"class","text-2xl font-bold text-purple-700"),a(pt,"class","text-purple-400 text-3xl"),a(ne,"class","flex items-center justify-between"),a(ht,"class","text-xs text-purple-600 mt-1"),a(ie,"class","bg-purple-50 p-4 rounded-lg"),a(nt,"class","text-yellow-600 font-semibold text-sm"),a(bt,"class","text-2xl font-bold text-yellow-700"),a(Yt,"class","text-yellow-400 text-3xl"),a(Ze,"class","flex items-center justify-between"),a(Zt,"class","text-xs text-yellow-600 mt-1"),a(Ye,"class","bg-yellow-50 p-4 rounded-lg"),a(x,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),a(Gt,"class","text-sm font-semibold text-gray-700 mb-3"),a(lt,"class","bg-gray-50 p-4 rounded-lg"),a($t,"class","text-sm font-semibold text-gray-700 mb-3"),a(it,"class","bg-gray-50 p-4 rounded-lg"),a(Xt,"class","text-sm font-semibold text-gray-700 mb-3"),a(Qt,"class","text-gray-600"),a(es,"class","font-medium"),a(_t,"class","flex justify-between text-sm"),a(ss,"class","text-gray-600"),a(Bt,"class","font-medium"),a(wt,"class","flex justify-between text-sm"),a(rs,"class","text-gray-600"),a(Wt,"class","font-medium"),a(St,"class","flex justify-between text-sm"),a(ls,"class","text-gray-600"),a(is,"class","font-medium"),a(kt,"class","flex justify-between text-sm"),a(We,"class","space-y-2"),a(vt,"class","bg-gray-50 p-4 rounded-lg"),a($e,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),a(Ut,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),a(ot,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),ot.disabled=s[1],a(Lt,"class","flex flex-wrap gap-2"),a(as,"class","mt-6 pt-4 border-t border-gray-200"),a(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),a(e,"id","list-statistics")},m(ee,fe){A(ee,e,fe),i(e,t),i(t,r),i(r,n),i(n,o),i(r,u),we&&we.m(r,null),i(t,d),i(t,c),i(c,m),i(m,g),i(c,b),i(c,_),i(e,v),Se&&Se.m(e,null),i(e,L),i(e,x),i(x,C),i(C,D),i(D,N),i(N,R),i(N,E),i(N,I),i(I,H),i(D,T),i(D,K),i(C,j),i(C,$),i($,U),i(x,q),i(x,Z),i(Z,oe),i(oe,X),i(X,y),i(X,h),i(X,W),i(W,O),i(oe,z),i(oe,G),i(Z,J),i(Z,Y),i(Y,re),i(x,ce),i(x,ie),i(ie,ne),i(ne,Q),i(Q,ge),i(Q,ve),i(Q,ye),i(ye,Ke),i(ne,Ae),i(ne,pt),i(ie,Vt),i(ie,ht),i(ht,Nt),i(x,Kt),i(x,Ye),i(Ye,Ze),i(Ze,Ge),i(Ge,nt),i(Ge,gt),i(Ge,bt),i(bt,Ms),i(Ze,Ys),i(Ze,Yt),i(Ye,Zs),i(Ye,Zt),i(e,Gs),i(e,$e),i($e,lt),i(lt,Gt),i(lt,$s),Ue.m(lt,null),i($e,Xs),i($e,it),i(it,$t),i(it,Qs),He.m(it,null),i($e,er),i($e,vt),i(vt,Xt),i(vt,tr),i(vt,We),i(We,_t),i(_t,Qt),i(_t,sr),i(_t,es),i(es,Es),i(We,rr),i(We,wt),i(wt,ss),i(wt,nr),i(wt,Bt),ze.m(Bt,null),i(We,lr),i(We,St),i(St,rs),i(St,ir),i(St,Wt),i(Wt,As),i(Wt,or),i(We,ar),i(We,kt),i(kt,ls),i(kt,cr),i(kt,is),i(is,Ps),i(e,ur),i(e,as),i(as,Lt),i(Lt,Ut),i(Lt,dr),i(Lt,ot),i(ot,Ts),Is||(fr=[le(Ut,"click",s[8]),le(ot,"click",s[6])],Is=!0)},p(ee,[fe]){var Ht,vr,_r;fe&4&&l!==(l=(((Ht=ee[2].selectedList)==null?void 0:Ht.name)||"List")+"")&&V(o,l),(vr=ee[2].selectedList)!=null&&vr.description?we?we.p(ee,fe):(we=Jr(ee),we.c(),we.m(r,null)):we&&(we.d(1),we=null),fe&1&&p!==(p=ee[0].totalMembers.toLocaleString()+"")&&V(g,p),ee[1]?Se?Se.p(ee,fe):(Se=qr(ee),Se.c(),Se.m(e,L)):Se&&(Se.d(1),Se=null),fe&3&&S!==(S=ee[1]?"...":Mt(ee[0].accountsWithBios,ee[0].totalMembers)+"%")&&V(H,S),fe&3&&P!==(P=ee[1]?"Calculating...":`${ee[0].accountsWithBios.toLocaleString()} have bios`)&&V(U,P),fe&3&&B!==(B=ee[1]?"...":Mt(ee[0].verifiedAccounts,ee[0].totalMembers)+"%")&&V(O,B),fe&3&&F!==(F=ee[1]?"Calculating...":`${ee[0].verifiedAccounts.toLocaleString()} verified accounts`)&&V(re,F),fe&3&&_e!==(_e=ee[1]?"...":Mt(ee[0].accountsWithAvatars,ee[0].totalMembers)+"%")&&V(Ke,_e),fe&3&&rt!==(rt=ee[1]?"Calculating...":`${ee[0].accountsWithAvatars.toLocaleString()} have avatars`)&&V(Nt,rt),fe&1&&yt!==(yt=ee[0].listAge+"")&&V(Ms,yt),us===(us=mr(ee))&&Ue?Ue.p(ee,fe):(Ue.d(1),Ue=us(ee),Ue&&(Ue.c(),Ue.m(lt,null))),ds===(ds=pr(ee))&&He?He.p(ee,fe):(He.d(1),He=ds(ee),He&&(He.c(),He.m(it,null))),fe&4&&ts!==(ts=((_r=ee[2].selectedList)==null?void 0:_r.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&V(Es,ts),fs===(fs=hr(ee))&&ze?ze.p(ee,fe):(ze.d(1),ze=fs(ee),ze&&(ze.c(),ze.m(Bt,null))),fe&1&&ns!==(ns=ee[0].growthRate+"")&&V(As,ns),fe&3&&os!==(os=ee[1]?"Calculating...":`${ee[0].recentAdditions} in last batch`)&&V(Ps,os),fe&2&&cs!==(cs=ee[1]?"Calculating...":"Refresh Stats")&&V(Ts,cs),fe&2&&(ot.disabled=ee[1])},i:se,o:se,d(ee){ee&&M(e),we&&we.d(),Se&&Se.d(),Ue.d(),He.d(),ze.d(),Is=!1,Me(fr)}}}function Mt(s,e){return e===0?0:Math.round(s/e*100)}function bo(s,e,t){let r,n;Ie(s,me,C=>t(2,r=C)),Ie(s,je,C=>t(5,n=C));let l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,u=0,d=[],c=null,m=!1,p=null;function g(){t(0,l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,u=0),t(4,d=[])}function b(){var E,I;r.listMemberProfiles;const C=((E=r.selectedList)==null?void 0:E.listItemCount)||0,D=(I=r.selectedList)==null?void 0:I.createdAt,N=D?Math.floor((Date.now()-new Date(D).getTime())/(1e3*60*60*24)):0,R=N>0?Math.round(C/N):0;t(0,l={...l,totalMembers:C,listAge:N,growthRate:R})}async function _(){if(!n.session||!r.selectedList||o)return;const C=Date.now();c=C,t(1,o=!0),t(3,u=0),t(4,d=[]);try{const D=r.selectedList.listItemCount||0;if(D===0){v([]),m=!0;return}let N=null,R=0;const E=100;do{R++,t(3,u=Math.round(d.length/D*100));const I=await Le.getListMembers(n.session,r.selectedList.uri,n.authType,E,N);if(c!==C)return;t(4,d=[...d,...I.profiles]),N=I.cursor,t(3,u=Math.round(d.length/D*100))}while(N&&d.length<D);if(c!==C)return;v(d),m=!0}catch(D){console.error("Error loading all members for statistics:",D),b(),m=!0}finally{c===C&&(t(1,o=!1),t(3,u=0))}}function v(C){var B;const D=C.length,N=C.filter(O=>O.verified).length,R=C.filter(O=>O.avatar).length,E=C.filter(O=>O.description&&O.description.trim().length>0).length,I=C.filter(O=>O.displayName&&O.displayName.trim().length>0).length,S=C.map(O=>O.description||"").filter(O=>O.trim().length>0),H=S.length>0?Math.round(S.reduce((O,z)=>O+z.length,0)/S.length):0,T=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],K=S.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(O=>O.length>2&&!T.includes(O)),j={};K.forEach(O=>{j[O]=(j[O]||0)+1});const $=Object.entries(j).sort(([,O],[,z])=>z-O).slice(0,5).map(([O,z])=>({word:O,count:z})),P=C.map(O=>O.handle||"").filter(O=>O.length>0),U=P.length>0?Math.round(P.reduce((O,z)=>O+z.length,0)/P.length):0,q=P.map(O=>{const z=O.split(".");return z.length>1?z[z.length-1]:null}).filter(O=>O&&O.length>0),Z={};q.forEach(O=>{Z[O]=(Z[O]||0)+1});const oe=Object.entries(Z).sort(([,O],[,z])=>z-O).slice(0,3).map(([O,z])=>({domain:O,count:z})),X=(B=r.selectedList)==null?void 0:B.createdAt,y=X?Math.floor((Date.now()-new Date(X).getTime())/(1e3*60*60*24)):0,h=y>0?Math.round(D/y):0,W=Math.min(25,C.length);t(0,l={totalMembers:D,recentAdditions:W,verifiedAccounts:N,accountsWithAvatars:R,accountsWithBios:E,avgBioLength:H,mostCommonWords:$,listAge:y,accountsWithDisplayNames:I,avgHandleLength:U,topDomains:oe,growthRate:h})}function L(){o||(m=!1,_())}const x=()=>{var D,N,R;const C=(D=r.selectedList)==null?void 0:D.uri;if(C){const E=C.split("/"),I=E[E.length-1],S=`https://bsky.app/profile/${(N=n.session)==null?void 0:N.handle}/lists/${I}`;window.open(S,"_blank")}else window.open(`https://bsky.app/profile/${(R=n.session)==null?void 0:R.handle}/lists`,"_blank")};return s.$$.update=()=>{var C,D;s.$$.dirty&4&&r.selectedList&&b(),s.$$.dirty&7&&((C=r.selectedList)==null?void 0:C.listItemCount)!==l.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(D=r.selectedList)==null?void 0:D.listItemCount),console.log("Current stats.totalMembers:",l.totalMembers),b()),s.$$.dirty&132&&!r.selectedList&&p!==null&&(t(7,p=null),m=!1,g()),s.$$.dirty&134&&r.selectedList&&r.selectedList.uri!==p&&!o&&(t(7,p=r.selectedList.uri),m=!1,g(),_())},[l,o,r,u,d,n,L,p,x]}class yo extends De{constructor(e){super(),Oe(this,e,bo,go,Ee,{})}}function $r(s,e,t){const r=s.slice();return r[29]=e[t],r}function Xr(s,e,t){const r=s.slice();return r[35]=e[t],r}function Qr(s,e,t){const r=s.slice();return r[32]=e[t],r}function en(s,e,t){const r=s.slice();return r[38]=e[t],r}function tn(s,e,t){const r=s.slice();return r[38]=e[t],r}function sn(s){let e,t,r,n,l,o,u=s[4].size+"",d,c,m,p;function g(v,L){return v[5]?_o:vo}let b=g(s),_=b(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("button"),_.c(),l=w(),o=f("div"),d=k(u),c=k(" profiles selected"),n.disabled=s[5],a(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),a(r,"class","flex items-center gap-3"),a(o,"class","text-sm text-slate-600"),a(t,"class","flex items-center justify-between"),a(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm"),a(e,"id","action-bar")},m(v,L){A(v,e,L),i(e,t),i(t,r),i(r,n),_.m(n,null),i(t,l),i(t,o),i(o,d),i(o,c),m||(p=le(n,"click",s[14]),m=!0)},p(v,L){b===(b=g(v))&&_?_.p(v,L):(_.d(1),_=b(v),_&&(_.c(),_.m(n,null))),L[0]&32&&(n.disabled=v[5]),L[0]&16&&u!==(u=v[4].size+"")&&V(d,u)},d(v){v&&M(e),_.d(),m=!1,p()}}}function vo(s){let e,t=s[4].size+"",r,n;return{c(){e=k("Add "),r=k(t),n=k(" to List")},m(l,o){A(l,e,o),A(l,r,o),A(l,n,o)},p(l,o){o[0]&16&&t!==(t=l[4].size+"")&&V(r,t)},d(l){l&&(M(e),M(r),M(n))}}}function _o(s){let e,t;return{c(){e=f("span"),t=k(`
							Adding...`),a(e,"class","loading-spinner mr-2 svelte-qhxb3n")},m(r,n){A(r,e,n),A(r,t,n)},p:se,d(r){r&&(M(e),M(t))}}}function rn(s){let e,t,r,n=s[6].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=k("✅ Successfully added "),l=k(n),o=k(" profiles to your list!"),a(t,"class","text-green-700 font-medium"),a(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(u,d){A(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&64&&n!==(n=u[6].success.length+"")&&V(l,n)},d(u){u&&M(e)}}}function nn(s){let e,t,r,n=s[6].errors.length+"",l,o,u,d,c=he(s[6].errors),m=[];for(let p=0;p<c.length;p+=1)m[p]=ln(tn(s,c,p));return{c(){e=f("div"),t=f("p"),r=k("❌ Failed to add "),l=k(n),o=k(" profiles:"),u=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();a(t,"class","text-red-700 font-medium mb-2"),a(d,"class","text-red-600 text-sm space-y-1"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,g){A(p,e,g),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(d,null)},p(p,g){if(g[0]&64&&n!==(n=p[6].errors.length+"")&&V(l,n),g[0]&64){c=he(p[6].errors);let b;for(b=0;b<c.length;b+=1){const _=tn(p,c,b);m[b]?m[b].p(_,g):(m[b]=ln(_),m[b].c(),m[b].m(d,null))}for(;b<m.length;b+=1)m[b].d(1);m.length=c.length}},d(p){p&&M(e),Ve(m,p)}}}function ln(s){let e,t,r=s[38].error+"",n;return{c(){e=f("li"),t=k("• "),n=k(r)},m(l,o){A(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&64&&r!==(r=l[38].error+"")&&V(n,r)},d(l){l&&M(e)}}}function on(s){let e,t,r,n=s[7].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=k("🗑️ Successfully removed "),l=k(n),o=k(" profiles from your list!"),a(t,"class","text-blue-700 font-medium"),a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(u,d){A(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&128&&n!==(n=u[7].success.length+"")&&V(l,n)},d(u){u&&M(e)}}}function an(s){let e,t,r,n=s[7].errors.length+"",l,o,u,d,c=he(s[7].errors),m=[];for(let p=0;p<c.length;p+=1)m[p]=cn(en(s,c,p));return{c(){e=f("div"),t=f("p"),r=k("❌ Failed to remove "),l=k(n),o=k(" profiles:"),u=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();a(t,"class","text-red-700 font-medium mb-2"),a(d,"class","text-red-600 text-sm space-y-1"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,g){A(p,e,g),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(d,null)},p(p,g){if(g[0]&128&&n!==(n=p[7].errors.length+"")&&V(l,n),g[0]&128){c=he(p[7].errors);let b;for(b=0;b<c.length;b+=1){const _=en(p,c,b);m[b]?m[b].p(_,g):(m[b]=cn(_),m[b].c(),m[b].m(d,null))}for(;b<m.length;b+=1)m[b].d(1);m.length=c.length}},d(p){p&&M(e),Ve(m,p)}}}function cn(s){let e,t,r=s[38].error+"",n;return{c(){e=f("li"),t=k("• "),n=k(r)},m(l,o){A(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&128&&r!==(r=l[38].error+"")&&V(n,r)},d(l){l&&M(e)}}}function wo(s){let e,t,r;function n(d,c){return d[9]?Mo:d[1].listMemberProfiles.length>0?xo:Co}let l=n(s),o=l(s),u=s[10]>1&&pn(s);return{c(){e=f("div"),t=f("div"),o.c(),r=w(),u&&u.c(),a(t,"class","space-y-4 flex-1 overflow-y-auto"),a(e,"class","flex flex-col flex-1")},m(d,c){A(d,e,c),i(e,t),o.m(t,null),i(e,r),u&&u.m(e,null)},p(d,c){l===(l=n(d))&&o?o.p(d,c):(o.d(1),o=l(d),o&&(o.c(),o.m(t,null))),d[10]>1?u?u.p(d,c):(u=pn(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&M(e),o.d(),u&&u.d()}}}function So(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">🦋</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">This list is brand new</h3> <p class="text-slate-600">Use the search on the right to find profiles and start building your list.</p></div>',a(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function ko(s){let e,t,r,n,l,o,u,d;return{c(){e=f("div"),t=f("div"),r=f("p"),n=k(s[3]),l=w(),o=f("button"),o.textContent="Try again",a(r,"class","text-red-700 mb-4"),a(o,"class","text-red-600 hover:text-red-800 underline"),a(t,"class","text-center"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(c,m){A(c,e,m),i(e,t),i(t,r),i(r,n),i(t,l),i(t,o),u||(d=le(o,"click",s[12]),u=!0)},p(c,m){m[0]&8&&V(n,c[3])},d(c){c&&M(e),u=!1,d()}}}function Lo(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-qhxb3n"></div> <p class="text-slate-600">Loading list members...</p></div>',a(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){A(t,e,r)},p:se,d(t){t&&M(e)}}}function Co(s){let e,t,r=s[3]&&un(s),n=he(s[1].listMembers.slice(0,100)),l=[];for(let o=0;o<n.length;o+=1)l[o]=dn(Xr(s,n,o));return{c(){r&&r.c(),e=w();for(let o=0;o<l.length;o+=1)l[o].c();t=st()},m(o,u){r&&r.m(o,u),A(o,e,u);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(o,u);A(o,t,u)},p(o,u){if(o[3]?r?r.p(o,u):(r=un(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0]&2){n=he(o[1].listMembers.slice(0,100));let d;for(d=0;d<n.length;d+=1){const c=Xr(o,n,d);l[d]?l[d].p(c,u):(l[d]=dn(c),l[d].c(),l[d].m(t.parentNode,t))}for(;d<l.length;d+=1)l[d].d(1);l.length=n.length}},d(o){o&&(M(e),M(t)),r&&r.d(o),Ve(l,o)}}}function xo(s){let e,t=he(s[1].listMemberProfiles),r=[];for(let n=0;n<t.length;n+=1)r[n]=mn(Qr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);A(n,e,l)},p(n,l){if(l[0]&34818){t=he(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const u=Qr(n,t,o);r[o]?r[o].p(u,l):(r[o]=mn(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&M(e),Ve(r,n)}}}function Mo(s){let e,t,r,n,l,o,u;return{c(){e=f("div"),t=f("div"),r=w(),n=f("p"),l=k("Loading page "),o=k(s[8]),u=k("..."),a(t,"class","loading-spinner mx-auto mb-4 svelte-qhxb3n"),a(n,"class","text-slate-600"),a(e,"class","text-center py-8")},m(d,c){A(d,e,c),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u)},p(d,c){c[0]&256&&V(o,d[8])},d(d){d&&M(e)}}}function un(s){let e,t,r,n,l,o,u,d,c,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("p"),n.textContent="⚠️ Profile loading issue",l=w(),o=f("p"),u=k(s[3]),d=w(),c=f("button"),c.textContent="Retry",a(n,"class","text-yellow-800 font-medium"),a(o,"class","text-yellow-700 text-sm mt-1"),a(c,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),a(t,"class","flex items-center justify-between"),a(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(g,b){A(g,e,b),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(o,u),i(t,d),i(t,c),m||(p=le(c,"click",s[23]),m=!0)},p(g,b){b[0]&8&&V(u,g[3])},d(g){g&&M(e),m=!1,p()}}}function dn(s){let e,t,r,n,l,o,u=s[35]+"",d,c,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=w(),l=f("div"),o=f("div"),d=k(u),c=w(),m=f("div"),m.textContent="Member of list",p=w(),a(r,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),a(o,"class","text-sm text-gray-600 font-mono break-all"),a(m,"class","text-xs text-gray-500"),a(l,"class","flex-1"),a(t,"class","flex items-center space-x-3"),a(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(g,b){A(g,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(o,d),i(l,c),i(l,m),i(e,p)},p(g,b){b[0]&2&&u!==(u=g[35]+"")&&V(d,u)},d(g){g&&M(e)}}}function fn(s){let e,t=s[32].description+"",r;return{c(){e=f("p"),r=k(t),a(e,"class","text-xs text-gray-600 line-clamp-2 svelte-qhxb3n")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l[0]&2&&t!==(t=n[32].description+"")&&V(r,t)},d(n){n&&M(e)}}}function Eo(s){let e;return{c(){e=k("🗑️ Remove")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Ao(s){let e,t;return{c(){e=f("span"),t=k(`
														Removing...`),a(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function mn(s){let e,t,r,n,l,o,u,d,c,m,p,g,b=(s[32].displayName||s[32].handle)+"",_,v,L,x,C=s[32].handle+"",D,N,R,E,I,S,H,T,K,j,$,P,U,q,Z=s[32].description&&fn(s);function oe(W,B){return B[0]&2&&(j=null),j==null&&(j=!!W[11].has(W[32].did)),j?Ao:Eo}let X=oe(s,[-1,-1]),y=X(s);function h(){return s[22](s[32])}return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("a"),p=f("div"),g=f("h4"),_=k(b),v=w(),L=f("span"),x=k("@"),D=k(C),N=w(),R=_s("svg"),E=_s("path"),I=w(),Z&&Z.c(),H=w(),T=f("div"),K=f("button"),y.c(),P=w(),tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)||a(n,"src",l),a(n,"alt",o=s[32].displayName||s[32].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(g,"class","text-sm font-semibold text-gray-900 truncate"),a(L,"class","text-xs text-gray-600 truncate"),a(E,"stroke-linecap","round"),a(E,"stroke-linejoin","round"),a(E,"stroke-width","2"),a(E,"d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"),a(R,"class","w-3 h-3 text-gray-400"),a(R,"fill","none"),a(R,"stroke","currentColor"),a(R,"viewBox","0 0 24 24"),a(p,"class","flex items-center space-x-2 mb-1"),a(m,"href",S="https://bsky.app/profile/"+s[32].handle),a(m,"target","_blank"),a(m,"rel","noopener noreferrer"),a(m,"class","block hover:underline"),a(c,"class","flex-1 min-w-0"),K.disabled=$=s[11].has(s[32].did),a(K,"class","bg-red-100 hover:bg-red-200 text-red-700 border border-red-300 px-3 py-1.5 rounded text-xs font-medium cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"),a(K,"title","Remove from list"),a(T,"class","flex-shrink-0"),a(t,"class","flex items-center space-x-3"),a(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200")},m(W,B){A(W,e,B),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,g),i(g,_),i(p,v),i(p,L),i(L,x),i(L,D),i(p,N),i(p,R),i(R,E),i(m,I),Z&&Z.m(m,null),i(t,H),i(t,T),i(T,K),y.m(K,null),i(e,P),U||(q=le(K,"click",h),U=!0)},p(W,B){s=W,B[0]&2&&!tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)&&a(n,"src",l),B[0]&2&&o!==(o=s[32].displayName||s[32].handle)&&a(n,"alt",o),B[0]&2&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),B[0]&2&&b!==(b=(s[32].displayName||s[32].handle)+"")&&V(_,b),B[0]&2&&C!==(C=s[32].handle+"")&&V(D,C),s[32].description?Z?Z.p(s,B):(Z=fn(s),Z.c(),Z.m(m,null)):Z&&(Z.d(1),Z=null),B[0]&2&&S!==(S="https://bsky.app/profile/"+s[32].handle)&&a(m,"href",S),X!==(X=oe(s,B))&&(y.d(1),y=X(s),y&&(y.c(),y.m(K,null))),B[0]&2&&$!==($=s[11].has(s[32].did))&&(K.disabled=$)},d(W){W&&M(e),Z&&Z.d(),y.d(),U=!1,q()}}}function pn(s){let e,t,r,n,l,o,u,d,c,m,p,g,b,_,v,L,x,C,D,N,R,E,I,S=s[9]&&s[8]>1&&hn(),H=he(Array.from({length:Math.min(5,s[10])},s[24])),T=[];for(let j=0;j<H.length;j+=1)T[j]=gn($r(s,H,j));let K=s[9]&&s[8]<s[10]&&bn();return{c(){e=f("div"),t=f("div"),r=f("div"),n=k("Page "),l=k(s[8]),o=k(" of "),u=k(s[10]),d=k(" ("),c=k(s[0]),m=k(" total members)"),p=w(),g=f("div"),b=f("button"),S&&S.c(),_=k(`
											Previous`),L=w(),x=f("div");for(let j=0;j<T.length;j+=1)T[j].c();C=w(),D=f("button"),N=k(`Next
											`),K&&K.c(),a(r,"class","text-sm text-gray-600"),b.disabled=v=s[8]===1||s[9],a(b,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),a(x,"class","flex items-center space-x-1"),D.disabled=R=s[8]===s[10]||s[9],a(D,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),a(g,"class","flex items-center space-x-2"),a(t,"class","flex items-center justify-between"),a(e,"class","mt-6 pt-4 border-t border-gray-200")},m(j,$){A(j,e,$),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(r,u),i(r,d),i(r,c),i(r,m),i(t,p),i(t,g),i(g,b),S&&S.m(b,null),i(b,_),i(g,L),i(g,x);for(let P=0;P<T.length;P+=1)T[P]&&T[P].m(x,null);i(g,C),i(g,D),i(D,N),K&&K.m(D,null),E||(I=[le(b,"click",s[18]),le(D,"click",s[17])],E=!0)},p(j,$){if($[0]&256&&V(l,j[8]),$[0]&1024&&V(u,j[10]),$[0]&1&&V(c,j[0]),j[9]&&j[8]>1?S||(S=hn(),S.c(),S.m(b,_)):S&&(S.d(1),S=null),$[0]&768&&v!==(v=j[8]===1||j[9])&&(b.disabled=v),$[0]&67328){H=he(Array.from({length:Math.min(5,j[10])},j[24]));let P;for(P=0;P<H.length;P+=1){const U=$r(j,H,P);T[P]?T[P].p(U,$):(T[P]=gn(U),T[P].c(),T[P].m(x,null))}for(;P<T.length;P+=1)T[P].d(1);T.length=H.length}j[9]&&j[8]<j[10]?K||(K=bn(),K.c(),K.m(D,null)):K&&(K.d(1),K=null),$[0]&1792&&R!==(R=j[8]===j[10]||j[9])&&(D.disabled=R)},d(j){j&&M(e),S&&S.d(),Ve(T,j),K&&K.d(),E=!1,Me(I)}}}function hn(s){let e;return{c(){e=f("span"),a(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function gn(s){let e,t=s[29]+"",r,n,l,o,u;function d(){return s[25](s[29])}return{c(){e=f("button"),r=k(t),n=w(),e.disabled=s[9],a(e,"class",l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(c,m){A(c,e,m),i(e,r),i(e,n),o||(u=le(e,"click",d),o=!0)},p(c,m){s=c,m[0]&1280&&t!==(t=s[29]+"")&&V(r,t),m[0]&512&&(e.disabled=s[9]),m[0]&1280&&l!==(l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&a(e,"class",l)},d(c){c&&M(e),o=!1,u()}}}function bn(s){let e;return{c(){e=f("span"),a(e,"class","loading-spinner ml-1 svelte-qhxb3n")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Po(s){let e,t,r,n,l,o,u,d,c,m,p,g,b,_,v,L=(s[9]?"...":s[1].listMemberProfiles.length)+"",x,C,D,N,R,E,I,S,H,T,K=s[1].listMemberProfiles.length+"",j,$,P=s[1].listMembers.length+"",U,q,Z,oe,X,y;t=new yo({});let h=s[4].size>0&&sn(s),W=s[6].success.length>0&&rn(s),B=s[6].errors.length>0&&nn(s),O=s[7].success.length>0&&on(s),z=s[7].errors.length>0&&an(s);function G(F,re){return F[2]?Lo:F[3]?ko:F[1].listMembers.length===0?So:wo}let J=G(s),Y=J(s);return X=new ao({}),{c(){e=f("div"),Re(t.$$.fragment),r=w(),h&&h.c(),n=w(),W&&W.c(),l=w(),B&&B.c(),o=w(),O&&O.c(),u=w(),z&&z.c(),d=w(),c=f("div"),m=f("div"),p=f("div"),g=f("h3"),g.textContent="Latest list members",b=w(),_=f("p"),v=k("Showing "),x=k(L),C=k(" of "),D=k(s[0]),N=k(`
					total members`),R=w(),E=f("div"),I=f("div"),S=k("Debug: isLoadingMembers="),H=k(s[2]),T=k(", profiles="),j=k(K),$=k(", members="),U=k(P),q=w(),Y.c(),Z=w(),oe=f("div"),Re(X.$$.fragment),a(g,"class","text-lg font-semibold text-slate-800 mb-2"),a(_,"class","text-sm text-slate-600"),a(p,"class","p-6 border-b border-gray-200"),a(I,"class","text-xs text-gray-500 mb-2"),a(E,"class","p-6 flex flex-col flex-1"),a(m,"id","list-members-container"),a(m,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),a(c,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),a(c,"id","list-manager-layout"),a(e,"class","space-y-6 relative z-100"),a(e,"id","list-manager")},m(F,re){A(F,e,re),Ce(t,e,null),i(e,r),h&&h.m(e,null),i(e,n),W&&W.m(e,null),i(e,l),B&&B.m(e,null),i(e,o),O&&O.m(e,null),i(e,u),z&&z.m(e,null),i(e,d),i(e,c),i(c,m),i(m,p),i(p,g),i(p,b),i(p,_),i(_,v),i(_,x),i(_,C),i(_,D),i(_,N),i(m,R),i(m,E),i(E,I),i(I,S),i(I,H),i(I,T),i(I,j),i(I,$),i(I,U),i(E,q),Y.m(E,null),i(c,Z),i(c,oe),Ce(X,oe,null),y=!0},p(F,re){F[4].size>0?h?h.p(F,re):(h=sn(F),h.c(),h.m(e,n)):h&&(h.d(1),h=null),F[6].success.length>0?W?W.p(F,re):(W=rn(F),W.c(),W.m(e,l)):W&&(W.d(1),W=null),F[6].errors.length>0?B?B.p(F,re):(B=nn(F),B.c(),B.m(e,o)):B&&(B.d(1),B=null),F[7].success.length>0?O?O.p(F,re):(O=on(F),O.c(),O.m(e,u)):O&&(O.d(1),O=null),F[7].errors.length>0?z?z.p(F,re):(z=an(F),z.c(),z.m(e,d)):z&&(z.d(1),z=null),(!y||re[0]&514)&&L!==(L=(F[9]?"...":F[1].listMemberProfiles.length)+"")&&V(x,L),(!y||re[0]&1)&&V(D,F[0]),(!y||re[0]&4)&&V(H,F[2]),(!y||re[0]&2)&&K!==(K=F[1].listMemberProfiles.length+"")&&V(j,K),(!y||re[0]&2)&&P!==(P=F[1].listMembers.length+"")&&V(U,P),J===(J=G(F))&&Y?Y.p(F,re):(Y.d(1),Y=J(F),Y&&(Y.c(),Y.m(E,null)))},i(F){y||(ae(t.$$.fragment,F),ae(X.$$.fragment,F),y=!0)},o(F){ue(t.$$.fragment,F),ue(X.$$.fragment,F),y=!1},d(F){F&&M(e),xe(t),h&&h.d(),W&&W.d(),B&&B.d(),O&&O.d(),z&&z.d(),Y.d(),xe(X)}}}const gs=25;function To(s,e,t){let r,n;Ie(s,me,P=>t(1,r=P)),Ie(s,je,P=>t(21,n=P));let l=!1,o="",u=new Set,d=!1,c={success:[],errors:[]},m=new Set,p={success:[],errors:[]},g=1,b=!1,_=!1,v=0,L=new Map,x=0,C=null;async function D(){if(!(!r.selectedList||!n.session||_)){t(19,_=!0),t(2,l=!0),t(3,o=""),t(8,g=1),L.clear();try{const P=await Le.getListInfo(n.session,r.selectedList.uri,n.authType),U={...r.selectedList,name:P.name,description:P.description,createdAt:P.createdAt,listItemCount:P.listItemCount};me.setSelectedList(U),t(0,x=P.listItemCount||0),t(10,v=Math.ceil(x/gs)),console.log("Total pages:",v,"Total count:",x),await N(1),me.setListLoading(!1)}catch(P){console.error("Error loading list members:",P),t(3,o=P.message||"Failed to load list members"),me.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,l=!1),t(19,_=!1),console.log("Final state - isLoadingMembers:",l,"isCurrentlyLoadingMembers:",_)}}}async function N(P){if(!(!n.session||!r.selectedList)){t(9,b=!0),t(8,g=P);try{let U=L.get(P-1);const q=await Le.getListMembers(n.session,r.selectedList.uri,n.authType,gs,U);console.log(`Fetched ${q.members.length} members for page ${P}`),console.log("Members received:",q.members),q.cursor&&L.set(P,q.cursor),q.members.length===0?x===0?t(3,o=""):(console.warn("No members returned from API for page",P),t(3,o="We couldn’t load members right now.")):t(3,o="");const Z=q.profiles||[];console.log(`Using ${Z.length} profiles from API response for page ${P}`),console.log("Setting profiles in store:",Z.length),me.setListMembers(q.members),me.setListMemberProfiles(Z),console.log("Profiles set in store, current count:",r.listMemberProfiles.length)}catch(U){console.error("Error loading members page:",U),t(3,o=U.message||"Failed to load page"),me.setListMemberProfiles([])}finally{t(9,b=!1)}}}async function R(){if(u.size===0)return;t(5,d=!0),t(6,c={success:[],errors:[]});const P=Array.from(u);for(const U of P)try{await Le.addToList(n.session,U,r.selectedList.uri,n.authType),c.success.push(U),await me.fetchAndAddProfile(n.session,U,n.authType)}catch(q){c.errors.push({did:U,error:q.message})}u.clear(),t(4,u),t(5,d=!1)}async function E(P){if(!(!P||!r.selectedList||!n.session)){m.add(P);try{await Le.removeFromList(n.session,P,r.selectedList.uri,n.authType),p.success.push(P);const U=r.listMemberProfiles.filter(oe=>oe.did!==P);me.setListMemberProfiles(U);const q=r.listMembers.filter(oe=>oe!==P);me.setListMembers(q),t(0,x=Math.max(0,x-1)),t(10,v=Math.ceil(x/gs));const Z=r.userLists.map(oe=>oe.uri===r.selectedList.uri?{...oe,memberCount:Math.max(0,(oe.memberCount||0)-1)}:oe);me.setUserLists(Z)}catch(U){console.error("Failed to remove profile from list:",U),p.errors.push({profileDid:P,error:U.message})}finally{m.delete(P),setTimeout(()=>{t(7,p={success:[],errors:[]})},5e3)}}}async function I(P){P>=1&&P<=v&&await N(P)}async function S(){g<v&&await N(g+1)}async function H(){g>1&&await N(g-1)}const T=P=>E(P.did),K=()=>N(g),j=(P,U)=>{let q;return v<=5||g<=3?q=U+1:g>=v-2?q=v-4+U:q=g-2+U,q},$=P=>I(P);return s.$$.update=()=>{var P,U,q;s.$$.dirty[0]&2&&r.refreshTrigger&&D(),s.$$.dirty[0]&2&&console.log("Profile count changed:",r.listMemberProfiles.length),s.$$.dirty[0]&3&&((P=r.selectedList)==null?void 0:P.listItemCount)!==x&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(U=r.selectedList)==null?void 0:U.listItemCount),console.log("Current totalMemberCount:",x),t(0,x=((q=r.selectedList)==null?void 0:q.listItemCount)||0),t(10,v=Math.ceil(x/gs))),s.$$.dirty[0]&3670018&&r.selectedList&&n.session&&!_&&C!==r.selectedList.uri&&(console.log("List changed, loading members for:",r.selectedList.name),t(20,C=r.selectedList.uri),D())},[x,r,l,o,u,d,c,p,g,b,v,m,D,N,R,E,I,S,H,_,C,n,T,K,j,$]}class Io extends De{constructor(e){super(),Oe(this,e,To,Po,Ee,{},null,[-1,-1])}}function yn(s){let e,t,r,n,l,o,u,d;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("h3"),l.textContent="Getting Ready",o=w(),u=f("p"),d=k(s[1]),a(r,"class","loading-spinner mx-auto mb-4 svelte-847qwb"),a(l,"class","text-lg font-semibold text-slate-800 mb-2"),a(u,"class","text-slate-600"),a(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),a(t,"id","loading-overlay-content"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"),a(e,"id","loading-overlay")},m(c,m){A(c,e,m),i(e,t),i(t,r),i(t,n),i(t,l),i(t,o),i(t,u),i(u,d)},p(c,m){m&2&&V(d,c[1])},d(c){c&&M(e)}}}function Ro(s){let e,t=s[0]&&yn(s);return{c(){t&&t.c(),e=st()},m(r,n){t&&t.m(r,n),A(r,e,n)},p(r,[n]){r[0]?t?t.p(r,n):(t=yn(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:se,o:se,d(r){r&&M(e),t&&t.d(r)}}}function Oo(s,e,t){let{isLoading:r=!1}=e,{message:n="Loading list data..."}=e;return s.$$set=l=>{"isLoading"in l&&t(0,r=l.isLoading),"message"in l&&t(1,n=l.message)},[r,n]}class Do extends De{constructor(e){super(),Oe(this,e,Oo,Ro,Ee,{isLoading:0,message:1})}}function vn(s,e,t){const r=s.slice();return r[8]=e[t],r}function _n(s,e){let t,r,n;return{key:s,first:null,c(){t=f("div"),r=_s("svg"),n=_s("path"),a(n,"d","m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"),a(n,"fill","#1185fe"),a(n,"opacity","0.4"),a(r,"width","100%"),a(r,"height","100%"),a(r,"viewBox","0 0 600 530"),a(r,"xmlns","http://www.w3.org/2000/svg"),a(r,"class","butterfly-svg svelte-1l7ozht"),a(t,"class","butterfly svelte-1l7ozht"),de(t,"left",e[8].x+"%"),de(t,"top",e[8].y+"%"),de(t,"width",e[8].size+"px"),de(t,"height",e[8].size+"px"),de(t,"animation-duration",e[8].speed+"s"),de(t,"animation-delay",e[8].delay+"s"),de(t,"transform","rotate("+e[8].rotation+"deg)"),de(t,"opacity",.6+Math.random()*.4),this.first=t},m(l,o){A(l,t,o),i(t,r),i(r,n)},p(l,o){e=l,o&1&&de(t,"left",e[8].x+"%"),o&1&&de(t,"top",e[8].y+"%"),o&1&&de(t,"width",e[8].size+"px"),o&1&&de(t,"height",e[8].size+"px"),o&1&&de(t,"animation-duration",e[8].speed+"s"),o&1&&de(t,"animation-delay",e[8].delay+"s"),o&1&&de(t,"transform","rotate("+e[8].rotation+"deg)")},d(l){l&&M(t)}}}function wn(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="message-content svelte-1l7ozht" id="empty-list-content"><svg width="60" height="53" viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg" class="svelte-1l7ozht"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe" opacity="0.3"></path></svg> <p class="svelte-1l7ozht">Add members to your list to see butterflies flutter by!</p></div>',a(e,"class","empty-list-message svelte-1l7ozht"),a(e,"id","empty-list-message")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function No(s){let e,t=[],r=new Map,n,l=he(s[0]);const o=d=>d[8].id;for(let d=0;d<l.length;d+=1){let c=vn(s,l,d),m=o(c);r.set(m,t[d]=_n(m,c))}let u=s[2].selectedList&&s[1]===0&&wn();return{c(){e=f("div");for(let d=0;d<t.length;d+=1)t[d].c();n=w(),u&&u.c(),a(e,"class","butterfly-background svelte-1l7ozht"),a(e,"id","butterfly-background")},m(d,c){A(d,e,c);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i(e,n),u&&u.m(e,null),s[5](e)},p(d,[c]){c&1&&(l=he(d[0]),t=sl(t,c,o,1,d,l,r,e,tl,_n,n,vn)),d[2].selectedList&&d[1]===0?u||(u=wn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:se,o:se,d(d){d&&M(e);for(let c=0;c<t.length;c+=1)t[c].d();u&&u.d(),s[5](null)}}}function Ko(s,e,t){let r,n,l;Ie(s,me,p=>t(2,l=p));let o,u=[];const d={baseCount:12,maxCount:50,minSize:20,maxSize:45,minSpeed:15,maxSpeed:45,minDelay:0,maxDelay:15};Cs(()=>{c()});function c(){t(0,u=[]);for(let p=0;p<n;p++)u.push({id:p,x:Math.random()*100,y:Math.random()*100,size:Math.random()*(d.maxSize-d.minSize)+d.minSize,speed:Math.random()*(d.maxSpeed-d.minSpeed)+d.minSpeed,delay:Math.random()*(d.maxDelay-d.minDelay)+d.minDelay,rotation:Math.random()*60-30,rotationSpeed:(Math.random()-.5)*2,floatingDirection:Math.random()*360,floatingSpeed:Math.random()*.5+.1})}function m(p){ws[p?"unshift":"push"](()=>{o=p,t(3,o)})}return s.$$.update=()=>{var p;s.$$.dirty&4&&t(1,r=((p=l.selectedList)==null?void 0:p.listItemCount)||0),s.$$.dirty&6&&t(4,n=l.selectedList?Math.min(d.maxCount,Math.max(d.baseCount,Math.floor(r/2))):d.baseCount),s.$$.dirty&17&&n!==u.length&&c()},[u,r,l,o,n,m]}class Bo extends De{constructor(e){super(),Oe(this,e,Ko,No,Ee,{})}}function Sn(s){let e,t;return e=new di({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ae(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Wo(s){let e,t;return e=new Io({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ae(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Uo(s){let e,t;return e=new Ri({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ae(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Ho(s){let e,t;return e=new Ei({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ae(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function zo(s){let e,t,r,n,l,o,u,d,c,m;t=new Bo({});let p=s[1]!=="auth"&&Sn();const g=[Ho,Uo,Wo],b=[];function _(v,L){return v[1]==="auth"?0:v[1]==="list-selector"?1:v[1]==="manager"?2:-1}return~(o=_(s))&&(u=b[o]=g[o](s)),c=new Do({props:{isLoading:s[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=f("main"),Re(t.$$.fragment),r=w(),p&&p.c(),n=w(),l=f("div"),u&&u.c(),d=w(),Re(c.$$.fragment),a(l,"class","max-w-6xl mx-auto p-6"),a(l,"id","app-content"),a(e,"class","min-h-screen bg-gray-50"),a(e,"id","app-main")},m(v,L){A(v,e,L),Ce(t,e,null),i(e,r),p&&p.m(e,null),i(e,n),i(e,l),~o&&b[o].m(l,null),i(e,d),Ce(c,e,null),m=!0},p(v,[L]){v[1]!=="auth"?p?L&2&&ae(p,1):(p=Sn(),p.c(),ae(p,1),p.m(e,n)):p&&(ft(),ue(p,1,1,()=>{p=null}),mt());let x=o;o=_(v),o!==x&&(u&&(ft(),ue(b[x],1,1,()=>{b[x]=null}),mt()),~o?(u=b[o],u||(u=b[o]=g[o](v),u.c()),ae(u,1),u.m(l,null)):u=null);const C={};L&1&&(C.isLoading=v[0].isLoadingList),c.$set(C)},i(v){m||(ae(t.$$.fragment,v),ae(p),ae(u),ae(c.$$.fragment,v),m=!0)},o(v){ue(t.$$.fragment,v),ue(p),ue(u),ue(c.$$.fragment,v),m=!1},d(v){v&&M(e),xe(t),p&&p.d(),~o&&b[o].d(),xe(c)}}}function Fo(s,e,t){let r,n;Ie(s,me,o=>t(0,r=o)),Ie(s,je,o=>t(2,n=o));let l="auth";return Cs(async()=>{const{session:o,authType:u}=await je.initializeSession();o&&(console.log("Session restored:",{authType:u,handle:o.handle||o.did}),t(1,l="list-selector"))}),s.$$.update=()=>{s.$$.dirty&5&&(n.session?r.selectedList?t(1,l="manager"):t(1,l="list-selector"):t(1,l="auth"))},[r,l,n]}class jo extends De{constructor(e){super(),Oe(this,e,Fo,zo,Ee,{})}}new jo({target:document.getElementById("app")})});export default Jo();
