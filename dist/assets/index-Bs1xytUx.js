var Vn=Object.defineProperty;var Sr=s=>{throw TypeError(s)};var Yn=(s,e,t)=>e in s?Vn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Be=(s,e,t)=>Yn(s,typeof e!="symbol"?e+"":e,t),kr=(s,e,t)=>e.has(s)||Sr("Cannot "+t);var se=(s,e,t)=>(kr(s,e,"read from private field"),t?t.call(s):e.get(s)),Xe=(s,e,t)=>e.has(s)?Sr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Qe=(s,e,t,r)=>(kr(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function re(){}function kn(s){return s()}function Lr(){return Object.create(null)}function Me(s){s.forEach(kn)}function Ln(s){return typeof s=="function"}function Ee(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let fs;function tt(s,e){return s===e?!0:(fs||(fs=document.createElement("a")),fs.href=e,s===fs.href)}function $n(s){return Object.keys(s).length===0}function Gn(s,...e){if(s==null){for(const r of e)r(void 0);return re}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ie(s,e,t){s.$$.on_destroy.push(Gn(e,t))}function i(s,e){s.appendChild(e)}function A(s,e,t){s.insertBefore(e,t||null)}function M(s){s.parentNode&&s.parentNode.removeChild(s)}function Ve(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function m(s){return document.createElement(s)}function vs(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function k(s){return document.createTextNode(s)}function w(){return k(" ")}function st(){return k("")}function ie(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function zs(s){return function(e){return e.preventDefault(),s.call(this,e)}}function c(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Cn(s){let e;return{p(...t){e=t,e.forEach(r=>s.push(r))},r(){e.forEach(t=>s.splice(s.indexOf(t),1))}}}function Zn(s){return Array.from(s.childNodes)}function q(s,e){e=""+e,s.data!==e&&(s.data=e)}function be(s,e){s.value=e??""}function de(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function Cr(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}s.selectedIndex=-1}function Xn(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}let jt;function Ft(s){jt=s}function Fs(){if(!jt)throw new Error("Function called outside component initialization");return jt}function Ls(s){Fs().$$.on_mount.push(s)}function xn(s){Fs().$$.on_destroy.push(s)}function Mn(){const s=Fs();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const l=Xn(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,l)}),!l.defaultPrevented}return!0}}const Et=[],_s=[];let Rt=[];const xr=[],Qn=Promise.resolve();let Bs=!1;function el(){Bs||(Bs=!0,Qn.then(En))}function Us(s){Rt.push(s)}const Is=new Set;let Ct=0;function En(){if(Ct!==0)return;const s=jt;do{try{for(;Ct<Et.length;){const e=Et[Ct];Ct++,Ft(e),tl(e.$$)}}catch(e){throw Et.length=0,Ct=0,e}for(Ft(null),Et.length=0,Ct=0;_s.length;)_s.pop()();for(let e=0;e<Rt.length;e+=1){const t=Rt[e];Is.has(t)||(Is.add(t),t())}Rt.length=0}while(Et.length);for(;xr.length;)xr.pop()();Bs=!1,Is.clear(),Ft(s)}function tl(s){if(s.fragment!==null){s.update(),Me(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Us)}}function sl(s){const e=[],t=[];Rt.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Rt=e}const hs=new Set;let dt;function ft(){dt={r:0,c:[],p:dt}}function mt(){dt.r||Me(dt.c),dt=dt.p}function ce(s,e){s&&s.i&&(hs.delete(s),s.i(e))}function ue(s,e,t,r){if(s&&s.o){if(hs.has(s))return;hs.add(s),dt.c.push(()=>{hs.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}function he(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function rl(s,e){s.d(1),e.delete(s.key)}function nl(s,e,t,r,n,l,o,u,d,a,f,p){let b=s.length,g=l.length,_=b;const y={};for(;_--;)y[s[_].key]=_;const L=[],x=new Map,E=new Map,I=[];for(_=g;_--;){const D=p(n,l,_),S=t(D);let U=o.get(S);U?I.push(()=>U.p(D,e)):(U=a(S,D),U.c()),x.set(S,L[_]=U),S in y&&E.set(S,Math.abs(_-y[S]))}const K=new Set,R=new Set;function P(D){ce(D,1),D.m(u,f),o.set(D.key,D),f=D.first,g--}for(;b&&g;){const D=L[g-1],S=s[b-1],U=D.key,C=S.key;D===S?(f=D.first,b--,g--):x.has(C)?!o.has(U)||K.has(U)?P(D):R.has(C)?b--:E.get(U)>E.get(C)?(R.add(U),P(D)):(K.add(C),b--):(d(S,o),b--)}for(;b--;){const D=s[b];x.has(D.key)||d(D,o)}for(;g;)P(L[g-1]);return Me(I),L}function Re(s){s&&s.c()}function Ce(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Us(()=>{const l=s.$$.on_mount.map(kn).filter(Ln);s.$$.on_destroy?s.$$.on_destroy.push(...l):Me(l),s.$$.on_mount=[]}),n.forEach(Us)}function xe(s,e){const t=s.$$;t.fragment!==null&&(sl(t.after_update),Me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ll(s,e){s.$$.dirty[0]===-1&&(Et.push(s),el(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function Oe(s,e,t,r,n,l,o=null,u=[-1]){const d=jt;Ft(s);const a=s.$$={fragment:null,ctx:[],props:l,update:re,not_equal:n,bound:Lr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Lr(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};o&&o(a.root);let f=!1;if(a.ctx=t?t(s,e.props||{},(p,b,...g)=>{const _=g.length?g[0]:b;return a.ctx&&n(a.ctx[p],a.ctx[p]=_)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](_),f&&ll(s,p)),b}):[],a.update(),f=!0,Me(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const p=Zn(e.target);a.fragment&&a.fragment.l(p),p.forEach(M)}else a.fragment&&a.fragment.c();e.intro&&ce(s.$$.fragment),Ce(s,e.target,e.anchor),En()}Ft(d)}class De{constructor(){Be(this,"$$");Be(this,"$$set")}$destroy(){xe(this,1),this.$destroy=re}$on(e,t){if(!Ln(t))return re;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!$n(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const il="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(il);const xt=[];function js(s,e=re){let t;const r=new Set;function n(u){if(Ee(s,u)&&(s=u,t)){const d=!xt.length;for(const a of r)a[1](),xt.push(a,s);if(d){for(let a=0;a<xt.length;a+=2)xt[a][0](xt[a+1]);xt.length=0}}}function l(u){n(u(s))}function o(u,d=re){const a=[u,d];return r.add(a),r.size===1&&(t=e(n,l)||re),u(s),()=>{r.delete(a),r.size===0&&t&&(t(),t=null)}}return{set:n,update:l,subscribe:o}}const It=new TextEncoder,ws=new TextDecoder;function ol(...s){const e=s.reduce((n,{length:l})=>n+l,0),t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function al(s){if(Uint8Array.prototype.toBase64)return s.toBase64();const e=32768,t=[];for(let r=0;r<s.length;r+=e)t.push(String.fromCharCode.apply(null,s.subarray(r,r+e)));return btoa(t.join(""))}function cl(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(s);const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function An(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof s=="string"?s:ws.decode(s),{alphabet:"base64url"});let e=s;e instanceof Uint8Array&&(e=ws.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return cl(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Rs(s){let e=s;return typeof e=="string"&&(e=It.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):al(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class Cs extends Error{constructor(t,r){var n;super(t,r);Be(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Be(Cs,"code","ERR_JOSE_GENERIC");class qe extends Cs{constructor(){super(...arguments);Be(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Be(qe,"code","ERR_JOSE_NOT_SUPPORTED");class At extends Cs{constructor(){super(...arguments);Be(this,"code","ERR_JWS_INVALID")}}Be(At,"code","ERR_JWS_INVALID");class Pn extends Cs{constructor(){super(...arguments);Be(this,"code","ERR_JWT_INVALID")}}Be(Pn,"code","ERR_JWT_INVALID");function Je(s,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${s}`)}function zt(s,e){return s.name===e}function Os(s){return parseInt(s.name.slice(4),10)}function ul(s){switch(s){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function dl(s,e){if(!s.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function fl(s,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!zt(s.algorithm,"HMAC"))throw Je("HMAC");const r=parseInt(e.slice(2),10);if(Os(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!zt(s.algorithm,"RSASSA-PKCS1-v1_5"))throw Je("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(Os(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!zt(s.algorithm,"RSA-PSS"))throw Je("RSA-PSS");const r=parseInt(e.slice(2),10);if(Os(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!zt(s.algorithm,"Ed25519"))throw Je("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!zt(s.algorithm,"ECDSA"))throw Je("ECDSA");const r=ul(e);if(s.algorithm.namedCurve!==r)throw Je(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}dl(s,t)}function Tn(s,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const n=t.pop();s+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?s+=`one of type ${t[0]} or ${t[1]}.`:s+=`of type ${t[0]}.`;return e==null?s+=` Received ${e}`:typeof e=="function"&&e.name?s+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(s+=` Received an instance of ${e.constructor.name}`),s}const ml=(s,...e)=>Tn("Key must be ",s,...e);function In(s,e,...t){return Tn(`Key for the ${s} algorithm must be `,e,...t)}function Rn(s){return(s==null?void 0:s[Symbol.toStringTag])==="CryptoKey"}function On(s){return(s==null?void 0:s[Symbol.toStringTag])==="KeyObject"}const Dn=s=>Rn(s)||On(s),pl=(...s)=>{const e=s.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const n=Object.keys(r);if(!t||t.size===0){t=new Set(n);continue}for(const l of n){if(t.has(l))return!1;t.add(l)}}return!0};function hl(s){return typeof s=="object"&&s!==null}const Js=s=>{if(!hl(s)||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e},gl=(s,e)=>{if(s.startsWith("RS")||s.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${s} requires key modulusLength to be 2048 bits or larger`)}};function bl(s){let e,t;switch(s.kty){case"RSA":{switch(s.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.slice(-3),10)||1}`},t=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(s.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=s.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=s.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(s.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new qe('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const Kn=async s=>{if(!s.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=bl(s),r={...s};return delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,s.ext??!s.d,s.key_ops??t)};async function yl(s,e,t){if(!Js(s))throw new TypeError("JWK must be an object");let r;switch(e??(e=s.alg),r??(r=s.ext),s.kty){case"oct":if(typeof s.k!="string"||!s.k)throw new TypeError('missing "k" (Key Value) Parameter value');return An(s.k);case"RSA":if("oth"in s&&s.oth!==void 0)throw new qe('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Kn({...s,alg:e,ext:r});default:throw new qe('Unsupported "kty" (Key Type) Parameter value')}}const vl=(s,e,t,r,n)=>{if(n.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new s('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new s('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;t!==void 0?l=new Map([...Object.entries(t),...e.entries()]):l=e;for(const o of r.crit){if(!l.has(o))throw new qe(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new s(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&r[o]===void 0)throw new s(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)};function qs(s){return Js(s)&&typeof s.kty=="string"}function _l(s){return s.kty!=="oct"&&typeof s.d=="string"}function wl(s){return s.kty!=="oct"&&typeof s.d>"u"}function Sl(s){return s.kty==="oct"&&typeof s.k=="string"}let Ot;const Mr=async(s,e,t,r=!1)=>{Ot||(Ot=new WeakMap);let n=Ot.get(s);if(n!=null&&n[t])return n[t];const l=await Kn({...e,alg:t});return r&&Object.freeze(s),n?n[t]=l:Ot.set(s,{[t]:l}),l},kl=(s,e)=>{var o;Ot||(Ot=new WeakMap);let t=Ot.get(s);if(t!=null&&t[e])return t[e];const r=s.type==="public",n=!!r;let l;if(s.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}l=s.toCryptoKey(s.asymmetricKeyType,n,r?[]:["deriveBits"])}if(s.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");l=s.toCryptoKey(s.asymmetricKeyType,n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="rsa"){let u;switch(e){case"RSA-OAEP":u="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":u="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":u="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":u="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return s.toCryptoKey({name:"RSA-OAEP",hash:u},n,r?["encrypt"]:["decrypt"]);l=s.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:u},n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="ec"){const d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=s.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!d)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&d==="P-256"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES384"&&d==="P-384"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES512"&&d==="P-521"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(l=s.toCryptoKey({name:"ECDH",namedCurve:d},n,r?[]:["deriveBits"]))}if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=l:Ot.set(s,{[e]:l}),l},Ll=async(s,e)=>{if(s instanceof Uint8Array||Rn(s))return s;if(On(s)){if(s.type==="secret")return s.export();if("toCryptoKey"in s&&typeof s.toCryptoKey=="function")try{return kl(s,e)}catch(r){if(r instanceof TypeError)throw r}let t=s.export({format:"jwk"});return Mr(s,t,e)}if(qs(s))return s.k?An(s.k):Mr(s,s,e,!0);throw new Error("unreachable")},Pt=s=>s==null?void 0:s[Symbol.toStringTag],Ws=(s,e,t)=>{var r,n;if(e.use!==void 0){let l;switch(t){case"sign":case"verify":l="sig";break;case"encrypt":case"decrypt":l="enc";break}if(e.use!==l)throw new TypeError(`Invalid key for this operation, its "use" must be "${l}" when present`)}if(e.alg!==void 0&&e.alg!==s)throw new TypeError(`Invalid key for this operation, its "alg" must be "${s}" when present`);if(Array.isArray(e.key_ops)){let l;switch(!0){case t==="sign":case s==="dir":case s.includes("CBC-HS"):l=t;break;case s.startsWith("PBES2"):l="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(s):!s.includes("GCM")&&s.endsWith("KW")?l="unwrapKey":l=t;break;case t==="encrypt":l="wrapKey";break;case t==="decrypt":l=s.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(l&&((n=(r=e.key_ops)==null?void 0:r.includes)==null?void 0:n.call(r,l))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${l}" when present`)}return!0},Cl=(s,e,t)=>{if(!(e instanceof Uint8Array)){if(qs(e)){if(Sl(e)&&Ws(s,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Dn(e))throw new TypeError(In(s,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Pt(e)} instances for symmetric algorithms must be of type "secret"`)}},xl=(s,e,t)=>{if(qs(e))switch(t){case"decrypt":case"sign":if(_l(e)&&Ws(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(wl(e)&&Ws(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Dn(e))throw new TypeError(In(s,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Pt(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},Ml=(s,e,t)=>{s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(s)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(s)?Cl(s,e,t):xl(s,e,t)},El=(s,e)=>{const t=`SHA-${s.slice(-3)}`;switch(s){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(s.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new qe(`alg ${s} is not supported either by JOSE or your javascript runtime`)}},Al=async(s,e,t)=>{if(e instanceof Uint8Array){if(!s.startsWith("HS"))throw new TypeError(ml(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${s.slice(-3)}`,name:"HMAC"},!1,[t])}return fl(e,s,t),e},at=s=>Math.floor(s.getTime()/1e3),Nn=60,Bn=Nn*60,Vs=Bn*24,Pl=Vs*7,Tl=Vs*365.25,Il=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Ds=s=>{const e=Il.exec(s);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let n;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*Nn);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*Bn);break;case"day":case"days":case"d":n=Math.round(t*Vs);break;case"week":case"weeks":case"w":n=Math.round(t*Pl);break;default:n=Math.round(t*Tl);break}return e[1]==="-"||e[4]==="ago"?-n:n};function ct(s,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${s} input`);return e}var pe;class Rl{constructor(e){Xe(this,pe);if(!Js(e))throw new TypeError("JWT Claims Set MUST be an object");Qe(this,pe,structuredClone(e))}data(){return It.encode(JSON.stringify(se(this,pe)))}get iss(){return se(this,pe).iss}set iss(e){se(this,pe).iss=e}get sub(){return se(this,pe).sub}set sub(e){se(this,pe).sub=e}get aud(){return se(this,pe).aud}set aud(e){se(this,pe).aud=e}set jti(e){se(this,pe).jti=e}set nbf(e){typeof e=="number"?se(this,pe).nbf=ct("setNotBefore",e):e instanceof Date?se(this,pe).nbf=ct("setNotBefore",at(e)):se(this,pe).nbf=at(new Date)+Ds(e)}set exp(e){typeof e=="number"?se(this,pe).exp=ct("setExpirationTime",e):e instanceof Date?se(this,pe).exp=ct("setExpirationTime",at(e)):se(this,pe).exp=at(new Date)+Ds(e)}set iat(e){typeof e>"u"?se(this,pe).iat=at(new Date):e instanceof Date?se(this,pe).iat=ct("setIssuedAt",at(e)):typeof e=="string"?se(this,pe).iat=ct("setIssuedAt",at(new Date)+Ds(e)):se(this,pe).iat=ct("setIssuedAt",e)}}pe=new WeakMap;const Ol=async(s,e,t)=>{const r=await Al(s,e,"sign");gl(s,r);const n=await crypto.subtle.sign(El(s,r.algorithm),r,t);return new Uint8Array(n)};var Jt,Te,Fe;class Dl{constructor(e){Xe(this,Jt);Xe(this,Te);Xe(this,Fe);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Qe(this,Jt,e)}setProtectedHeader(e){if(se(this,Te))throw new TypeError("setProtectedHeader can only be called once");return Qe(this,Te,e),this}setUnprotectedHeader(e){if(se(this,Fe))throw new TypeError("setUnprotectedHeader can only be called once");return Qe(this,Fe,e),this}async sign(e,t){if(!se(this,Te)&&!se(this,Fe))throw new At("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!pl(se(this,Te),se(this,Fe)))throw new At("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...se(this,Te),...se(this,Fe)},n=vl(At,new Map([["b64",!0]]),t==null?void 0:t.crit,se(this,Te),r);let l=!0;if(n.has("b64")&&(l=se(this,Te).b64,typeof l!="boolean"))throw new At('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if(typeof o!="string"||!o)throw new At('JWS "alg" (Algorithm) Header Parameter missing or invalid');Ml(o,e,"sign");let u=se(this,Jt);l&&(u=It.encode(Rs(u)));let d;se(this,Te)?d=It.encode(Rs(JSON.stringify(se(this,Te)))):d=It.encode("");const a=ol(d,It.encode("."),u),f=await Ll(e,o),p=await Ol(o,f,a),b={signature:Rs(p),payload:""};return l&&(b.payload=ws.decode(u)),se(this,Fe)&&(b.header=se(this,Fe)),se(this,Te)&&(b.protected=ws.decode(d)),b}}Jt=new WeakMap,Te=new WeakMap,Fe=new WeakMap;var Dt;class Kl{constructor(e){Xe(this,Dt);Qe(this,Dt,new Dl(e))}setProtectedHeader(e){return se(this,Dt).setProtectedHeader(e),this}async sign(e,t){const r=await se(this,Dt).sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}Dt=new WeakMap;var et,Ke;class Nl{constructor(e={}){Xe(this,et);Xe(this,Ke);Qe(this,Ke,new Rl(e))}setIssuer(e){return se(this,Ke).iss=e,this}setSubject(e){return se(this,Ke).sub=e,this}setAudience(e){return se(this,Ke).aud=e,this}setJti(e){return se(this,Ke).jti=e,this}setNotBefore(e){return se(this,Ke).nbf=e,this}setExpirationTime(e){return se(this,Ke).exp=e,this}setIssuedAt(e){return se(this,Ke).iat=e,this}setProtectedHeader(e){return Qe(this,et,e),this}async sign(e,t){var n;const r=new Kl(se(this,Ke).data());if(r.setProtectedHeader(se(this,et)),Array.isArray((n=se(this,et))==null?void 0:n.crit)&&se(this,et).crit.includes("b64")&&se(this,et).b64===!1)throw new Pn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}et=new WeakMap,Ke=new WeakMap;const gs="bluesky_oauth_session",Un="bluesky_code_verifier",Wn="bluesky_oauth_state",Hn="bluesky_server_url";function zn(s=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const r=new Uint8Array(s);crypto.getRandomValues(r);for(let n=0;n<s;n++)t+=e[r[n]%e.length];return t}async function Fn(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t);return jn(r)}function jn(s){return btoa(String.fromCharCode(...new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bl(s,e,t,r,n){try{const l=await crypto.subtle.exportKey("jwk",s.publicKey),o={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};if(r&&(o.nonce=r),n){const f=new TextEncoder().encode(n),p=await crypto.subtle.digest("SHA-256",f);o.ath=jn(p)}const u=await yl(await crypto.subtle.exportKey("jwk",s.privateKey),"ES256");return await new Nl(o).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:l.kty,crv:l.crv,x:l.x,y:l.y}}).sign(u)}catch(l){throw console.error("Error creating DPoP JWT:",l),l}}async function Jn(s="https://bsky.social"){try{const e=zn();localStorage.setItem(Un,e);const t=await Fn(e),r=crypto.randomUUID();localStorage.setItem(Wn,r),localStorage.setItem(Hn,s);const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l=n?"http://localhost:5174/.well-known/oauth-client-metadata.json":"https://pixeline.be/bluesky-list-manager/.well-known/oauth-client-metadata.json",u=window.location.pathname.includes("/bluesky-list-manager")?"/bluesky-list-manager":"",d=n?`${window.location.origin}/oauth-callback.html`:`${window.location.origin}${u}/oauth-callback-standalone.html`,a=new URL(`${s}/oauth/authorize`);a.searchParams.append("client_id",l),a.searchParams.append("response_type","code"),a.searchParams.append("redirect_uri",d),a.searchParams.append("scope","atproto transition:generic"),a.searchParams.append("state",r),a.searchParams.append("code_challenge",t),a.searchParams.append("code_challenge_method","S256"),window.location.href=a.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}async function ut(){const s=localStorage.getItem(gs);if(s)try{const e=JSON.parse(s);if(console.log("Retrieved stored OAuth session:",{hasAccessToken:!!e.accessToken,hasSub:!!e.sub,hasDpopKeypair:!!e.dpopKeypair,timestamp:e.timestamp}),e.dpopKeypair&&e.dpopKeypair.privateKey&&e.dpopKeypair.publicKey)try{if(!e.dpopKeypair.privateKey.kty||!e.dpopKeypair.publicKey.kty)throw console.error("Invalid JWK structure in stored DPoP keypair"),new Error("Invalid JWK structure");const t=await crypto.subtle.importKey("jwk",e.dpopKeypair.privateKey,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]),r=await crypto.subtle.importKey("jwk",e.dpopKeypair.publicKey,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);e.dpopKeypair={privateKey:t,publicKey:r},console.log("Successfully imported DPoP keypair")}catch(t){return console.error("Failed to import DPoP keypair:",t),localStorage.removeItem(gs),null}else console.warn("No DPoP keypair found in stored session");return e}catch(e){console.error("Failed to parse stored OAuth session:",e),localStorage.removeItem(gs)}return null}function Hs(){localStorage.removeItem(gs),localStorage.removeItem(Un),localStorage.removeItem(Wn),localStorage.removeItem(Hn)}const Ul=Object.freeze(Object.defineProperty({__proto__:null,clearOAuthSession:Hs,createDpopJwt:Bl,generateCodeChallenge:Fn,generateCodeVerifier:zn,getStoredOAuthSession:ut,startOAuthFlow:Jn},Symbol.toStringTag,{value:"Module"})),Pe={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},Tt={OAUTH:"oauth",APP_PASSWORD:"app_password"};function Wl(){const{subscribe:s,set:e,update:t}=js({session:null,authType:null,isLoading:!1,error:null});return{subscribe:s,setSession:(r,n=Tt.APP_PASSWORD)=>{r?(localStorage.setItem(Pe.SESSION,JSON.stringify(r)),localStorage.setItem(Pe.AUTH_TYPE,n)):(localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE)),e({session:r,authType:n,isLoading:!1,error:null})},setLoading:r=>{t(n=>({...n,isLoading:r}))},setError:r=>{t(n=>({...n,error:r,isLoading:!1}))},getSession:()=>{const r=localStorage.getItem(Pe.SESSION),n=localStorage.getItem(Pe.AUTH_TYPE)||Tt.APP_PASSWORD;if(r)try{return{session:JSON.parse(r),authType:n}}catch{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE),Hs(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE),Hs(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:async()=>{console.log("Initializing session from storage...");const r=await ut();if(console.log("OAuth session found:",r),r&&r.accessToken){console.log("Converting OAuth session to compatible format...");let o=r.handle;if(!o||o.startsWith("did:")){console.log("OAuth session missing handle or has DID, attempting to resolve...");try{const d=`https://public.api.bsky.app/xrpc/app.bsky.actor.getProfile?actor=${r.sub}`;console.log("Fetching profile from public API:",d);const a=await fetch(d,{method:"GET"});if(a.ok){const f=await a.json();f!=null&&f.handle&&!f.handle.startsWith("did:")&&(o=f.handle,console.log("Successfully resolved handle from profile:",o),r.handle=o,console.log("Updated OAuth session handle in memory (not in localStorage to preserve DPoP keypair)"))}}catch(d){console.error("Failed to resolve handle from profile:",d)}}const u={accessJwt:r.accessToken,refreshJwt:r.refreshToken,handle:o||r.sub,did:r.sub,email:null};return console.log("Converted OAuth session:",u),e({session:u,authType:Tt.OAUTH,isLoading:!1,error:null}),{session:u,authType:Tt.OAUTH}}const{session:n,authType:l}=je.getSession();return n?(console.log("Using app password session:",n),e({session:n,authType:l,isLoading:!1,error:null}),{session:n,authType:l}):(console.log("No session found"),{session:null,authType:null})},isOAuthSession:()=>localStorage.getItem(Pe.AUTH_TYPE)===Tt.OAUTH}}const je=Wl(),Hl="modulepreload",zl=function(s,e){return new URL(s,e).href},Er={},Fl=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=Promise.allSettled(t.map(a=>{if(a=zl(a,r),a in Er)return;Er[a]=!0;const f=a.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const y=o[_];if(y.href===a&&(!f||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Hl,f||(g.as="script"),g.crossOrigin="",g.href=a,d&&g.setAttribute("nonce",d),document.head.appendChild(g),f)return new Promise((_,y)=>{g.addEventListener("load",_),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${a}`)))})}))}function l(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return n.then(o=>{for(const u of o||[])u.status==="rejected"&&l(u.reason);return e().catch(l)})},Ks="https://bsky.social/xrpc";class jl{async signIn(e,t){const r=await fetch(`${Ks}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to sign in")}return await r.json()}async getAuthHeaders(e,t="app_password",r="GET",n="",l=null){if(t==="oauth"){const o=await ut();if(!(o!=null&&o.accessToken))throw new Error("No OAuth access token found");const u={Authorization:`Bearer ${o.accessToken}`};if(r!=="GET"||o.serverNonce)try{const{createDpopJwt:d}=await Fl(async()=>{const{createDpopJwt:f}=await Promise.resolve().then(()=>Ul);return{createDpopJwt:f}},void 0,import.meta.url);let a=o.dpopKeypair;if(!(a&&typeof a=="object"&&a.privateKey)){if(a&&a.privateKey&&a.publicKey){const f=await crypto.subtle.importKey("jwk",a.privateKey,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]),p=await crypto.subtle.importKey("jwk",a.publicKey,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);a={privateKey:f,publicKey:p}}}if(a){const f=await d(a,r,n,o.serverNonce);u.DPoP=f}}catch(d){console.warn("Failed to create DPoP JWT for OAuth request:",d)}return u}else return{Authorization:`Bearer ${e.accessJwt}`}}async makeBlueskyRequest(e,t,r="app_password",n="GET",l=null){let o;r==="oauth"?e.includes("app.bsky.actor.getProfile")||e.includes("app.bsky.actor.searchActors")||e.includes("com.atproto.identity.resolveHandle")||e.includes("app.bsky.graph.getLists")||e.includes("app.bsky.graph.getList")?(o="https://public.api.bsky.app/xrpc",console.log(`Using public API for endpoint: ${e}`)):(o=Ks,console.log(`Using PDS for authenticated endpoint: ${e}`)):o=Ks;const u=`${o}/${e}`;console.log(`makeBlueskyRequest: ${n} ${u} (authType: ${r})`);try{let d={};r==="oauth"&&o.includes("bsky.social")?d=await this.getAuthHeaders(t,r,n,u,l):r==="oauth"&&o.includes("public.api.bsky.app")?d=await this.getAuthHeaders(t,r,n,u,l):r==="app_password"&&(d=await this.getAuthHeaders(t,r,n,u,l)),console.log("Request headers:",d),l&&n!=="GET"&&(d["Content-Type"]="application/json");const a=await fetch(u,{method:n,headers:d,body:l?JSON.stringify(l):void 0});if(console.log(`Response status: ${a.status} ${a.statusText}`),!a.ok){const f=await a.json().catch(()=>({}));throw console.log("Response error:",f),new Error(f.message||`Request failed: ${a.status}`)}return await a.json()}catch(d){throw console.error(`Bluesky API request failed for ${e}:`,d),d}}async getUserLists(e,t="app_password"){if(console.log("getUserLists called with authType:",t),t==="oauth"){const r=await ut();if(console.log("OAuth session for getUserLists:",r),!(r!=null&&r.sub))throw console.error("OAuth session missing or invalid:",{hasSession:!!r,hasSub:!!(r!=null&&r.sub),sessionKeys:r?Object.keys(r):"null"}),new Error("No user DID found in OAuth session");const n=r.handle||r.sub;console.log("Using actor for getUserLists:",n);try{const l=await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${encodeURIComponent(n)}`,e,t);return console.log("getUserLists OAuth response:",l),l.lists||[]}catch(l){throw console.error("Failed to fetch user lists via OAuth:",l),l}}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${encodeURIComponent(e.handle)}`,e,t)).lists||[]}async getListInfo(e,t,r="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,r)).list}async getListMembers(e,t,r="app_password",n=25,l=null){var p;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r),d=u.items||[],a=d.map(b=>b.subject.did),f=d.map(b=>b.subject);return{members:a,profiles:f,cursor:u.cursor,totalCount:((p=u.list)==null?void 0:p.listItemCount)||0}}async getListMembersCount(e,t,r="app_password"){return(await this.getListInfo(e,t,r)).listItemCount||0}async getProfiles(e,t,r="app_password"){if(!t||t.length===0)return[];const n=[];for(const l of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(l)}`,e,r);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${l}:`,o),n.push({did:l,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,r="app_password",n=25,l=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r);return{actors:u.actors||[],cursor:u.cursor}}async addToList(e,t,r,n="app_password"){let l;return n==="oauth"?l=(await ut()).sub:l=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:r,createdAt:new Date().toISOString()}})}async createList(e,{name:t,description:r="",purpose:n="app.bsky.graph.defs#curatelist"},l="app_password"){if(!t||typeof t!="string"||t.trim().length===0)throw new Error("List name is required");let o;if(l==="oauth"){const a=await ut();o=a==null?void 0:a.sub}else o=e==null?void 0:e.did;if(!o)throw new Error("Unable to determine user DID for list creation");const u={$type:"app.bsky.graph.list",name:t.trim(),createdAt:new Date().toISOString()};return r&&typeof r=="string"&&(u.description=r.trim()),n&&typeof n=="string"&&(u.purpose=n),await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,l,"POST",{repo:o,collection:"app.bsky.graph.list",record:u})}async removeFromList(e,t,r,n="app_password"){var p;let l;n==="oauth"?l=(await ut()).sub:l=e.did,console.log("removeFromList: Searching for DID:",t,"in list:",r,"for user:",l);let o=null,u=null,d=0;do{const b=await this.makeBlueskyRequest(`com.atproto.repo.listRecords?repo=${l}&collection=app.bsky.graph.listitem&limit=100${o?`&cursor=${encodeURIComponent(o)}`:""}`,e,n);if(console.log("removeFromList: Found",((p=b.records)==null?void 0:p.length)||0,"records in this batch"),u=b.records.find(g=>{d++;const _=g.value.subject===t&&g.value.list===r;return _&&console.log("removeFromList: Found matching record:",g),_}),u){console.log("removeFromList: Found record with rkey:",u.rkey);break}o=b.cursor}while(o&&!u);if(console.log("removeFromList: Total records checked:",d),!u)throw new Error("List item not found");const a=u.uri.split("/").pop();if(!a)throw console.error("removeFromList: Could not extract rkey from URI:",u.uri),new Error("Could not extract rkey from URI");console.log("removeFromList: Deleting record with rkey:",a);const f=await this.makeBlueskyRequest("com.atproto.repo.deleteRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",rkey:a});return console.log("removeFromList: Delete successful"),f}async resolveHandle(e,t,r="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,r)).did}}const Le=new jl,ke={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Jl(){const{subscribe:s,update:e}=js({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1,r=new Map;return{subscribe:s,setSelectedList:n=>{n?localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)):localStorage.removeItem(ke.SELECTED_LIST),e(l=>({...l,selectedList:n,isLoadingList:!!n,listMembers:[],listMemberProfiles:[]})),r.clear()},setListLoading:n=>{e(l=>({...l,isLoadingList:n}))},setUserLists:n=>{localStorage.setItem(ke.LISTS,JSON.stringify(n)),e(l=>({...l,userLists:n}))},insertNewList:(n,l=!0)=>{!n||!n.uri||(e(o=>{const u=[n,...o.userLists];return localStorage.setItem(ke.LISTS,JSON.stringify(u)),l&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)),{...o,userLists:u,selectedList:l?n:o.selectedList,isLoadingList:!!l}}),r.clear())},setListMembers:n=>{e(l=>({...l,listMembers:n}))},isProfileInCurrentList:n=>{let l=!1;return e(o=>(l=o.listMembers.includes(n),o)),l},async isProfileInEntireList(n,l,o="app_password"){var a;let u;e(f=>(u=f,f));const d=`${(a=u.selectedList)==null?void 0:a.uri}-${l}`;if(r.has(d))return r.get(d);if(u.listMembers.includes(l))return r.set(d,!0),!0;try{let f=null;const p=100;do{const b=await Le.getListMembers(n,u.selectedList.uri,o,p,f);if(b.members.includes(l))return r.set(d,!0),!0;f=b.cursor}while(f);return r.set(d,!1),!1}catch(f){console.error("Error checking profile membership:",f);const p=u.listMembers.includes(l);return r.set(d,p),p}},setListMemberProfiles:n=>{e(l=>({...l,listMemberProfiles:n}))},addProfileToList:n=>{e(l=>{const o=l.listMembers.includes(n)?l.listMembers:[n,...l.listMembers];return{...l,listMembers:o}})},addProfileToDisplay:n=>{e(l=>{if(l.listMembers.indexOf(n.did)<25){const u=[n,...l.listMemberProfiles];return{...l,listMemberProfiles:u.slice(0,25)}}return l})},fetchAndAddProfile:(n,l,o="app_password")=>t?Promise.resolve():(t=!0,new Promise(async u=>{try{const d=await Le.getProfiles(n,[l],o);if(d.length>0){const a=d[0];e(f=>{const p=f.listMembers.includes(l)?f.listMembers:[l,...f.listMembers];if(p.indexOf(l)<25){const g=f.listMemberProfiles.filter(y=>y.did!==l),_=[a,...g];return{...f,listMembers:p,listMemberProfiles:_.slice(0,25)}}return{...f,listMembers:p}}),e(f=>{console.log("Updating member count for DID:",l),console.log("Current selectedList:",f.selectedList),console.log("Current userLists:",f.userLists),console.log("Incrementing member count for successfully added profile");const p=f.selectedList?{...f.selectedList,listItemCount:(f.selectedList.listItemCount||0)+1}:null,b=f.userLists.map(g=>{var _;return g.uri===((_=f.selectedList)==null?void 0:_.uri)?{...g,memberCount:(g.memberCount||0)+1}:g});return console.log("Updated selectedList:",p),console.log("Updated userLists:",b),p&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(p)),localStorage.setItem(ke.LISTS,JSON.stringify(b)),{...f,selectedList:p,userLists:b}})}}catch(d){console.error("Failed to fetch profile data:",d),e(a=>{const f=a.listMembers.includes(l)?a.listMembers:[l,...a.listMembers];return{...a,listMembers:f}}),e(a=>{console.log("Updating member count for DID (error case):",l),console.log("Incrementing member count for profile (error case)");const f=a.selectedList?{...a.selectedList,listItemCount:(a.selectedList.listItemCount||0)+1}:null,p=a.userLists.map(b=>{var g;return b.uri===((g=a.selectedList)==null?void 0:g.uri)?{...b,memberCount:(b.memberCount||0)+1}:b});return f&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(f)),localStorage.setItem(ke.LISTS,JSON.stringify(p)),{...a,selectedList:f,userLists:p}})}finally{t=!1}u()})),refreshListMembers:()=>{e(n=>({...n,refreshTrigger:Date.now()}))},setLoading:n=>{e(l=>({...l,isLoading:n}))},setError:n=>{e(l=>({...l,error:n,isLoading:!1}))},getSelectedList:()=>{const n=localStorage.getItem(ke.SELECTED_LIST);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.SELECTED_LIST)}return null},getUserLists:()=>{const n=localStorage.getItem(ke.LISTS);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(ke.SELECTED_LIST),e(n=>({...n,selectedList:null}))},async getAllListMemberDids(n,l="app_password"){let o;if(e(d=>(o=d,d)),!o.selectedList)return new Set;const u=`${o.selectedList.uri}-all-dids`;if(r.has(u))return r.get(u);try{let d=new Set,a=null;const f=100;do{const p=await Le.getListMembers(n,o.selectedList.uri,l,f,a);p.members.forEach(b=>d.add(b)),a=p.cursor}while(a);return r.set(u,d),d}catch(d){console.error("Error getting all list member DIDs:",d);const a=new Set(o.listMembers);return r.set(u,a),a}}}}const me=Jl();function ql(s){let e,t,r,n,l,o,u,d,a,f,p,b,g;return{c(){e=m("div"),t=m("label"),t.textContent="Handle",r=w(),n=m("input"),l=w(),o=m("div"),u=m("label"),u.textContent="App Password",d=w(),a=m("input"),f=w(),p=m("p"),p.textContent="Use an app password, not your main account password",c(t,"for","handle"),c(t,"class","block text-sm font-medium text-gray-700 mb-1"),c(n,"id","handle"),c(n,"type","text"),c(n,"placeholder","your-handle.bsky.social"),c(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,c(u,"for","password"),c(u,"class","block text-sm font-medium text-gray-700 mb-1"),c(a,"id","password"),c(a,"type","password"),c(a,"placeholder","Your app password"),c(a,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a.required=!0,c(p,"class","text-xs text-gray-500 mt-1")},m(_,y){A(_,e,y),i(e,t),i(e,r),i(e,n),be(n,s[0]),A(_,l,y),A(_,o,y),i(o,u),i(o,d),i(o,a),be(a,s[1]),i(o,f),i(o,p),b||(g=[ie(n,"input",s[11]),ie(a,"input",s[12])],b=!0)},p(_,y){y&1&&n.value!==_[0]&&be(n,_[0]),y&2&&a.value!==_[1]&&be(a,_[1])},d(_){_&&(M(e),M(l),M(o)),b=!1,Me(g)}}}function Vl(s){let e;return{c(){e=m("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,c(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function Ar(s){let e,t,r;return{c(){e=m("div"),t=m("p"),r=k(s[3]),c(t,"class","text-red-700 text-sm"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&M(e)}}}function Yl(s){let e;return{c(){e=k("Sign In")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function $l(s){let e;return{c(){e=k("Sign in with Bluesky")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function Gl(s){let e,t,r;function n(u,d){return u[4]==="oauth"?Xl:Zl}let l=n(s),o=l(s);return{c(){e=m("span"),t=w(),o.c(),r=st(),c(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(u,d){A(u,e,d),A(u,t,d),o.m(u,d),A(u,r,d)},p(u,d){l!==(l=n(u))&&(o.d(1),o=l(u),o&&(o.c(),o.m(r.parentNode,r)))},d(u){u&&(M(e),M(t),M(r)),o.d(u)}}}function Zl(s){let e;return{c(){e=k("Signing in...")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Xl(s){let e;return{c(){e=k("Connecting...")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Ql(s){let e,t,r,n,l,o,u,d,a,f,p,b,g,_,y,L,x,E,I,K,R,P,D,S,U,C,N,j,Q,T,B,J,$,ae,X,v,h,H;function z(V,ne){return V[4]==="oauth"?Vl:ql}let O=z(s),F=O(s),Y=s[3]&&Ar(s);function G(V,ne){return V[2]?Gl:V[4]==="oauth"?$l:Yl}let Z=G(s),W=Z(s);return v=Cn(s[9][0]),{c(){e=m("div"),t=m("button"),r=w(),n=m("div"),l=m("div"),o=m("h2"),o.textContent="Sign in to Bluesky",u=w(),d=m("button"),d.textContent="×",a=w(),f=m("form"),p=m("div"),b=m("div"),g=m("fieldset"),_=m("legend"),_.textContent="Sign in with:",y=w(),L=m("div"),x=m("div"),E=m("label"),I=m("input"),K=w(),R=m("span"),R.textContent="OAuth",P=w(),D=m("p"),D.textContent="Secure OAuth login with Bluesky. No passwords stored on this site.",S=w(),U=m("label"),C=m("input"),N=w(),j=m("span"),j.textContent="App Password",Q=w(),F.c(),T=w(),Y&&Y.c(),B=w(),J=m("div"),$=m("button"),$.textContent="Cancel",ae=w(),X=m("button"),W.c(),c(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),c(t,"aria-label","Close modal"),c(t,"type","button"),c(o,"class","text-xl font-semibold text-slate-800"),c(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),c(l,"class","flex items-center justify-between mb-4"),c(_,"class","block text-sm font-medium text-gray-700 mb-2"),c(I,"type","radio"),I.__value="oauth",be(I,I.__value),c(I,"class","mr-2"),c(R,"class","text-sm"),c(E,"class","flex items-center"),c(D,"class","text-xs text-gray-500 ml-6 mt-1"),c(x,"class","mb-4"),c(C,"type","radio"),C.__value="app_password",be(C,C.__value),c(C,"class","mr-2"),c(j,"class","text-sm"),c(U,"class","flex items-center"),c(L,"class","space-y-2"),c($,"type","button"),c($,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),c(X,"type","submit"),X.disabled=s[2],c(X,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),c(J,"class","flex space-x-3 pt-2"),c(p,"class","space-y-4"),c(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),c(n,"role","document"),c(n,"id","sign-in-modal-content"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),c(e,"role","dialog"),c(e,"aria-modal","true"),c(e,"tabindex","-1"),c(e,"id","sign-in-modal"),v.p(I,C)},m(V,ne){A(V,e,ne),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,a),i(n,f),i(f,p),i(p,b),i(b,g),i(g,_),i(g,y),i(g,L),i(L,x),i(x,E),i(E,I),I.checked=I.__value===s[4],i(E,K),i(E,R),i(x,P),i(x,D),i(L,S),i(L,U),i(U,C),C.checked=C.__value===s[4],i(U,N),i(U,j),i(p,Q),F.m(p,null),i(p,T),Y&&Y.m(p,null),i(p,B),i(p,J),i(J,$),i(J,ae),i(J,X),W.m(X,null),h||(H=[ie(t,"click",s[7]),ie(d,"click",s[6]),ie(I,"change",s[8]),ie(C,"change",s[10]),ie($,"click",s[6]),ie(f,"submit",zs(s[5])),ie(e,"keydown",s[13])],h=!0)},p(V,[ne]){ne&16&&(I.checked=I.__value===V[4]),ne&16&&(C.checked=C.__value===V[4]),O===(O=z(V))&&F?F.p(V,ne):(F.d(1),F=O(V),F&&(F.c(),F.m(p,T))),V[3]?Y?Y.p(V,ne):(Y=Ar(V),Y.c(),Y.m(p,B)):Y&&(Y.d(1),Y=null),Z===(Z=G(V))&&W?W.p(V,ne):(W.d(1),W=Z(V),W&&(W.c(),W.m(X,null))),ne&4&&(X.disabled=V[2])},i:re,o:re,d(V){V&&M(e),F.d(),Y&&Y.d(),W.d(),v.r(),h=!1,Me(H)}}}function ei(s,e,t){const r=Mn();let n="",l="",o=!1,u="",d="app_password";async function a(){t(2,o=!0),t(3,u="");try{await Jn()}catch(K){t(3,u=K.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function f(){if(!n||!l){t(3,u="Please enter both handle and password");return}t(2,o=!0),t(3,u="");try{const K=await Le.signIn(n,l);je.setSession(K,Tt.APP_PASSWORD),r("close")}catch(K){t(3,u=K.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function p(){d==="oauth"?await a():await f()}function b(){r("close")}function g(){b()}const _=[[]];function y(){d=this.__value,t(4,d)}function L(){d=this.__value,t(4,d)}function x(){n=this.value,t(0,n)}function E(){l=this.value,t(1,l)}return[n,l,o,u,d,p,b,g,y,_,L,x,E,K=>K.key==="Escape"&&b()]}class qn extends De{constructor(e){super(),Oe(this,e,ei,Ql,Ee,{})}}function Pr(s){let e,t;return{c(){e=m("div"),t=k(s[4]),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700")},m(r,n){A(r,e,n),i(e,t)},p(r,n){n&16&&q(t,r[4])},d(r){r&&M(e)}}}function ti(s){let e;return{c(){e=k("Create")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function si(s){let e;return{c(){e=k("Creating...")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function ri(s){let e,t,r,n,l,o,u,d,a,f,p,b,g,_,y,L,x,E,I,K,R,P,D,S,U,C,N,j,Q,T,B,J,$,ae,X,v,h,H,z,O,F,Y,G,Z,W=s[4]&&Pr(s);function V(le,ee){return le[3]?si:ti}let ne=V(s),oe=ne(s);return Y=Cn(s[10][0]),{c(){e=m("div"),t=m("button"),r=w(),n=m("div"),l=m("div"),o=m("h2"),o.textContent="Create New List",u=w(),d=m("button"),d.textContent="×",a=w(),f=m("form"),p=m("div"),b=m("div"),g=m("label"),g.textContent="Name",_=w(),y=m("input"),L=w(),x=m("div"),E=m("label"),E.textContent="Description (optional)",I=w(),K=m("textarea"),R=w(),P=m("div"),D=m("fieldset"),S=m("legend"),S.textContent="Purpose",U=w(),C=m("div"),N=m("label"),j=m("input"),Q=w(),T=m("span"),T.textContent="Curated list",B=w(),J=m("label"),$=m("input"),ae=w(),X=m("span"),X.textContent="Moderation list",v=w(),W&&W.c(),h=w(),H=m("div"),z=m("button"),z.textContent="Cancel",O=w(),F=m("button"),oe.c(),c(t,"class","absolute inset-0 w-full h-full bg-transparent border-0"),c(t,"aria-label","Close"),c(o,"class","text-xl font-semibold text-slate-800"),c(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),c(l,"class","flex items-center justify-between mb-4"),c(g,"class","block text-sm font-medium text-gray-700 mb-1"),c(g,"for","list-name"),c(y,"id","list-name"),c(y,"type","text"),y.required=!0,c(y,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c(E,"class","block text-sm font-medium text-gray-700 mb-1"),c(E,"for","list-description"),c(K,"id","list-description"),c(K,"rows","3"),c(K,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c(S,"class","block text-sm font-medium text-gray-700 mb-2"),c(j,"type","radio"),c(j,"name","purpose"),j.__value="app.bsky.graph.defs#curatelist",be(j,j.__value),c(j,"class","mr-2"),c(T,"class","text-sm"),c(N,"class","flex items-center"),c($,"type","radio"),c($,"name","purpose"),$.__value="app.bsky.graph.defs#modlist",be($,$.__value),c($,"class","mr-2"),c(X,"class","text-sm"),c(J,"class","flex items-center"),c(C,"class","space-y-2"),c(z,"type","button"),c(z,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),c(F,"type","submit"),F.disabled=s[3],c(F,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),c(H,"class","flex space-x-3 pt-2"),c(p,"class","space-y-4"),c(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),c(e,"role","dialog"),c(e,"aria-modal","true"),Y.p(j,$)},m(le,ee){A(le,e,ee),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,a),i(n,f),i(f,p),i(p,b),i(b,g),i(b,_),i(b,y),be(y,s[0]),i(p,L),i(p,x),i(x,E),i(x,I),i(x,K),be(K,s[1]),i(p,R),i(p,P),i(P,D),i(D,S),i(D,U),i(D,C),i(C,N),i(N,j),j.checked=j.__value===s[2],i(N,Q),i(N,T),i(C,B),i(C,J),i(J,$),$.checked=$.__value===s[2],i(J,ae),i(J,X),i(p,v),W&&W.m(p,null),i(p,h),i(p,H),i(H,z),i(H,O),i(H,F),oe.m(F,null),G||(Z=[ie(t,"click",s[5]),ie(d,"click",s[5]),ie(y,"input",s[7]),ie(K,"input",s[8]),ie(j,"change",s[9]),ie($,"change",s[11]),ie(z,"click",s[5]),ie(f,"submit",zs(s[6]))],G=!0)},p(le,[ee]){ee&1&&y.value!==le[0]&&be(y,le[0]),ee&2&&be(K,le[1]),ee&4&&(j.checked=j.__value===le[2]),ee&4&&($.checked=$.__value===le[2]),le[4]?W?W.p(le,ee):(W=Pr(le),W.c(),W.m(p,h)):W&&(W.d(1),W=null),ne!==(ne=V(le))&&(oe.d(1),oe=ne(le),oe&&(oe.c(),oe.m(F,null))),ee&8&&(F.disabled=le[3])},i:re,o:re,d(le){le&&M(e),W&&W.d(),oe.d(),Y.r(),G=!1,Me(Z)}}}function ni(s,e,t){let r;Ie(s,je,x=>t(12,r=x));const n=Mn();let l="",o="",u="app.bsky.graph.defs#curatelist",d=!1,a="";function f(){n("close")}async function p(){var x;if(t(4,a=""),!l||l.trim().length===0){t(4,a="Please enter a list name");return}t(3,d=!0);try{const E=await Le.createList(r.session,{name:l.trim(),description:o.trim(),purpose:u},r.authType),I=(E==null?void 0:E.uri)||((x=E==null?void 0:E.cid)==null?void 0:x.uri)||null,K=new Date().toISOString(),R={uri:I,name:l.trim(),description:o.trim()||"",purpose:u,createdAt:K,memberCount:0};n("success",R),n("close")}catch(E){t(4,a=(E==null?void 0:E.message)||"Failed to create list")}finally{t(3,d=!1)}}const b=[[]];function g(){l=this.value,t(0,l)}function _(){o=this.value,t(1,o)}function y(){u=this.__value,t(2,u)}function L(){u=this.__value,t(2,u)}return[l,o,u,d,a,f,p,g,_,y,b,L]}class li extends De{constructor(e){super(),Oe(this,e,ni,ri,Ee,{})}}const ii=!0,Ss={staticBase:"static",isDevelopment:!1,isProduction:ii,buildTime:new Date().toISOString(),getAssetPath:s=>`./${s.replace("static/","")}`};function Tr(s,e,t){const r=s.slice();return r[14]=e[t],r}function oi(s){let e,t,r;return{c(){e=m("button"),e.textContent="🔐 Sign in with Bluesky",c(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200"),c(e,"id","sign-in-button")},m(n,l){A(n,e,l),t||(r=ie(e,"click",s[7]),t=!0)},p:re,d(n){n&&M(e),t=!1,r()}}}function ai(s){let e,t,r,n,l,o,u,d,a,f,p,b,g,_=s[1].session.handle+"",y,L,x,E,I;function K(S,U){return S[4]?di:S[5]?ui:ci}let R=K(s),P=R(s),D=s[5]&&Rr(s);return{c(){e=m("div"),t=m("label"),t.textContent="List:",r=w(),n=m("select"),l=m("option"),l.textContent="Select a list...",P.c(),u=w(),D&&D.c(),d=w(),a=m("button"),a.textContent="+ New List",f=w(),p=m("div"),b=m("div"),g=k("@"),y=k(_),L=w(),x=m("button"),x.textContent="Sign out",c(t,"for","list-selector"),c(t,"class","block text-sm font-medium text-gray-700 mb-1"),l.__value="",be(l,l.__value),c(n,"id","list-selector"),c(n,"class","w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),n.disabled=s[4],c(e,"class","flex-1"),c(a,"class","bg-white hover:bg-gray-50 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),c(a,"id","new-list-button"),c(a,"title","Create a new list"),c(b,"class","text-sm text-slate-700"),c(x,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),c(x,"id","sign-out-button"),c(p,"class","text-right"),c(p,"id","user-info")},m(S,U){var C;A(S,e,U),i(e,t),i(e,r),i(e,n),i(n,l),P.m(n,null),Cr(n,((C=s[0].selectedList)==null?void 0:C.uri)||""),i(e,u),D&&D.m(e,null),A(S,d,U),A(S,a,U),A(S,f,U),A(S,p,U),i(p,b),i(b,g),i(b,y),i(p,L),i(p,x),E||(I=[ie(n,"change",s[6]),ie(a,"click",s[8]),ie(x,"click",s[12])],E=!0)},p(S,U){var C,N;R===(R=K(S))&&P?P.p(S,U):(P.d(1),P=R(S),P&&(P.c(),P.m(n,null))),U&1&&o!==(o=((C=S[0].selectedList)==null?void 0:C.uri)||"")&&Cr(n,((N=S[0].selectedList)==null?void 0:N.uri)||""),U&16&&(n.disabled=S[4]),S[5]?D?D.p(S,U):(D=Rr(S),D.c(),D.m(e,null)):D&&(D.d(1),D=null),U&2&&_!==(_=S[1].session.handle+"")&&q(y,_)},d(S){S&&(M(e),M(d),M(a),M(f),M(p)),P.d(),D&&D.d(),E=!1,Me(I)}}}function ci(s){let e,t=he(s[0].userLists),r=[];for(let n=0;n<t.length;n+=1)r[n]=Ir(Tr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);A(n,e,l)},p(n,l){if(l&1){t=he(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const u=Tr(n,t,o);r[o]?r[o].p(u,l):(r[o]=Ir(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&M(e),Ve(r,n)}}}function ui(s){let e;return{c(){e=m("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",be(e,e.__value)},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function di(s){let e;return{c(){e=m("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",be(e,e.__value)},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function Ir(s){let e,t=s[14].name+"",r,n,l=s[14].memberCount.toLocaleString()+"",o,u,d;return{c(){e=m("option"),r=k(t),n=k(" ("),o=k(l),u=k(` members)
									`),e.__value=d=s[14].uri,be(e,e.__value)},m(a,f){A(a,e,f),i(e,r),i(e,n),i(e,o),i(e,u)},p(a,f){f&1&&t!==(t=a[14].name+"")&&q(r,t),f&1&&l!==(l=a[14].memberCount.toLocaleString()+"")&&q(o,l),f&1&&d!==(d=a[14].uri)&&(e.__value=d,be(e,e.__value))},d(a){a&&M(e)}}}function Rr(s){let e,t;return{c(){e=m("p"),t=k(s[5]),c(e,"class","text-sm text-red-600 mt-1")},m(r,n){A(r,e,n),i(e,t)},p(r,n){n&32&&q(t,r[5])},d(r){r&&M(e)}}}function Or(s){let e,t;return e=new qn({}),e.$on("close",s[11]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:re,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Dr(s){let e,t;return e=new li({}),e.$on("close",s[9]),e.$on("success",s[10]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:re,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function fi(s){let e,t,r,n,l,o,u,d,a,f;function p(L,x){return L[1].session?ai:oi}let b=p(s),g=b(s),_=s[2]&&Or(s),y=s[3]&&Dr(s);return{c(){e=m("header"),t=m("div"),r=m("div"),n=m("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${Ss.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,l=w(),o=m("div"),g.c(),u=w(),_&&_.c(),d=w(),y&&y.c(),a=st(),c(o,"class","flex items-center space-x-4"),c(r,"class","flex items-center justify-between mb-4"),c(t,"class","max-w-6xl mx-auto px-6 py-4"),c(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50"),c(e,"id","app-header")},m(L,x){A(L,e,x),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),g.m(o,null),A(L,u,x),_&&_.m(L,x),A(L,d,x),y&&y.m(L,x),A(L,a,x),f=!0},p(L,[x]){b===(b=p(L))&&g?g.p(L,x):(g.d(1),g=b(L),g&&(g.c(),g.m(o,null))),L[2]?_?(_.p(L,x),x&4&&ce(_,1)):(_=Or(L),_.c(),ce(_,1),_.m(d.parentNode,d)):_&&(ft(),ue(_,1,1,()=>{_=null}),mt()),L[3]?y?(y.p(L,x),x&8&&ce(y,1)):(y=Dr(L),y.c(),ce(y,1),y.m(a.parentNode,a)):y&&(ft(),ue(y,1,1,()=>{y=null}),mt())},i(L){f||(ce(_),ce(y),f=!0)},o(L){ue(_),ue(y),f=!1},d(L){L&&(M(e),M(u),M(d),M(a)),g.d(),_&&_.d(L),y&&y.d(L)}}}function mi(s,e,t){let r,n;Ie(s,me,x=>t(0,r=x)),Ie(s,je,x=>t(1,n=x));let l=!1,o=!1,u=!1,d="";Ls(async()=>{n.session&&await a()});async function a(){if(n.session)try{t(4,u=!0),t(5,d="");const E=(await Le.getUserLists(n.session,n.authType)).map(I=>({uri:I.uri,name:I.name,description:I.description||"",purpose:I.purpose||"app.bsky.graph.defs#modlist",createdAt:I.createdAt,memberCount:I.listItemCount||0})).sort((I,K)=>new Date(K.createdAt)-new Date(I.createdAt));me.setUserLists(E)}catch(x){console.error("Failed to load user lists:",x),t(5,d=x.message||"Failed to load lists")}finally{t(4,u=!1)}}function f(x){const E=x.target.value;if(E){const I=r.userLists.find(K=>K.uri===E);I&&me.setSelectedList(I)}else me.setSelectedList(null)}function p(){t(2,l=!0)}function b(){t(3,o=!0)}function g(){t(3,o=!1)}async function _(x){const E=x.detail;me.insertNewList(E,!0)}function y(){t(2,l=!1)}function L(){je.signOut(),me.setSelectedList(null)}return s.$$.update=()=>{s.$$.dirty&3&&n.session&&r.userLists.length===0&&a(),s.$$.dirty&1&&r.userLists.length>0&&console.log("Header: userLists updated:",r.userLists)},[r,n,l,o,u,d,f,p,b,g,_,y,L]}class pi extends De{constructor(e){super(),Oe(this,e,mi,fi,Ee,{})}}function bs(s){s.preventDefault()}var hi=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]);function gi(s){if(hi.has(s.key))return bs(s),!1}var ys=new AbortController,ms=ys.signal;function bi(){window.addEventListener("DOMMouseScroll",bs,{signal:ms}),window.addEventListener("wheel",bs,{passive:!1,signal:ms}),window.addEventListener("touchmove",bs,{passive:!1,signal:ms}),window.addEventListener("keydown",gi,{signal:ms})}function yi(){ys==null||ys.abort()}function vi(s){if(!s)throw new Error("Please specify a container for the zoom image");const e=s.querySelector("img");if(!e)throw new Error("Please place an image inside the container");return e}var _i=50,wi=()=>({createZoomImage:(e,t,r)=>{if(e.src===t)return;e.src=t;let n=!1;e.onload=()=>{n=!0,r.setState({zoomedImgStatus:"loaded"})},e.onerror=()=>{n=!0,r.setState({zoomedImgStatus:"error"})},setTimeout(()=>{n||r.setState({zoomedImgStatus:"loading"})},_i)}}),Si=wi();function ki(s){let e=new Set,t=!1,r=s,n,l=(u={})=>{n={...n,...u},o()},o=()=>{if(t)return;let u=!1;if(n){for(let d in n)if(r[d]!==n[d]){u=!0;break}}u&&(r={...r,...n},e.forEach(d=>d({state:r,updatedProperties:n})),n=void 0)};return{subscribe:u=>(e.add(u),()=>{e.delete(u)}),cleanup:()=>e.clear(),getState:()=>r,setState:l,batch:u=>{t=!0,u(),t=!1,o()}}}function Li(s,e={}){var I,K;let t=null;const r=vi(s),n={zoomFactor:e.zoomFactor??4,zoomImageSource:e.zoomImageSource??r.src,disabledContextMenu:e.disabledContextMenu??!1},{disabledContextMenu:l,zoomFactor:o,zoomImageSource:u}=n,d=ki({zoomedImgStatus:"idle"}),a=document.createElement("img");(I=e.zoomImageProps)!=null&&I.alt&&(a.alt=e.zoomImageProps.alt),(K=e.zoomImageProps)!=null&&K.className&&(a.className=e.zoomImageProps.className),a.style.maxWidth="none",a.style.position="absolute",a.style.top="0",a.style.left="0",l&&(a.style["-webkit-user-select"]="none",a.style["-webkit-touch-callout"]="none",a.oncontextmenu=()=>!1);const f=R=>t&&R.pointerId===t;function p(R){if(t===null){t=R.pointerId,s.appendChild(a),a.style.display="block";const P=r.clientWidth*o,D=r.clientHeight*o;a.style.width=`${P}px`,a.style.height=`${D}px`,Si.createZoomImage(a,u,d),L(R),R.pointerType!=="mouse"&&bi()}}function b(R){f(R)&&L(R)}function g(R){f(R)&&(s.contains(a)&&s.removeChild(a),a.style.display="none",a.style.transform="none",yi(),t=null)}const _=R=>{const P=s.clientWidth;return R>0?0:R+P*o<P?-P*(o-1):R},y=R=>{const P=s.clientHeight;return R>0?0:R+P*o<P?-P*(o-1):R};function L(R){a.style.display="block";const P=s.getBoundingClientRect(),D=R.clientX-P.left,S=R.clientY-P.top,U=_(-D*o+D),C=y(-S*o+S);a.style.transform=`translate(${U}px, ${C}px)`}const x=new AbortController,{signal:E}=x;return s.addEventListener("pointerenter",p,{signal:E}),s.addEventListener("pointermove",b,{signal:E}),s.addEventListener("pointerleave",g,{signal:E}),s.addEventListener("touchstart",R=>{l&&R.preventDefault()},{signal:E}),{cleanup:()=>{x.abort(),s.contains(a)&&s.removeChild(a),d.cleanup()},subscribe:d.subscribe,getState:d.getState}}function Ci(){let s;const{set:e,subscribe:t}=js({zoomedImgStatus:"idle"}),r=(...n)=>{s==null||s.cleanup(),s=Li(...n),e(s.getState()),s.subscribe(({state:l})=>{e(l)})};return xn(()=>{s==null||s.cleanup()}),{createZoomImage:r,zoomImageState:{subscribe:t}}}function xi(s){let e,t,r,n;return{c(){e=m("div"),t=m("img"),tt(t.src,r=s[0])||c(t,"src",r),c(t,"alt",s[1]),c(t,"class","base-image svelte-6dnnuj"),de(t,"width","100%"),de(t,"height","100%"),de(t,"object-fit","cover"),c(e,"class",n="zoom-image-container "+s[4]+" svelte-6dnnuj"),de(e,"width",s[2]),de(e,"height",s[3]),de(e,"overflow","hidden"),de(e,"position","relative"),c(e,"id","zoomable-image-"+Math.random().toString(36).substr(2,9))},m(l,o){A(l,e,o),i(e,t),s[7](e)},p(l,[o]){o&1&&!tt(t.src,r=l[0])&&c(t,"src",r),o&2&&c(t,"alt",l[1]),o&16&&n!==(n="zoom-image-container "+l[4]+" svelte-6dnnuj")&&c(e,"class",n),o&4&&de(e,"width",l[2]),o&8&&de(e,"height",l[3])},i:re,o:re,d(l){l&&M(e),s[7](null)}}}function Mi(s,e,t){let{src:r=""}=e,{alt:n=""}=e,{width:l="auto"}=e,{height:o="auto"}=e,{className:u=""}=e,{zoomFactor:d=2}=e,a,f;const{createZoomImage:p}=Ci();Ls(()=>{a&&(f=p(a,{zoomFactor:d,zoomImageSource:r,zoomImageProps:{alt:n,className:"zoom-image"}}))}),xn(()=>{f&&f.cleanup&&f.cleanup()});function b(g){_s[g?"unshift":"push"](()=>{a=g,t(5,a)})}return s.$$set=g=>{"src"in g&&t(0,r=g.src),"alt"in g&&t(1,n=g.alt),"width"in g&&t(2,l=g.width),"height"in g&&t(3,o=g.height),"className"in g&&t(4,u=g.className),"zoomFactor"in g&&t(6,d=g.zoomFactor)},[r,n,l,o,u,a,d,b]}class Ei extends De{constructor(e){super(),Oe(this,e,Mi,xi,Ee,{src:0,alt:1,width:2,height:3,className:4,zoomFactor:6})}}function Kr(s){let e,t;return e=new qn({}),e.$on("close",s[2]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:re,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Ai(s){let e,t,r,n,l,o,u,d,a,f,p,b,g,_,y,L,x,E,I,K,R,P,D,S,U,C,N,j,Q,T,B,J,$,ae;b=new Ei({props:{src:Ss.getAssetPath("static/screencapture.png"),alt:"Bluesky List Manager Preview - Showing list statistics and member management interface",width:"100%",height:"auto",className:"screenshot-zoom-image",zoomFactor:3}});let X=s[0]&&Kr(s);return{c(){e=m("div"),t=m("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${Ss.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-4xl font-bold text-slate-800 mb-4">Bluesky List Manager</h2> <p class="text-xl text-slate-600 mb-2">Manage your lists like a pro.</p> <p class="text-xl text-slate-600 mb-6"><strong class="text-blue-600">Get insights and powerful tools to grow your curated lists.</strong></p>`,r=w(),n=m("div"),l=m("button"),l.textContent="🚀 Sign in with Bluesky to manage your lists",o=w(),u=m("p"),u.textContent="100% free • No registration required • Works instantly • Zero data stored on our servers",d=w(),a=m("div"),f=m("div"),p=m("div"),Re(b.$$.fragment),g=w(),_=m("div"),_.innerHTML='<div class="zoom-hint svelte-163esy5">🔍 Move mouse to zoom and explore the interface</div>',y=w(),L=m("p"),L.textContent="See your list insights and manage members with powerful analytics",x=w(),E=m("div"),E.innerHTML='<div class="bg-red-50 p-6 rounded-lg border border-red-200"><h3 class="text-lg font-semibold text-red-800 mb-3">😤 The Manual Way (Slow &amp; Painful)</h3> <ul class="space-y-2 text-red-700"><li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Search one profile at a time</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Forget who you&#39;ve already added</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Hours of repetitive clicking</span></li></ul></div> <div class="bg-green-50 p-6 rounded-lg border border-green-200"><h3 class="text-lg font-semibold text-green-800 mb-3">⚡ The Smart Way (Fast &amp; Easy)</h3> <ul class="space-y-2 text-green-700"><li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Bulk search</strong> by keywords, bio, or handle</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Instant filtering</strong> - see who&#39;s already in your list</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Minutes instead of hours</strong></span></li></ul></div>',I=w(),K=m("div"),K.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-4">🎯 Perfect for:</h3> <div class="grid md:grid-cols-3 gap-4 text-blue-700"><div class="text-center"><div class="text-2xl mb-2">👥</div> <div class="font-medium">Community Builders</div> <div class="text-sm">Grow your curated lists quickly</div></div> <div class="text-center"><div class="text-2xl mb-2">🔍</div> <div class="font-medium">Content Creators</div> <div class="text-sm">Find your target audience</div></div> <div class="text-center"><div class="text-2xl mb-2">📊</div> <div class="font-medium">List Managers</div> <div class="text-sm">Maintain and expand your lists</div></div></div>',R=w(),P=m("div"),P.innerHTML='<h3 class="text-lg font-semibold text-purple-800 mb-3">✨ Key Features</h3> <div class="grid md:grid-cols-2 gap-4 text-purple-700"><div><div class="font-medium mb-1">🔍 Smart Search</div> <div class="text-sm">Search across bios, display names, and handles with powerful filters</div></div> <div><div class="font-medium mb-1">📊 Real-time Stats</div> <div class="text-sm">See engagement rates, verification status, and growth metrics</div></div> <div><div class="font-medium mb-1">🔒 Privacy First</div> <div class="text-sm">Client-side app - your data never leaves your browser</div></div></div>',D=w(),S=m("div"),S.innerHTML=`<h3 class="text-lg font-semibold text-gray-800 mb-3">🔐 Privacy &amp; Security</h3> <p class="text-gray-700 mb-3">This is a <strong>client-side application</strong>. Your Bluesky credentials are stored
			locally in your browser and are never sent to our servers. We only communicate directly with
			Bluesky&#39;s API using your authentication token.</p> <p class="text-sm text-gray-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code (and
			contribute!) on
			<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-gray-600 hover:text-gray-700 underline">GitHub</a>.</p>`,U=w(),C=m("div"),N=m("button"),N.textContent="🚀 Start Building Better Lists - Sign in with Bluesky",j=w(),Q=m("p"),Q.textContent="100% free • No registration required • Works instantly • Zero data stored on our servers",T=w(),X&&X.c(),B=st(),c(t,"class","text-center mb-8"),c(l,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),c(l,"id","auth-sign-in-button"),c(u,"class","text-sm text-gray-500 mt-3"),c(n,"class","text-center mb-8"),c(n,"id","auth-cta"),c(_,"class","zoom-overlay svelte-163esy5"),c(p,"class","screenshot-container svelte-163esy5"),c(L,"class","text-sm text-gray-600 mt-4"),c(f,"class","bg-gray-50 p-6 rounded-lg border border-gray-200"),c(a,"class","mb-8 text-center"),c(E,"class","grid md:grid-cols-2 gap-8 mb-8"),c(K,"class","bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8"),c(P,"class","bg-purple-50 p-6 rounded-lg border border-purple-200 mb-8"),c(S,"class","bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8"),c(N,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),c(Q,"class","text-sm text-gray-500 mt-3"),c(C,"class","text-center"),c(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-4xl mx-auto relative z-100"),c(e,"id","auth-instructions")},m(v,h){A(v,e,h),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u),i(e,d),i(e,a),i(a,f),i(f,p),Ce(b,p,null),i(p,g),i(p,_),i(f,y),i(f,L),i(e,x),i(e,E),i(e,I),i(e,K),i(e,R),i(e,P),i(e,D),i(e,S),i(e,U),i(e,C),i(C,N),i(C,j),i(C,Q),A(v,T,h),X&&X.m(v,h),A(v,B,h),J=!0,$||(ae=[ie(l,"click",s[1]),ie(N,"click",s[1])],$=!0)},p(v,[h]){v[0]?X?(X.p(v,h),h&1&&ce(X,1)):(X=Kr(v),X.c(),ce(X,1),X.m(B.parentNode,B)):X&&(ft(),ue(X,1,1,()=>{X=null}),mt())},i(v){J||(ce(b.$$.fragment,v),ce(X),J=!0)},o(v){ue(b.$$.fragment,v),ue(X),J=!1},d(v){v&&(M(e),M(T),M(B)),xe(b),X&&X.d(v),$=!1,Me(ae)}}}function Pi(s,e,t){let r=!1;function n(){t(0,r=!0)}function l(){t(0,r=!1)}return[r,n,l]}class Ti extends De{constructor(e){super(),Oe(this,e,Pi,Ai,Ee,{})}}function Ii(s){let e,t,r;return{c(){e=m("h3"),e.textContent="Select a List",t=w(),r=m("p"),r.textContent="Choose a list from the dropdown above to get started.",c(e,"class","text-lg font-semibold text-slate-800 mb-2"),c(r,"class","text-slate-600")},m(n,l){A(n,e,l),A(n,t,l),A(n,r,l)},d(n){n&&(M(e),M(t),M(r))}}}function Ri(s){let e,t,r;return{c(){e=m("h3"),e.textContent="No Lists Found",t=w(),r=m("p"),r.textContent="You don't have any lists yet. Create a list on Bluesky first!",c(e,"class","text-lg font-semibold text-slate-800 mb-2"),c(r,"class","text-slate-600")},m(n,l){A(n,e,l),A(n,t,l),A(n,r,l)},d(n){n&&(M(e),M(t),M(r))}}}function Oi(s){let e,t,r,n,l,o,u;function d(p,b){return p[0].userLists.length===0?Ri:Ii}let a=d(s),f=a(s);return{c(){e=m("div"),t=m("div"),r=m("div"),r.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=w(),l=m("div"),o=m("div"),o.innerHTML=`<img src="${Ss.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,u=w(),f.c(),c(r,"class","text-center mb-8"),c(o,"class","text-4xl mb-4"),c(l,"class","text-center py-12"),c(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),c(t,"id","list-selector-content"),c(e,"class","max-w-4xl mx-auto"),c(e,"id","list-selector")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),f.m(l,null)},p(p,[b]){a!==(a=d(p))&&(f.d(1),f=a(p),f&&(f.c(),f.m(l,null)))},i:re,o:re,d(p){p&&M(e),f.d()}}}function Di(s,e,t){let r;return Ie(s,me,n=>t(0,r=n)),[r]}class Ki extends De{constructor(e){super(),Oe(this,e,Di,Oi,Ee,{})}}function Ni(s){let e,t,r,n,l,o,u,d,a,f,p,b=(s[0].displayName||s[0].handle)+"",g,_,y,L,x=s[0].handle+"",E,I,K,R,P=s[0].description&&Nr(s);function D(C,N){if(C[3]==="Already in list")return zi;if(C[3]==="New candidate")return Hi;if(C[6])return Wi;if(C[2])return Ui}let S=D(s),U=S&&S(s);return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("img"),d=w(),a=m("div"),f=m("div"),p=m("h3"),g=k(b),_=w(),y=m("span"),L=k("@"),E=k(x),I=w(),P&&P.c(),K=w(),U&&U.c(),tt(n.src,l=ks(s[0]))||c(n,"src",l),c(n,"alt",o=s[0].displayName||s[0].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(p,"class","text-base font-semibold text-gray-900 truncate"),c(y,"class","text-sm text-gray-600 truncate"),c(f,"class","flex items-center space-x-2 mb-1"),c(a,"class","flex-1 min-w-0"),c(t,"class","flex items-start space-x-3"),c(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200"),c(e,"id",R="profile-card-"+s[0].did)},m(C,N){A(C,e,N),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,f),i(f,p),i(p,g),i(f,_),i(f,y),i(y,L),i(y,E),i(a,I),P&&P.m(a,null),i(a,K),U&&U.m(a,null)},p(C,N){N&1&&!tt(n.src,l=ks(C[0]))&&c(n,"src",l),N&1&&o!==(o=C[0].displayName||C[0].handle)&&c(n,"alt",o),N&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(C[0].displayName||C[0].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),N&1&&b!==(b=(C[0].displayName||C[0].handle)+"")&&q(g,b),N&1&&x!==(x=C[0].handle+"")&&q(E,x),C[0].description?P?P.p(C,N):(P=Nr(C),P.c(),P.m(a,K)):P&&(P.d(1),P=null),S===(S=D(C))&&U?U.p(C,N):(U&&U.d(1),U=S&&S(C),U&&(U.c(),U.m(a,null))),N&1&&R!==(R="profile-card-"+C[0].did)&&c(e,"id",R)},d(C){C&&M(e),P&&P.d(),U&&U.d()}}}function Bi(s){let e,t,r,n,l,o,u,d,a,f,p,b=(s[0].displayName||s[0].handle)+"",g,_,y,L,x=s[0].handle+"",E,I,K,R,P,D,S,U,C,N=s[0].description&&Br(s);function j(B,J){if(B[3]==="Already in list")return Yi;if(B[3]==="New candidate")return Vi;if(B[6])return qi;if(B[2])return Ji}let Q=j(s),T=Q&&Q(s);return{c(){e=m("a"),t=m("div"),r=m("div"),n=m("img"),d=w(),a=m("div"),f=m("div"),p=m("h3"),g=k(b),_=w(),y=m("span"),L=k("@"),E=k(x),I=w(),N&&N.c(),K=w(),T&&T.c(),R=w(),P=m("div"),P.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',tt(n.src,l=ks(s[0]))||c(n,"src",l),c(n,"alt",o=s[0].displayName||s[0].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(p,"class","text-base font-semibold text-gray-900 truncate"),c(y,"class","text-sm text-gray-600 truncate"),c(f,"class","flex items-center space-x-2 mb-1"),c(a,"class","flex-1 min-w-0"),c(P,"class","flex-shrink-0"),c(t,"class","flex items-start space-x-3"),c(e,"href",D="https://bsky.app/profile/"+s[0].handle),c(e,"target","_blank"),c(e,"rel","noopener noreferrer"),c(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200"),c(e,"id",S="profile-card-"+s[0].did)},m(B,J){A(B,e,J),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,f),i(f,p),i(p,g),i(f,_),i(f,y),i(y,L),i(y,E),i(a,I),N&&N.m(a,null),i(a,K),T&&T.m(a,null),i(t,R),i(t,P),U||(C=ie(e,"click",s[9]),U=!0)},p(B,J){J&1&&!tt(n.src,l=ks(B[0]))&&c(n,"src",l),J&1&&o!==(o=B[0].displayName||B[0].handle)&&c(n,"alt",o),J&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(B[0].displayName||B[0].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),J&1&&b!==(b=(B[0].displayName||B[0].handle)+"")&&q(g,b),J&1&&x!==(x=B[0].handle+"")&&q(E,x),B[0].description?N?N.p(B,J):(N=Br(B),N.c(),N.m(a,K)):N&&(N.d(1),N=null),Q===(Q=j(B))&&T?T.p(B,J):(T&&T.d(1),T=Q&&Q(B),T&&(T.c(),T.m(a,null))),J&1&&D!==(D="https://bsky.app/profile/"+B[0].handle)&&c(e,"href",D),J&1&&S!==(S="profile-card-"+B[0].did)&&c(e,"id",S)},d(B){B&&M(e),N&&N.d(),T&&T.d(),U=!1,C()}}}function Nr(s){let e,t=s[0].description+"",r;return{c(){e=m("p"),r=k(t),c(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&q(r,t)},d(n){n&&M(e)}}}function Ui(s){let e,t,r,n,l,o;return{c(){e=m("div"),t=m("input"),r=w(),n=m("span"),n.textContent="Select to add to list",c(t,"type","checkbox"),t.checked=s[1],c(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),c(n,"class","text-sm text-gray-600"),c(e,"class","flex items-center space-x-2")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=ie(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&M(e),l=!1,o()}}}function Wi(s){let e;return{c(){e=m("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,c(e,"class","flex items-center space-x-2")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function Hi(s){let e,t,r,n,l,o,u;function d(p,b){return p[5]?ji:Fi}let a=d(s),f=a(s);return{c(){e=m("div"),t=m("span"),r=k(s[3]),n=w(),l=m("button"),f.c(),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],c(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","flex items-center space-x-2")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(e,n),i(e,l),f.m(l,null),o||(u=ie(l,"click",s[8]),o=!0)},p(p,b){b&8&&q(r,p[3]),a!==(a=d(p))&&(f.d(1),f=a(p),f&&(f.c(),f.m(l,null))),b&32&&(l.disabled=p[5])},d(p){p&&M(e),f.d(),o=!1,u()}}}function zi(s){let e,t,r;return{c(){e=m("div"),t=m("span"),r=k(s[3]),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),c(e,"class","flex items-center space-x-2")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&M(e)}}}function Fi(s){let e;return{c(){e=k("Add to list")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function ji(s){let e,t;return{c(){e=m("span"),t=k(`
								Adding...`),c(e,"class","loading-spinner mr-1")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function Br(s){let e,t=s[0].description+"",r;return{c(){e=m("p"),r=k(t),c(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&q(r,t)},d(n){n&&M(e)}}}function Ji(s){let e,t,r,n,l,o;return{c(){e=m("div"),t=m("input"),r=w(),n=m("span"),n.textContent="Select to add to list",c(t,"type","checkbox"),t.checked=s[1],c(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),c(n,"class","text-sm text-gray-600"),c(e,"class","flex items-center space-x-2")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=ie(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&M(e),l=!1,o()}}}function qi(s){let e;return{c(){e=m("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,c(e,"class","flex items-center space-x-2")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function Vi(s){let e,t,r,n,l,o,u;function d(p,b){return p[5]?Gi:$i}let a=d(s),f=a(s);return{c(){e=m("div"),t=m("span"),r=k(s[3]),n=w(),l=m("button"),f.c(),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],c(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","flex items-center space-x-2")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(e,n),i(e,l),f.m(l,null),o||(u=ie(l,"click",s[8]),o=!0)},p(p,b){b&8&&q(r,p[3]),a!==(a=d(p))&&(f.d(1),f=a(p),f&&(f.c(),f.m(l,null))),b&32&&(l.disabled=p[5])},d(p){p&&M(e),f.d(),o=!1,u()}}}function Yi(s){let e,t,r;return{c(){e=m("div"),t=m("span"),r=k(s[3]),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),c(e,"class","flex items-center space-x-2")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&M(e)}}}function $i(s){let e;return{c(){e=k("Add to list")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Gi(s){let e,t;return{c(){e=m("span"),t=k(`
								Adding...`),c(e,"class","loading-spinner mr-1")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function Zi(s){let e;function t(l,o){return l[4]?Bi:Ni}let r=t(s),n=r(s);return{c(){n.c(),e=st()},m(l,o){n.m(l,o),A(l,e,o)},p(l,[o]){r===(r=t(l))&&n?n.p(l,o):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:re,o:re,d(l){l&&M(e),n.d(l)}}}function ks(s){return s.avatar?s.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName||s.handle)}&background=6366f1&color=fff&size=64`}function Xi(s,e,t){let{profile:r}=e,{isSelected:n=!1}=e,{onSelect:l=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:u=null}=e,{clickable:d=!1}=e,{onAddToList:a=()=>{}}=e,{isAddingToList:f=!1}=e,{isCheckingMembership:p=!1}=e;function b(){l(r)}function g(y){y.preventDefault(),y.stopPropagation(),a(r)}function _(y){d&&!o||d&&o&&(y.target.type==="checkbox"||y.target.closest('input[type="checkbox"]'))&&(y.preventDefault(),y.stopPropagation())}return s.$$set=y=>{"profile"in y&&t(0,r=y.profile),"isSelected"in y&&t(1,n=y.isSelected),"onSelect"in y&&t(10,l=y.onSelect),"showCheckbox"in y&&t(2,o=y.showCheckbox),"statusTag"in y&&t(3,u=y.statusTag),"clickable"in y&&t(4,d=y.clickable),"onAddToList"in y&&t(11,a=y.onAddToList),"isAddingToList"in y&&t(5,f=y.isAddingToList),"isCheckingMembership"in y&&t(6,p=y.isCheckingMembership)},[r,n,o,u,d,f,p,b,g,_,l,a]}class Qi extends De{constructor(e){super(),Oe(this,e,Xi,Zi,Ee,{profile:0,isSelected:1,onSelect:10,showCheckbox:2,statusTag:3,clickable:4,onAddToList:11,isAddingToList:5,isCheckingMembership:6})}}var Ys={};(function s(e,t,r,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!e.OffscreenCanvas)return!1;var v=new OffscreenCanvas(1,1),h=v.getContext("2d");h.fillRect(0,0,1,1);var H=v.transferToImageBitmap();try{h.createPattern(H,"no-repeat")}catch{return!1}return!0}();function d(){}function a(v){var h=t.exports.Promise,H=h!==void 0?h:e.Promise;return typeof H=="function"?new H(v):(v(d,d),null)}var f=function(v,h){return{transform:function(H){if(v)return H;if(h.has(H))return h.get(H);var z=new OffscreenCanvas(H.width,H.height),O=z.getContext("2d");return O.drawImage(H,0,0),h.set(H,z),z},clear:function(){h.clear()}}}(u,new Map),p=function(){var v=Math.floor(16.666666666666668),h,H,z={},O=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(F){var Y=Math.random();return z[Y]=requestAnimationFrame(function G(Z){O===Z||O+v-1<Z?(O=Z,delete z[Y],F()):z[Y]=requestAnimationFrame(G)}),Y},H=function(F){z[F]&&cancelAnimationFrame(z[F])}):(h=function(F){return setTimeout(F,v)},H=function(F){return clearTimeout(F)}),{frame:h,cancel:H}}(),b=function(){var v,h,H={};function z(O){function F(Y,G){O.postMessage({options:Y||{},callback:G})}O.init=function(G){var Z=G.transferControlToOffscreen();O.postMessage({canvas:Z},[Z])},O.fire=function(G,Z,W){if(h)return F(G,null),h;var V=Math.random().toString(36).slice(2);return h=a(function(ne){function oe(le){le.data.callback===V&&(delete H[V],O.removeEventListener("message",oe),h=null,f.clear(),W(),ne())}O.addEventListener("message",oe),F(G,V),H[V]=oe.bind(null,{data:{callback:V}})}),h},O.reset=function(){O.postMessage({reset:!0});for(var G in H)H[G](),delete H[G]}}return function(){if(v)return v;if(!r&&l){var O=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{v=new Worker(URL.createObjectURL(new Blob([O])))}catch(F){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",F),null}z(v)}return v}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(v,h){return h?h(v):v}function y(v){return v!=null}function L(v,h,H){return _(v&&y(v[h])?v[h]:g[h],H)}function x(v){return v<0?0:Math.floor(v)}function E(v,h){return Math.floor(Math.random()*(h-v))+v}function I(v){return parseInt(v,16)}function K(v){return v.map(R)}function R(v){var h=String(v).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:I(h.substring(0,2)),g:I(h.substring(2,4)),b:I(h.substring(4,6))}}function P(v){var h=L(v,"origin",Object);return h.x=L(h,"x",Number),h.y=L(h,"y",Number),h}function D(v){v.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight}function S(v){var h=v.getBoundingClientRect();v.width=h.width,v.height=h.height}function U(v){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=v,h}function C(v,h,H,z,O,F,Y,G,Z){v.save(),v.translate(h,H),v.rotate(F),v.scale(z,O),v.arc(0,0,1,Y,G,Z),v.restore()}function N(v){var h=v.angle*(Math.PI/180),H=v.spread*(Math.PI/180);return{x:v.x,y:v.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:v.startVelocity*.5+Math.random()*v.startVelocity,angle2D:-h+(.5*H-Math.random()*H),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:v.color,shape:v.shape,tick:0,totalTicks:v.ticks,decay:v.decay,drift:v.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:v.gravity*3,ovalScalar:.6,scalar:v.scalar,flat:v.flat}}function j(v,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var H=h.tick++/h.totalTicks,z=h.x+h.random*h.tiltCos,O=h.y+h.random*h.tiltSin,F=h.wobbleX+h.random*h.tiltCos,Y=h.wobbleY+h.random*h.tiltSin;if(v.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-H)+")",v.beginPath(),o&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))v.fill($(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(F-z)*.1,Math.abs(Y-O)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var G=Math.PI/10*h.wobble,Z=Math.abs(F-z)*.1,W=Math.abs(Y-O)*.1,V=h.shape.bitmap.width*h.scalar,ne=h.shape.bitmap.height*h.scalar,oe=new DOMMatrix([Math.cos(G)*Z,Math.sin(G)*Z,-Math.sin(G)*W,Math.cos(G)*W,h.x,h.y]);oe.multiplySelf(new DOMMatrix(h.shape.matrix));var le=v.createPattern(f.transform(h.shape.bitmap),"no-repeat");le.setTransform(oe),v.globalAlpha=1-H,v.fillStyle=le,v.fillRect(h.x-V/2,h.y-ne/2,V,ne),v.globalAlpha=1}else if(h.shape==="circle")v.ellipse?v.ellipse(h.x,h.y,Math.abs(F-z)*h.ovalScalar,Math.abs(Y-O)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):C(v,h.x,h.y,Math.abs(F-z)*h.ovalScalar,Math.abs(Y-O)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var ee=Math.PI/2*3,ge=4*h.scalar,ve=8*h.scalar,ye=h.x,_e=h.y,Ne=5,Ae=Math.PI/Ne;Ne--;)ye=h.x+Math.cos(ee)*ve,_e=h.y+Math.sin(ee)*ve,v.lineTo(ye,_e),ee+=Ae,ye=h.x+Math.cos(ee)*ge,_e=h.y+Math.sin(ee)*ge,v.lineTo(ye,_e),ee+=Ae;else v.moveTo(Math.floor(h.x),Math.floor(h.y)),v.lineTo(Math.floor(h.wobbleX),Math.floor(O)),v.lineTo(Math.floor(F),Math.floor(Y)),v.lineTo(Math.floor(z),Math.floor(h.wobbleY));return v.closePath(),v.fill(),h.tick<h.totalTicks}function Q(v,h,H,z,O){var F=h.slice(),Y=v.getContext("2d"),G,Z,W=a(function(V){function ne(){G=Z=null,Y.clearRect(0,0,z.width,z.height),f.clear(),O(),V()}function oe(){r&&!(z.width===n.width&&z.height===n.height)&&(z.width=v.width=n.width,z.height=v.height=n.height),!z.width&&!z.height&&(H(v),z.width=v.width,z.height=v.height),Y.clearRect(0,0,z.width,z.height),F=F.filter(function(le){return j(Y,le)}),F.length?G=p.frame(oe):ne()}G=p.frame(oe),Z=ne});return{addFettis:function(V){return F=F.concat(V),W},canvas:v,promise:W,reset:function(){G&&p.cancel(G),Z&&Z()}}}function T(v,h){var H=!v,z=!!L(h||{},"resize"),O=!1,F=L(h,"disableForReducedMotion",Boolean),Y=l&&!!L(h||{},"useWorker"),G=Y?b():null,Z=H?D:S,W=v&&G?!!v.__confetti_initialized:!1,V=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ne;function oe(ee,ge,ve){for(var ye=L(ee,"particleCount",x),_e=L(ee,"angle",Number),Ne=L(ee,"spread",Number),Ae=L(ee,"startVelocity",Number),pt=L(ee,"decay",Number),qt=L(ee,"gravity",Number),ht=L(ee,"drift",Number),rt=L(ee,"colors",K),Kt=L(ee,"ticks",Number),Nt=L(ee,"shapes"),Ye=L(ee,"scalar"),$e=!!L(ee,"flat"),Ge=P(ee),nt=ye,gt=[],bt=v.width*Ge.x,yt=v.height*Ge.y;nt--;)gt.push(N({x:bt,y:yt,angle:_e,spread:Ne,startVelocity:Ae,color:rt[nt%rt.length],shape:Nt[E(0,Nt.length)],ticks:Kt,decay:pt,gravity:qt,drift:ht,scalar:Ye,flat:$e}));return ne?ne.addFettis(gt):(ne=Q(v,gt,Z,ge,ve),ne.promise)}function le(ee){var ge=F||L(ee,"disableForReducedMotion",Boolean),ve=L(ee,"zIndex",Number);if(ge&&V)return a(function(Ae){Ae()});H&&ne?v=ne.canvas:H&&!v&&(v=U(ve),document.body.appendChild(v)),z&&!W&&Z(v);var ye={width:v.width,height:v.height};G&&!W&&G.init(v),W=!0,G&&(v.__confetti_initialized=!0);function _e(){if(G){var Ae={getBoundingClientRect:function(){if(!H)return v.getBoundingClientRect()}};Z(Ae),G.postMessage({resize:{width:Ae.width,height:Ae.height}});return}ye.width=ye.height=null}function Ne(){ne=null,z&&(O=!1,e.removeEventListener("resize",_e)),H&&v&&(document.body.contains(v)&&document.body.removeChild(v),v=null,W=!1)}return z&&!O&&(O=!0,e.addEventListener("resize",_e,!1)),G?G.fire(ee,ye,Ne):oe(ee,ye,Ne)}return le.reset=function(){G&&G.reset(),ne&&ne.reset()},le}var B;function J(){return B||(B=T(null,{useWorker:!0,resize:!0})),B}function $(v,h,H,z,O,F,Y){var G=new Path2D(v),Z=new Path2D;Z.addPath(G,new DOMMatrix(h));var W=new Path2D;return W.addPath(Z,new DOMMatrix([Math.cos(Y)*O,Math.sin(Y)*O,-Math.sin(Y)*F,Math.cos(Y)*F,H,z])),W}function ae(v){if(!o)throw new Error("path confetti are not supported in this browser");var h,H;typeof v=="string"?h=v:(h=v.path,H=v.matrix);var z=new Path2D(h),O=document.createElement("canvas"),F=O.getContext("2d");if(!H){for(var Y=1e3,G=Y,Z=Y,W=0,V=0,ne,oe,le=0;le<Y;le+=2)for(var ee=0;ee<Y;ee+=2)F.isPointInPath(z,le,ee,"nonzero")&&(G=Math.min(G,le),Z=Math.min(Z,ee),W=Math.max(W,le),V=Math.max(V,ee));ne=W-G,oe=V-Z;var ge=10,ve=Math.min(ge/ne,ge/oe);H=[ve,0,0,ve,-Math.round(ne/2+G)*ve,-Math.round(oe/2+Z)*ve]}return{type:"path",path:h,matrix:H}}function X(v){var h,H=1,z="#000000",O='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof v=="string"?h=v:(h=v.text,H="scalar"in v?v.scalar:H,O="fontFamily"in v?v.fontFamily:O,z="color"in v?v.color:z);var F=10*H,Y=""+F+"px "+O,G=new OffscreenCanvas(F,F),Z=G.getContext("2d");Z.font=Y;var W=Z.measureText(h),V=Math.ceil(W.actualBoundingBoxRight+W.actualBoundingBoxLeft),ne=Math.ceil(W.actualBoundingBoxAscent+W.actualBoundingBoxDescent),oe=2,le=W.actualBoundingBoxLeft+oe,ee=W.actualBoundingBoxAscent+oe;V+=oe+oe,ne+=oe+oe,G=new OffscreenCanvas(V,ne),Z=G.getContext("2d"),Z.font=Y,Z.fillStyle=z,Z.fillText(h,le,ee);var ge=1/H;return{type:"bitmap",bitmap:G.transferToImageBitmap(),matrix:[ge,0,0,ge,-V*ge/2,-ne*ge/2]}}t.exports=function(){return J().apply(this,arguments)},t.exports.reset=function(){J().reset()},t.exports.create=T,t.exports.shapeFromPath=ae,t.exports.shapeFromText=X})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ys,!1);const Ns=Ys.exports;Ys.exports.create;function Ur(s,e,t){const r=s.slice();return r[23]=e[t].profile,r[24]=e[t].status,r}function eo(s){let e;return{c(){e=k("🔍 Search")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function to(s){let e,t;return{c(){e=m("span"),t=k(`
						Checking membership...`),c(e,"class","loading-spinner svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function so(s){let e,t;return{c(){e=m("span"),t=k(`
						Searching...`),c(e,"class","loading-spinner svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function Wr(s){let e,t,r;return{c(){e=m("div"),t=m("p"),r=k(s[5]),c(t,"class","text-red-700"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&32&&q(r,n[5])},d(n){n&&M(e)}}}function ro(s){let e;return{c(){e=m("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',c(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:re,i:re,o:re,d(t){t&&M(e)}}}function no(s){let e;return{c(){e=m("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',c(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:re,i:re,o:re,d(t){t&&M(e)}}}function lo(s){let e,t,r,n=he(s[8]),l=[];for(let d=0;d<n.length;d+=1)l[d]=Hr(Ur(s,n,d));const o=d=>ue(l[d],1,1,()=>{l[d]=null});let u=s[6]&&zr(s);return{c(){e=m("div");for(let d=0;d<l.length;d+=1)l[d].c();t=w(),u&&u.c(),c(e,"class","space-y-4")},m(d,a){A(d,e,a);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);i(e,t),u&&u.m(e,null),r=!0},p(d,a){if(a&6530){n=he(d[8]);let f;for(f=0;f<n.length;f+=1){const p=Ur(d,n,f);l[f]?(l[f].p(p,a),ce(l[f],1)):(l[f]=Hr(p),l[f].c(),ce(l[f],1),l[f].m(e,t))}for(ft(),f=n.length;f<l.length;f+=1)o(f);mt()}d[6]?u?u.p(d,a):(u=zr(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(d){if(!r){for(let a=0;a<n.length;a+=1)ce(l[a]);r=!0}},o(d){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)ue(l[a]);r=!1},d(d){d&&M(e),Ve(l,d),u&&u.d()}}}function io(s){let e;return{c(){e=m("div"),e.innerHTML='<div class="loading-spinner mx-auto mb-4 svelte-165a6uh"></div> <p class="text-slate-600">Checking membership status...</p>',c(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:re,i:re,o:re,d(t){t&&M(e)}}}function Hr(s){let e,t;return e=new Qi({props:{profile:s[23],isSelected:s[1].has(s[23].did),onSelect:s[11],statusTag:s[24],clickable:!0,onAddToList:s[12],isAddingToList:s[7].has(s[23].did)}}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p(r,n){const l={};n&256&&(l.profile=r[23]),n&258&&(l.isSelected=r[1].has(r[23].did)),n&256&&(l.statusTag=r[24]),n&384&&(l.isAddingToList=r[7].has(r[23].did)),e.$set(l)},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function zr(s){let e,t,r,n;function l(d,a){return d[3]?ao:oo}let o=l(s),u=o(s);return{c(){e=m("div"),t=m("button"),u.c(),t.disabled=s[3],c(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","text-center pt-4 border-t border-gray-200")},m(d,a){A(d,e,a),i(e,t),u.m(t,null),r||(n=ie(t,"click",s[10]),r=!0)},p(d,a){o!==(o=l(d))&&(u.d(1),u=o(d),u&&(u.c(),u.m(t,null))),a&8&&(t.disabled=d[3])},d(d){d&&M(e),u.d(),r=!1,n()}}}function oo(s){let e;return{c(){e=k("Load More Results")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function ao(s){let e,t;return{c(){e=m("span"),t=k(`
								Loading...`),c(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function co(s){let e,t,r,n,l,o,u,d,a,f,p,b,g,_,y,L,x,E;function I(C,N){return C[3]?so:C[4]?to:eo}let K=I(s),R=K(s),P=s[5]&&Wr(s);const D=[io,lo,no,ro],S=[];function U(C,N){return C[4]?0:C[0].length>0?1:C[2]&&!C[3]?2:C[2]?-1:3}return~(_=U(s))&&(y=S[_]=D[_](s)),{c(){e=m("div"),t=m("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',r=w(),n=m("div"),l=m("form"),o=m("div"),u=m("label"),u.textContent="Search for:",d=w(),a=m("input"),f=w(),p=m("button"),R.c(),b=w(),P&&P.c(),g=w(),y&&y.c(),c(t,"class","p-6 border-b border-gray-200"),c(u,"for","search-input"),c(u,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),c(a,"id","search-input"),c(a,"type","text"),c(a,"placeholder","e.g., belge, artist, developer..."),c(a,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),a.required=!0,c(p,"type","submit"),p.disabled=s[3],c(p,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(o,"class","flex gap-4 items-center flex-wrap"),c(l,"class","mb-6"),c(n,"id","profile-search-container"),c(n,"class","p-6"),c(e,"class","bg-white rounded-lg shadow-sm border border-gray-200"),c(e,"id","profile-search")},m(C,N){A(C,e,N),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(o,u),i(o,d),i(o,a),be(a,s[2]),i(o,f),i(o,p),R.m(p,null),i(n,b),P&&P.m(n,null),i(n,g),~_&&S[_].m(n,null),L=!0,x||(E=[ie(a,"input",s[16]),ie(l,"submit",zs(s[9]))],x=!0)},p(C,[N]){N&4&&a.value!==C[2]&&be(a,C[2]),K!==(K=I(C))&&(R.d(1),R=K(C),R&&(R.c(),R.m(p,null))),(!L||N&8)&&(p.disabled=C[3]),C[5]?P?P.p(C,N):(P=Wr(C),P.c(),P.m(n,g)):P&&(P.d(1),P=null);let j=_;_=U(C),_===j?~_&&S[_].p(C,N):(y&&(ft(),ue(S[j],1,1,()=>{S[j]=null}),mt()),~_?(y=S[_],y?y.p(C,N):(y=S[_]=D[_](C),y.c()),ce(y,1),y.m(n,null)):y=null)},i(C){L||(ce(y),L=!0)},o(C){ue(y),L=!1},d(C){C&&M(e),R.d(),P&&P.d(),~_&&S[_].d(),x=!1,Me(E)}}}function uo(s,e,t){let r,n,l;Ie(s,je,S=>t(18,n=S)),Ie(s,me,S=>t(15,l=S));let o="",u=[],d=!1,a=!1,f="",p=new Set,b=null,g=!1,_=new Set;async function y(){if(!(!o.trim()||!n.session)){t(3,d=!0),t(4,a=!1),t(5,f=""),t(0,u=[]),p.clear(),b=null,t(6,g=!1);try{const S=await Le.searchProfiles(n.session,o,n.authType);t(4,a=!0);const U=await P(S.actors||[]);t(0,u=U),b=S.cursor,t(6,g=!!S.cursor)}catch(S){t(5,f=S.message||"Failed to search profiles")}finally{t(3,d=!1),t(4,a=!1)}}}async function L(){if(!(!g||d||!n.session)){t(3,d=!0),t(4,a=!1),t(5,f="");try{const S=await Le.searchProfiles(n.session,o,n.authType,25,b);t(4,a=!0);const U=await P(S.actors||[]);t(0,u=[...u,...U]),b=S.cursor,t(6,g=!!S.cursor)}catch(S){t(5,f=S.message||"Failed to load more profiles")}finally{t(3,d=!1),t(4,a=!1)}}}function x(S){p.has(S.did)?p.delete(S.did):p.add(S.did),t(1,p)}let E=null,I=!0;async function K(S){if(!(!n.session||!l.selectedList||_.has(S.did))){_.add(S.did),t(7,_);try{await Le.addToList(n.session,S.did,l.selectedList.uri),await me.fetchAndAddProfile(n.session,S.did),R()}catch(U){console.error("Failed to add profile to list:",U)}finally{_.delete(S.did),t(7,_)}}}function R(){Ns({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Ns({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Ns({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}async function P(S){if(!S.length||!l.selectedList)return S;const U=await me.getAllListMemberDids(n.session,n.authType);return S.map(N=>({...N,_isInList:U.has(N.did)}))}function D(){o=this.value,t(2,o),t(15,l),t(14,I),t(13,E),t(1,p)}return s.$$.update=()=>{s.$$.dirty&57346&&l.selectedList&&(!I&&E&&E!==l.selectedList.uri&&(t(2,o=""),t(0,u=[]),p.clear(),b=null,t(6,g=!1),t(5,f="")),t(13,E=l.selectedList.uri),t(14,I=!1)),s.$$.dirty&32769&&t(8,r=u.map(S=>({profile:S,status:S._isInList||l.listMembers.includes(S.did)?"Already in list":"New candidate"})))},[u,p,o,d,a,f,g,_,r,y,L,x,K,E,I,l,D]}class fo extends De{constructor(e){super(),Oe(this,e,uo,co,Ee,{})}}function Fr(s,e,t){const r=s.slice();return r[15]=e[t],r}function jr(s,e,t){const r=s.slice();return r[18]=e[t],r}function Jr(s){let e,t=s[2].selectedList.description+"",r;return{c(){e=m("p"),r=k(t),c(e,"class","text-slate-600 mt-1")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&4&&t!==(t=n[2].selectedList.description+"")&&q(r,t)},d(n){n&&M(e)}}}function qr(s){let e,t,r,n,l,o,u,d,a,f=s[4].length.toLocaleString()+"",p,b,g=s[0].totalMembers.toLocaleString()+"",_,y,L,x,E,I,K;return{c(){e=m("div"),t=m("div"),r=m("div"),n=w(),l=m("div"),o=m("div"),o.textContent="Calculating comprehensive statistics...",u=w(),d=m("div"),a=k("Processing "),p=k(f),b=k(" of "),_=k(g),y=k(`
						members (`),L=k(s[3]),x=k("%)"),E=w(),I=m("div"),K=m("div"),c(r,"class","loading-spinner svelte-1myfg8v"),c(o,"class","text-blue-700 font-medium"),c(d,"class","text-blue-600 text-sm"),c(t,"class","flex items-center justify-center space-x-3"),c(K,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),de(K,"width",s[3]+"%"),c(I,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),c(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(R,P){A(R,e,P),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),i(l,d),i(d,a),i(d,p),i(d,b),i(d,_),i(d,y),i(d,L),i(d,x),i(e,E),i(e,I),i(I,K)},p(R,P){P&16&&f!==(f=R[4].length.toLocaleString()+"")&&q(p,f),P&1&&g!==(g=R[0].totalMembers.toLocaleString()+"")&&q(_,g),P&8&&q(L,R[3]),P&8&&de(K,"width",R[3]+"%")},d(R){R&&M(e)}}}function mo(s){let e,t,r,n,l,o=s[0].avgBioLength+"",u,d,a,f,p,b,g,_=s[0].accountsWithBios.toLocaleString()+"",y,L,x=s[0].totalMembers.toLocaleString()+"",E,I,K,R,P,D,S=s[0].accountsWithDisplayNames.toLocaleString()+"",U,C,N=s[0].totalMembers.toLocaleString()+"",j,Q,T=s[0].mostCommonWords.length>0&&Vr(s);return{c(){e=m("div"),t=m("div"),r=m("span"),r.textContent="Average bio length:",n=w(),l=m("span"),u=k(o),d=k(" characters"),a=w(),f=m("div"),p=m("span"),p.textContent="Bios with content:",b=w(),g=m("span"),y=k(_),L=k(" / "),E=k(x),I=w(),K=m("div"),R=m("span"),R.textContent="Display names:",P=w(),D=m("span"),U=k(S),C=k(" / "),j=k(N),Q=w(),T&&T.c(),c(r,"class","text-gray-600"),c(l,"class","font-medium"),c(t,"class","flex justify-between text-sm"),c(p,"class","text-gray-600"),c(g,"class","font-medium"),c(f,"class","flex justify-between text-sm"),c(R,"class","text-gray-600"),c(D,"class","font-medium"),c(K,"class","flex justify-between text-sm"),c(e,"class","space-y-2")},m(B,J){A(B,e,J),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,a),i(e,f),i(f,p),i(f,b),i(f,g),i(g,y),i(g,L),i(g,E),i(e,I),i(e,K),i(K,R),i(K,P),i(K,D),i(D,U),i(D,C),i(D,j),i(e,Q),T&&T.m(e,null)},p(B,J){J&1&&o!==(o=B[0].avgBioLength+"")&&q(u,o),J&1&&_!==(_=B[0].accountsWithBios.toLocaleString()+"")&&q(y,_),J&1&&x!==(x=B[0].totalMembers.toLocaleString()+"")&&q(E,x),J&1&&S!==(S=B[0].accountsWithDisplayNames.toLocaleString()+"")&&q(U,S),J&1&&N!==(N=B[0].totalMembers.toLocaleString()+"")&&q(j,N),B[0].mostCommonWords.length>0?T?T.p(B,J):(T=Vr(B),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},d(B){B&&M(e),T&&T.d()}}}function po(s){let e;return{c(){e=m("div"),e.textContent="Calculating comprehensive bio statistics...",c(e,"class","text-gray-500 text-sm")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function Vr(s){let e,t,r,n,l=he(s[0].mostCommonWords),o=[];for(let u=0;u<l.length;u+=1)o[u]=Yr(jr(s,l,u));return{c(){e=m("div"),t=m("div"),t.textContent="Most common words:",r=w(),n=m("div");for(let u=0;u<o.length;u+=1)o[u].c();c(t,"class","text-xs text-gray-500 mb-2"),c(n,"class","flex flex-wrap gap-1"),c(e,"class","mt-3")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(u,d){if(d&1){l=he(u[0].mostCommonWords);let a;for(a=0;a<l.length;a+=1){const f=jr(u,l,a);o[a]?o[a].p(f,d):(o[a]=Yr(f),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(u){u&&M(e),Ve(o,u)}}}function Yr(s){let e,t=s[18].word+"",r,n,l=s[18].count+"",o,u;return{c(){e=m("span"),r=k(t),n=k(" ("),o=k(l),u=k(`)
									`),c(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(d,a){A(d,e,a),i(e,r),i(e,n),i(e,o),i(e,u)},p(d,a){a&1&&t!==(t=d[18].word+"")&&q(r,t),a&1&&l!==(l=d[18].count+"")&&q(o,l)},d(d){d&&M(e)}}}function ho(s){let e,t,r,n,l,o=s[0].avgHandleLength+"",u,d,a,f=s[0].topDomains.length>0&&$r(s);return{c(){e=m("div"),t=m("div"),r=m("span"),r.textContent="Average handle length:",n=w(),l=m("span"),u=k(o),d=k(" characters"),a=w(),f&&f.c(),c(r,"class","text-gray-600"),c(l,"class","font-medium"),c(t,"class","flex justify-between text-sm"),c(e,"class","space-y-2")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,a),f&&f.m(e,null)},p(p,b){b&1&&o!==(o=p[0].avgHandleLength+"")&&q(u,o),p[0].topDomains.length>0?f?f.p(p,b):(f=$r(p),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(p){p&&M(e),f&&f.d()}}}function go(s){let e;return{c(){e=m("div"),e.textContent="Calculating handle statistics...",c(e,"class","text-gray-500 text-sm")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function $r(s){let e,t,r,n,l=he(s[0].topDomains),o=[];for(let u=0;u<l.length;u+=1)o[u]=Gr(Fr(s,l,u));return{c(){e=m("div"),t=m("div"),t.textContent="Top domains:",r=w(),n=m("div");for(let u=0;u<o.length;u+=1)o[u].c();c(t,"class","text-xs text-gray-500 mb-2"),c(n,"class","space-y-1"),c(e,"class","mt-3")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(u,d){if(d&1){l=he(u[0].topDomains);let a;for(a=0;a<l.length;a+=1){const f=Fr(u,l,a);o[a]?o[a].p(f,d):(o[a]=Gr(f),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(u){u&&M(e),Ve(o,u)}}}function Gr(s){let e,t,r,n=s[15].domain+"",l,o,u,d=s[15].count+"",a,f,p;return{c(){e=m("div"),t=m("span"),r=k("."),l=k(n),o=w(),u=m("span"),a=k(d),f=k(" users"),p=w(),c(t,"class","font-medium"),c(u,"class","text-gray-600"),c(e,"class","flex justify-between text-xs")},m(b,g){A(b,e,g),i(e,t),i(t,r),i(t,l),i(e,o),i(e,u),i(u,a),i(u,f),i(e,p)},p(b,g){g&1&&n!==(n=b[15].domain+"")&&q(l,n),g&1&&d!==(d=b[15].count+"")&&q(a,d)},d(b){b&&M(e)}}}function bo(s){let e;return{c(){e=k("Unknown")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function yo(s){let e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=k(e)},m(r,n){A(r,t,n)},p(r,n){n&4&&e!==(e=new Date(r[2].selectedList.createdAt).toLocaleDateString()+"")&&q(t,e)},d(r){r&&M(t)}}}function vo(s){var br,yr,vr;let e,t,r,n,l=(((br=s[2].selectedList)==null?void 0:br.name)||"List")+"",o,u,d,a,f,p=s[0].totalMembers.toLocaleString()+"",b,g,_,y,L,x,E,I,K,R,P,D,S=s[1]?"...":Mt(s[0].accountsWithBios,s[0].totalMembers)+"%",U,C,N,j,Q,T=s[1]?"Calculating...":`${s[0].accountsWithBios.toLocaleString()} have bios`,B,J,$,ae,X,v,h,H,z=s[1]?"...":Mt(s[0].verifiedAccounts,s[0].totalMembers)+"%",O,F,Y,G,Z,W=s[1]?"Calculating...":`${s[0].verifiedAccounts.toLocaleString()} verified accounts`,V,ne,oe,le,ee,ge,ve,ye,_e=s[1]?"...":Mt(s[0].accountsWithAvatars,s[0].totalMembers)+"%",Ne,Ae,pt,qt,ht,rt=s[1]?"Calculating...":`${s[0].accountsWithAvatars.toLocaleString()} have avatars`,Kt,Nt,Ye,$e,Ge,nt,gt,bt,yt=s[0].listAge+"",xs,$s,Vt,Gs,Yt,Zs,Ze,lt,$t,Xs,Qs,it,Gt,er,tr,vt,Zt,sr,Ue,_t,Xt,rr,Qt,es=((yr=s[2].selectedList)==null?void 0:yr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",Ms,nr,wt,ts,lr,Bt,ir,St,ss,or,Ut,rs=s[0].growthRate+"",Es,ar,cr,kt,ns,ur,ls,is=s[1]?"Calculating...":`${s[0].recentAdditions} in last batch`,As,dr,os,Lt,Wt,fr,ot,as=s[1]?"Calculating...":"Refresh Stats",Ps,Ts,mr,we=((vr=s[2].selectedList)==null?void 0:vr.description)&&Jr(s),Se=s[1]&&qr(s);function pr(te,fe){return te[1]?po:mo}let cs=pr(s),We=cs(s);function hr(te,fe){return te[1]?go:ho}let us=hr(s),He=us(s);function gr(te,fe){var Ht;return(Ht=te[2].selectedList)!=null&&Ht.createdAt?yo:bo}let ds=gr(s),ze=ds(s);return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("h2"),o=k(l),u=w(),we&&we.c(),d=w(),a=m("div"),f=m("div"),b=k(p),g=w(),_=m("div"),_.textContent="Total Members",y=w(),Se&&Se.c(),L=w(),x=m("div"),E=m("div"),I=m("div"),K=m("div"),R=m("div"),R.textContent="📊 Engagement",P=w(),D=m("div"),U=k(S),C=w(),N=m("div"),N.textContent="💬",j=w(),Q=m("div"),B=k(T),J=w(),$=m("div"),ae=m("div"),X=m("div"),v=m("div"),v.textContent="✅ Verified",h=w(),H=m("div"),O=k(z),F=w(),Y=m("div"),Y.textContent="✓",G=w(),Z=m("div"),V=k(W),ne=w(),oe=m("div"),le=m("div"),ee=m("div"),ge=m("div"),ge.textContent="🖼️ Complete",ve=w(),ye=m("div"),Ne=k(_e),Ae=w(),pt=m("div"),pt.textContent="👤",qt=w(),ht=m("div"),Kt=k(rt),Nt=w(),Ye=m("div"),$e=m("div"),Ge=m("div"),nt=m("div"),nt.textContent="📅 Age",gt=w(),bt=m("div"),xs=k(yt),$s=w(),Vt=m("div"),Vt.textContent="📆",Gs=w(),Yt=m("div"),Yt.textContent="days old",Zs=w(),Ze=m("div"),lt=m("div"),$t=m("h3"),$t.textContent="📝 Bio Analysis",Xs=w(),We.c(),Qs=w(),it=m("div"),Gt=m("h3"),Gt.textContent="🔗 Handle Analysis",er=w(),He.c(),tr=w(),vt=m("div"),Zt=m("h3"),Zt.textContent="📋 List Details",sr=w(),Ue=m("div"),_t=m("div"),Xt=m("span"),Xt.textContent="Type:",rr=w(),Qt=m("span"),Ms=k(es),nr=w(),wt=m("div"),ts=m("span"),ts.textContent="Created:",lr=w(),Bt=m("span"),ze.c(),ir=w(),St=m("div"),ss=m("span"),ss.textContent="Growth rate:",or=w(),Ut=m("span"),Es=k(rs),ar=k(" members/day"),cr=w(),kt=m("div"),ns=m("span"),ns.textContent="Recent activity:",ur=w(),ls=m("span"),As=k(is),dr=w(),os=m("div"),Lt=m("div"),Wt=m("button"),Wt.textContent="View on Bluesky",fr=w(),ot=m("button"),Ps=k(as),c(n,"class","text-xl font-bold text-slate-800"),c(f,"class","text-3xl font-bold text-blue-600"),c(_,"class","text-sm text-slate-500"),c(a,"class","text-right"),c(t,"class","flex items-center justify-between mb-6"),c(R,"class","text-blue-600 font-semibold text-sm"),c(D,"class","text-2xl font-bold text-blue-700"),c(N,"class","text-blue-400 text-3xl"),c(I,"class","flex items-center justify-between"),c(Q,"class","text-xs text-blue-600 mt-1"),c(E,"class","bg-blue-50 p-4 rounded-lg"),c(v,"class","text-green-600 font-semibold text-sm"),c(H,"class","text-2xl font-bold text-green-700"),c(Y,"class","text-green-400 text-3xl"),c(ae,"class","flex items-center justify-between"),c(Z,"class","text-xs text-green-600 mt-1"),c($,"class","bg-green-50 p-4 rounded-lg"),c(ge,"class","text-purple-600 font-semibold text-sm"),c(ye,"class","text-2xl font-bold text-purple-700"),c(pt,"class","text-purple-400 text-3xl"),c(le,"class","flex items-center justify-between"),c(ht,"class","text-xs text-purple-600 mt-1"),c(oe,"class","bg-purple-50 p-4 rounded-lg"),c(nt,"class","text-yellow-600 font-semibold text-sm"),c(bt,"class","text-2xl font-bold text-yellow-700"),c(Vt,"class","text-yellow-400 text-3xl"),c($e,"class","flex items-center justify-between"),c(Yt,"class","text-xs text-yellow-600 mt-1"),c(Ye,"class","bg-yellow-50 p-4 rounded-lg"),c(x,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),c($t,"class","text-sm font-semibold text-gray-700 mb-3"),c(lt,"class","bg-gray-50 p-4 rounded-lg"),c(Gt,"class","text-sm font-semibold text-gray-700 mb-3"),c(it,"class","bg-gray-50 p-4 rounded-lg"),c(Zt,"class","text-sm font-semibold text-gray-700 mb-3"),c(Xt,"class","text-gray-600"),c(Qt,"class","font-medium"),c(_t,"class","flex justify-between text-sm"),c(ts,"class","text-gray-600"),c(Bt,"class","font-medium"),c(wt,"class","flex justify-between text-sm"),c(ss,"class","text-gray-600"),c(Ut,"class","font-medium"),c(St,"class","flex justify-between text-sm"),c(ns,"class","text-gray-600"),c(ls,"class","font-medium"),c(kt,"class","flex justify-between text-sm"),c(Ue,"class","space-y-2"),c(vt,"class","bg-gray-50 p-4 rounded-lg"),c(Ze,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),c(Wt,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),c(ot,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),ot.disabled=s[1],c(Lt,"class","flex flex-wrap gap-2"),c(os,"class","mt-6 pt-4 border-t border-gray-200"),c(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),c(e,"id","list-statistics")},m(te,fe){A(te,e,fe),i(e,t),i(t,r),i(r,n),i(n,o),i(r,u),we&&we.m(r,null),i(t,d),i(t,a),i(a,f),i(f,b),i(a,g),i(a,_),i(e,y),Se&&Se.m(e,null),i(e,L),i(e,x),i(x,E),i(E,I),i(I,K),i(K,R),i(K,P),i(K,D),i(D,U),i(I,C),i(I,N),i(E,j),i(E,Q),i(Q,B),i(x,J),i(x,$),i($,ae),i(ae,X),i(X,v),i(X,h),i(X,H),i(H,O),i(ae,F),i(ae,Y),i($,G),i($,Z),i(Z,V),i(x,ne),i(x,oe),i(oe,le),i(le,ee),i(ee,ge),i(ee,ve),i(ee,ye),i(ye,Ne),i(le,Ae),i(le,pt),i(oe,qt),i(oe,ht),i(ht,Kt),i(x,Nt),i(x,Ye),i(Ye,$e),i($e,Ge),i(Ge,nt),i(Ge,gt),i(Ge,bt),i(bt,xs),i($e,$s),i($e,Vt),i(Ye,Gs),i(Ye,Yt),i(e,Zs),i(e,Ze),i(Ze,lt),i(lt,$t),i(lt,Xs),We.m(lt,null),i(Ze,Qs),i(Ze,it),i(it,Gt),i(it,er),He.m(it,null),i(Ze,tr),i(Ze,vt),i(vt,Zt),i(vt,sr),i(vt,Ue),i(Ue,_t),i(_t,Xt),i(_t,rr),i(_t,Qt),i(Qt,Ms),i(Ue,nr),i(Ue,wt),i(wt,ts),i(wt,lr),i(wt,Bt),ze.m(Bt,null),i(Ue,ir),i(Ue,St),i(St,ss),i(St,or),i(St,Ut),i(Ut,Es),i(Ut,ar),i(Ue,cr),i(Ue,kt),i(kt,ns),i(kt,ur),i(kt,ls),i(ls,As),i(e,dr),i(e,os),i(os,Lt),i(Lt,Wt),i(Lt,fr),i(Lt,ot),i(ot,Ps),Ts||(mr=[ie(Wt,"click",s[8]),ie(ot,"click",s[6])],Ts=!0)},p(te,[fe]){var Ht,_r,wr;fe&4&&l!==(l=(((Ht=te[2].selectedList)==null?void 0:Ht.name)||"List")+"")&&q(o,l),(_r=te[2].selectedList)!=null&&_r.description?we?we.p(te,fe):(we=Jr(te),we.c(),we.m(r,null)):we&&(we.d(1),we=null),fe&1&&p!==(p=te[0].totalMembers.toLocaleString()+"")&&q(b,p),te[1]?Se?Se.p(te,fe):(Se=qr(te),Se.c(),Se.m(e,L)):Se&&(Se.d(1),Se=null),fe&3&&S!==(S=te[1]?"...":Mt(te[0].accountsWithBios,te[0].totalMembers)+"%")&&q(U,S),fe&3&&T!==(T=te[1]?"Calculating...":`${te[0].accountsWithBios.toLocaleString()} have bios`)&&q(B,T),fe&3&&z!==(z=te[1]?"...":Mt(te[0].verifiedAccounts,te[0].totalMembers)+"%")&&q(O,z),fe&3&&W!==(W=te[1]?"Calculating...":`${te[0].verifiedAccounts.toLocaleString()} verified accounts`)&&q(V,W),fe&3&&_e!==(_e=te[1]?"...":Mt(te[0].accountsWithAvatars,te[0].totalMembers)+"%")&&q(Ne,_e),fe&3&&rt!==(rt=te[1]?"Calculating...":`${te[0].accountsWithAvatars.toLocaleString()} have avatars`)&&q(Kt,rt),fe&1&&yt!==(yt=te[0].listAge+"")&&q(xs,yt),cs===(cs=pr(te))&&We?We.p(te,fe):(We.d(1),We=cs(te),We&&(We.c(),We.m(lt,null))),us===(us=hr(te))&&He?He.p(te,fe):(He.d(1),He=us(te),He&&(He.c(),He.m(it,null))),fe&4&&es!==(es=((wr=te[2].selectedList)==null?void 0:wr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&q(Ms,es),ds===(ds=gr(te))&&ze?ze.p(te,fe):(ze.d(1),ze=ds(te),ze&&(ze.c(),ze.m(Bt,null))),fe&1&&rs!==(rs=te[0].growthRate+"")&&q(Es,rs),fe&3&&is!==(is=te[1]?"Calculating...":`${te[0].recentAdditions} in last batch`)&&q(As,is),fe&2&&as!==(as=te[1]?"Calculating...":"Refresh Stats")&&q(Ps,as),fe&2&&(ot.disabled=te[1])},i:re,o:re,d(te){te&&M(e),we&&we.d(),Se&&Se.d(),We.d(),He.d(),ze.d(),Ts=!1,Me(mr)}}}function Mt(s,e){return e===0?0:Math.round(s/e*100)}function _o(s,e,t){let r,n;Ie(s,me,E=>t(2,r=E)),Ie(s,je,E=>t(5,n=E));let l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,u=0,d=[],a=null,f=!1,p=null;function b(){t(0,l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,u=0),t(4,d=[])}function g(){var P,D;r.listMemberProfiles;const E=((P=r.selectedList)==null?void 0:P.listItemCount)||0,I=(D=r.selectedList)==null?void 0:D.createdAt,K=I?Math.floor((Date.now()-new Date(I).getTime())/(1e3*60*60*24)):0,R=K>0?Math.round(E/K):0;t(0,l={...l,totalMembers:E,listAge:K,growthRate:R})}async function _(){if(!n.session||!r.selectedList||o)return;const E=Date.now();a=E,t(1,o=!0),t(3,u=0),t(4,d=[]);try{const I=r.selectedList.listItemCount||0;if(I===0){y([]),f=!0;return}let K=null,R=0;const P=100;do{R++,t(3,u=Math.round(d.length/I*100));const D=await Le.getListMembers(n.session,r.selectedList.uri,n.authType,P,K);if(a!==E)return;t(4,d=[...d,...D.profiles]),K=D.cursor,t(3,u=Math.round(d.length/I*100))}while(K&&d.length<I);if(a!==E)return;y(d),f=!0}catch(I){console.error("Error loading all members for statistics:",I),g(),f=!0}finally{a===E&&(t(1,o=!1),t(3,u=0))}}function y(E){var z;const I=E.length,K=E.filter(O=>O.verified).length,R=E.filter(O=>O.avatar).length,P=E.filter(O=>O.description&&O.description.trim().length>0).length,D=E.filter(O=>O.displayName&&O.displayName.trim().length>0).length,S=E.map(O=>O.description||"").filter(O=>O.trim().length>0),U=S.length>0?Math.round(S.reduce((O,F)=>O+F.length,0)/S.length):0,C=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],N=S.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(O=>O.length>2&&!C.includes(O)),j={};N.forEach(O=>{j[O]=(j[O]||0)+1});const Q=Object.entries(j).sort(([,O],[,F])=>F-O).slice(0,5).map(([O,F])=>({word:O,count:F})),T=E.map(O=>O.handle||"").filter(O=>O.length>0),B=T.length>0?Math.round(T.reduce((O,F)=>O+F.length,0)/T.length):0,J=T.map(O=>{const F=O.split(".");return F.length>1?F[F.length-1]:null}).filter(O=>O&&O.length>0),$={};J.forEach(O=>{$[O]=($[O]||0)+1});const ae=Object.entries($).sort(([,O],[,F])=>F-O).slice(0,3).map(([O,F])=>({domain:O,count:F})),X=(z=r.selectedList)==null?void 0:z.createdAt,v=X?Math.floor((Date.now()-new Date(X).getTime())/(1e3*60*60*24)):0,h=v>0?Math.round(I/v):0,H=Math.min(25,E.length);t(0,l={totalMembers:I,recentAdditions:H,verifiedAccounts:K,accountsWithAvatars:R,accountsWithBios:P,avgBioLength:U,mostCommonWords:Q,listAge:v,accountsWithDisplayNames:D,avgHandleLength:B,topDomains:ae,growthRate:h})}function L(){o||(f=!1,_())}const x=()=>{var I,K,R;const E=(I=r.selectedList)==null?void 0:I.uri;if(E){const P=E.split("/"),D=P[P.length-1],S=`https://bsky.app/profile/${(K=n.session)==null?void 0:K.handle}/lists/${D}`;window.open(S,"_blank")}else window.open(`https://bsky.app/profile/${(R=n.session)==null?void 0:R.handle}/lists`,"_blank")};return s.$$.update=()=>{var E,I;s.$$.dirty&4&&r.selectedList&&g(),s.$$.dirty&7&&((E=r.selectedList)==null?void 0:E.listItemCount)!==l.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(I=r.selectedList)==null?void 0:I.listItemCount),console.log("Current stats.totalMembers:",l.totalMembers),g()),s.$$.dirty&132&&!r.selectedList&&p!==null&&(t(7,p=null),f=!1,b()),s.$$.dirty&134&&r.selectedList&&r.selectedList.uri!==p&&!o&&(t(7,p=r.selectedList.uri),f=!1,b(),_())},[l,o,r,u,d,n,L,p,x]}class wo extends De{constructor(e){super(),Oe(this,e,_o,vo,Ee,{})}}function Zr(s,e,t){const r=s.slice();return r[29]=e[t],r}function Xr(s,e,t){const r=s.slice();return r[35]=e[t],r}function Qr(s,e,t){const r=s.slice();return r[32]=e[t],r}function en(s,e,t){const r=s.slice();return r[38]=e[t],r}function tn(s,e,t){const r=s.slice();return r[38]=e[t],r}function sn(s){let e,t,r,n,l,o,u=s[4].size+"",d,a,f,p;function b(y,L){return y[5]?ko:So}let g=b(s),_=g(s);return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("button"),_.c(),l=w(),o=m("div"),d=k(u),a=k(" profiles selected"),n.disabled=s[5],c(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),c(r,"class","flex items-center gap-3"),c(o,"class","text-sm text-slate-600"),c(t,"class","flex items-center justify-between"),c(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm"),c(e,"id","action-bar")},m(y,L){A(y,e,L),i(e,t),i(t,r),i(r,n),_.m(n,null),i(t,l),i(t,o),i(o,d),i(o,a),f||(p=ie(n,"click",s[14]),f=!0)},p(y,L){g===(g=b(y))&&_?_.p(y,L):(_.d(1),_=g(y),_&&(_.c(),_.m(n,null))),L[0]&32&&(n.disabled=y[5]),L[0]&16&&u!==(u=y[4].size+"")&&q(d,u)},d(y){y&&M(e),_.d(),f=!1,p()}}}function So(s){let e,t=s[4].size+"",r,n;return{c(){e=k("Add "),r=k(t),n=k(" to List")},m(l,o){A(l,e,o),A(l,r,o),A(l,n,o)},p(l,o){o[0]&16&&t!==(t=l[4].size+"")&&q(r,t)},d(l){l&&(M(e),M(r),M(n))}}}function ko(s){let e,t;return{c(){e=m("span"),t=k(`
							Adding...`),c(e,"class","loading-spinner mr-2 svelte-qhxb3n")},m(r,n){A(r,e,n),A(r,t,n)},p:re,d(r){r&&(M(e),M(t))}}}function rn(s){let e,t,r,n=s[6].success.length+"",l,o;return{c(){e=m("div"),t=m("p"),r=k("✅ Successfully added "),l=k(n),o=k(" profiles to your list!"),c(t,"class","text-green-700 font-medium"),c(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(u,d){A(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&64&&n!==(n=u[6].success.length+"")&&q(l,n)},d(u){u&&M(e)}}}function nn(s){let e,t,r,n=s[6].errors.length+"",l,o,u,d,a=he(s[6].errors),f=[];for(let p=0;p<a.length;p+=1)f[p]=ln(tn(s,a,p));return{c(){e=m("div"),t=m("p"),r=k("❌ Failed to add "),l=k(n),o=k(" profiles:"),u=w(),d=m("ul");for(let p=0;p<f.length;p+=1)f[p].c();c(t,"class","text-red-700 font-medium mb-2"),c(d,"class","text-red-600 text-sm space-y-1"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(d,null)},p(p,b){if(b[0]&64&&n!==(n=p[6].errors.length+"")&&q(l,n),b[0]&64){a=he(p[6].errors);let g;for(g=0;g<a.length;g+=1){const _=tn(p,a,g);f[g]?f[g].p(_,b):(f[g]=ln(_),f[g].c(),f[g].m(d,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},d(p){p&&M(e),Ve(f,p)}}}function ln(s){let e,t,r=s[38].error+"",n;return{c(){e=m("li"),t=k("• "),n=k(r)},m(l,o){A(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&64&&r!==(r=l[38].error+"")&&q(n,r)},d(l){l&&M(e)}}}function on(s){let e,t,r,n=s[7].success.length+"",l,o;return{c(){e=m("div"),t=m("p"),r=k("🗑️ Successfully removed "),l=k(n),o=k(" profiles from your list!"),c(t,"class","text-blue-700 font-medium"),c(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(u,d){A(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&128&&n!==(n=u[7].success.length+"")&&q(l,n)},d(u){u&&M(e)}}}function an(s){let e,t,r,n=s[7].errors.length+"",l,o,u,d,a=he(s[7].errors),f=[];for(let p=0;p<a.length;p+=1)f[p]=cn(en(s,a,p));return{c(){e=m("div"),t=m("p"),r=k("❌ Failed to remove "),l=k(n),o=k(" profiles:"),u=w(),d=m("ul");for(let p=0;p<f.length;p+=1)f[p].c();c(t,"class","text-red-700 font-medium mb-2"),c(d,"class","text-red-600 text-sm space-y-1"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(d,null)},p(p,b){if(b[0]&128&&n!==(n=p[7].errors.length+"")&&q(l,n),b[0]&128){a=he(p[7].errors);let g;for(g=0;g<a.length;g+=1){const _=en(p,a,g);f[g]?f[g].p(_,b):(f[g]=cn(_),f[g].c(),f[g].m(d,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},d(p){p&&M(e),Ve(f,p)}}}function cn(s){let e,t,r=s[38].error+"",n;return{c(){e=m("li"),t=k("• "),n=k(r)},m(l,o){A(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&128&&r!==(r=l[38].error+"")&&q(n,r)},d(l){l&&M(e)}}}function Lo(s){let e,t,r;function n(d,a){return d[9]?Po:d[1].listMemberProfiles.length>0?Ao:Eo}let l=n(s),o=l(s),u=s[10]>1&&pn(s);return{c(){e=m("div"),t=m("div"),o.c(),r=w(),u&&u.c(),c(t,"class","space-y-4 flex-1 overflow-y-auto"),c(e,"class","flex flex-col flex-1")},m(d,a){A(d,e,a),i(e,t),o.m(t,null),i(e,r),u&&u.m(e,null)},p(d,a){l===(l=n(d))&&o?o.p(d,a):(o.d(1),o=l(d),o&&(o.c(),o.m(t,null))),d[10]>1?u?u.p(d,a):(u=pn(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&M(e),o.d(),u&&u.d()}}}function Co(s){let e;return{c(){e=m("div"),e.innerHTML='<div><div class="text-4xl mb-4">🦋</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">This list is brand new</h3> <p class="text-slate-600">Use the search on the right to find profiles and start building your list.</p></div>',c(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function xo(s){let e,t,r,n,l,o,u,d;return{c(){e=m("div"),t=m("div"),r=m("p"),n=k(s[3]),l=w(),o=m("button"),o.textContent="Try again",c(r,"class","text-red-700 mb-4"),c(o,"class","text-red-600 hover:text-red-800 underline"),c(t,"class","text-center"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(a,f){A(a,e,f),i(e,t),i(t,r),i(r,n),i(t,l),i(t,o),u||(d=ie(o,"click",s[12]),u=!0)},p(a,f){f[0]&8&&q(n,a[3])},d(a){a&&M(e),u=!1,d()}}}function Mo(s){let e;return{c(){e=m("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-qhxb3n"></div> <p class="text-slate-600">Loading list members...</p></div>',c(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){A(t,e,r)},p:re,d(t){t&&M(e)}}}function Eo(s){let e,t,r=s[3]&&un(s),n=he(s[1].listMembers.slice(0,100)),l=[];for(let o=0;o<n.length;o+=1)l[o]=dn(Xr(s,n,o));return{c(){r&&r.c(),e=w();for(let o=0;o<l.length;o+=1)l[o].c();t=st()},m(o,u){r&&r.m(o,u),A(o,e,u);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(o,u);A(o,t,u)},p(o,u){if(o[3]?r?r.p(o,u):(r=un(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0]&2){n=he(o[1].listMembers.slice(0,100));let d;for(d=0;d<n.length;d+=1){const a=Xr(o,n,d);l[d]?l[d].p(a,u):(l[d]=dn(a),l[d].c(),l[d].m(t.parentNode,t))}for(;d<l.length;d+=1)l[d].d(1);l.length=n.length}},d(o){o&&(M(e),M(t)),r&&r.d(o),Ve(l,o)}}}function Ao(s){let e,t=he(s[1].listMemberProfiles),r=[];for(let n=0;n<t.length;n+=1)r[n]=mn(Qr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);A(n,e,l)},p(n,l){if(l[0]&34818){t=he(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const u=Qr(n,t,o);r[o]?r[o].p(u,l):(r[o]=mn(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&M(e),Ve(r,n)}}}function Po(s){let e,t,r,n,l,o,u;return{c(){e=m("div"),t=m("div"),r=w(),n=m("p"),l=k("Loading page "),o=k(s[8]),u=k("..."),c(t,"class","loading-spinner mx-auto mb-4 svelte-qhxb3n"),c(n,"class","text-slate-600"),c(e,"class","text-center py-8")},m(d,a){A(d,e,a),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u)},p(d,a){a[0]&256&&q(o,d[8])},d(d){d&&M(e)}}}function un(s){let e,t,r,n,l,o,u,d,a,f,p;return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("p"),n.textContent="⚠️ Profile loading issue",l=w(),o=m("p"),u=k(s[3]),d=w(),a=m("button"),a.textContent="Retry",c(n,"class","text-yellow-800 font-medium"),c(o,"class","text-yellow-700 text-sm mt-1"),c(a,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),c(t,"class","flex items-center justify-between"),c(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(b,g){A(b,e,g),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(o,u),i(t,d),i(t,a),f||(p=ie(a,"click",s[23]),f=!0)},p(b,g){g[0]&8&&q(u,b[3])},d(b){b&&M(e),f=!1,p()}}}function dn(s){let e,t,r,n,l,o,u=s[35]+"",d,a,f,p;return{c(){e=m("div"),t=m("div"),r=m("div"),r.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=w(),l=m("div"),o=m("div"),d=k(u),a=w(),f=m("div"),f.textContent="Member of list",p=w(),c(r,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),c(o,"class","text-sm text-gray-600 font-mono break-all"),c(f,"class","text-xs text-gray-500"),c(l,"class","flex-1"),c(t,"class","flex items-center space-x-3"),c(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(b,g){A(b,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(o,d),i(l,a),i(l,f),i(e,p)},p(b,g){g[0]&2&&u!==(u=b[35]+"")&&q(d,u)},d(b){b&&M(e)}}}function fn(s){let e,t=s[32].description+"",r;return{c(){e=m("p"),r=k(t),c(e,"class","text-xs text-gray-600 line-clamp-2 svelte-qhxb3n")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l[0]&2&&t!==(t=n[32].description+"")&&q(r,t)},d(n){n&&M(e)}}}function To(s){let e;return{c(){e=k("🗑️ Remove")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Io(s){let e,t;return{c(){e=m("span"),t=k(`
														Removing...`),c(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(M(e),M(t))}}}function mn(s){let e,t,r,n,l,o,u,d,a,f,p,b,g=(s[32].displayName||s[32].handle)+"",_,y,L,x,E=s[32].handle+"",I,K,R,P,D,S,U,C,N,j,Q,T,B,J,$=s[32].description&&fn(s);function ae(H,z){return z[0]&2&&(j=null),j==null&&(j=!!H[11].has(H[32].did)),j?Io:To}let X=ae(s,[-1,-1]),v=X(s);function h(){return s[22](s[32])}return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("img"),d=w(),a=m("div"),f=m("a"),p=m("div"),b=m("h4"),_=k(g),y=w(),L=m("span"),x=k("@"),I=k(E),K=w(),R=vs("svg"),P=vs("path"),D=w(),$&&$.c(),U=w(),C=m("div"),N=m("button"),v.c(),T=w(),tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)||c(n,"src",l),c(n,"alt",o=s[32].displayName||s[32].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(b,"class","text-sm font-semibold text-gray-900 truncate"),c(L,"class","text-xs text-gray-600 truncate"),c(P,"stroke-linecap","round"),c(P,"stroke-linejoin","round"),c(P,"stroke-width","2"),c(P,"d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"),c(R,"class","w-3 h-3 text-gray-400"),c(R,"fill","none"),c(R,"stroke","currentColor"),c(R,"viewBox","0 0 24 24"),c(p,"class","flex items-center space-x-2 mb-1"),c(f,"href",S="https://bsky.app/profile/"+s[32].handle),c(f,"target","_blank"),c(f,"rel","noopener noreferrer"),c(f,"class","block hover:underline"),c(a,"class","flex-1 min-w-0"),N.disabled=Q=s[11].has(s[32].did),c(N,"class","bg-red-100 hover:bg-red-200 text-red-700 border border-red-300 px-3 py-1.5 rounded text-xs font-medium cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"),c(N,"title","Remove from list"),c(C,"class","flex-shrink-0"),c(t,"class","flex items-center space-x-3"),c(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200")},m(H,z){A(H,e,z),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,f),i(f,p),i(p,b),i(b,_),i(p,y),i(p,L),i(L,x),i(L,I),i(p,K),i(p,R),i(R,P),i(f,D),$&&$.m(f,null),i(t,U),i(t,C),i(C,N),v.m(N,null),i(e,T),B||(J=ie(N,"click",h),B=!0)},p(H,z){s=H,z[0]&2&&!tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)&&c(n,"src",l),z[0]&2&&o!==(o=s[32].displayName||s[32].handle)&&c(n,"alt",o),z[0]&2&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),z[0]&2&&g!==(g=(s[32].displayName||s[32].handle)+"")&&q(_,g),z[0]&2&&E!==(E=s[32].handle+"")&&q(I,E),s[32].description?$?$.p(s,z):($=fn(s),$.c(),$.m(f,null)):$&&($.d(1),$=null),z[0]&2&&S!==(S="https://bsky.app/profile/"+s[32].handle)&&c(f,"href",S),X!==(X=ae(s,z))&&(v.d(1),v=X(s),v&&(v.c(),v.m(N,null))),z[0]&2&&Q!==(Q=s[11].has(s[32].did))&&(N.disabled=Q)},d(H){H&&M(e),$&&$.d(),v.d(),B=!1,J()}}}function pn(s){let e,t,r,n,l,o,u,d,a,f,p,b,g,_,y,L,x,E,I,K,R,P,D,S=s[9]&&s[8]>1&&hn(),U=he(Array.from({length:Math.min(5,s[10])},s[24])),C=[];for(let j=0;j<U.length;j+=1)C[j]=gn(Zr(s,U,j));let N=s[9]&&s[8]<s[10]&&bn();return{c(){e=m("div"),t=m("div"),r=m("div"),n=k("Page "),l=k(s[8]),o=k(" of "),u=k(s[10]),d=k(" ("),a=k(s[0]),f=k(" total members)"),p=w(),b=m("div"),g=m("button"),S&&S.c(),_=k(`
											Previous`),L=w(),x=m("div");for(let j=0;j<C.length;j+=1)C[j].c();E=w(),I=m("button"),K=k(`Next
											`),N&&N.c(),c(r,"class","text-sm text-gray-600"),g.disabled=y=s[8]===1||s[9],c(g,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),c(x,"class","flex items-center space-x-1"),I.disabled=R=s[8]===s[10]||s[9],c(I,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),c(b,"class","flex items-center space-x-2"),c(t,"class","flex items-center justify-between"),c(e,"class","mt-6 pt-4 border-t border-gray-200")},m(j,Q){A(j,e,Q),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(r,u),i(r,d),i(r,a),i(r,f),i(t,p),i(t,b),i(b,g),S&&S.m(g,null),i(g,_),i(b,L),i(b,x);for(let T=0;T<C.length;T+=1)C[T]&&C[T].m(x,null);i(b,E),i(b,I),i(I,K),N&&N.m(I,null),P||(D=[ie(g,"click",s[18]),ie(I,"click",s[17])],P=!0)},p(j,Q){if(Q[0]&256&&q(l,j[8]),Q[0]&1024&&q(u,j[10]),Q[0]&1&&q(a,j[0]),j[9]&&j[8]>1?S||(S=hn(),S.c(),S.m(g,_)):S&&(S.d(1),S=null),Q[0]&768&&y!==(y=j[8]===1||j[9])&&(g.disabled=y),Q[0]&67328){U=he(Array.from({length:Math.min(5,j[10])},j[24]));let T;for(T=0;T<U.length;T+=1){const B=Zr(j,U,T);C[T]?C[T].p(B,Q):(C[T]=gn(B),C[T].c(),C[T].m(x,null))}for(;T<C.length;T+=1)C[T].d(1);C.length=U.length}j[9]&&j[8]<j[10]?N||(N=bn(),N.c(),N.m(I,null)):N&&(N.d(1),N=null),Q[0]&1792&&R!==(R=j[8]===j[10]||j[9])&&(I.disabled=R)},d(j){j&&M(e),S&&S.d(),Ve(C,j),N&&N.d(),P=!1,Me(D)}}}function hn(s){let e;return{c(){e=m("span"),c(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function gn(s){let e,t=s[29]+"",r,n,l,o,u;function d(){return s[25](s[29])}return{c(){e=m("button"),r=k(t),n=w(),e.disabled=s[9],c(e,"class",l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(a,f){A(a,e,f),i(e,r),i(e,n),o||(u=ie(e,"click",d),o=!0)},p(a,f){s=a,f[0]&1280&&t!==(t=s[29]+"")&&q(r,t),f[0]&512&&(e.disabled=s[9]),f[0]&1280&&l!==(l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&c(e,"class",l)},d(a){a&&M(e),o=!1,u()}}}function bn(s){let e;return{c(){e=m("span"),c(e,"class","loading-spinner ml-1 svelte-qhxb3n")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Ro(s){let e,t,r,n,l,o,u,d,a,f,p,b,g,_,y,L=(s[9]?"...":s[1].listMemberProfiles.length)+"",x,E,I,K,R,P,D,S,U,C,N=s[1].listMemberProfiles.length+"",j,Q,T=s[1].listMembers.length+"",B,J,$,ae,X,v;t=new wo({});let h=s[4].size>0&&sn(s),H=s[6].success.length>0&&rn(s),z=s[6].errors.length>0&&nn(s),O=s[7].success.length>0&&on(s),F=s[7].errors.length>0&&an(s);function Y(W,V){return W[2]?Mo:W[3]?xo:W[1].listMembers.length===0?Co:Lo}let G=Y(s),Z=G(s);return X=new fo({}),{c(){e=m("div"),Re(t.$$.fragment),r=w(),h&&h.c(),n=w(),H&&H.c(),l=w(),z&&z.c(),o=w(),O&&O.c(),u=w(),F&&F.c(),d=w(),a=m("div"),f=m("div"),p=m("div"),b=m("h3"),b.textContent="Latest list members",g=w(),_=m("p"),y=k("Showing "),x=k(L),E=k(" of "),I=k(s[0]),K=k(`
					total members`),R=w(),P=m("div"),D=m("div"),S=k("Debug: isLoadingMembers="),U=k(s[2]),C=k(", profiles="),j=k(N),Q=k(", members="),B=k(T),J=w(),Z.c(),$=w(),ae=m("div"),Re(X.$$.fragment),c(b,"class","text-lg font-semibold text-slate-800 mb-2"),c(_,"class","text-sm text-slate-600"),c(p,"class","p-6 border-b border-gray-200"),c(D,"class","text-xs text-gray-500 mb-2"),c(P,"class","p-6 flex flex-col flex-1"),c(f,"id","list-members-container"),c(f,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),c(a,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),c(a,"id","list-manager-layout"),c(e,"class","space-y-6 relative z-100"),c(e,"id","list-manager")},m(W,V){A(W,e,V),Ce(t,e,null),i(e,r),h&&h.m(e,null),i(e,n),H&&H.m(e,null),i(e,l),z&&z.m(e,null),i(e,o),O&&O.m(e,null),i(e,u),F&&F.m(e,null),i(e,d),i(e,a),i(a,f),i(f,p),i(p,b),i(p,g),i(p,_),i(_,y),i(_,x),i(_,E),i(_,I),i(_,K),i(f,R),i(f,P),i(P,D),i(D,S),i(D,U),i(D,C),i(D,j),i(D,Q),i(D,B),i(P,J),Z.m(P,null),i(a,$),i(a,ae),Ce(X,ae,null),v=!0},p(W,V){W[4].size>0?h?h.p(W,V):(h=sn(W),h.c(),h.m(e,n)):h&&(h.d(1),h=null),W[6].success.length>0?H?H.p(W,V):(H=rn(W),H.c(),H.m(e,l)):H&&(H.d(1),H=null),W[6].errors.length>0?z?z.p(W,V):(z=nn(W),z.c(),z.m(e,o)):z&&(z.d(1),z=null),W[7].success.length>0?O?O.p(W,V):(O=on(W),O.c(),O.m(e,u)):O&&(O.d(1),O=null),W[7].errors.length>0?F?F.p(W,V):(F=an(W),F.c(),F.m(e,d)):F&&(F.d(1),F=null),(!v||V[0]&514)&&L!==(L=(W[9]?"...":W[1].listMemberProfiles.length)+"")&&q(x,L),(!v||V[0]&1)&&q(I,W[0]),(!v||V[0]&4)&&q(U,W[2]),(!v||V[0]&2)&&N!==(N=W[1].listMemberProfiles.length+"")&&q(j,N),(!v||V[0]&2)&&T!==(T=W[1].listMembers.length+"")&&q(B,T),G===(G=Y(W))&&Z?Z.p(W,V):(Z.d(1),Z=G(W),Z&&(Z.c(),Z.m(P,null)))},i(W){v||(ce(t.$$.fragment,W),ce(X.$$.fragment,W),v=!0)},o(W){ue(t.$$.fragment,W),ue(X.$$.fragment,W),v=!1},d(W){W&&M(e),xe(t),h&&h.d(),H&&H.d(),z&&z.d(),O&&O.d(),F&&F.d(),Z.d(),xe(X)}}}const ps=25;function Oo(s,e,t){let r,n;Ie(s,me,T=>t(1,r=T)),Ie(s,je,T=>t(21,n=T));let l=!1,o="",u=new Set,d=!1,a={success:[],errors:[]},f=new Set,p={success:[],errors:[]},b=1,g=!1,_=!1,y=0,L=new Map,x=0,E=null;async function I(){if(!(!r.selectedList||!n.session||_)){t(19,_=!0),t(2,l=!0),t(3,o=""),t(8,b=1),L.clear();try{const T=await Le.getListInfo(n.session,r.selectedList.uri,n.authType),B={...r.selectedList,name:T.name,description:T.description,createdAt:T.createdAt,listItemCount:T.listItemCount};me.setSelectedList(B),t(0,x=T.listItemCount||0),t(10,y=Math.ceil(x/ps)),console.log("Total pages:",y,"Total count:",x),await K(1),me.setListLoading(!1)}catch(T){console.error("Error loading list members:",T),t(3,o=T.message||"Failed to load list members"),me.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,l=!1),t(19,_=!1),console.log("Final state - isLoadingMembers:",l,"isCurrentlyLoadingMembers:",_)}}}async function K(T){if(!(!n.session||!r.selectedList)){t(9,g=!0),t(8,b=T);try{let B=L.get(T-1);const J=await Le.getListMembers(n.session,r.selectedList.uri,n.authType,ps,B);console.log(`Fetched ${J.members.length} members for page ${T}`),console.log("Members received:",J.members),J.cursor&&L.set(T,J.cursor),J.members.length===0?x===0?t(3,o=""):(console.warn("No members returned from API for page",T),t(3,o="We couldn’t load members right now.")):t(3,o="");const $=J.profiles||[];console.log(`Using ${$.length} profiles from API response for page ${T}`),console.log("Setting profiles in store:",$.length),me.setListMembers(J.members),me.setListMemberProfiles($),console.log("Profiles set in store, current count:",r.listMemberProfiles.length)}catch(B){console.error("Error loading members page:",B),t(3,o=B.message||"Failed to load page"),me.setListMemberProfiles([])}finally{t(9,g=!1)}}}async function R(){if(u.size===0)return;t(5,d=!0),t(6,a={success:[],errors:[]});const T=Array.from(u);for(const B of T)try{await Le.addToList(n.session,B,r.selectedList.uri,n.authType),a.success.push(B),await me.fetchAndAddProfile(n.session,B,n.authType)}catch(J){a.errors.push({did:B,error:J.message})}u.clear(),t(4,u),t(5,d=!1)}async function P(T){if(!(!T||!r.selectedList||!n.session)){f.add(T);try{await Le.removeFromList(n.session,T,r.selectedList.uri,n.authType),p.success.push(T);const B=r.listMemberProfiles.filter(ae=>ae.did!==T);me.setListMemberProfiles(B);const J=r.listMembers.filter(ae=>ae!==T);me.setListMembers(J),t(0,x=Math.max(0,x-1)),t(10,y=Math.ceil(x/ps));const $=r.userLists.map(ae=>ae.uri===r.selectedList.uri?{...ae,memberCount:Math.max(0,(ae.memberCount||0)-1)}:ae);me.setUserLists($)}catch(B){console.error("Failed to remove profile from list:",B),p.errors.push({profileDid:T,error:B.message})}finally{f.delete(T),setTimeout(()=>{t(7,p={success:[],errors:[]})},5e3)}}}async function D(T){T>=1&&T<=y&&await K(T)}async function S(){b<y&&await K(b+1)}async function U(){b>1&&await K(b-1)}const C=T=>P(T.did),N=()=>K(b),j=(T,B)=>{let J;return y<=5||b<=3?J=B+1:b>=y-2?J=y-4+B:J=b-2+B,J},Q=T=>D(T);return s.$$.update=()=>{var T,B,J;s.$$.dirty[0]&2&&r.refreshTrigger&&I(),s.$$.dirty[0]&2&&console.log("Profile count changed:",r.listMemberProfiles.length),s.$$.dirty[0]&3&&((T=r.selectedList)==null?void 0:T.listItemCount)!==x&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(B=r.selectedList)==null?void 0:B.listItemCount),console.log("Current totalMemberCount:",x),t(0,x=((J=r.selectedList)==null?void 0:J.listItemCount)||0),t(10,y=Math.ceil(x/ps))),s.$$.dirty[0]&3670018&&r.selectedList&&n.session&&!_&&E!==r.selectedList.uri&&(console.log("List changed, loading members for:",r.selectedList.name),t(20,E=r.selectedList.uri),I())},[x,r,l,o,u,d,a,p,b,g,y,f,I,K,R,P,D,S,U,_,E,n,C,N,j,Q]}class Do extends De{constructor(e){super(),Oe(this,e,Oo,Ro,Ee,{},null,[-1,-1])}}function yn(s){let e,t,r,n,l,o,u,d;return{c(){e=m("div"),t=m("div"),r=m("div"),n=w(),l=m("h3"),l.textContent="Getting Ready",o=w(),u=m("p"),d=k(s[1]),c(r,"class","loading-spinner mx-auto mb-4 svelte-847qwb"),c(l,"class","text-lg font-semibold text-slate-800 mb-2"),c(u,"class","text-slate-600"),c(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),c(t,"id","loading-overlay-content"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"),c(e,"id","loading-overlay")},m(a,f){A(a,e,f),i(e,t),i(t,r),i(t,n),i(t,l),i(t,o),i(t,u),i(u,d)},p(a,f){f&2&&q(d,a[1])},d(a){a&&M(e)}}}function Ko(s){let e,t=s[0]&&yn(s);return{c(){t&&t.c(),e=st()},m(r,n){t&&t.m(r,n),A(r,e,n)},p(r,[n]){r[0]?t?t.p(r,n):(t=yn(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:re,o:re,d(r){r&&M(e),t&&t.d(r)}}}function No(s,e,t){let{isLoading:r=!1}=e,{message:n="Loading list data..."}=e;return s.$$set=l=>{"isLoading"in l&&t(0,r=l.isLoading),"message"in l&&t(1,n=l.message)},[r,n]}class Bo extends De{constructor(e){super(),Oe(this,e,No,Ko,Ee,{isLoading:0,message:1})}}function vn(s,e,t){const r=s.slice();return r[8]=e[t],r}function _n(s,e){let t,r,n;return{key:s,first:null,c(){t=m("div"),r=vs("svg"),n=vs("path"),c(n,"d","m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"),c(n,"fill","#1185fe"),c(n,"opacity","0.4"),c(r,"width","100%"),c(r,"height","100%"),c(r,"viewBox","0 0 600 530"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(r,"class","butterfly-svg svelte-1l7ozht"),c(t,"class","butterfly svelte-1l7ozht"),de(t,"left",e[8].x+"%"),de(t,"top",e[8].y+"%"),de(t,"width",e[8].size+"px"),de(t,"height",e[8].size+"px"),de(t,"animation-duration",e[8].speed+"s"),de(t,"animation-delay",e[8].delay+"s"),de(t,"transform","rotate("+e[8].rotation+"deg)"),de(t,"opacity",.6+Math.random()*.4),this.first=t},m(l,o){A(l,t,o),i(t,r),i(r,n)},p(l,o){e=l,o&1&&de(t,"left",e[8].x+"%"),o&1&&de(t,"top",e[8].y+"%"),o&1&&de(t,"width",e[8].size+"px"),o&1&&de(t,"height",e[8].size+"px"),o&1&&de(t,"animation-duration",e[8].speed+"s"),o&1&&de(t,"animation-delay",e[8].delay+"s"),o&1&&de(t,"transform","rotate("+e[8].rotation+"deg)")},d(l){l&&M(t)}}}function wn(s){let e;return{c(){e=m("div"),e.innerHTML='<div class="message-content svelte-1l7ozht" id="empty-list-content"><svg width="60" height="53" viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg" class="svelte-1l7ozht"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe" opacity="0.3"></path></svg> <p class="svelte-1l7ozht">Add members to your list to see butterflies flutter by!</p></div>',c(e,"class","empty-list-message svelte-1l7ozht"),c(e,"id","empty-list-message")},m(t,r){A(t,e,r)},d(t){t&&M(e)}}}function Uo(s){let e,t=[],r=new Map,n,l=he(s[0]);const o=d=>d[8].id;for(let d=0;d<l.length;d+=1){let a=vn(s,l,d),f=o(a);r.set(f,t[d]=_n(f,a))}let u=s[2].selectedList&&s[1]===0&&wn();return{c(){e=m("div");for(let d=0;d<t.length;d+=1)t[d].c();n=w(),u&&u.c(),c(e,"class","butterfly-background svelte-1l7ozht"),c(e,"id","butterfly-background")},m(d,a){A(d,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);i(e,n),u&&u.m(e,null),s[5](e)},p(d,[a]){a&1&&(l=he(d[0]),t=nl(t,a,o,1,d,l,r,e,rl,_n,n,vn)),d[2].selectedList&&d[1]===0?u||(u=wn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:re,o:re,d(d){d&&M(e);for(let a=0;a<t.length;a+=1)t[a].d();u&&u.d(),s[5](null)}}}function Wo(s,e,t){let r,n,l;Ie(s,me,p=>t(2,l=p));let o,u=[];const d={baseCount:12,maxCount:50,minSize:20,maxSize:45,minSpeed:15,maxSpeed:45,minDelay:0,maxDelay:15};Ls(()=>{a()});function a(){t(0,u=[]);for(let p=0;p<n;p++)u.push({id:p,x:Math.random()*100,y:Math.random()*100,size:Math.random()*(d.maxSize-d.minSize)+d.minSize,speed:Math.random()*(d.maxSpeed-d.minSpeed)+d.minSpeed,delay:Math.random()*(d.maxDelay-d.minDelay)+d.minDelay,rotation:Math.random()*60-30,rotationSpeed:(Math.random()-.5)*2,floatingDirection:Math.random()*360,floatingSpeed:Math.random()*.5+.1})}function f(p){_s[p?"unshift":"push"](()=>{o=p,t(3,o)})}return s.$$.update=()=>{var p;s.$$.dirty&4&&t(1,r=((p=l.selectedList)==null?void 0:p.listItemCount)||0),s.$$.dirty&6&&t(4,n=l.selectedList?Math.min(d.maxCount,Math.max(d.baseCount,Math.floor(r/2))):d.baseCount),s.$$.dirty&17&&n!==u.length&&a()},[u,r,l,o,n,f]}class Ho extends De{constructor(e){super(),Oe(this,e,Wo,Uo,Ee,{})}}function Sn(s){let e,t;return e=new pi({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function zo(s){let e,t;return e=new Do({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Fo(s){let e,t;return e=new Ki({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function jo(s){let e,t;return e=new Ti({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Jo(s){let e,t,r,n,l,o,u,d,a,f;t=new Ho({});let p=s[1]!=="auth"&&Sn();const b=[jo,Fo,zo],g=[];function _(y,L){return y[1]==="auth"?0:y[1]==="list-selector"?1:y[1]==="manager"?2:-1}return~(o=_(s))&&(u=g[o]=b[o](s)),a=new Bo({props:{isLoading:s[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=m("main"),Re(t.$$.fragment),r=w(),p&&p.c(),n=w(),l=m("div"),u&&u.c(),d=w(),Re(a.$$.fragment),c(l,"class","max-w-6xl mx-auto p-6"),c(l,"id","app-content"),c(e,"class","min-h-screen bg-gray-50"),c(e,"id","app-main")},m(y,L){A(y,e,L),Ce(t,e,null),i(e,r),p&&p.m(e,null),i(e,n),i(e,l),~o&&g[o].m(l,null),i(e,d),Ce(a,e,null),f=!0},p(y,[L]){y[1]!=="auth"?p?L&2&&ce(p,1):(p=Sn(),p.c(),ce(p,1),p.m(e,n)):p&&(ft(),ue(p,1,1,()=>{p=null}),mt());let x=o;o=_(y),o!==x&&(u&&(ft(),ue(g[x],1,1,()=>{g[x]=null}),mt()),~o?(u=g[o],u||(u=g[o]=b[o](y),u.c()),ce(u,1),u.m(l,null)):u=null);const E={};L&1&&(E.isLoading=y[0].isLoadingList),a.$set(E)},i(y){f||(ce(t.$$.fragment,y),ce(p),ce(u),ce(a.$$.fragment,y),f=!0)},o(y){ue(t.$$.fragment,y),ue(p),ue(u),ue(a.$$.fragment,y),f=!1},d(y){y&&M(e),xe(t),p&&p.d(),~o&&g[o].d(),xe(a)}}}function qo(s,e,t){let r,n;Ie(s,me,o=>t(0,r=o)),Ie(s,je,o=>t(2,n=o));let l="auth";return Ls(async()=>{const{session:o,authType:u}=await je.initializeSession();o&&(console.log("Session restored:",{authType:u,handle:o.handle||o.did}),t(1,l="list-selector"))}),s.$$.update=()=>{s.$$.dirty&5&&(n.session?r.selectedList?t(1,l="manager"):t(1,l="list-selector"):t(1,l="auth"))},[r,l,n]}class Vo extends De{constructor(e){super(),Oe(this,e,qo,Jo,Ee,{})}}new Vo({target:document.getElementById("app")});
