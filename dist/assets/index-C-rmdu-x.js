var In=Object.defineProperty;var pr=s=>{throw TypeError(s)};var Rn=(s,e,t)=>e in s?In(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var On=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Oe=(s,e,t)=>Rn(s,typeof e!="symbol"?e+"":e,t),hr=(s,e,t)=>e.has(s)||pr("Cannot "+t);var Y=(s,e,t)=>(hr(s,e,"read from private field"),t?t.call(s):e.get(s)),Ze=(s,e,t)=>e.has(s)?pr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Qe=(s,e,t,r)=>(hr(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);var co=On((fo,$t)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function Q(){}function fn(s){return s()}function gr(){return Object.create(null)}function xe(s){s.forEach(fn)}function mn(s){return typeof s=="function"}function Ie(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let ms;function It(s,e){return s===e?!0:(ms||(ms=document.createElement("a")),ms.href=e,s===ms.href)}function Bn(s){return Object.keys(s).length===0}function Dn(s,...e){if(s==null){for(const r of e)r(void 0);return Q}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ee(s,e,t){s.$$.on_destroy.push(Dn(e,t))}function i(s,e){s.appendChild(e)}function x(s,e,t){s.insertBefore(e,t||null)}function C(s){s.parentNode&&s.parentNode.removeChild(s)}function et(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function f(s){return document.createElement(s)}function br(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function L(s){return document.createTextNode(s)}function w(){return L(" ")}function tt(){return L("")}function ee(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function pn(s){return function(e){return e.preventDefault(),s.call(this,e)}}function u(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Nn(s){let e;return{p(...t){e=t,e.forEach(r=>s.push(r))},r(){e.forEach(t=>s.splice(s.indexOf(t),1))}}}function Kn(s){return Array.from(s.childNodes)}function $(s,e){e=""+e,s.data!==e&&(s.data=e)}function Ce(s,e){s.value=e??""}function ge(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function yr(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}s.selectedIndex=-1}function Wn(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}let Jt;function Ft(s){Jt=s}function hn(){if(!Jt)throw new Error("Function called outside component initialization");return Jt}function Ns(s){hn().$$.on_mount.push(s)}function Un(){const s=hn();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const l=Wn(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,l)}),!l.defaultPrevented}return!0}}const Lt=[],Is=[];let Et=[];const vr=[],Hn=Promise.resolve();let Rs=!1;function zn(){Rs||(Rs=!0,Hn.then(gn))}function Os(s){Et.push(s)}const xs=new Set;let wt=0;function gn(){if(wt!==0)return;const s=Jt;do{try{for(;wt<Lt.length;){const e=Lt[wt];wt++,Ft(e),Fn(e.$$)}}catch(e){throw Lt.length=0,wt=0,e}for(Ft(null),Lt.length=0,wt=0;Is.length;)Is.pop()();for(let e=0;e<Et.length;e+=1){const t=Et[e];xs.has(t)||(xs.add(t),t())}Et.length=0}while(Lt.length);for(;vr.length;)vr.pop()();Rs=!1,xs.clear(),Ft(s)}function Fn(s){if(s.fragment!==null){s.update(),xe(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Os)}}function Jn(s){const e=[],t=[];Et.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Et=e}const hs=new Set;let ct;function Rt(){ct={r:0,c:[],p:ct}}function Ot(){ct.r||xe(ct.c),ct=ct.p}function re(s,e){s&&s.i&&(hs.delete(s),s.i(e))}function ue(s,e,t,r){if(s&&s.o){if(hs.has(s))return;hs.add(s),ct.c.push(()=>{hs.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}function he(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function jn(s,e){s.d(1),e.delete(s.key)}function $n(s,e,t,r,n,l,o,a,d,c,m,p){let g=s.length,b=l.length,v=g;const _={};for(;v--;)_[s[v].key]=v;const R=[],K=new Map,A=new Map,W=[];for(v=b;v--;){const P=p(n,l,v),M=t(P);let B=o.get(M);B?W.push(()=>B.p(P,e)):(B=c(M,P),B.c()),K.set(M,R[v]=B),M in _&&A.set(M,Math.abs(v-_[M]))}const O=new Set,E=new Set;function k(P){re(P,1),P.m(a,m),o.set(P.key,P),m=P.first,b--}for(;g&&b;){const P=R[b-1],M=s[g-1],B=P.key,S=M.key;P===M?(m=P.first,g--,b--):K.has(S)?!o.has(B)||O.has(B)?k(P):E.has(S)?g--:A.get(B)>A.get(S)?(E.add(B),k(P)):(O.add(S),g--):(d(M,o),g--)}for(;g--;){const P=s[g];K.has(P.key)||d(P,o)}for(;b;)k(R[b-1]);return xe(W),R}function Be(s){s&&s.c()}function Pe(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Os(()=>{const l=s.$$.on_mount.map(fn).filter(mn);s.$$.on_destroy?s.$$.on_destroy.push(...l):xe(l),s.$$.on_mount=[]}),n.forEach(Os)}function Te(s,e){const t=s.$$;t.fragment!==null&&(Jn(t.after_update),xe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function qn(s,e){s.$$.dirty[0]===-1&&(Lt.push(s),zn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function De(s,e,t,r,n,l,o=null,a=[-1]){const d=Jt;Ft(s);const c=s.$$={fragment:null,ctx:[],props:l,update:Q,not_equal:n,bound:gr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:gr(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};o&&o(c.root);let m=!1;if(c.ctx=t?t(s,e.props||{},(p,g,...b)=>{const v=b.length?b[0]:g;return c.ctx&&n(c.ctx[p],c.ctx[p]=v)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](v),m&&qn(s,p)),g}):[],c.update(),m=!0,xe(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const p=Kn(e.target);c.fragment&&c.fragment.l(p),p.forEach(C)}else c.fragment&&c.fragment.c();e.intro&&re(s.$$.fragment),Pe(s,e.target,e.anchor),gn()}Ft(d)}class Ne{constructor(){Oe(this,"$$");Oe(this,"$$set")}$destroy(){Te(this,1),this.$destroy=Q}$on(e,t){if(!mn(t))return Q;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Bn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Vn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Vn);const St=[];function bn(s,e=Q){let t;const r=new Set;function n(a){if(Ie(s,a)&&(s=a,t)){const d=!St.length;for(const c of r)c[1](),St.push(c,s);if(d){for(let c=0;c<St.length;c+=2)St[c][0](St[c+1]);St.length=0}}}function l(a){n(a(s))}function o(a,d=Q){const c=[a,d];return r.add(c),r.size===1&&(t=e(n,l)||Q),a(s),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:n,update:l,subscribe:o}}const At=new TextEncoder,gs=new TextDecoder;function Yn(...s){const e=s.reduce((n,{length:l})=>n+l,0),t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function Gn(s){if(Uint8Array.prototype.toBase64)return s.toBase64();const e=32768,t=[];for(let r=0;r<s.length;r+=e)t.push(String.fromCharCode.apply(null,s.subarray(r,r+e)));return btoa(t.join(""))}function Zn(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(s);const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function yn(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof s=="string"?s:gs.decode(s),{alphabet:"base64url"});let e=s;e instanceof Uint8Array&&(e=gs.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Zn(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Ms(s){let e=s;return typeof e=="string"&&(e=At.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):Gn(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class vs extends Error{constructor(t,r){var n;super(t,r);Oe(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Oe(vs,"code","ERR_JOSE_GENERIC");class je extends vs{constructor(){super(...arguments);Oe(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Oe(je,"code","ERR_JOSE_NOT_SUPPORTED");class Ct extends vs{constructor(){super(...arguments);Oe(this,"code","ERR_JWS_INVALID")}}Oe(Ct,"code","ERR_JWS_INVALID");class vn extends vs{constructor(){super(...arguments);Oe(this,"code","ERR_JWT_INVALID")}}Oe(vn,"code","ERR_JWT_INVALID");function Je(s,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${s}`)}function Ht(s,e){return s.name===e}function As(s){return parseInt(s.name.slice(4),10)}function Qn(s){switch(s){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Xn(s,e){if(!s.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function el(s,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!Ht(s.algorithm,"HMAC"))throw Je("HMAC");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Ht(s.algorithm,"RSASSA-PKCS1-v1_5"))throw Je("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Ht(s.algorithm,"RSA-PSS"))throw Je("RSA-PSS");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!Ht(s.algorithm,"Ed25519"))throw Je("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!Ht(s.algorithm,"ECDSA"))throw Je("ECDSA");const r=Qn(e);if(s.algorithm.namedCurve!==r)throw Je(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Xn(s,t)}function _n(s,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const n=t.pop();s+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?s+=`one of type ${t[0]} or ${t[1]}.`:s+=`of type ${t[0]}.`;return e==null?s+=` Received ${e}`:typeof e=="function"&&e.name?s+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(s+=` Received an instance of ${e.constructor.name}`),s}const tl=(s,...e)=>_n("Key must be ",s,...e);function wn(s,e,...t){return _n(`Key for the ${s} algorithm must be `,e,...t)}function Sn(s){return(s==null?void 0:s[Symbol.toStringTag])==="CryptoKey"}function kn(s){return(s==null?void 0:s[Symbol.toStringTag])==="KeyObject"}const Ln=s=>Sn(s)||kn(s),sl=(...s)=>{const e=s.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const n=Object.keys(r);if(!t||t.size===0){t=new Set(n);continue}for(const l of n){if(t.has(l))return!1;t.add(l)}}return!0};function rl(s){return typeof s=="object"&&s!==null}const Ks=s=>{if(!rl(s)||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e},nl=(s,e)=>{if(s.startsWith("RS")||s.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${s} requires key modulusLength to be 2048 bits or larger`)}};function ll(s){let e,t;switch(s.kty){case"RSA":{switch(s.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.slice(-3),10)||1}`},t=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(s.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=s.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=s.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(s.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new je('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const Cn=async s=>{if(!s.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=ll(s),r={...s};return delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,s.ext??!s.d,s.key_ops??t)};async function il(s,e,t){if(!Ks(s))throw new TypeError("JWK must be an object");let r;switch(e??(e=s.alg),r??(r=s.ext),s.kty){case"oct":if(typeof s.k!="string"||!s.k)throw new TypeError('missing "k" (Key Value) Parameter value');return yn(s.k);case"RSA":if("oth"in s&&s.oth!==void 0)throw new je('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Cn({...s,alg:e,ext:r});default:throw new je('Unsupported "kty" (Key Type) Parameter value')}}const ol=(s,e,t,r,n)=>{if(n.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new s('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new s('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;t!==void 0?l=new Map([...Object.entries(t),...e.entries()]):l=e;for(const o of r.crit){if(!l.has(o))throw new je(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new s(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&r[o]===void 0)throw new s(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)};function Ws(s){return Ks(s)&&typeof s.kty=="string"}function al(s){return s.kty!=="oct"&&typeof s.d=="string"}function cl(s){return s.kty!=="oct"&&typeof s.d>"u"}function dl(s){return s.kty==="oct"&&typeof s.k=="string"}let Pt;const _r=async(s,e,t,r=!1)=>{Pt||(Pt=new WeakMap);let n=Pt.get(s);if(n!=null&&n[t])return n[t];const l=await Cn({...e,alg:t});return r&&Object.freeze(s),n?n[t]=l:Pt.set(s,{[t]:l}),l},ul=(s,e)=>{var o;Pt||(Pt=new WeakMap);let t=Pt.get(s);if(t!=null&&t[e])return t[e];const r=s.type==="public",n=!!r;let l;if(s.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}l=s.toCryptoKey(s.asymmetricKeyType,n,r?[]:["deriveBits"])}if(s.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");l=s.toCryptoKey(s.asymmetricKeyType,n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="rsa"){let a;switch(e){case"RSA-OAEP":a="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":a="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":a="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":a="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return s.toCryptoKey({name:"RSA-OAEP",hash:a},n,r?["encrypt"]:["decrypt"]);l=s.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:a},n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="ec"){const d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=s.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!d)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&d==="P-256"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES384"&&d==="P-384"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES512"&&d==="P-521"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(l=s.toCryptoKey({name:"ECDH",namedCurve:d},n,r?[]:["deriveBits"]))}if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=l:Pt.set(s,{[e]:l}),l},fl=async(s,e)=>{if(s instanceof Uint8Array||Sn(s))return s;if(kn(s)){if(s.type==="secret")return s.export();if("toCryptoKey"in s&&typeof s.toCryptoKey=="function")try{return ul(s,e)}catch(r){if(r instanceof TypeError)throw r}let t=s.export({format:"jwk"});return _r(s,t,e)}if(Ws(s))return s.k?yn(s.k):_r(s,s,e,!0);throw new Error("unreachable")},xt=s=>s==null?void 0:s[Symbol.toStringTag],Bs=(s,e,t)=>{var r,n;if(e.use!==void 0){let l;switch(t){case"sign":case"verify":l="sig";break;case"encrypt":case"decrypt":l="enc";break}if(e.use!==l)throw new TypeError(`Invalid key for this operation, its "use" must be "${l}" when present`)}if(e.alg!==void 0&&e.alg!==s)throw new TypeError(`Invalid key for this operation, its "alg" must be "${s}" when present`);if(Array.isArray(e.key_ops)){let l;switch(!0){case t==="sign":case s==="dir":case s.includes("CBC-HS"):l=t;break;case s.startsWith("PBES2"):l="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(s):!s.includes("GCM")&&s.endsWith("KW")?l="unwrapKey":l=t;break;case t==="encrypt":l="wrapKey";break;case t==="decrypt":l=s.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(l&&((n=(r=e.key_ops)==null?void 0:r.includes)==null?void 0:n.call(r,l))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${l}" when present`)}return!0},ml=(s,e,t)=>{if(!(e instanceof Uint8Array)){if(Ws(e)){if(dl(e)&&Bs(s,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Ln(e))throw new TypeError(wn(s,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${xt(e)} instances for symmetric algorithms must be of type "secret"`)}},pl=(s,e,t)=>{if(Ws(e))switch(t){case"decrypt":case"sign":if(al(e)&&Bs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(cl(e)&&Bs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Ln(e))throw new TypeError(wn(s,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${xt(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${xt(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${xt(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${xt(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${xt(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},hl=(s,e,t)=>{s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(s)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(s)?ml(s,e,t):pl(s,e,t)},gl=(s,e)=>{const t=`SHA-${s.slice(-3)}`;switch(s){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(s.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new je(`alg ${s} is not supported either by JOSE or your javascript runtime`)}},bl=async(s,e,t)=>{if(e instanceof Uint8Array){if(!s.startsWith("HS"))throw new TypeError(tl(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${s.slice(-3)}`,name:"HMAC"},!1,[t])}return el(e,s,t),e},ot=s=>Math.floor(s.getTime()/1e3),xn=60,Mn=xn*60,Us=Mn*24,yl=Us*7,vl=Us*365.25,_l=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Es=s=>{const e=_l.exec(s);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let n;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*xn);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*Mn);break;case"day":case"days":case"d":n=Math.round(t*Us);break;case"week":case"weeks":case"w":n=Math.round(t*yl);break;default:n=Math.round(t*vl);break}return e[1]==="-"||e[4]==="ago"?-n:n};function at(s,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${s} input`);return e}var fe;class wl{constructor(e){Ze(this,fe);if(!Ks(e))throw new TypeError("JWT Claims Set MUST be an object");Qe(this,fe,structuredClone(e))}data(){return At.encode(JSON.stringify(Y(this,fe)))}get iss(){return Y(this,fe).iss}set iss(e){Y(this,fe).iss=e}get sub(){return Y(this,fe).sub}set sub(e){Y(this,fe).sub=e}get aud(){return Y(this,fe).aud}set aud(e){Y(this,fe).aud=e}set jti(e){Y(this,fe).jti=e}set nbf(e){typeof e=="number"?Y(this,fe).nbf=at("setNotBefore",e):e instanceof Date?Y(this,fe).nbf=at("setNotBefore",ot(e)):Y(this,fe).nbf=ot(new Date)+Es(e)}set exp(e){typeof e=="number"?Y(this,fe).exp=at("setExpirationTime",e):e instanceof Date?Y(this,fe).exp=at("setExpirationTime",ot(e)):Y(this,fe).exp=ot(new Date)+Es(e)}set iat(e){typeof e>"u"?Y(this,fe).iat=ot(new Date):e instanceof Date?Y(this,fe).iat=at("setIssuedAt",ot(e)):typeof e=="string"?Y(this,fe).iat=at("setIssuedAt",ot(new Date)+Es(e)):Y(this,fe).iat=at("setIssuedAt",e)}}fe=new WeakMap;const Sl=async(s,e,t)=>{const r=await bl(s,e,"sign");nl(s,r);const n=await crypto.subtle.sign(gl(s,r.algorithm),r,t);return new Uint8Array(n)};var jt,Le,ze;class kl{constructor(e){Ze(this,jt);Ze(this,Le);Ze(this,ze);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Qe(this,jt,e)}setProtectedHeader(e){if(Y(this,Le))throw new TypeError("setProtectedHeader can only be called once");return Qe(this,Le,e),this}setUnprotectedHeader(e){if(Y(this,ze))throw new TypeError("setUnprotectedHeader can only be called once");return Qe(this,ze,e),this}async sign(e,t){if(!Y(this,Le)&&!Y(this,ze))throw new Ct("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!sl(Y(this,Le),Y(this,ze)))throw new Ct("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...Y(this,Le),...Y(this,ze)},n=ol(Ct,new Map([["b64",!0]]),t==null?void 0:t.crit,Y(this,Le),r);let l=!0;if(n.has("b64")&&(l=Y(this,Le).b64,typeof l!="boolean"))throw new Ct('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if(typeof o!="string"||!o)throw new Ct('JWS "alg" (Algorithm) Header Parameter missing or invalid');hl(o,e,"sign");let a=Y(this,jt);l&&(a=At.encode(Ms(a)));let d;Y(this,Le)?d=At.encode(Ms(JSON.stringify(Y(this,Le)))):d=At.encode("");const c=Yn(d,At.encode("."),a),m=await fl(e,o),p=await Sl(o,m,c),g={signature:Ms(p),payload:""};return l&&(g.payload=gs.decode(a)),Y(this,ze)&&(g.header=Y(this,ze)),Y(this,Le)&&(g.protected=gs.decode(d)),g}}jt=new WeakMap,Le=new WeakMap,ze=new WeakMap;var Tt;class Ll{constructor(e){Ze(this,Tt);Qe(this,Tt,new kl(e))}setProtectedHeader(e){return Y(this,Tt).setProtectedHeader(e),this}async sign(e,t){const r=await Y(this,Tt).sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}Tt=new WeakMap;var Xe,Ae;class Cl{constructor(e={}){Ze(this,Xe);Ze(this,Ae);Qe(this,Ae,new wl(e))}setIssuer(e){return Y(this,Ae).iss=e,this}setSubject(e){return Y(this,Ae).sub=e,this}setAudience(e){return Y(this,Ae).aud=e,this}setJti(e){return Y(this,Ae).jti=e,this}setNotBefore(e){return Y(this,Ae).nbf=e,this}setExpirationTime(e){return Y(this,Ae).exp=e,this}setIssuedAt(e){return Y(this,Ae).iat=e,this}setProtectedHeader(e){return Qe(this,Xe,e),this}async sign(e,t){var n;const r=new Ll(Y(this,Ae).data());if(r.setProtectedHeader(Y(this,Xe)),Array.isArray((n=Y(this,Xe))==null?void 0:n.crit)&&Y(this,Xe).crit.includes("b64")&&Y(this,Xe).b64===!1)throw new vn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}Xe=new WeakMap,Ae=new WeakMap;const Ds="bluesky_oauth_session",An="bluesky_code_verifier",En="bluesky_oauth_state",Pn="bluesky_server_url";function xl(s=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const r=new Uint8Array(s);crypto.getRandomValues(r);for(let n=0;n<s;n++)t+=e[r[n]%e.length];return t}async function Ml(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t);return Al(r)}function Al(s){return btoa(String.fromCharCode(...new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wr(){return await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}async function Sr(s,e,t,r,n){try{const l=await crypto.subtle.exportKey("jwk",s.publicKey),o={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};r&&(o.nonce=r);const a=await il(await crypto.subtle.exportKey("jwk",s.privateKey),"ES256");return await new Cl(o).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:l.kty,crv:l.crv,x:l.x,y:l.y}}).sign(a)}catch(l){throw console.error("Error creating DPoP JWT:",l),l}}async function El(s="https://bsky.social"){try{const e=xl();localStorage.setItem(An,e);const t=await Ml(e),r=crypto.randomUUID();localStorage.setItem(En,r),localStorage.setItem(Pn,s);const l=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5173/client-metadata.json":"https://bluesky-list-manager.vercel.app/client-metadata.json",o=`${window.location.origin}/oauth-callback.html`,a=new URL(`${s}/oauth/authorize`);a.searchParams.append("client_id",l),a.searchParams.append("response_type","code"),a.searchParams.append("redirect_uri",o),a.searchParams.append("scope","atproto transition:generic"),a.searchParams.append("state",r),a.searchParams.append("code_challenge",t),a.searchParams.append("code_challenge_method","S256"),window.location.href=a.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}function zt(){const s=localStorage.getItem(Ds);if(s)try{return JSON.parse(s)}catch{localStorage.removeItem(Ds)}return null}function kr(){localStorage.removeItem(Ds),localStorage.removeItem(An),localStorage.removeItem(En),localStorage.removeItem(Pn)}const ke={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},Mt={OAUTH:"oauth",APP_PASSWORD:"app_password"};function Pl(){const{subscribe:s,set:e,update:t}=bn({session:null,authType:null,isLoading:!1,error:null});return{subscribe:s,setSession:(r,n=Mt.APP_PASSWORD)=>{r?(localStorage.setItem(ke.SESSION,JSON.stringify(r)),localStorage.setItem(ke.AUTH_TYPE,n)):(localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE)),e({session:r,authType:n,isLoading:!1,error:null})},setLoading:r=>{t(n=>({...n,isLoading:r}))},setError:r=>{t(n=>({...n,error:r,isLoading:!1}))},getSession:()=>{const r=localStorage.getItem(ke.SESSION),n=localStorage.getItem(ke.AUTH_TYPE)||Mt.APP_PASSWORD;if(r)try{return{session:JSON.parse(r),authType:n}}catch{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE),kr(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE),kr(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:()=>{const r=zt();if(r&&r.accessToken){const o={accessJwt:r.accessToken,refreshJwt:r.refreshToken,handle:r.sub,did:r.sub,email:null};return e({session:o,authType:Mt.OAUTH,isLoading:!1,error:null}),{session:o,authType:Mt.OAUTH}}const{session:n,authType:l}=$e.getSession();return n?(e({session:n,authType:l,isLoading:!1,error:null}),{session:n,authType:l}):{session:null,authType:null}},isOAuthSession:()=>localStorage.getItem(ke.AUTH_TYPE)===Mt.OAUTH}}const $e=Pl(),ps="https://bsky.social/xrpc";class Tl{async signIn(e,t){const r=await fetch(`${ps}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to sign in")}return await r.json()}async getAuthHeaders(e,t="app_password"){if(t==="oauth"){const r=zt();if(!r||!r.accessToken)throw new Error("No OAuth session found");const n=await wr(),l=await Sr(n,"GET",`${ps}/app.bsky.graph.getLists`,r.serverNonce);return{Authorization:`Bearer ${r.accessToken}`,DPoP:l,"Content-Type":"application/json"}}else return{Authorization:`Bearer ${e.accessJwt}`,"Content-Type":"application/json"}}async makeBlueskyRequest(e,t,r="app_password",n="GET",l=null){const o=await this.getAuthHeaders(t,r);if(r==="oauth"&&o.DPoP){const c=zt(),m=await wr(),p=await Sr(m,n,`${ps}/${e}`,c.serverNonce);o.DPoP=p}const a={method:n,headers:o};l&&n!=="GET"&&(a.body=JSON.stringify(l));const d=await fetch(`${ps}/${e}`,a);if(!d.ok){const c=await d.json();throw new Error(c.message||`Failed to fetch from ${e}`)}return await d.json()}async getUserLists(e,t="app_password"){if(t==="oauth"){const r=zt();if(!r.sub)throw new Error("No user DID found in OAuth session");const l=(await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${r.sub}`,e,t)).handle;return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${l}`,e,t)).lists||[]}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${e.handle}`,e,t)).lists||[]}async getListInfo(e,t,r="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,r)).list}async getListMembers(e,t,r="app_password",n=25,l=null){var p;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const a=await this.makeBlueskyRequest(o,e,r),d=a.items||[],c=d.map(g=>g.subject.did),m=d.map(g=>g.subject);return{members:c,profiles:m,cursor:a.cursor,totalCount:((p=a.list)==null?void 0:p.listItemCount)||0}}async getListMembersCount(e,t,r="app_password"){return(await this.getListInfo(e,t,r)).listItemCount||0}async getProfiles(e,t,r="app_password"){if(!t||t.length===0)return[];const n=[];for(const l of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(l)}`,e,r);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${l}:`,o),n.push({did:l,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,r="app_password",n=25,l=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const a=await this.makeBlueskyRequest(o,e,r);return{actors:a.actors||[],cursor:a.cursor}}async addToList(e,t,r,n="app_password"){let l;return n==="oauth"?l=zt().sub:l=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:r,createdAt:new Date().toISOString()}})}async resolveHandle(e,t,r="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,r)).did}}const Fe=new Tl,Me={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Il(){const{subscribe:s,update:e}=bn({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1;return{subscribe:s,setSelectedList:r=>{r?localStorage.setItem(Me.SELECTED_LIST,JSON.stringify(r)):localStorage.removeItem(Me.SELECTED_LIST),e(n=>({...n,selectedList:r,isLoadingList:!!r,listMembers:[],listMemberProfiles:[]}))},setListLoading:r=>{e(n=>({...n,isLoadingList:r}))},setUserLists:r=>{localStorage.setItem(Me.LISTS,JSON.stringify(r)),e(n=>({...n,userLists:r}))},setListMembers:r=>{e(n=>({...n,listMembers:r}))},isProfileInCurrentList:r=>{let n=!1;return e(l=>(n=l.listMembers.includes(r),l)),n},setListMemberProfiles:r=>{e(n=>({...n,listMemberProfiles:r}))},addProfileToList:r=>{e(n=>{const l=n.listMembers.includes(r)?n.listMembers:[r,...n.listMembers];return{...n,listMembers:l}})},addProfileToDisplay:r=>{e(n=>{if(n.listMembers.indexOf(r.did)<25){const o=[r,...n.listMemberProfiles];return{...n,listMemberProfiles:o.slice(0,25)}}return n})},fetchAndAddProfile:(r,n,l="app_password")=>t?Promise.resolve():(t=!0,new Promise(async o=>{try{const a=await Fe.getProfiles(r,[n],l);if(a.length>0){const d=a[0];e(c=>{const m=c.listMembers.includes(n)?c.listMembers:[n,...c.listMembers];if(m.indexOf(n)<25){const g=c.listMemberProfiles.filter(v=>v.did!==n),b=[d,...g];return{...c,listMembers:m,listMemberProfiles:b.slice(0,25)}}return{...c,listMembers:m}}),e(c=>{console.log("Updating member count for DID:",n),console.log("Current selectedList:",c.selectedList),console.log("Current userLists:",c.userLists),console.log("Incrementing member count for successfully added profile");const m=c.selectedList?{...c.selectedList,listItemCount:(c.selectedList.listItemCount||0)+1}:null,p=c.userLists.map(g=>{var b;return g.uri===((b=c.selectedList)==null?void 0:b.uri)?{...g,memberCount:(g.memberCount||0)+1}:g});return console.log("Updated selectedList:",m),console.log("Updated userLists:",p),m&&localStorage.setItem(Me.SELECTED_LIST,JSON.stringify(m)),localStorage.setItem(Me.LISTS,JSON.stringify(p)),{...c,selectedList:m,userLists:p}})}}catch(a){console.error("Failed to fetch profile data:",a),e(d=>{const c=d.listMembers.includes(n)?d.listMembers:[n,...d.listMembers];return{...d,listMembers:c}}),e(d=>{console.log("Updating member count for DID (error case):",n),console.log("Incrementing member count for profile (error case)");const c=d.selectedList?{...d.selectedList,listItemCount:(d.selectedList.listItemCount||0)+1}:null,m=d.userLists.map(p=>{var g;return p.uri===((g=d.selectedList)==null?void 0:g.uri)?{...p,memberCount:(p.memberCount||0)+1}:p});return c&&localStorage.setItem(Me.SELECTED_LIST,JSON.stringify(c)),localStorage.setItem(Me.LISTS,JSON.stringify(m)),{...d,selectedList:c,userLists:m}})}finally{t=!1}o()})),refreshListMembers:()=>{e(r=>({...r,refreshTrigger:Date.now()}))},setLoading:r=>{e(n=>({...n,isLoading:r}))},setError:r=>{e(n=>({...n,error:r,isLoading:!1}))},getSelectedList:()=>{const r=localStorage.getItem(Me.SELECTED_LIST);if(r)try{return JSON.parse(r)}catch{localStorage.removeItem(Me.SELECTED_LIST)}return null},getUserLists:()=>{const r=localStorage.getItem(Me.LISTS);if(r)try{return JSON.parse(r)}catch{localStorage.removeItem(Me.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(Me.SELECTED_LIST),e(r=>({...r,selectedList:null}))}}}const pe=Il();function Rl(s){let e,t,r,n,l,o,a,d,c,m,p,g,b;return{c(){e=f("div"),t=f("label"),t.textContent="Handle",r=w(),n=f("input"),l=w(),o=f("div"),a=f("label"),a.textContent="App Password",d=w(),c=f("input"),m=w(),p=f("p"),p.textContent="Use an app password, not your main account password",u(t,"for","handle"),u(t,"class","block text-sm font-medium text-gray-700 mb-1"),u(n,"id","handle"),u(n,"type","text"),u(n,"placeholder","your-handle.bsky.social"),u(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,u(a,"for","password"),u(a,"class","block text-sm font-medium text-gray-700 mb-1"),u(c,"id","password"),u(c,"type","password"),u(c,"placeholder","Your app password"),u(c,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c.required=!0,u(p,"class","text-xs text-gray-500 mt-1")},m(v,_){x(v,e,_),i(e,t),i(e,r),i(e,n),Ce(n,s[0]),x(v,l,_),x(v,o,_),i(o,a),i(o,d),i(o,c),Ce(c,s[1]),i(o,m),i(o,p),g||(b=[ee(n,"input",s[11]),ee(c,"input",s[12])],g=!0)},p(v,_){_&1&&n.value!==v[0]&&Ce(n,v[0]),_&2&&c.value!==v[1]&&Ce(c,v[1])},d(v){v&&(C(e),C(l),C(o)),g=!1,xe(b)}}}function Ol(s){let e;return{c(){e=f("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,u(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function Lr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=L(s[3]),u(t,"class","text-red-700 text-sm"),u(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&$(r,n[3])},d(n){n&&C(e)}}}function Bl(s){let e;return{c(){e=L("Sign In")},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function Dl(s){let e;return{c(){e=L("Sign in with Bluesky")},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function Nl(s){let e,t,r;function n(a,d){return a[4]==="oauth"?Wl:Kl}let l=n(s),o=l(s);return{c(){e=f("span"),t=w(),o.c(),r=tt(),u(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(a,d){x(a,e,d),x(a,t,d),o.m(a,d),x(a,r,d)},p(a,d){l!==(l=n(a))&&(o.d(1),o=l(a),o&&(o.c(),o.m(r.parentNode,r)))},d(a){a&&(C(e),C(t),C(r)),o.d(a)}}}function Kl(s){let e;return{c(){e=L("Signing in...")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function Wl(s){let e;return{c(){e=L("Connecting...")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function Ul(s){let e,t,r,n,l,o,a,d,c,m,p,g,b,v,_,R,K,A,W,O,E,k,P,M,B,S,F,T,J,N,G,te,de,oe,ne;function y(z,q){return z[4]==="oauth"?Ol:Rl}let h=y(s),U=h(s),H=s[3]&&Lr(s);function I(z,q){return z[2]?Nl:z[4]==="oauth"?Dl:Bl}let D=I(s),j=D(s);return de=Nn(s[9][0]),{c(){e=f("div"),t=f("button"),r=w(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Sign in to Bluesky",a=w(),d=f("button"),d.textContent="×",c=w(),m=f("form"),p=f("div"),g=f("div"),b=f("fieldset"),v=f("legend"),v.textContent="Sign in with:",_=w(),R=f("div"),K=f("label"),A=f("input"),W=w(),O=f("span"),O.textContent="OAuth (Coming Soon)",E=w(),k=f("label"),P=f("input"),M=w(),B=f("span"),B.textContent="App Password (Recommended)",S=w(),U.c(),F=w(),H&&H.c(),T=w(),J=f("div"),N=f("button"),N.textContent="Cancel",G=w(),te=f("button"),j.c(),u(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),u(t,"aria-label","Close modal"),u(t,"type","button"),u(o,"class","text-xl font-semibold text-slate-800"),u(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),u(l,"class","flex items-center justify-between mb-4"),u(v,"class","block text-sm font-medium text-gray-700 mb-2"),u(A,"type","radio"),A.__value="oauth",Ce(A,A.__value),u(A,"class","mr-2"),A.disabled=!0,u(O,"class","text-sm"),u(K,"class","flex items-center opacity-50 cursor-not-allowed"),u(P,"type","radio"),P.__value="app_password",Ce(P,P.__value),u(P,"class","mr-2"),u(B,"class","text-sm"),u(k,"class","flex items-center"),u(R,"class","space-y-2"),u(N,"type","button"),u(N,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),u(te,"type","submit"),te.disabled=s[2],u(te,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),u(J,"class","flex space-x-3 pt-2"),u(p,"class","space-y-4"),u(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),u(n,"role","document"),u(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),u(e,"role","dialog"),u(e,"aria-modal","true"),u(e,"tabindex","-1"),de.p(A,P)},m(z,q){x(z,e,q),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,a),i(l,d),i(n,c),i(n,m),i(m,p),i(p,g),i(g,b),i(b,v),i(b,_),i(b,R),i(R,K),i(K,A),A.checked=A.__value===s[4],i(K,W),i(K,O),i(R,E),i(R,k),i(k,P),P.checked=P.__value===s[4],i(k,M),i(k,B),i(p,S),U.m(p,null),i(p,F),H&&H.m(p,null),i(p,T),i(p,J),i(J,N),i(J,G),i(J,te),j.m(te,null),oe||(ne=[ee(t,"click",s[7]),ee(d,"click",s[6]),ee(A,"change",s[8]),ee(P,"change",s[10]),ee(N,"click",s[6]),ee(m,"submit",pn(s[5])),ee(e,"keydown",s[13])],oe=!0)},p(z,[q]){q&16&&(A.checked=A.__value===z[4]),q&16&&(P.checked=P.__value===z[4]),h===(h=y(z))&&U?U.p(z,q):(U.d(1),U=h(z),U&&(U.c(),U.m(p,F))),z[3]?H?H.p(z,q):(H=Lr(z),H.c(),H.m(p,T)):H&&(H.d(1),H=null),D===(D=I(z))&&j?j.p(z,q):(j.d(1),j=D(z),j&&(j.c(),j.m(te,null))),q&4&&(te.disabled=z[2])},i:Q,o:Q,d(z){z&&C(e),U.d(),H&&H.d(),j.d(),de.r(),oe=!1,xe(ne)}}}function Hl(s,e,t){const r=Un();let n="",l="",o=!1,a="",d="app_password";async function c(){t(2,o=!0),t(3,a="");try{await El()}catch(O){t(3,a=O.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function m(){if(!n||!l){t(3,a="Please enter both handle and password");return}t(2,o=!0),t(3,a="");try{const O=await Fe.signIn(n,l);$e.setSession(O,Mt.APP_PASSWORD),r("close")}catch(O){t(3,a=O.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function p(){d==="oauth"?await c():await m()}function g(){r("close")}function b(){g()}const v=[[]];function _(){d=this.__value,t(4,d)}function R(){d=this.__value,t(4,d)}function K(){n=this.value,t(0,n)}function A(){l=this.value,t(1,l)}return[n,l,o,a,d,p,g,b,_,v,R,K,A,O=>O.key==="Escape"&&g()]}class Tn extends Ne{constructor(e){super(),De(this,e,Hl,Ul,Ie,{})}}const zl=!0,bs={staticBase:"static",isDevelopment:!1,isProduction:zl,buildTime:new Date().toISOString(),getAssetPath:s=>`./${s.replace("static/","")}`};function Cr(s,e,t){const r=s.slice();return r[10]=e[t],r}function Fl(s){let e,t,r;return{c(){e=f("button"),e.textContent="🔐 Sign in with Bluesky",u(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200")},m(n,l){x(n,e,l),t||(r=ee(e,"click",s[6]),t=!0)},p:Q,d(n){n&&C(e),t=!1,r()}}}function Jl(s){let e,t,r,n,l,o,a,d,c,m,p,g=s[1].session.handle+"",b,v,_,R,K;function A(k,P){return k[3]?ql:k[4]?$l:jl}let W=A(s),O=W(s),E=s[3]&&Mr();return{c(){e=f("div"),t=f("label"),t.textContent="List:",r=w(),n=f("select"),l=f("option"),l.textContent="Select a list...",O.c(),a=w(),E&&E.c(),d=w(),c=f("div"),m=f("div"),p=L("@"),b=L(g),v=w(),_=f("button"),_.textContent="Sign out",u(t,"for","list-selector"),u(t,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),l.__value="",Ce(l,l.__value),u(n,"id","list-selector"),n.disabled=s[3],u(n,"class","bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm w-64 text-slate-800 focus:border-slate-500 focus:ring-1 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed"),u(e,"class","flex items-center space-x-3"),u(m,"class","text-sm text-slate-700"),u(_,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),u(c,"class","text-right")},m(k,P){var M;x(k,e,P),i(e,t),i(e,r),i(e,n),i(n,l),O.m(n,null),yr(n,((M=s[0].selectedList)==null?void 0:M.uri)||""),i(e,a),E&&E.m(e,null),x(k,d,P),x(k,c,P),i(c,m),i(m,p),i(m,b),i(c,v),i(c,_),R||(K=[ee(n,"change",s[5]),ee(_,"click",s[8])],R=!0)},p(k,P){var M,B;W===(W=A(k))&&O?O.p(k,P):(O.d(1),O=W(k),O&&(O.c(),O.m(n,null))),P&1&&o!==(o=((M=k[0].selectedList)==null?void 0:M.uri)||"")&&yr(n,((B=k[0].selectedList)==null?void 0:B.uri)||""),P&8&&(n.disabled=k[3]),k[3]?E||(E=Mr(),E.c(),E.m(e,null)):E&&(E.d(1),E=null),P&2&&g!==(g=k[1].session.handle+"")&&$(b,g)},d(k){k&&(C(e),C(d),C(c)),O.d(),E&&E.d(),R=!1,xe(K)}}}function jl(s){let e,t=he(s[0].userLists),r=[];for(let n=0;n<t.length;n+=1)r[n]=xr(Cr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=tt()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);x(n,e,l)},p(n,l){if(l&1){t=he(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const a=Cr(n,t,o);r[o]?r[o].p(a,l):(r[o]=xr(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&C(e),et(r,n)}}}function $l(s){let e;return{c(){e=f("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",Ce(e,e.__value)},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function ql(s){let e;return{c(){e=f("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",Ce(e,e.__value)},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function xr(s){let e,t=s[10].name+"",r,n,l=s[10].memberCount.toLocaleString()+"",o,a,d;return{c(){e=f("option"),r=L(t),n=L(" ("),o=L(l),a=L(` members)
									`),e.__value=d=s[10].uri,Ce(e,e.__value)},m(c,m){x(c,e,m),i(e,r),i(e,n),i(e,o),i(e,a)},p(c,m){m&1&&t!==(t=c[10].name+"")&&$(r,t),m&1&&l!==(l=c[10].memberCount.toLocaleString()+"")&&$(o,l),m&1&&d!==(d=c[10].uri)&&(e.__value=d,Ce(e,e.__value))},d(c){c&&C(e)}}}function Mr(s){let e;return{c(){e=f("div"),u(e,"class","loading-spinner svelte-1myfg8v")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function Ar(s){let e,t;return e=new Tn({}),e.$on("close",s[7]),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p:Q,i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Vl(s){let e,t,r,n,l,o,a,d,c;function m(v,_){return v[1].session?Jl:Fl}let p=m(s),g=p(s),b=s[2]&&Ar(s);return{c(){e=f("header"),t=f("div"),r=f("div"),n=f("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${bs.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,l=w(),o=f("div"),g.c(),a=w(),b&&b.c(),d=tt(),u(o,"class","flex items-center space-x-4"),u(r,"class","flex items-center justify-between mb-4"),u(t,"class","max-w-6xl mx-auto px-6 py-4"),u(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50")},m(v,_){x(v,e,_),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),g.m(o,null),x(v,a,_),b&&b.m(v,_),x(v,d,_),c=!0},p(v,[_]){p===(p=m(v))&&g?g.p(v,_):(g.d(1),g=p(v),g&&(g.c(),g.m(o,null))),v[2]?b?(b.p(v,_),_&4&&re(b,1)):(b=Ar(v),b.c(),re(b,1),b.m(d.parentNode,d)):b&&(Rt(),ue(b,1,1,()=>{b=null}),Ot())},i(v){c||(re(b),c=!0)},o(v){ue(b),c=!1},d(v){v&&(C(e),C(a),C(d)),g.d(),b&&b.d(v)}}}function Yl(s,e,t){let r,n;Ee(s,pe,b=>t(0,r=b)),Ee(s,$e,b=>t(1,n=b));let l=!1,o=!1,a="";Ns(async()=>{n.session&&await d()});async function d(){if(n.session){t(3,o=!0),t(4,a="");try{const v=(await Fe.getUserLists(n.session,n.authType)).map(_=>({uri:_.uri,name:_.name,description:_.description||"",purpose:_.purpose||"app.bsky.graph.defs#modlist",createdAt:_.createdAt,memberCount:_.listItemCount||0})).sort((_,R)=>new Date(R.createdAt)-new Date(_.createdAt));pe.setUserLists(v)}catch(b){t(4,a=b.message||"Failed to load your lists")}finally{t(3,o=!1)}}}function c(b){const v=b.target.value;if(v){const _=r.userLists.find(R=>R.uri===v);_&&pe.setSelectedList(_)}else pe.setSelectedList(null)}function m(){t(2,l=!0)}function p(){t(2,l=!1)}function g(){$e.signOut(),pe.setSelectedList(null)}return s.$$.update=()=>{s.$$.dirty&3&&n.session&&r.userLists.length===0&&d(),s.$$.dirty&1&&r.userLists.length>0&&console.log("Header: userLists updated:",r.userLists)},[r,n,l,o,a,c,m,p,g]}class Gl extends Ne{constructor(e){super(),De(this,e,Yl,Vl,Ie,{})}}function Er(s){let e,t;return e=new Tn({}),e.$on("close",s[2]),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p:Q,i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Zl(s){let e,t,r,n,l,o,a,d,c,m,p,g,b,v,_,R,K,A,W,O,E,k,P,M,B,S,F,T=s[0]&&Er(s);return{c(){e=f("div"),t=f("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${bs.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-4xl font-bold text-slate-800 mb-4">Bluesky List Manager</h2> <p class="text-xl text-slate-600 mb-2">Manage your lists like a pro.</p> <p class="text-xl text-slate-600 mb-6"><strong class="text-blue-600">Get insights and powerful tools to grow your curated lists.</strong></p>`,r=w(),n=f("div"),l=f("button"),l.textContent="🚀 Start Building Better Lists - Sign in with Bluesky",o=w(),a=f("p"),a.textContent="100% free • No registration required • Works instantly • Zero data stored on our servers",d=w(),c=f("div"),c.innerHTML=`<div class="bg-gray-50 p-4 rounded-lg border border-gray-200"><img src="${bs.getAssetPath("static/screencapture.png")}" alt="Bluesky List Manager Preview - Showing list statistics and member management interface" class="w-full max-w-4xl mx-auto rounded-lg shadow-md"/> <p class="text-sm text-gray-600 mt-3">See your list insights and manage members with powerful analytics</p></div>`,m=w(),p=f("div"),p.innerHTML='<div class="bg-red-50 p-6 rounded-lg border border-red-200"><h3 class="text-lg font-semibold text-red-800 mb-3">😤 The Manual Way (Slow &amp; Painful)</h3> <ul class="space-y-2 text-red-700"><li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Search one profile at a time</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Click through each profile manually</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Forget who you&#39;ve already added</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Hours of repetitive clicking</span></li></ul></div> <div class="bg-green-50 p-6 rounded-lg border border-green-200"><h3 class="text-lg font-semibold text-green-800 mb-3">⚡ The Smart Way (Fast &amp; Easy)</h3> <ul class="space-y-2 text-green-700"><li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Bulk search</strong> by keywords, bio, or handle</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Instant filtering</strong> - see who&#39;s already in your list</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>One-click adding</strong> of multiple profiles</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Minutes instead of hours</strong></span></li></ul></div>',g=w(),b=f("div"),b.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-4">🎯 Perfect for:</h3> <div class="grid md:grid-cols-3 gap-4 text-blue-700"><div class="text-center"><div class="text-2xl mb-2">👥</div> <div class="font-medium">Community Builders</div> <div class="text-sm">Grow your curated lists quickly</div></div> <div class="text-center"><div class="text-2xl mb-2">🔍</div> <div class="font-medium">Content Creators</div> <div class="text-sm">Find your target audience</div></div> <div class="text-center"><div class="text-2xl mb-2">📊</div> <div class="font-medium">List Managers</div> <div class="text-sm">Maintain and expand your lists</div></div></div>',v=w(),_=f("div"),_.innerHTML='<h3 class="text-lg font-semibold text-purple-800 mb-3">✨ Key Features</h3> <div class="grid md:grid-cols-2 gap-4 text-purple-700"><div><div class="font-medium mb-1">🔍 Smart Search</div> <div class="text-sm">Search across bios, display names, and handles with powerful filters</div></div> <div><div class="font-medium mb-1">📊 Real-time Stats</div> <div class="text-sm">See engagement rates, verification status, and growth metrics</div></div> <div><div class="font-medium mb-1">🔒 Privacy First</div> <div class="text-sm">Client-side app - your data never leaves your browser</div></div></div>',R=w(),K=f("div"),K.innerHTML=`<h3 class="text-lg font-semibold text-gray-800 mb-3">🔐 Privacy &amp; Security</h3> <p class="text-gray-700 mb-3">This is a <strong>client-side application</strong>. Your Bluesky credentials are stored
			locally in your browser and are never sent to our servers. We only communicate directly with
			Bluesky&#39;s API using your authentication token.</p> <p class="text-sm text-gray-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code (and
			contribute!) on
			<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-gray-600 hover:text-gray-700 underline">GitHub</a>.</p>`,A=w(),W=f("div"),O=f("button"),O.textContent="🚀 Start Building Better Lists - Sign in with Bluesky",E=w(),k=f("p"),k.textContent="100% free • No registration required • Works instantly • Zero data stored on our servers",P=w(),T&&T.c(),M=tt(),u(t,"class","text-center mb-8"),u(l,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),u(a,"class","text-sm text-gray-500 mt-3"),u(n,"class","text-center mb-8"),u(c,"class","mb-8 text-center"),u(p,"class","grid md:grid-cols-2 gap-8 mb-8"),u(b,"class","bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8"),u(_,"class","bg-purple-50 p-6 rounded-lg border border-purple-200 mb-8"),u(K,"class","bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8"),u(O,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),u(k,"class","text-sm text-gray-500 mt-3"),u(W,"class","text-center"),u(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-4xl mx-auto relative z-100")},m(J,N){x(J,e,N),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,a),i(e,d),i(e,c),i(e,m),i(e,p),i(e,g),i(e,b),i(e,v),i(e,_),i(e,R),i(e,K),i(e,A),i(e,W),i(W,O),i(W,E),i(W,k),x(J,P,N),T&&T.m(J,N),x(J,M,N),B=!0,S||(F=[ee(l,"click",s[1]),ee(O,"click",s[1])],S=!0)},p(J,[N]){J[0]?T?(T.p(J,N),N&1&&re(T,1)):(T=Er(J),T.c(),re(T,1),T.m(M.parentNode,M)):T&&(Rt(),ue(T,1,1,()=>{T=null}),Ot())},i(J){B||(re(T),B=!0)},o(J){ue(T),B=!1},d(J){J&&(C(e),C(P),C(M)),T&&T.d(J),S=!1,xe(F)}}}function Ql(s,e,t){let r=!1;function n(){t(0,r=!0)}function l(){t(0,r=!1)}return[r,n,l]}class Xl extends Ne{constructor(e){super(),De(this,e,Ql,Zl,Ie,{})}}function ei(s){let e,t,r;return{c(){e=f("h3"),e.textContent="Select a List",t=w(),r=f("p"),r.textContent="Choose a list from the dropdown above to get started.",u(e,"class","text-lg font-semibold text-slate-800 mb-2"),u(r,"class","text-slate-600")},m(n,l){x(n,e,l),x(n,t,l),x(n,r,l)},d(n){n&&(C(e),C(t),C(r))}}}function ti(s){let e,t,r;return{c(){e=f("h3"),e.textContent="No Lists Found",t=w(),r=f("p"),r.textContent="You don't have any lists yet. Create a list on Bluesky first!",u(e,"class","text-lg font-semibold text-slate-800 mb-2"),u(r,"class","text-slate-600")},m(n,l){x(n,e,l),x(n,t,l),x(n,r,l)},d(n){n&&(C(e),C(t),C(r))}}}function si(s){let e,t,r,n,l,o,a;function d(p,g){return p[0].userLists.length===0?ti:ei}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=w(),l=f("div"),o=f("div"),o.innerHTML=`<img src="${bs.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,a=w(),m.c(),u(r,"class","text-center mb-8"),u(o,"class","text-4xl mb-4"),u(l,"class","text-center py-12"),u(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),u(e,"class","max-w-4xl mx-auto")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,a),m.m(l,null)},p(p,[g]){c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null)))},i:Q,o:Q,d(p){p&&C(e),m.d()}}}function ri(s,e,t){let r;return Ee(s,pe,n=>t(0,r=n)),[r]}class ni extends Ne{constructor(e){super(),De(this,e,ri,si,Ie,{})}}function li(s){let e,t,r,n,l,o,a,d,c,m,p,g=(s[0].displayName||s[0].handle)+"",b,v,_,R,K=s[0].handle+"",A,W,O,E=s[0].description&&Pr(s);function k(B,S){if(B[3]==="Already in list")return ci;if(B[3]==="New candidate")return ai;if(B[2])return oi}let P=k(s),M=P&&P(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h3"),b=L(g),v=w(),_=f("span"),R=L("@"),A=L(K),W=w(),E&&E.c(),O=w(),M&&M.c(),It(n.src,l=ys(s[0]))||u(n,"src",l),u(n,"alt",o=s[0].displayName||s[0].handle),u(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),u(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),u(r,"class","flex-shrink-0"),u(p,"class","text-base font-semibold text-gray-900 truncate"),u(_,"class","text-sm text-gray-600 truncate"),u(m,"class","flex items-center space-x-2 mb-1"),u(c,"class","flex-1 min-w-0"),u(t,"class","flex items-start space-x-3"),u(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200")},m(B,S){x(B,e,S),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,b),i(m,v),i(m,_),i(_,R),i(_,A),i(c,W),E&&E.m(c,null),i(c,O),M&&M.m(c,null)},p(B,S){S&1&&!It(n.src,l=ys(B[0]))&&u(n,"src",l),S&1&&o!==(o=B[0].displayName||B[0].handle)&&u(n,"alt",o),S&1&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(B[0].displayName||B[0].handle)+"&background=6366f1&color=fff&size=64'")&&u(n,"onerror",a),S&1&&g!==(g=(B[0].displayName||B[0].handle)+"")&&$(b,g),S&1&&K!==(K=B[0].handle+"")&&$(A,K),B[0].description?E?E.p(B,S):(E=Pr(B),E.c(),E.m(c,O)):E&&(E.d(1),E=null),P===(P=k(B))&&M?M.p(B,S):(M&&M.d(1),M=P&&P(B),M&&(M.c(),M.m(c,null)))},d(B){B&&C(e),E&&E.d(),M&&M.d()}}}function ii(s){let e,t,r,n,l,o,a,d,c,m,p,g=(s[0].displayName||s[0].handle)+"",b,v,_,R,K=s[0].handle+"",A,W,O,E,k,P,M,B,S=s[0].description&&Tr(s);function F(N,G){if(N[3]==="Already in list")return pi;if(N[3]==="New candidate")return mi;if(N[2])return fi}let T=F(s),J=T&&T(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h3"),b=L(g),v=w(),_=f("span"),R=L("@"),A=L(K),W=w(),S&&S.c(),O=w(),J&&J.c(),E=w(),k=f("div"),k.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',It(n.src,l=ys(s[0]))||u(n,"src",l),u(n,"alt",o=s[0].displayName||s[0].handle),u(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),u(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),u(r,"class","flex-shrink-0"),u(p,"class","text-base font-semibold text-gray-900 truncate"),u(_,"class","text-sm text-gray-600 truncate"),u(m,"class","flex items-center space-x-2 mb-1"),u(c,"class","flex-1 min-w-0"),u(k,"class","flex-shrink-0"),u(t,"class","flex items-start space-x-3"),u(e,"href",P="https://bsky.app/profile/"+s[0].handle),u(e,"target","_blank"),u(e,"rel","noopener noreferrer"),u(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200")},m(N,G){x(N,e,G),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,b),i(m,v),i(m,_),i(_,R),i(_,A),i(c,W),S&&S.m(c,null),i(c,O),J&&J.m(c,null),i(t,E),i(t,k),M||(B=ee(e,"click",s[8]),M=!0)},p(N,G){G&1&&!It(n.src,l=ys(N[0]))&&u(n,"src",l),G&1&&o!==(o=N[0].displayName||N[0].handle)&&u(n,"alt",o),G&1&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(N[0].displayName||N[0].handle)+"&background=6366f1&color=fff&size=64'")&&u(n,"onerror",a),G&1&&g!==(g=(N[0].displayName||N[0].handle)+"")&&$(b,g),G&1&&K!==(K=N[0].handle+"")&&$(A,K),N[0].description?S?S.p(N,G):(S=Tr(N),S.c(),S.m(c,O)):S&&(S.d(1),S=null),T===(T=F(N))&&J?J.p(N,G):(J&&J.d(1),J=T&&T(N),J&&(J.c(),J.m(c,null))),G&1&&P!==(P="https://bsky.app/profile/"+N[0].handle)&&u(e,"href",P)},d(N){N&&C(e),S&&S.d(),J&&J.d(),M=!1,B()}}}function Pr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=L(t),u(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&$(r,t)},d(n){n&&C(e)}}}function oi(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",u(t,"type","checkbox"),t.checked=s[1],u(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),u(n,"class","text-sm text-gray-600"),u(e,"class","flex items-center space-x-2")},m(a,d){x(a,e,d),i(e,t),i(e,r),i(e,n),l||(o=ee(t,"change",s[6]),l=!0)},p(a,d){d&2&&(t.checked=a[1])},d(a){a&&C(e),l=!1,o()}}}function ai(s){let e,t,r,n,l,o,a;function d(p,g){return p[5]?ui:di}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("span"),r=L(s[3]),n=w(),l=f("button"),m.c(),u(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],u(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),u(e,"class","flex items-center space-x-2")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(a=ee(l,"click",s[7]),o=!0)},p(p,g){g&8&&$(r,p[3]),c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null))),g&32&&(l.disabled=p[5])},d(p){p&&C(e),m.d(),o=!1,a()}}}function ci(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=L(s[3]),u(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),u(e,"class","flex items-center space-x-2")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&$(r,n[3])},d(n){n&&C(e)}}}function di(s){let e;return{c(){e=L("Add to list")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function ui(s){let e,t;return{c(){e=f("span"),t=L(`
                Adding...`),u(e,"class","loading-spinner mr-1")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(C(e),C(t))}}}function Tr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=L(t),u(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&$(r,t)},d(n){n&&C(e)}}}function fi(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",u(t,"type","checkbox"),t.checked=s[1],u(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),u(n,"class","text-sm text-gray-600"),u(e,"class","flex items-center space-x-2")},m(a,d){x(a,e,d),i(e,t),i(e,r),i(e,n),l||(o=ee(t,"change",s[6]),l=!0)},p(a,d){d&2&&(t.checked=a[1])},d(a){a&&C(e),l=!1,o()}}}function mi(s){let e,t,r,n,l,o,a;function d(p,g){return p[5]?gi:hi}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("span"),r=L(s[3]),n=w(),l=f("button"),m.c(),u(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],u(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),u(e,"class","flex items-center space-x-2")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(a=ee(l,"click",s[7]),o=!0)},p(p,g){g&8&&$(r,p[3]),c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null))),g&32&&(l.disabled=p[5])},d(p){p&&C(e),m.d(),o=!1,a()}}}function pi(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=L(s[3]),u(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),u(e,"class","flex items-center space-x-2")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&$(r,n[3])},d(n){n&&C(e)}}}function hi(s){let e;return{c(){e=L("Add to list")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function gi(s){let e,t;return{c(){e=f("span"),t=L(`
                Adding...`),u(e,"class","loading-spinner mr-1")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(C(e),C(t))}}}function bi(s){let e;function t(l,o){return l[4]?ii:li}let r=t(s),n=r(s);return{c(){n.c(),e=tt()},m(l,o){n.m(l,o),x(l,e,o)},p(l,[o]){r===(r=t(l))&&n?n.p(l,o):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(l){l&&C(e),n.d(l)}}}function ys(s){return s.avatar?s.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName||s.handle)}&background=6366f1&color=fff&size=64`}function yi(s,e,t){let{profile:r}=e,{isSelected:n=!1}=e,{onSelect:l=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:a=null}=e,{clickable:d=!1}=e,{onAddToList:c=()=>{}}=e,{isAddingToList:m=!1}=e;function p(){l(r)}function g(v){v.preventDefault(),v.stopPropagation(),c(r)}function b(v){d&&!o||d&&o&&(v.target.type==="checkbox"||v.target.closest('input[type="checkbox"]'))&&(v.preventDefault(),v.stopPropagation())}return s.$$set=v=>{"profile"in v&&t(0,r=v.profile),"isSelected"in v&&t(1,n=v.isSelected),"onSelect"in v&&t(9,l=v.onSelect),"showCheckbox"in v&&t(2,o=v.showCheckbox),"statusTag"in v&&t(3,a=v.statusTag),"clickable"in v&&t(4,d=v.clickable),"onAddToList"in v&&t(10,c=v.onAddToList),"isAddingToList"in v&&t(5,m=v.isAddingToList)},[r,n,o,a,d,m,p,g,b,l,c]}class vi extends Ne{constructor(e){super(),De(this,e,yi,bi,Ie,{profile:0,isSelected:1,onSelect:9,showCheckbox:2,statusTag:3,clickable:4,onAddToList:10,isAddingToList:5})}}var $t={};(function s(e,t,r,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),h=y.getContext("2d");h.fillRect(0,0,1,1);var U=y.transferToImageBitmap();try{h.createPattern(U,"no-repeat")}catch{return!1}return!0}();function d(){}function c(y){var h=t.exports.Promise,U=h!==void 0?h:e.Promise;return typeof U=="function"?new U(y):(y(d,d),null)}var m=function(y,h){return{transform:function(U){if(y)return U;if(h.has(U))return h.get(U);var H=new OffscreenCanvas(U.width,U.height),I=H.getContext("2d");return I.drawImage(U,0,0),h.set(U,H),H},clear:function(){h.clear()}}}(a,new Map),p=function(){var y=Math.floor(16.666666666666668),h,U,H={},I=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(D){var j=Math.random();return H[j]=requestAnimationFrame(function z(q){I===q||I+y-1<q?(I=q,delete H[j],D()):H[j]=requestAnimationFrame(z)}),j},U=function(D){H[D]&&cancelAnimationFrame(H[D])}):(h=function(D){return setTimeout(D,y)},U=function(D){return clearTimeout(D)}),{frame:h,cancel:U}}(),g=function(){var y,h,U={};function H(I){function D(j,z){I.postMessage({options:j||{},callback:z})}I.init=function(z){var q=z.transferControlToOffscreen();I.postMessage({canvas:q},[q])},I.fire=function(z,q,X){if(h)return D(z,null),h;var ie=Math.random().toString(36).slice(2);return h=c(function(le){function se(ae){ae.data.callback===ie&&(delete U[ie],I.removeEventListener("message",se),h=null,m.clear(),X(),le())}I.addEventListener("message",se),D(z,ie),U[ie]=se.bind(null,{data:{callback:ie}})}),h},I.reset=function(){I.postMessage({reset:!0});for(var z in U)U[z](),delete U[z]}}return function(){if(y)return y;if(!r&&l){var I=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([I])))}catch(D){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",D),null}H(y)}return y}}(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(y,h){return h?h(y):y}function _(y){return y!=null}function R(y,h,U){return v(y&&_(y[h])?y[h]:b[h],U)}function K(y){return y<0?0:Math.floor(y)}function A(y,h){return Math.floor(Math.random()*(h-y))+y}function W(y){return parseInt(y,16)}function O(y){return y.map(E)}function E(y){var h=String(y).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:W(h.substring(0,2)),g:W(h.substring(2,4)),b:W(h.substring(4,6))}}function k(y){var h=R(y,"origin",Object);return h.x=R(h,"x",Number),h.y=R(h,"y",Number),h}function P(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function M(y){var h=y.getBoundingClientRect();y.width=h.width,y.height=h.height}function B(y){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=y,h}function S(y,h,U,H,I,D,j,z,q){y.save(),y.translate(h,U),y.rotate(D),y.scale(H,I),y.arc(0,0,1,j,z,q),y.restore()}function F(y){var h=y.angle*(Math.PI/180),U=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-h+(.5*U-Math.random()*U),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function T(y,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var U=h.tick++/h.totalTicks,H=h.x+h.random*h.tiltCos,I=h.y+h.random*h.tiltSin,D=h.wobbleX+h.random*h.tiltCos,j=h.wobbleY+h.random*h.tiltSin;if(y.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-U)+")",y.beginPath(),o&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))y.fill(de(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(D-H)*.1,Math.abs(j-I)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var z=Math.PI/10*h.wobble,q=Math.abs(D-H)*.1,X=Math.abs(j-I)*.1,ie=h.shape.bitmap.width*h.scalar,le=h.shape.bitmap.height*h.scalar,se=new DOMMatrix([Math.cos(z)*q,Math.sin(z)*q,-Math.sin(z)*X,Math.cos(z)*X,h.x,h.y]);se.multiplySelf(new DOMMatrix(h.shape.matrix));var ae=y.createPattern(m.transform(h.shape.bitmap),"no-repeat");ae.setTransform(se),y.globalAlpha=1-U,y.fillStyle=ae,y.fillRect(h.x-ie/2,h.y-le/2,ie,le),y.globalAlpha=1}else if(h.shape==="circle")y.ellipse?y.ellipse(h.x,h.y,Math.abs(D-H)*h.ovalScalar,Math.abs(j-I)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):S(y,h.x,h.y,Math.abs(D-H)*h.ovalScalar,Math.abs(j-I)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var Z=Math.PI/2*3,me=4*h.scalar,ye=8*h.scalar,be=h.x,ve=h.y,Re=5,Se=Math.PI/Re;Re--;)be=h.x+Math.cos(Z)*ye,ve=h.y+Math.sin(Z)*ye,y.lineTo(be,ve),Z+=Se,be=h.x+Math.cos(Z)*me,ve=h.y+Math.sin(Z)*me,y.lineTo(be,ve),Z+=Se;else y.moveTo(Math.floor(h.x),Math.floor(h.y)),y.lineTo(Math.floor(h.wobbleX),Math.floor(I)),y.lineTo(Math.floor(D),Math.floor(j)),y.lineTo(Math.floor(H),Math.floor(h.wobbleY));return y.closePath(),y.fill(),h.tick<h.totalTicks}function J(y,h,U,H,I){var D=h.slice(),j=y.getContext("2d"),z,q,X=c(function(ie){function le(){z=q=null,j.clearRect(0,0,H.width,H.height),m.clear(),I(),ie()}function se(){r&&!(H.width===n.width&&H.height===n.height)&&(H.width=y.width=n.width,H.height=y.height=n.height),!H.width&&!H.height&&(U(y),H.width=y.width,H.height=y.height),j.clearRect(0,0,H.width,H.height),D=D.filter(function(ae){return T(j,ae)}),D.length?z=p.frame(se):le()}z=p.frame(se),q=le});return{addFettis:function(ie){return D=D.concat(ie),X},canvas:y,promise:X,reset:function(){z&&p.cancel(z),q&&q()}}}function N(y,h){var U=!y,H=!!R(h||{},"resize"),I=!1,D=R(h,"disableForReducedMotion",Boolean),j=l&&!!R(h||{},"useWorker"),z=j?g():null,q=U?P:M,X=y&&z?!!y.__confetti_initialized:!1,ie=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,le;function se(Z,me,ye){for(var be=R(Z,"particleCount",K),ve=R(Z,"angle",Number),Re=R(Z,"spread",Number),Se=R(Z,"startVelocity",Number),dt=R(Z,"decay",Number),qt=R(Z,"gravity",Number),ut=R(Z,"drift",Number),st=R(Z,"colors",O),Bt=R(Z,"ticks",Number),Dt=R(Z,"shapes"),qe=R(Z,"scalar"),Ve=!!R(Z,"flat"),Ye=k(Z),rt=be,ft=[],mt=y.width*Ye.x,pt=y.height*Ye.y;rt--;)ft.push(F({x:mt,y:pt,angle:ve,spread:Re,startVelocity:Se,color:st[rt%st.length],shape:Dt[A(0,Dt.length)],ticks:Bt,decay:dt,gravity:qt,drift:ut,scalar:qe,flat:Ve}));return le?le.addFettis(ft):(le=J(y,ft,q,me,ye),le.promise)}function ae(Z){var me=D||R(Z,"disableForReducedMotion",Boolean),ye=R(Z,"zIndex",Number);if(me&&ie)return c(function(Se){Se()});U&&le?y=le.canvas:U&&!y&&(y=B(ye),document.body.appendChild(y)),H&&!X&&q(y);var be={width:y.width,height:y.height};z&&!X&&z.init(y),X=!0,z&&(y.__confetti_initialized=!0);function ve(){if(z){var Se={getBoundingClientRect:function(){if(!U)return y.getBoundingClientRect()}};q(Se),z.postMessage({resize:{width:Se.width,height:Se.height}});return}be.width=be.height=null}function Re(){le=null,H&&(I=!1,e.removeEventListener("resize",ve)),U&&y&&(document.body.contains(y)&&document.body.removeChild(y),y=null,X=!1)}return H&&!I&&(I=!0,e.addEventListener("resize",ve,!1)),z?z.fire(Z,be,Re):se(Z,be,Re)}return ae.reset=function(){z&&z.reset(),le&&le.reset()},ae}var G;function te(){return G||(G=N(null,{useWorker:!0,resize:!0})),G}function de(y,h,U,H,I,D,j){var z=new Path2D(y),q=new Path2D;q.addPath(z,new DOMMatrix(h));var X=new Path2D;return X.addPath(q,new DOMMatrix([Math.cos(j)*I,Math.sin(j)*I,-Math.sin(j)*D,Math.cos(j)*D,U,H])),X}function oe(y){if(!o)throw new Error("path confetti are not supported in this browser");var h,U;typeof y=="string"?h=y:(h=y.path,U=y.matrix);var H=new Path2D(h),I=document.createElement("canvas"),D=I.getContext("2d");if(!U){for(var j=1e3,z=j,q=j,X=0,ie=0,le,se,ae=0;ae<j;ae+=2)for(var Z=0;Z<j;Z+=2)D.isPointInPath(H,ae,Z,"nonzero")&&(z=Math.min(z,ae),q=Math.min(q,Z),X=Math.max(X,ae),ie=Math.max(ie,Z));le=X-z,se=ie-q;var me=10,ye=Math.min(me/le,me/se);U=[ye,0,0,ye,-Math.round(le/2+z)*ye,-Math.round(se/2+q)*ye]}return{type:"path",path:h,matrix:U}}function ne(y){var h,U=1,H="#000000",I='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?h=y:(h=y.text,U="scalar"in y?y.scalar:U,I="fontFamily"in y?y.fontFamily:I,H="color"in y?y.color:H);var D=10*U,j=""+D+"px "+I,z=new OffscreenCanvas(D,D),q=z.getContext("2d");q.font=j;var X=q.measureText(h),ie=Math.ceil(X.actualBoundingBoxRight+X.actualBoundingBoxLeft),le=Math.ceil(X.actualBoundingBoxAscent+X.actualBoundingBoxDescent),se=2,ae=X.actualBoundingBoxLeft+se,Z=X.actualBoundingBoxAscent+se;ie+=se+se,le+=se+se,z=new OffscreenCanvas(ie,le),q=z.getContext("2d"),q.font=j,q.fillStyle=H,q.fillText(h,ae,Z);var me=1/U;return{type:"bitmap",bitmap:z.transferToImageBitmap(),matrix:[me,0,0,me,-ie*me/2,-le*me/2]}}t.exports=function(){return te().apply(this,arguments)},t.exports.reset=function(){te().reset()},t.exports.create=N,t.exports.shapeFromPath=oe,t.exports.shapeFromText=ne})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),$t,!1);const Ps=$t.exports;$t.exports.create;function Ir(s,e,t){const r=s.slice();return r[21]=e[t].profile,r[22]=e[t].status,r}function _i(s){let e;return{c(){e=L("🔍 Search")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function wi(s){let e,t;return{c(){e=f("span"),t=L(`
						Searching...`),u(e,"class","loading-spinner svelte-165a6uh")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(C(e),C(t))}}}function Rr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=L(s[4]),u(t,"class","text-red-700"),u(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&16&&$(r,n[4])},d(n){n&&C(e)}}}function Si(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',u(e,"class","text-center py-8")},m(t,r){x(t,e,r)},p:Q,i:Q,o:Q,d(t){t&&C(e)}}}function ki(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',u(e,"class","text-center py-8")},m(t,r){x(t,e,r)},p:Q,i:Q,o:Q,d(t){t&&C(e)}}}function Li(s){let e,t,r,n=he(s[7]),l=[];for(let d=0;d<n.length;d+=1)l[d]=Or(Ir(s,n,d));const o=d=>ue(l[d],1,1,()=>{l[d]=null});let a=s[5]&&Br(s);return{c(){e=f("div");for(let d=0;d<l.length;d+=1)l[d].c();t=w(),a&&a.c(),u(e,"class","space-y-4")},m(d,c){x(d,e,c);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);i(e,t),a&&a.m(e,null),r=!0},p(d,c){if(c&3266){n=he(d[7]);let m;for(m=0;m<n.length;m+=1){const p=Ir(d,n,m);l[m]?(l[m].p(p,c),re(l[m],1)):(l[m]=Or(p),l[m].c(),re(l[m],1),l[m].m(e,t))}for(Rt(),m=n.length;m<l.length;m+=1)o(m);Ot()}d[5]?a?a.p(d,c):(a=Br(d),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(d){if(!r){for(let c=0;c<n.length;c+=1)re(l[c]);r=!0}},o(d){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)ue(l[c]);r=!1},d(d){d&&C(e),et(l,d),a&&a.d()}}}function Or(s){let e,t;return e=new vi({props:{profile:s[21],isSelected:s[1].has(s[21].did),onSelect:s[10],statusTag:s[22],clickable:!0,onAddToList:s[11],isAddingToList:s[6].has(s[21].did)}}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p(r,n){const l={};n&128&&(l.profile=r[21]),n&130&&(l.isSelected=r[1].has(r[21].did)),n&128&&(l.statusTag=r[22]),n&192&&(l.isAddingToList=r[6].has(r[21].did)),e.$set(l)},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Br(s){let e,t,r,n;function l(d,c){return d[3]?xi:Ci}let o=l(s),a=o(s);return{c(){e=f("div"),t=f("button"),a.c(),t.disabled=s[3],u(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),u(e,"class","text-center pt-4 border-t border-gray-200")},m(d,c){x(d,e,c),i(e,t),a.m(t,null),r||(n=ee(t,"click",s[9]),r=!0)},p(d,c){o!==(o=l(d))&&(a.d(1),a=o(d),a&&(a.c(),a.m(t,null))),c&8&&(t.disabled=d[3])},d(d){d&&C(e),a.d(),r=!1,n()}}}function Ci(s){let e;return{c(){e=L("Load More Results")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function xi(s){let e,t;return{c(){e=f("span"),t=L(`
								Loading...`),u(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(C(e),C(t))}}}function Mi(s){let e,t,r,n,l,o,a,d,c,m,p,g,b,v,_,R,K,A;function W(S,F){return S[3]?wi:_i}let O=W(s),E=O(s),k=s[4]&&Rr(s);const P=[Li,ki,Si],M=[];function B(S,F){return S[0].length>0?0:S[2]&&!S[3]?1:S[2]?-1:2}return~(v=B(s))&&(_=M[v]=P[v](s)),{c(){e=f("div"),t=f("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',r=w(),n=f("div"),l=f("form"),o=f("div"),a=f("label"),a.textContent="Search for:",d=w(),c=f("input"),m=w(),p=f("button"),E.c(),g=w(),k&&k.c(),b=w(),_&&_.c(),u(t,"class","p-6 border-b border-gray-200"),u(a,"for","search-input"),u(a,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),u(c,"id","search-input"),u(c,"type","text"),u(c,"placeholder","e.g., belge, artist, developer..."),u(c,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),c.required=!0,u(p,"type","submit"),p.disabled=s[3],u(p,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),u(o,"class","flex gap-4 items-center flex-wrap"),u(l,"class","mb-6"),u(n,"id","profile-search-container"),u(n,"class","p-6"),u(e,"class","bg-white rounded-lg shadow-sm border border-gray-200")},m(S,F){x(S,e,F),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(o,a),i(o,d),i(o,c),Ce(c,s[2]),i(o,m),i(o,p),E.m(p,null),i(n,g),k&&k.m(n,null),i(n,b),~v&&M[v].m(n,null),R=!0,K||(A=[ee(c,"input",s[15]),ee(l,"submit",pn(s[8]))],K=!0)},p(S,[F]){F&4&&c.value!==S[2]&&Ce(c,S[2]),O!==(O=W(S))&&(E.d(1),E=O(S),E&&(E.c(),E.m(p,null))),(!R||F&8)&&(p.disabled=S[3]),S[4]?k?k.p(S,F):(k=Rr(S),k.c(),k.m(n,b)):k&&(k.d(1),k=null);let T=v;v=B(S),v===T?~v&&M[v].p(S,F):(_&&(Rt(),ue(M[T],1,1,()=>{M[T]=null}),Ot()),~v?(_=M[v],_?_.p(S,F):(_=M[v]=P[v](S),_.c()),re(_,1),_.m(n,null)):_=null)},i(S){R||(re(_),R=!0)},o(S){ue(_),R=!1},d(S){S&&C(e),E.d(),k&&k.d(),~v&&M[v].d(),K=!1,xe(A)}}}function Ai(s,e,t){let r,n,l;Ee(s,$e,k=>t(17,n=k)),Ee(s,pe,k=>t(14,l=k));let o="",a=[],d=!1,c="",m=new Set,p=null,g=!1,b=new Set;async function v(){if(!(!o.trim()||!n.session)){t(3,d=!0),t(4,c=""),t(0,a=[]),m.clear(),p=null,t(5,g=!1);try{const k=await Fe.searchProfiles(n.session,o,n.authType);t(0,a=k.actors||[]),p=k.cursor,t(5,g=!!k.cursor)}catch(k){t(4,c=k.message||"Failed to search profiles")}finally{t(3,d=!1)}}}async function _(){if(!(!g||d||!n.session)){t(3,d=!0),t(4,c="");try{const k=await Fe.searchProfiles(n.session,o,n.authType,25,p);t(0,a=[...a,...k.actors||[]]),p=k.cursor,t(5,g=!!k.cursor)}catch(k){t(4,c=k.message||"Failed to load more profiles")}finally{t(3,d=!1)}}}function R(k){m.has(k.did)?m.delete(k.did):m.add(k.did),t(1,m)}let K=null,A=!0;async function W(k){if(!(!n.session||!l.selectedList||b.has(k.did))){b.add(k.did),t(6,b);try{await Fe.addToList(n.session,k.did,l.selectedList.uri),await pe.fetchAndAddProfile(n.session,k.did),O()}catch(P){console.error("Failed to add profile to list:",P)}finally{b.delete(k.did),t(6,b)}}}function O(){Ps({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Ps({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Ps({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}function E(){o=this.value,t(2,o),t(14,l),t(13,A),t(12,K),t(1,m)}return s.$$.update=()=>{s.$$.dirty&28674&&l.selectedList&&(!A&&K&&K!==l.selectedList.uri&&(t(2,o=""),t(0,a=[]),m.clear(),p=null,t(5,g=!1),t(4,c="")),t(12,K=l.selectedList.uri),t(13,A=!1)),s.$$.dirty&16385&&t(7,r=a.map(k=>({profile:k,status:l.listMembers.includes(k.did)?"Already in list":"New candidate"})))},[a,m,o,d,c,g,b,r,v,_,R,W,K,A,l,E]}class Ei extends Ne{constructor(e){super(),De(this,e,Ai,Mi,Ie,{})}}function Dr(s,e,t){const r=s.slice();return r[15]=e[t],r}function Nr(s,e,t){const r=s.slice();return r[18]=e[t],r}function Kr(s){let e,t=s[2].selectedList.description+"",r;return{c(){e=f("p"),r=L(t),u(e,"class","text-slate-600 mt-1")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&4&&t!==(t=n[2].selectedList.description+"")&&$(r,t)},d(n){n&&C(e)}}}function Wr(s){let e,t,r,n,l,o,a,d,c,m=s[4].length.toLocaleString()+"",p,g,b=s[0].totalMembers.toLocaleString()+"",v,_,R,K,A,W,O;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("div"),o=f("div"),o.textContent="Calculating comprehensive statistics...",a=w(),d=f("div"),c=L("Processing "),p=L(m),g=L(" of "),v=L(b),_=L(`
						members (`),R=L(s[3]),K=L("%)"),A=w(),W=f("div"),O=f("div"),u(r,"class","loading-spinner svelte-1myfg8v"),u(o,"class","text-blue-700 font-medium"),u(d,"class","text-blue-600 text-sm"),u(t,"class","flex items-center justify-center space-x-3"),u(O,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),ge(O,"width",s[3]+"%"),u(W,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),u(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(E,k){x(E,e,k),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,a),i(l,d),i(d,c),i(d,p),i(d,g),i(d,v),i(d,_),i(d,R),i(d,K),i(e,A),i(e,W),i(W,O)},p(E,k){k&16&&m!==(m=E[4].length.toLocaleString()+"")&&$(p,m),k&1&&b!==(b=E[0].totalMembers.toLocaleString()+"")&&$(v,b),k&8&&$(R,E[3]),k&8&&ge(O,"width",E[3]+"%")},d(E){E&&C(e)}}}function Pi(s){let e,t,r,n,l,o=s[0].avgBioLength+"",a,d,c,m,p,g,b,v=s[0].accountsWithBios.toLocaleString()+"",_,R,K=s[0].totalMembers.toLocaleString()+"",A,W,O,E,k,P,M=s[0].accountsWithDisplayNames.toLocaleString()+"",B,S,F=s[0].totalMembers.toLocaleString()+"",T,J,N=s[0].mostCommonWords.length>0&&Ur(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average bio length:",n=w(),l=f("span"),a=L(o),d=L(" characters"),c=w(),m=f("div"),p=f("span"),p.textContent="Bios with content:",g=w(),b=f("span"),_=L(v),R=L(" / "),A=L(K),W=w(),O=f("div"),E=f("span"),E.textContent="Display names:",k=w(),P=f("span"),B=L(M),S=L(" / "),T=L(F),J=w(),N&&N.c(),u(r,"class","text-gray-600"),u(l,"class","font-medium"),u(t,"class","flex justify-between text-sm"),u(p,"class","text-gray-600"),u(b,"class","font-medium"),u(m,"class","flex justify-between text-sm"),u(E,"class","text-gray-600"),u(P,"class","font-medium"),u(O,"class","flex justify-between text-sm"),u(e,"class","space-y-2")},m(G,te){x(G,e,te),i(e,t),i(t,r),i(t,n),i(t,l),i(l,a),i(l,d),i(e,c),i(e,m),i(m,p),i(m,g),i(m,b),i(b,_),i(b,R),i(b,A),i(e,W),i(e,O),i(O,E),i(O,k),i(O,P),i(P,B),i(P,S),i(P,T),i(e,J),N&&N.m(e,null)},p(G,te){te&1&&o!==(o=G[0].avgBioLength+"")&&$(a,o),te&1&&v!==(v=G[0].accountsWithBios.toLocaleString()+"")&&$(_,v),te&1&&K!==(K=G[0].totalMembers.toLocaleString()+"")&&$(A,K),te&1&&M!==(M=G[0].accountsWithDisplayNames.toLocaleString()+"")&&$(B,M),te&1&&F!==(F=G[0].totalMembers.toLocaleString()+"")&&$(T,F),G[0].mostCommonWords.length>0?N?N.p(G,te):(N=Ur(G),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},d(G){G&&C(e),N&&N.d()}}}function Ti(s){let e;return{c(){e=f("div"),e.textContent="Calculating comprehensive bio statistics...",u(e,"class","text-gray-500 text-sm")},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function Ur(s){let e,t,r,n,l=he(s[0].mostCommonWords),o=[];for(let a=0;a<l.length;a+=1)o[a]=Hr(Nr(s,l,a));return{c(){e=f("div"),t=f("div"),t.textContent="Most common words:",r=w(),n=f("div");for(let a=0;a<o.length;a+=1)o[a].c();u(t,"class","text-xs text-gray-500 mb-2"),u(n,"class","flex flex-wrap gap-1"),u(e,"class","mt-3")},m(a,d){x(a,e,d),i(e,t),i(e,r),i(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(a,d){if(d&1){l=he(a[0].mostCommonWords);let c;for(c=0;c<l.length;c+=1){const m=Nr(a,l,c);o[c]?o[c].p(m,d):(o[c]=Hr(m),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},d(a){a&&C(e),et(o,a)}}}function Hr(s){let e,t=s[18].word+"",r,n,l=s[18].count+"",o,a;return{c(){e=f("span"),r=L(t),n=L(" ("),o=L(l),a=L(`)
									`),u(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(d,c){x(d,e,c),i(e,r),i(e,n),i(e,o),i(e,a)},p(d,c){c&1&&t!==(t=d[18].word+"")&&$(r,t),c&1&&l!==(l=d[18].count+"")&&$(o,l)},d(d){d&&C(e)}}}function Ii(s){let e,t,r,n,l,o=s[0].avgHandleLength+"",a,d,c,m=s[0].topDomains.length>0&&zr(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average handle length:",n=w(),l=f("span"),a=L(o),d=L(" characters"),c=w(),m&&m.c(),u(r,"class","text-gray-600"),u(l,"class","font-medium"),u(t,"class","flex justify-between text-sm"),u(e,"class","space-y-2")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,a),i(l,d),i(e,c),m&&m.m(e,null)},p(p,g){g&1&&o!==(o=p[0].avgHandleLength+"")&&$(a,o),p[0].topDomains.length>0?m?m.p(p,g):(m=zr(p),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(p){p&&C(e),m&&m.d()}}}function Ri(s){let e;return{c(){e=f("div"),e.textContent="Calculating handle statistics...",u(e,"class","text-gray-500 text-sm")},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function zr(s){let e,t,r,n,l=he(s[0].topDomains),o=[];for(let a=0;a<l.length;a+=1)o[a]=Fr(Dr(s,l,a));return{c(){e=f("div"),t=f("div"),t.textContent="Top domains:",r=w(),n=f("div");for(let a=0;a<o.length;a+=1)o[a].c();u(t,"class","text-xs text-gray-500 mb-2"),u(n,"class","space-y-1"),u(e,"class","mt-3")},m(a,d){x(a,e,d),i(e,t),i(e,r),i(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(a,d){if(d&1){l=he(a[0].topDomains);let c;for(c=0;c<l.length;c+=1){const m=Dr(a,l,c);o[c]?o[c].p(m,d):(o[c]=Fr(m),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},d(a){a&&C(e),et(o,a)}}}function Fr(s){let e,t,r,n=s[15].domain+"",l,o,a,d=s[15].count+"",c,m,p;return{c(){e=f("div"),t=f("span"),r=L("."),l=L(n),o=w(),a=f("span"),c=L(d),m=L(" users"),p=w(),u(t,"class","font-medium"),u(a,"class","text-gray-600"),u(e,"class","flex justify-between text-xs")},m(g,b){x(g,e,b),i(e,t),i(t,r),i(t,l),i(e,o),i(e,a),i(a,c),i(a,m),i(e,p)},p(g,b){b&1&&n!==(n=g[15].domain+"")&&$(l,n),b&1&&d!==(d=g[15].count+"")&&$(c,d)},d(g){g&&C(e)}}}function Oi(s){let e;return{c(){e=L("Unknown")},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function Bi(s){let e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=L(e)},m(r,n){x(r,t,n)},p(r,n){n&4&&e!==(e=new Date(r[2].selectedList.createdAt).toLocaleDateString()+"")&&$(t,e)},d(r){r&&C(t)}}}function Di(s){var cr,dr,ur;let e,t,r,n,l=(((cr=s[2].selectedList)==null?void 0:cr.name)||"List")+"",o,a,d,c,m,p=s[0].totalMembers.toLocaleString()+"",g,b,v,_,R,K,A,W,O,E,k,P,M=s[1]?"...":kt(s[0].accountsWithBios,s[0].totalMembers)+"%",B,S,F,T,J,N=s[1]?"Calculating...":`${s[0].accountsWithBios.toLocaleString()} have bios`,G,te,de,oe,ne,y,h,U,H=s[1]?"...":kt(s[0].verifiedAccounts,s[0].totalMembers)+"%",I,D,j,z,q,X=s[1]?"Calculating...":`${s[0].verifiedAccounts.toLocaleString()} verified accounts`,ie,le,se,ae,Z,me,ye,be,ve=s[1]?"...":kt(s[0].accountsWithAvatars,s[0].totalMembers)+"%",Re,Se,dt,qt,ut,st=s[1]?"Calculating...":`${s[0].accountsWithAvatars.toLocaleString()} have avatars`,Bt,Dt,qe,Ve,Ye,rt,ft,mt,pt=s[0].listAge+"",_s,Hs,Vt,zs,Yt,Fs,Ge,nt,Gt,Js,js,lt,Zt,$s,qs,ht,Qt,Vs,Ke,gt,Xt,Ys,es,ts=((dr=s[2].selectedList)==null?void 0:dr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",ws,Gs,bt,ss,Zs,Nt,Qs,yt,rs,Xs,Kt,ns=s[0].growthRate+"",Ss,er,tr,vt,ls,sr,is,os=s[1]?"Calculating...":`${s[0].recentAdditions} in last batch`,ks,rr,as,_t,Wt,nr,it,cs=s[1]?"Calculating...":"Refresh Stats",Ls,Cs,lr,_e=((ur=s[2].selectedList)==null?void 0:ur.description)&&Kr(s),we=s[1]&&Wr(s);function ir(V,ce){return V[1]?Ti:Pi}let ds=ir(s),We=ds(s);function or(V,ce){return V[1]?Ri:Ii}let us=or(s),Ue=us(s);function ar(V,ce){var Ut;return(Ut=V[2].selectedList)!=null&&Ut.createdAt?Bi:Oi}let fs=ar(s),He=fs(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("h2"),o=L(l),a=w(),_e&&_e.c(),d=w(),c=f("div"),m=f("div"),g=L(p),b=w(),v=f("div"),v.textContent="Total Members",_=w(),we&&we.c(),R=w(),K=f("div"),A=f("div"),W=f("div"),O=f("div"),E=f("div"),E.textContent="📊 Engagement",k=w(),P=f("div"),B=L(M),S=w(),F=f("div"),F.textContent="💬",T=w(),J=f("div"),G=L(N),te=w(),de=f("div"),oe=f("div"),ne=f("div"),y=f("div"),y.textContent="✅ Verified",h=w(),U=f("div"),I=L(H),D=w(),j=f("div"),j.textContent="✓",z=w(),q=f("div"),ie=L(X),le=w(),se=f("div"),ae=f("div"),Z=f("div"),me=f("div"),me.textContent="🖼️ Complete",ye=w(),be=f("div"),Re=L(ve),Se=w(),dt=f("div"),dt.textContent="👤",qt=w(),ut=f("div"),Bt=L(st),Dt=w(),qe=f("div"),Ve=f("div"),Ye=f("div"),rt=f("div"),rt.textContent="📅 Age",ft=w(),mt=f("div"),_s=L(pt),Hs=w(),Vt=f("div"),Vt.textContent="📆",zs=w(),Yt=f("div"),Yt.textContent="days old",Fs=w(),Ge=f("div"),nt=f("div"),Gt=f("h3"),Gt.textContent="📝 Bio Analysis",Js=w(),We.c(),js=w(),lt=f("div"),Zt=f("h3"),Zt.textContent="🔗 Handle Analysis",$s=w(),Ue.c(),qs=w(),ht=f("div"),Qt=f("h3"),Qt.textContent="📋 List Details",Vs=w(),Ke=f("div"),gt=f("div"),Xt=f("span"),Xt.textContent="Type:",Ys=w(),es=f("span"),ws=L(ts),Gs=w(),bt=f("div"),ss=f("span"),ss.textContent="Created:",Zs=w(),Nt=f("span"),He.c(),Qs=w(),yt=f("div"),rs=f("span"),rs.textContent="Growth rate:",Xs=w(),Kt=f("span"),Ss=L(ns),er=L(" members/day"),tr=w(),vt=f("div"),ls=f("span"),ls.textContent="Recent activity:",sr=w(),is=f("span"),ks=L(os),rr=w(),as=f("div"),_t=f("div"),Wt=f("button"),Wt.textContent="View on Bluesky",nr=w(),it=f("button"),Ls=L(cs),u(n,"class","text-xl font-bold text-slate-800"),u(m,"class","text-3xl font-bold text-blue-600"),u(v,"class","text-sm text-slate-500"),u(c,"class","text-right"),u(t,"class","flex items-center justify-between mb-6"),u(E,"class","text-blue-600 font-semibold text-sm"),u(P,"class","text-2xl font-bold text-blue-700"),u(F,"class","text-blue-400 text-3xl"),u(W,"class","flex items-center justify-between"),u(J,"class","text-xs text-blue-600 mt-1"),u(A,"class","bg-blue-50 p-4 rounded-lg"),u(y,"class","text-green-600 font-semibold text-sm"),u(U,"class","text-2xl font-bold text-green-700"),u(j,"class","text-green-400 text-3xl"),u(oe,"class","flex items-center justify-between"),u(q,"class","text-xs text-green-600 mt-1"),u(de,"class","bg-green-50 p-4 rounded-lg"),u(me,"class","text-purple-600 font-semibold text-sm"),u(be,"class","text-2xl font-bold text-purple-700"),u(dt,"class","text-purple-400 text-3xl"),u(ae,"class","flex items-center justify-between"),u(ut,"class","text-xs text-purple-600 mt-1"),u(se,"class","bg-purple-50 p-4 rounded-lg"),u(rt,"class","text-yellow-600 font-semibold text-sm"),u(mt,"class","text-2xl font-bold text-yellow-700"),u(Vt,"class","text-yellow-400 text-3xl"),u(Ve,"class","flex items-center justify-between"),u(Yt,"class","text-xs text-yellow-600 mt-1"),u(qe,"class","bg-yellow-50 p-4 rounded-lg"),u(K,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),u(Gt,"class","text-sm font-semibold text-gray-700 mb-3"),u(nt,"class","bg-gray-50 p-4 rounded-lg"),u(Zt,"class","text-sm font-semibold text-gray-700 mb-3"),u(lt,"class","bg-gray-50 p-4 rounded-lg"),u(Qt,"class","text-sm font-semibold text-gray-700 mb-3"),u(Xt,"class","text-gray-600"),u(es,"class","font-medium"),u(gt,"class","flex justify-between text-sm"),u(ss,"class","text-gray-600"),u(Nt,"class","font-medium"),u(bt,"class","flex justify-between text-sm"),u(rs,"class","text-gray-600"),u(Kt,"class","font-medium"),u(yt,"class","flex justify-between text-sm"),u(ls,"class","text-gray-600"),u(is,"class","font-medium"),u(vt,"class","flex justify-between text-sm"),u(Ke,"class","space-y-2"),u(ht,"class","bg-gray-50 p-4 rounded-lg"),u(Ge,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),u(Wt,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),u(it,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),it.disabled=s[1],u(_t,"class","flex flex-wrap gap-2"),u(as,"class","mt-6 pt-4 border-t border-gray-200"),u(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6")},m(V,ce){x(V,e,ce),i(e,t),i(t,r),i(r,n),i(n,o),i(r,a),_e&&_e.m(r,null),i(t,d),i(t,c),i(c,m),i(m,g),i(c,b),i(c,v),i(e,_),we&&we.m(e,null),i(e,R),i(e,K),i(K,A),i(A,W),i(W,O),i(O,E),i(O,k),i(O,P),i(P,B),i(W,S),i(W,F),i(A,T),i(A,J),i(J,G),i(K,te),i(K,de),i(de,oe),i(oe,ne),i(ne,y),i(ne,h),i(ne,U),i(U,I),i(oe,D),i(oe,j),i(de,z),i(de,q),i(q,ie),i(K,le),i(K,se),i(se,ae),i(ae,Z),i(Z,me),i(Z,ye),i(Z,be),i(be,Re),i(ae,Se),i(ae,dt),i(se,qt),i(se,ut),i(ut,Bt),i(K,Dt),i(K,qe),i(qe,Ve),i(Ve,Ye),i(Ye,rt),i(Ye,ft),i(Ye,mt),i(mt,_s),i(Ve,Hs),i(Ve,Vt),i(qe,zs),i(qe,Yt),i(e,Fs),i(e,Ge),i(Ge,nt),i(nt,Gt),i(nt,Js),We.m(nt,null),i(Ge,js),i(Ge,lt),i(lt,Zt),i(lt,$s),Ue.m(lt,null),i(Ge,qs),i(Ge,ht),i(ht,Qt),i(ht,Vs),i(ht,Ke),i(Ke,gt),i(gt,Xt),i(gt,Ys),i(gt,es),i(es,ws),i(Ke,Gs),i(Ke,bt),i(bt,ss),i(bt,Zs),i(bt,Nt),He.m(Nt,null),i(Ke,Qs),i(Ke,yt),i(yt,rs),i(yt,Xs),i(yt,Kt),i(Kt,Ss),i(Kt,er),i(Ke,tr),i(Ke,vt),i(vt,ls),i(vt,sr),i(vt,is),i(is,ks),i(e,rr),i(e,as),i(as,_t),i(_t,Wt),i(_t,nr),i(_t,it),i(it,Ls),Cs||(lr=[ee(Wt,"click",s[8]),ee(it,"click",s[6])],Cs=!0)},p(V,[ce]){var Ut,fr,mr;ce&4&&l!==(l=(((Ut=V[2].selectedList)==null?void 0:Ut.name)||"List")+"")&&$(o,l),(fr=V[2].selectedList)!=null&&fr.description?_e?_e.p(V,ce):(_e=Kr(V),_e.c(),_e.m(r,null)):_e&&(_e.d(1),_e=null),ce&1&&p!==(p=V[0].totalMembers.toLocaleString()+"")&&$(g,p),V[1]?we?we.p(V,ce):(we=Wr(V),we.c(),we.m(e,R)):we&&(we.d(1),we=null),ce&3&&M!==(M=V[1]?"...":kt(V[0].accountsWithBios,V[0].totalMembers)+"%")&&$(B,M),ce&3&&N!==(N=V[1]?"Calculating...":`${V[0].accountsWithBios.toLocaleString()} have bios`)&&$(G,N),ce&3&&H!==(H=V[1]?"...":kt(V[0].verifiedAccounts,V[0].totalMembers)+"%")&&$(I,H),ce&3&&X!==(X=V[1]?"Calculating...":`${V[0].verifiedAccounts.toLocaleString()} verified accounts`)&&$(ie,X),ce&3&&ve!==(ve=V[1]?"...":kt(V[0].accountsWithAvatars,V[0].totalMembers)+"%")&&$(Re,ve),ce&3&&st!==(st=V[1]?"Calculating...":`${V[0].accountsWithAvatars.toLocaleString()} have avatars`)&&$(Bt,st),ce&1&&pt!==(pt=V[0].listAge+"")&&$(_s,pt),ds===(ds=ir(V))&&We?We.p(V,ce):(We.d(1),We=ds(V),We&&(We.c(),We.m(nt,null))),us===(us=or(V))&&Ue?Ue.p(V,ce):(Ue.d(1),Ue=us(V),Ue&&(Ue.c(),Ue.m(lt,null))),ce&4&&ts!==(ts=((mr=V[2].selectedList)==null?void 0:mr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&$(ws,ts),fs===(fs=ar(V))&&He?He.p(V,ce):(He.d(1),He=fs(V),He&&(He.c(),He.m(Nt,null))),ce&1&&ns!==(ns=V[0].growthRate+"")&&$(Ss,ns),ce&3&&os!==(os=V[1]?"Calculating...":`${V[0].recentAdditions} in last batch`)&&$(ks,os),ce&2&&cs!==(cs=V[1]?"Calculating...":"Refresh Stats")&&$(Ls,cs),ce&2&&(it.disabled=V[1])},i:Q,o:Q,d(V){V&&C(e),_e&&_e.d(),we&&we.d(),We.d(),Ue.d(),He.d(),Cs=!1,xe(lr)}}}function kt(s,e){return e===0?0:Math.round(s/e*100)}function Ni(s,e,t){let r,n;Ee(s,pe,A=>t(2,r=A)),Ee(s,$e,A=>t(5,n=A));let l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,a=0,d=[],c=null,m=!1,p=null;function g(){t(0,l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,a=0),t(4,d=[])}function b(){var k,P;r.listMemberProfiles;const A=((k=r.selectedList)==null?void 0:k.listItemCount)||0,W=(P=r.selectedList)==null?void 0:P.createdAt,O=W?Math.floor((Date.now()-new Date(W).getTime())/(1e3*60*60*24)):0,E=O>0?Math.round(A/O):0;t(0,l={...l,totalMembers:A,listAge:O,growthRate:E})}async function v(){if(!n.session||!r.selectedList||o)return;const A=Date.now();c=A,t(1,o=!0),t(3,a=0),t(4,d=[]);try{const W=r.selectedList.listItemCount||0;if(W===0){_([]),m=!0;return}let O=null,E=0;const k=100;do{E++,t(3,a=Math.round(d.length/W*100));const P=await Fe.getListMembers(n.session,r.selectedList.uri,n.authType,k,O);if(c!==A)return;t(4,d=[...d,...P.profiles]),O=P.cursor,t(3,a=Math.round(d.length/W*100))}while(O&&d.length<W);if(c!==A)return;_(d),m=!0}catch(W){console.error("Error loading all members for statistics:",W),b(),m=!0}finally{c===A&&(t(1,o=!1),t(3,a=0))}}function _(A){var H;const W=A.length,O=A.filter(I=>I.verified).length,E=A.filter(I=>I.avatar).length,k=A.filter(I=>I.description&&I.description.trim().length>0).length,P=A.filter(I=>I.displayName&&I.displayName.trim().length>0).length,M=A.map(I=>I.description||"").filter(I=>I.trim().length>0),B=M.length>0?Math.round(M.reduce((I,D)=>I+D.length,0)/M.length):0,S=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],F=M.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(I=>I.length>2&&!S.includes(I)),T={};F.forEach(I=>{T[I]=(T[I]||0)+1});const J=Object.entries(T).sort(([,I],[,D])=>D-I).slice(0,5).map(([I,D])=>({word:I,count:D})),N=A.map(I=>I.handle||"").filter(I=>I.length>0),G=N.length>0?Math.round(N.reduce((I,D)=>I+D.length,0)/N.length):0,te=N.map(I=>{const D=I.split(".");return D.length>1?D[D.length-1]:null}).filter(I=>I&&I.length>0),de={};te.forEach(I=>{de[I]=(de[I]||0)+1});const oe=Object.entries(de).sort(([,I],[,D])=>D-I).slice(0,3).map(([I,D])=>({domain:I,count:D})),ne=(H=r.selectedList)==null?void 0:H.createdAt,y=ne?Math.floor((Date.now()-new Date(ne).getTime())/(1e3*60*60*24)):0,h=y>0?Math.round(W/y):0,U=Math.min(25,A.length);t(0,l={totalMembers:W,recentAdditions:U,verifiedAccounts:O,accountsWithAvatars:E,accountsWithBios:k,avgBioLength:B,mostCommonWords:J,listAge:y,accountsWithDisplayNames:P,avgHandleLength:G,topDomains:oe,growthRate:h})}function R(){o||(m=!1,v())}const K=()=>{var W,O,E;const A=(W=r.selectedList)==null?void 0:W.uri;if(A){const k=A.split("/"),P=k[k.length-1],M=`https://bsky.app/profile/${(O=n.session)==null?void 0:O.handle}/lists/${P}`;window.open(M,"_blank")}else window.open(`https://bsky.app/profile/${(E=n.session)==null?void 0:E.handle}/lists`,"_blank")};return s.$$.update=()=>{var A,W;s.$$.dirty&4&&r.selectedList&&b(),s.$$.dirty&7&&((A=r.selectedList)==null?void 0:A.listItemCount)!==l.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(W=r.selectedList)==null?void 0:W.listItemCount),console.log("Current stats.totalMembers:",l.totalMembers),b()),s.$$.dirty&132&&!r.selectedList&&p!==null&&(t(7,p=null),m=!1,g()),s.$$.dirty&134&&r.selectedList&&r.selectedList.uri!==p&&!o&&(t(7,p=r.selectedList.uri),m=!1,g(),v())},[l,o,r,a,d,n,R,p,K]}class Ki extends Ne{constructor(e){super(),De(this,e,Ni,Di,Ie,{})}}function Jr(s,e,t){const r=s.slice();return r[25]=e[t],r}function jr(s,e,t){const r=s.slice();return r[31]=e[t],r}function $r(s,e,t){const r=s.slice();return r[28]=e[t],r}function qr(s,e,t){const r=s.slice();return r[34]=e[t],r}function Vr(s){let e,t,r,n,l,o,a=s[4].size+"",d,c,m,p;function g(_,R){return _[5]?Ui:Wi}let b=g(s),v=b(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("button"),v.c(),l=w(),o=f("div"),d=L(a),c=L(" profiles selected"),n.disabled=s[5],u(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),u(r,"class","flex items-center gap-3"),u(o,"class","text-sm text-slate-600"),u(t,"class","flex items-center justify-between"),u(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm")},m(_,R){x(_,e,R),i(e,t),i(t,r),i(r,n),v.m(n,null),i(t,l),i(t,o),i(o,d),i(o,c),m||(p=ee(n,"click",s[12]),m=!0)},p(_,R){b===(b=g(_))&&v?v.p(_,R):(v.d(1),v=b(_),v&&(v.c(),v.m(n,null))),R[0]&32&&(n.disabled=_[5]),R[0]&16&&a!==(a=_[4].size+"")&&$(d,a)},d(_){_&&C(e),v.d(),m=!1,p()}}}function Wi(s){let e,t=s[4].size+"",r,n;return{c(){e=L("Add "),r=L(t),n=L(" to List")},m(l,o){x(l,e,o),x(l,r,o),x(l,n,o)},p(l,o){o[0]&16&&t!==(t=l[4].size+"")&&$(r,t)},d(l){l&&(C(e),C(r),C(n))}}}function Ui(s){let e,t;return{c(){e=f("span"),t=L(`
							Adding...`),u(e,"class","loading-spinner mr-2 svelte-srpbru")},m(r,n){x(r,e,n),x(r,t,n)},p:Q,d(r){r&&(C(e),C(t))}}}function Yr(s){let e,t,r,n=s[6].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=L("✅ Successfully added "),l=L(n),o=L(" profiles to your list!"),u(t,"class","text-green-700 font-medium"),u(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(a,d){x(a,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(a,d){d[0]&64&&n!==(n=a[6].success.length+"")&&$(l,n)},d(a){a&&C(e)}}}function Gr(s){let e,t,r,n=s[6].errors.length+"",l,o,a,d,c=he(s[6].errors),m=[];for(let p=0;p<c.length;p+=1)m[p]=Zr(qr(s,c,p));return{c(){e=f("div"),t=f("p"),r=L("❌ Failed to add "),l=L(n),o=L(" profiles:"),a=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();u(t,"class","text-red-700 font-medium mb-2"),u(d,"class","text-red-600 text-sm space-y-1"),u(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(t,l),i(t,o),i(e,a),i(e,d);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(d,null)},p(p,g){if(g[0]&64&&n!==(n=p[6].errors.length+"")&&$(l,n),g[0]&64){c=he(p[6].errors);let b;for(b=0;b<c.length;b+=1){const v=qr(p,c,b);m[b]?m[b].p(v,g):(m[b]=Zr(v),m[b].c(),m[b].m(d,null))}for(;b<m.length;b+=1)m[b].d(1);m.length=c.length}},d(p){p&&C(e),et(m,p)}}}function Zr(s){let e,t,r=s[34].error+"",n;return{c(){e=f("li"),t=L("• "),n=L(r)},m(l,o){x(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&64&&r!==(r=l[34].error+"")&&$(n,r)},d(l){l&&C(e)}}}function Hi(s){let e,t,r;function n(d,c){return d[8]?qi:d[1].listMemberProfiles.length>0?$i:ji}let l=n(s),o=l(s),a=s[9]>1&&sn(s);return{c(){e=f("div"),t=f("div"),o.c(),r=w(),a&&a.c(),u(t,"class","space-y-4 flex-1 overflow-y-auto"),u(e,"class","flex flex-col flex-1")},m(d,c){x(d,e,c),i(e,t),o.m(t,null),i(e,r),a&&a.m(e,null)},p(d,c){l===(l=n(d))&&o?o.p(d,c):(o.d(1),o=l(d),o&&(o.c(),o.m(t,null))),d[9]>1?a?a.p(d,c):(a=sn(d),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(d){d&&C(e),o.d(),a&&a.d()}}}function zi(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">📝</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Members Yet</h3> <p class="text-slate-600">Your list is empty. Use the search to find and add profiles!</p></div>',u(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function Fi(s){let e,t,r,n,l,o,a,d;return{c(){e=f("div"),t=f("div"),r=f("p"),n=L(s[3]),l=w(),o=f("button"),o.textContent="Try again",u(r,"class","text-red-700 mb-4"),u(o,"class","text-red-600 hover:text-red-800 underline"),u(t,"class","text-center"),u(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(c,m){x(c,e,m),i(e,t),i(t,r),i(r,n),i(t,l),i(t,o),a||(d=ee(o,"click",s[10]),a=!0)},p(c,m){m[0]&8&&$(n,c[3])},d(c){c&&C(e),a=!1,d()}}}function Ji(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-srpbru"></div> <p class="text-slate-600">Loading list members...</p></div>',u(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){x(t,e,r)},p:Q,d(t){t&&C(e)}}}function ji(s){let e,t,r=s[3]&&Qr(s),n=he(s[1].listMembers.slice(0,100)),l=[];for(let o=0;o<n.length;o+=1)l[o]=Xr(jr(s,n,o));return{c(){r&&r.c(),e=w();for(let o=0;o<l.length;o+=1)l[o].c();t=tt()},m(o,a){r&&r.m(o,a),x(o,e,a);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(o,a);x(o,t,a)},p(o,a){if(o[3]?r?r.p(o,a):(r=Qr(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0]&2){n=he(o[1].listMembers.slice(0,100));let d;for(d=0;d<n.length;d+=1){const c=jr(o,n,d);l[d]?l[d].p(c,a):(l[d]=Xr(c),l[d].c(),l[d].m(t.parentNode,t))}for(;d<l.length;d+=1)l[d].d(1);l.length=n.length}},d(o){o&&(C(e),C(t)),r&&r.d(o),et(l,o)}}}function $i(s){let e,t=he(s[1].listMemberProfiles),r=[];for(let n=0;n<t.length;n+=1)r[n]=tn($r(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=tt()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);x(n,e,l)},p(n,l){if(l[0]&2){t=he(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const a=$r(n,t,o);r[o]?r[o].p(a,l):(r[o]=tn(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&C(e),et(r,n)}}}function qi(s){let e,t,r,n,l,o,a;return{c(){e=f("div"),t=f("div"),r=w(),n=f("p"),l=L("Loading page "),o=L(s[7]),a=L("..."),u(t,"class","loading-spinner mx-auto mb-4 svelte-srpbru"),u(n,"class","text-slate-600"),u(e,"class","text-center py-8")},m(d,c){x(d,e,c),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,a)},p(d,c){c[0]&128&&$(o,d[7])},d(d){d&&C(e)}}}function Qr(s){let e,t,r,n,l,o,a,d,c,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("p"),n.textContent="⚠️ Profile loading issue",l=w(),o=f("p"),a=L(s[3]),d=w(),c=f("button"),c.textContent="Retry",u(n,"class","text-yellow-800 font-medium"),u(o,"class","text-yellow-700 text-sm mt-1"),u(c,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),u(t,"class","flex items-center justify-between"),u(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(g,b){x(g,e,b),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(o,a),i(t,d),i(t,c),m||(p=ee(c,"click",s[19]),m=!0)},p(g,b){b[0]&8&&$(a,g[3])},d(g){g&&C(e),m=!1,p()}}}function Xr(s){let e,t,r,n,l,o,a=s[31]+"",d,c,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=w(),l=f("div"),o=f("div"),d=L(a),c=w(),m=f("div"),m.textContent="Member of list",p=w(),u(r,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),u(o,"class","text-sm text-gray-600 font-mono text-xs break-all"),u(m,"class","text-xs text-gray-500"),u(l,"class","flex-1"),u(t,"class","flex items-center space-x-3"),u(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(g,b){x(g,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(o,d),i(l,c),i(l,m),i(e,p)},p(g,b){b[0]&2&&a!==(a=g[31]+"")&&$(d,a)},d(g){g&&C(e)}}}function en(s){let e,t=s[28].description+"",r;return{c(){e=f("p"),r=L(t),u(e,"class","text-xs text-gray-600 line-clamp-2 svelte-srpbru")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l[0]&2&&t!==(t=n[28].description+"")&&$(r,t)},d(n){n&&C(e)}}}function tn(s){let e,t,r,n,l,o,a,d,c,m,p,g=(s[28].displayName||s[28].handle)+"",b,v,_,R,K=s[28].handle+"",A,W,O,E,k,P,M=s[28].description&&en(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h4"),b=L(g),v=w(),_=f("span"),R=L("@"),A=L(K),W=w(),M&&M.c(),O=w(),E=f("div"),E.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',k=w(),It(n.src,l=s[28].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[28].displayName||s[28].handle)}&background=6366f1&color=fff&size=64`)||u(n,"src",l),u(n,"alt",o=s[28].displayName||s[28].handle),u(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),u(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[28].displayName||s[28].handle)+"&background=6366f1&color=fff&size=64'"),u(r,"class","flex-shrink-0"),u(p,"class","text-sm font-semibold text-gray-900 truncate"),u(_,"class","text-xs text-gray-600 truncate"),u(m,"class","flex items-center space-x-2 mb-1"),u(c,"class","flex-1 min-w-0"),u(E,"class","flex-shrink-0"),u(t,"class","flex items-center space-x-3"),u(e,"href",P="https://bsky.app/profile/"+s[28].handle),u(e,"target","_blank"),u(e,"rel","noopener noreferrer"),u(e,"class","block bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200 cursor-pointer")},m(B,S){x(B,e,S),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,b),i(m,v),i(m,_),i(_,R),i(_,A),i(c,W),M&&M.m(c,null),i(t,O),i(t,E),i(e,k)},p(B,S){S[0]&2&&!It(n.src,l=B[28].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(B[28].displayName||B[28].handle)}&background=6366f1&color=fff&size=64`)&&u(n,"src",l),S[0]&2&&o!==(o=B[28].displayName||B[28].handle)&&u(n,"alt",o),S[0]&2&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(B[28].displayName||B[28].handle)+"&background=6366f1&color=fff&size=64'")&&u(n,"onerror",a),S[0]&2&&g!==(g=(B[28].displayName||B[28].handle)+"")&&$(b,g),S[0]&2&&K!==(K=B[28].handle+"")&&$(A,K),B[28].description?M?M.p(B,S):(M=en(B),M.c(),M.m(c,null)):M&&(M.d(1),M=null),S[0]&2&&P!==(P="https://bsky.app/profile/"+B[28].handle)&&u(e,"href",P)},d(B){B&&C(e),M&&M.d()}}}function sn(s){let e,t,r,n,l,o,a,d,c,m,p,g,b,v,_,R,K,A,W,O,E,k,P,M=s[8]&&s[7]>1&&rn(),B=he(Array.from({length:Math.min(5,s[9])},s[20])),S=[];for(let T=0;T<B.length;T+=1)S[T]=nn(Jr(s,B,T));let F=s[8]&&s[7]<s[9]&&ln();return{c(){e=f("div"),t=f("div"),r=f("div"),n=L("Page "),l=L(s[7]),o=L(" of "),a=L(s[9]),d=L(" ("),c=L(s[0]),m=L(" total members)"),p=w(),g=f("div"),b=f("button"),M&&M.c(),v=L(`
											Previous`),R=w(),K=f("div");for(let T=0;T<S.length;T+=1)S[T].c();A=w(),W=f("button"),O=L(`Next
											`),F&&F.c(),u(r,"class","text-sm text-gray-600"),b.disabled=_=s[7]===1||s[8],u(b,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),u(K,"class","flex items-center space-x-1"),W.disabled=E=s[7]===s[9]||s[8],u(W,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),u(g,"class","flex items-center space-x-2"),u(t,"class","flex items-center justify-between"),u(e,"class","mt-6 pt-4 border-t border-gray-200")},m(T,J){x(T,e,J),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(r,a),i(r,d),i(r,c),i(r,m),i(t,p),i(t,g),i(g,b),M&&M.m(b,null),i(b,v),i(g,R),i(g,K);for(let N=0;N<S.length;N+=1)S[N]&&S[N].m(K,null);i(g,A),i(g,W),i(W,O),F&&F.m(W,null),k||(P=[ee(b,"click",s[15]),ee(W,"click",s[14])],k=!0)},p(T,J){if(J[0]&128&&$(l,T[7]),J[0]&512&&$(a,T[9]),J[0]&1&&$(c,T[0]),T[8]&&T[7]>1?M||(M=rn(),M.c(),M.m(b,v)):M&&(M.d(1),M=null),J[0]&384&&_!==(_=T[7]===1||T[8])&&(b.disabled=_),J[0]&9088){B=he(Array.from({length:Math.min(5,T[9])},T[20]));let N;for(N=0;N<B.length;N+=1){const G=Jr(T,B,N);S[N]?S[N].p(G,J):(S[N]=nn(G),S[N].c(),S[N].m(K,null))}for(;N<S.length;N+=1)S[N].d(1);S.length=B.length}T[8]&&T[7]<T[9]?F||(F=ln(),F.c(),F.m(W,null)):F&&(F.d(1),F=null),J[0]&896&&E!==(E=T[7]===T[9]||T[8])&&(W.disabled=E)},d(T){T&&C(e),M&&M.d(),et(S,T),F&&F.d(),k=!1,xe(P)}}}function rn(s){let e;return{c(){e=f("span"),u(e,"class","loading-spinner mr-1 svelte-srpbru")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function nn(s){let e,t=s[25]+"",r,n,l,o,a;function d(){return s[21](s[25])}return{c(){e=f("button"),r=L(t),n=w(),e.disabled=s[8],u(e,"class",l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[7]===s[25]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(c,m){x(c,e,m),i(e,r),i(e,n),o||(a=ee(e,"click",d),o=!0)},p(c,m){s=c,m[0]&640&&t!==(t=s[25]+"")&&$(r,t),m[0]&256&&(e.disabled=s[8]),m[0]&640&&l!==(l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[7]===s[25]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&u(e,"class",l)},d(c){c&&C(e),o=!1,a()}}}function ln(s){let e;return{c(){e=f("span"),u(e,"class","loading-spinner ml-1 svelte-srpbru")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function Vi(s){let e,t,r,n,l,o,a,d,c,m,p,g,b,v=(s[8]?"...":s[1].listMemberProfiles.length)+"",_,R,K,A,W,O,E,k,P,M,B=s[1].listMemberProfiles.length+"",S,F,T=s[1].listMembers.length+"",J,N,G,te,de,oe;t=new Ki({});let ne=s[4].size>0&&Vr(s),y=s[6].success.length>0&&Yr(s),h=s[6].errors.length>0&&Gr(s);function U(D,j){return D[2]?Ji:D[3]?Fi:D[1].listMembers.length===0?zi:Hi}let H=U(s),I=H(s);return de=new Ei({}),{c(){e=f("div"),Be(t.$$.fragment),r=w(),ne&&ne.c(),n=w(),y&&y.c(),l=w(),h&&h.c(),o=w(),a=f("div"),d=f("div"),c=f("div"),m=f("h3"),m.textContent="Latest list members",p=w(),g=f("p"),b=L("Showing "),_=L(v),R=L(" of "),K=L(s[0]),A=L(`
					total members`),W=w(),O=f("div"),E=f("div"),k=L("Debug: isLoadingMembers="),P=L(s[2]),M=L(", profiles="),S=L(B),F=L(", members="),J=L(T),N=w(),I.c(),G=w(),te=f("div"),Be(de.$$.fragment),u(m,"class","text-lg font-semibold text-slate-800 mb-2"),u(g,"class","text-sm text-slate-600"),u(c,"class","p-6 border-b border-gray-200"),u(E,"class","text-xs text-gray-500 mb-2"),u(O,"class","p-6 flex flex-col flex-1"),u(d,"id","list-members-container"),u(d,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),u(a,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),u(e,"class","space-y-6")},m(D,j){x(D,e,j),Pe(t,e,null),i(e,r),ne&&ne.m(e,null),i(e,n),y&&y.m(e,null),i(e,l),h&&h.m(e,null),i(e,o),i(e,a),i(a,d),i(d,c),i(c,m),i(c,p),i(c,g),i(g,b),i(g,_),i(g,R),i(g,K),i(g,A),i(d,W),i(d,O),i(O,E),i(E,k),i(E,P),i(E,M),i(E,S),i(E,F),i(E,J),i(O,N),I.m(O,null),i(a,G),i(a,te),Pe(de,te,null),oe=!0},p(D,j){D[4].size>0?ne?ne.p(D,j):(ne=Vr(D),ne.c(),ne.m(e,n)):ne&&(ne.d(1),ne=null),D[6].success.length>0?y?y.p(D,j):(y=Yr(D),y.c(),y.m(e,l)):y&&(y.d(1),y=null),D[6].errors.length>0?h?h.p(D,j):(h=Gr(D),h.c(),h.m(e,o)):h&&(h.d(1),h=null),(!oe||j[0]&258)&&v!==(v=(D[8]?"...":D[1].listMemberProfiles.length)+"")&&$(_,v),(!oe||j[0]&1)&&$(K,D[0]),(!oe||j[0]&4)&&$(P,D[2]),(!oe||j[0]&2)&&B!==(B=D[1].listMemberProfiles.length+"")&&$(S,B),(!oe||j[0]&2)&&T!==(T=D[1].listMembers.length+"")&&$(J,T),H===(H=U(D))&&I?I.p(D,j):(I.d(1),I=H(D),I&&(I.c(),I.m(O,null)))},i(D){oe||(re(t.$$.fragment,D),re(de.$$.fragment,D),oe=!0)},o(D){ue(t.$$.fragment,D),ue(de.$$.fragment,D),oe=!1},d(D){D&&C(e),Te(t),ne&&ne.d(),y&&y.d(),h&&h.d(),I.d(),Te(de)}}}const Ts=25;function Yi(s,e,t){let r,n;Ee(s,pe,S=>t(1,r=S)),Ee(s,$e,S=>t(18,n=S));let l=!1,o="",a=new Set,d=!1,c={success:[],errors:[]},m=1,p=!1,g=!1,b=0,v=new Map,_=0,R=null;async function K(){if(!(!r.selectedList||!n.session||g)){t(16,g=!0),t(2,l=!0),t(3,o=""),t(7,m=1),v.clear();try{const S=await Fe.getListInfo(n.session,r.selectedList.uri,n.authType),F={...r.selectedList,name:S.name,description:S.description,createdAt:S.createdAt,listItemCount:S.listItemCount};pe.setSelectedList(F),t(0,_=S.listItemCount||0),t(9,b=Math.ceil(_/Ts)),console.log("Total pages:",b,"Total count:",_),await A(1),pe.setListLoading(!1)}catch(S){console.error("Error loading list members:",S),t(3,o=S.message||"Failed to load list members"),pe.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,l=!1),t(16,g=!1),console.log("Final state - isLoadingMembers:",l,"isCurrentlyLoadingMembers:",g)}}}async function A(S){if(!(!n.session||!r.selectedList)){t(8,p=!0),t(7,m=S);try{let F=v.get(S-1);const T=await Fe.getListMembers(n.session,r.selectedList.uri,n.authType,Ts,F);console.log(`Fetched ${T.members.length} members for page ${S}`),console.log("Members received:",T.members),T.cursor&&v.set(S,T.cursor),T.members.length===0?(console.warn("No members returned from API for page",S),t(3,o="No member data received from API")):t(3,o="");const J=T.profiles||[];console.log(`Using ${J.length} profiles from API response for page ${S}`),console.log("Setting profiles in store:",J.length),pe.setListMembers(T.members),pe.setListMemberProfiles(J),console.log("Profiles set in store, current count:",r.listMemberProfiles.length)}catch(F){console.error("Error loading members page:",F),t(3,o=F.message||"Failed to load page"),pe.setListMemberProfiles([])}finally{t(8,p=!1)}}}async function W(){if(a.size===0)return;t(5,d=!0),t(6,c={success:[],errors:[]});const S=Array.from(a);for(const F of S)try{await Fe.addToList(n.session,F,r.selectedList.uri,n.authType),c.success.push(F),await pe.fetchAndAddProfile(n.session,F,n.authType)}catch(T){c.errors.push({did:F,error:T.message})}a.clear(),t(4,a),t(5,d=!1)}async function O(S){S>=1&&S<=b&&await A(S)}async function E(){m<b&&await A(m+1)}async function k(){m>1&&await A(m-1)}const P=()=>A(m),M=(S,F)=>{let T;return b<=5||m<=3?T=F+1:m>=b-2?T=b-4+F:T=m-2+F,T},B=S=>O(S);return s.$$.update=()=>{var S,F,T;s.$$.dirty[0]&2&&r.refreshTrigger&&K(),s.$$.dirty[0]&2&&console.log("Profile count changed:",r.listMemberProfiles.length),s.$$.dirty[0]&3&&((S=r.selectedList)==null?void 0:S.listItemCount)!==_&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(F=r.selectedList)==null?void 0:F.listItemCount),console.log("Current totalMemberCount:",_),t(0,_=((T=r.selectedList)==null?void 0:T.listItemCount)||0),t(9,b=Math.ceil(_/Ts))),s.$$.dirty[0]&458754&&r.selectedList&&n.session&&!g&&R!==r.selectedList.uri&&(console.log("List changed, loading members for:",r.selectedList.name),t(17,R=r.selectedList.uri),K())},[_,r,l,o,a,d,c,m,p,b,K,A,W,O,E,k,g,R,n,P,M,B]}class Gi extends Ne{constructor(e){super(),De(this,e,Yi,Vi,Ie,{},null,[-1,-1])}}function on(s){let e,t,r,n,l,o,a,d;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("h3"),l.textContent="Getting Ready",o=w(),a=f("p"),d=L(s[1]),u(r,"class","loading-spinner mx-auto mb-4 svelte-3t5r6s"),u(l,"class","text-lg font-semibold text-slate-800 mb-2"),u(a,"class","text-slate-600"),u(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),u(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]")},m(c,m){x(c,e,m),i(e,t),i(t,r),i(t,n),i(t,l),i(t,o),i(t,a),i(a,d)},p(c,m){m&2&&$(d,c[1])},d(c){c&&C(e)}}}function Zi(s){let e,t=s[0]&&on(s);return{c(){t&&t.c(),e=tt()},m(r,n){t&&t.m(r,n),x(r,e,n)},p(r,[n]){r[0]?t?t.p(r,n):(t=on(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Q,o:Q,d(r){r&&C(e),t&&t.d(r)}}}function Qi(s,e,t){let{isLoading:r=!1}=e,{message:n="Loading list data..."}=e;return s.$$set=l=>{"isLoading"in l&&t(0,r=l.isLoading),"message"in l&&t(1,n=l.message)},[r,n]}class Xi extends Ne{constructor(e){super(),De(this,e,Qi,Zi,Ie,{isLoading:0,message:1})}}function an(s,e,t){const r=s.slice();return r[8]=e[t],r}function cn(s,e){let t,r,n;return{key:s,first:null,c(){t=f("div"),r=br("svg"),n=br("path"),u(n,"d","m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"),u(n,"fill","#1185fe"),u(n,"opacity","0.4"),u(r,"width","100%"),u(r,"height","100%"),u(r,"viewBox","0 0 600 530"),u(r,"xmlns","http://www.w3.org/2000/svg"),u(r,"class","butterfly-svg svelte-1l7ozht"),u(t,"class","butterfly svelte-1l7ozht"),ge(t,"left",e[8].x+"%"),ge(t,"top",e[8].y+"%"),ge(t,"width",e[8].size+"px"),ge(t,"height",e[8].size+"px"),ge(t,"animation-duration",e[8].speed+"s"),ge(t,"animation-delay",e[8].delay+"s"),ge(t,"transform","rotate("+e[8].rotation+"deg)"),ge(t,"opacity",.6+Math.random()*.4),this.first=t},m(l,o){x(l,t,o),i(t,r),i(r,n)},p(l,o){e=l,o&1&&ge(t,"left",e[8].x+"%"),o&1&&ge(t,"top",e[8].y+"%"),o&1&&ge(t,"width",e[8].size+"px"),o&1&&ge(t,"height",e[8].size+"px"),o&1&&ge(t,"animation-duration",e[8].speed+"s"),o&1&&ge(t,"animation-delay",e[8].delay+"s"),o&1&&ge(t,"transform","rotate("+e[8].rotation+"deg)")},d(l){l&&C(t)}}}function dn(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="message-content svelte-1l7ozht"><svg width="60" height="53" viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg" class="svelte-1l7ozht"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe" opacity="0.3"></path></svg> <p class="svelte-1l7ozht">Add members to your list to see butterflies flutter by!</p></div>',u(e,"class","empty-list-message svelte-1l7ozht")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function eo(s){let e,t=[],r=new Map,n,l=he(s[0]);const o=d=>d[8].id;for(let d=0;d<l.length;d+=1){let c=an(s,l,d),m=o(c);r.set(m,t[d]=cn(m,c))}let a=s[2].selectedList&&s[1]===0&&dn();return{c(){e=f("div");for(let d=0;d<t.length;d+=1)t[d].c();n=w(),a&&a.c(),u(e,"class","butterfly-background svelte-1l7ozht")},m(d,c){x(d,e,c);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i(e,n),a&&a.m(e,null),s[5](e)},p(d,[c]){c&1&&(l=he(d[0]),t=$n(t,c,o,1,d,l,r,e,jn,cn,n,an)),d[2].selectedList&&d[1]===0?a||(a=dn(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:Q,o:Q,d(d){d&&C(e);for(let c=0;c<t.length;c+=1)t[c].d();a&&a.d(),s[5](null)}}}function to(s,e,t){let r,n,l;Ee(s,pe,p=>t(2,l=p));let o,a=[];const d={baseCount:12,maxCount:50,minSize:20,maxSize:45,minSpeed:15,maxSpeed:45,minDelay:0,maxDelay:15};Ns(()=>{c()});function c(){t(0,a=[]);for(let p=0;p<n;p++)a.push({id:p,x:Math.random()*100,y:Math.random()*100,size:Math.random()*(d.maxSize-d.minSize)+d.minSize,speed:Math.random()*(d.maxSpeed-d.minSpeed)+d.minSpeed,delay:Math.random()*(d.maxDelay-d.minDelay)+d.minDelay,rotation:Math.random()*60-30,rotationSpeed:(Math.random()-.5)*2,floatingDirection:Math.random()*360,floatingSpeed:Math.random()*.5+.1})}function m(p){Is[p?"unshift":"push"](()=>{o=p,t(3,o)})}return s.$$.update=()=>{var p;s.$$.dirty&4&&t(1,r=((p=l.selectedList)==null?void 0:p.listItemCount)||0),s.$$.dirty&6&&t(4,n=l.selectedList?Math.min(d.maxCount,Math.max(d.baseCount,Math.floor(r/2))):d.baseCount),s.$$.dirty&17&&n!==a.length&&c()},[a,r,l,o,n,m]}class so extends Ne{constructor(e){super(),De(this,e,to,eo,Ie,{})}}function un(s){let e,t;return e=new Gl({}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function ro(s){let e,t;return e=new Gi({}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function no(s){let e,t;return e=new ni({}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function lo(s){let e,t;return e=new Xl({}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function io(s){let e,t,r,n,l,o,a,d,c,m;t=new so({});let p=s[1]!=="auth"&&un();const g=[lo,no,ro],b=[];function v(_,R){return _[1]==="auth"?0:_[1]==="list-selector"?1:_[1]==="manager"?2:-1}return~(o=v(s))&&(a=b[o]=g[o](s)),c=new Xi({props:{isLoading:s[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=f("main"),Be(t.$$.fragment),r=w(),p&&p.c(),n=w(),l=f("div"),a&&a.c(),d=w(),Be(c.$$.fragment),u(l,"class","max-w-6xl mx-auto p-6"),u(e,"class","min-h-screen bg-gray-50")},m(_,R){x(_,e,R),Pe(t,e,null),i(e,r),p&&p.m(e,null),i(e,n),i(e,l),~o&&b[o].m(l,null),i(e,d),Pe(c,e,null),m=!0},p(_,[R]){_[1]!=="auth"?p?R&2&&re(p,1):(p=un(),p.c(),re(p,1),p.m(e,n)):p&&(Rt(),ue(p,1,1,()=>{p=null}),Ot());let K=o;o=v(_),o!==K&&(a&&(Rt(),ue(b[K],1,1,()=>{b[K]=null}),Ot()),~o?(a=b[o],a||(a=b[o]=g[o](_),a.c()),re(a,1),a.m(l,null)):a=null);const A={};R&1&&(A.isLoading=_[0].isLoadingList),c.$set(A)},i(_){m||(re(t.$$.fragment,_),re(p),re(a),re(c.$$.fragment,_),m=!0)},o(_){ue(t.$$.fragment,_),ue(p),ue(a),ue(c.$$.fragment,_),m=!1},d(_){_&&C(e),Te(t),p&&p.d(),~o&&b[o].d(),Te(c)}}}function oo(s,e,t){let r,n;Ee(s,pe,o=>t(0,r=o)),Ee(s,$e,o=>t(2,n=o));let l="auth";return Ns(()=>{const{session:o,authType:a}=$e.initializeSession();o&&(console.log("Session restored:",{authType:a,handle:o.handle||o.did}),t(1,l="list-selector"))}),s.$$.update=()=>{s.$$.dirty&5&&(n.session?r.selectedList?t(1,l="manager"):t(1,l="list-selector"):t(1,l="auth"))},[r,l,n]}class ao extends Ne{constructor(e){super(),De(this,e,oo,io,Ie,{})}}new ao({target:document.getElementById("app")})});export default co();
