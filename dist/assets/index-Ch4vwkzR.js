var In=Object.defineProperty;var pr=s=>{throw TypeError(s)};var Rn=(s,e,t)=>e in s?In(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var On=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Oe=(s,e,t)=>Rn(s,typeof e!="symbol"?e+"":e,t),hr=(s,e,t)=>e.has(s)||pr("Cannot "+t);var G=(s,e,t)=>(hr(s,e,"read from private field"),t?t.call(s):e.get(s)),Ze=(s,e,t)=>e.has(s)?pr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Qe=(s,e,t,r)=>(hr(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);var co=On((fo,$t)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function X(){}function fn(s){return s()}function gr(){return Object.create(null)}function xe(s){s.forEach(fn)}function mn(s){return typeof s=="function"}function Ie(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let ms;function It(s,e){return s===e?!0:(ms||(ms=document.createElement("a")),ms.href=e,s===ms.href)}function Bn(s){return Object.keys(s).length===0}function Dn(s,...e){if(s==null){for(const r of e)r(void 0);return X}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ee(s,e,t){s.$$.on_destroy.push(Dn(e,t))}function i(s,e){s.appendChild(e)}function x(s,e,t){s.insertBefore(e,t||null)}function C(s){s.parentNode&&s.parentNode.removeChild(s)}function et(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function f(s){return document.createElement(s)}function br(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function L(s){return document.createTextNode(s)}function w(){return L(" ")}function tt(){return L("")}function te(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function pn(s){return function(e){return e.preventDefault(),s.call(this,e)}}function a(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Nn(s){let e;return{p(...t){e=t,e.forEach(r=>s.push(r))},r(){e.forEach(t=>s.splice(s.indexOf(t),1))}}}function Kn(s){return Array.from(s.childNodes)}function j(s,e){e=""+e,s.data!==e&&(s.data=e)}function Ce(s,e){s.value=e??""}function ge(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function yr(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}s.selectedIndex=-1}function Wn(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}let Jt;function Ft(s){Jt=s}function hn(){if(!Jt)throw new Error("Function called outside component initialization");return Jt}function Ns(s){hn().$$.on_mount.push(s)}function Un(){const s=hn();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const l=Wn(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,l)}),!l.defaultPrevented}return!0}}const Lt=[],Is=[];let Et=[];const vr=[],Hn=Promise.resolve();let Rs=!1;function zn(){Rs||(Rs=!0,Hn.then(gn))}function Os(s){Et.push(s)}const xs=new Set;let wt=0;function gn(){if(wt!==0)return;const s=Jt;do{try{for(;wt<Lt.length;){const e=Lt[wt];wt++,Ft(e),Fn(e.$$)}}catch(e){throw Lt.length=0,wt=0,e}for(Ft(null),Lt.length=0,wt=0;Is.length;)Is.pop()();for(let e=0;e<Et.length;e+=1){const t=Et[e];xs.has(t)||(xs.add(t),t())}Et.length=0}while(Lt.length);for(;vr.length;)vr.pop()();Rs=!1,xs.clear(),Ft(s)}function Fn(s){if(s.fragment!==null){s.update(),xe(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Os)}}function Jn(s){const e=[],t=[];Et.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Et=e}const hs=new Set;let ct;function Rt(){ct={r:0,c:[],p:ct}}function Ot(){ct.r||xe(ct.c),ct=ct.p}function re(s,e){s&&s.i&&(hs.delete(s),s.i(e))}function ue(s,e,t,r){if(s&&s.o){if(hs.has(s))return;hs.add(s),ct.c.push(()=>{hs.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}function he(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function jn(s,e){s.d(1),e.delete(s.key)}function $n(s,e,t,r,n,l,o,c,u,d,m,p){let g=s.length,b=l.length,v=g;const _={};for(;v--;)_[s[v].key]=v;const P=[],K=new Map,M=new Map,W=[];for(v=b;v--;){const I=p(n,l,v),E=t(I);let N=o.get(E);N?W.push(()=>N.p(I,e)):(N=d(E,I),N.c()),K.set(E,P[v]=N),E in _&&M.set(E,Math.abs(v-_[E]))}const T=new Set,D=new Set;function k(I){re(I,1),I.m(c,m),o.set(I.key,I),m=I.first,b--}for(;g&&b;){const I=P[b-1],E=s[g-1],N=I.key,S=E.key;I===E?(m=I.first,g--,b--):K.has(S)?!o.has(N)||T.has(N)?k(I):D.has(S)?g--:M.get(N)>M.get(S)?(D.add(N),k(I)):(T.add(S),g--):(u(E,o),g--)}for(;g--;){const I=s[g];K.has(I.key)||u(I,o)}for(;b;)k(P[b-1]);return xe(W),P}function Be(s){s&&s.c()}function Pe(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Os(()=>{const l=s.$$.on_mount.map(fn).filter(mn);s.$$.on_destroy?s.$$.on_destroy.push(...l):xe(l),s.$$.on_mount=[]}),n.forEach(Os)}function Te(s,e){const t=s.$$;t.fragment!==null&&(Jn(t.after_update),xe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function qn(s,e){s.$$.dirty[0]===-1&&(Lt.push(s),zn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function De(s,e,t,r,n,l,o=null,c=[-1]){const u=Jt;Ft(s);const d=s.$$={fragment:null,ctx:[],props:l,update:X,not_equal:n,bound:gr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:gr(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};o&&o(d.root);let m=!1;if(d.ctx=t?t(s,e.props||{},(p,g,...b)=>{const v=b.length?b[0]:g;return d.ctx&&n(d.ctx[p],d.ctx[p]=v)&&(!d.skip_bound&&d.bound[p]&&d.bound[p](v),m&&qn(s,p)),g}):[],d.update(),m=!0,xe(d.before_update),d.fragment=r?r(d.ctx):!1,e.target){if(e.hydrate){const p=Kn(e.target);d.fragment&&d.fragment.l(p),p.forEach(C)}else d.fragment&&d.fragment.c();e.intro&&re(s.$$.fragment),Pe(s,e.target,e.anchor),gn()}Ft(u)}class Ne{constructor(){Oe(this,"$$");Oe(this,"$$set")}$destroy(){Te(this,1),this.$destroy=X}$on(e,t){if(!mn(t))return X;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Bn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Vn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Vn);const St=[];function bn(s,e=X){let t;const r=new Set;function n(c){if(Ie(s,c)&&(s=c,t)){const u=!St.length;for(const d of r)d[1](),St.push(d,s);if(u){for(let d=0;d<St.length;d+=2)St[d][0](St[d+1]);St.length=0}}}function l(c){n(c(s))}function o(c,u=X){const d=[c,u];return r.add(d),r.size===1&&(t=e(n,l)||X),c(s),()=>{r.delete(d),r.size===0&&t&&(t(),t=null)}}return{set:n,update:l,subscribe:o}}const At=new TextEncoder,gs=new TextDecoder;function Yn(...s){const e=s.reduce((n,{length:l})=>n+l,0),t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function Gn(s){if(Uint8Array.prototype.toBase64)return s.toBase64();const e=32768,t=[];for(let r=0;r<s.length;r+=e)t.push(String.fromCharCode.apply(null,s.subarray(r,r+e)));return btoa(t.join(""))}function Zn(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(s);const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function yn(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof s=="string"?s:gs.decode(s),{alphabet:"base64url"});let e=s;e instanceof Uint8Array&&(e=gs.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Zn(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Ms(s){let e=s;return typeof e=="string"&&(e=At.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):Gn(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class vs extends Error{constructor(t,r){var n;super(t,r);Oe(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Oe(vs,"code","ERR_JOSE_GENERIC");class je extends vs{constructor(){super(...arguments);Oe(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Oe(je,"code","ERR_JOSE_NOT_SUPPORTED");class Ct extends vs{constructor(){super(...arguments);Oe(this,"code","ERR_JWS_INVALID")}}Oe(Ct,"code","ERR_JWS_INVALID");class vn extends vs{constructor(){super(...arguments);Oe(this,"code","ERR_JWT_INVALID")}}Oe(vn,"code","ERR_JWT_INVALID");function Je(s,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${s}`)}function Ht(s,e){return s.name===e}function As(s){return parseInt(s.name.slice(4),10)}function Qn(s){switch(s){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Xn(s,e){if(!s.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function el(s,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!Ht(s.algorithm,"HMAC"))throw Je("HMAC");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Ht(s.algorithm,"RSASSA-PKCS1-v1_5"))throw Je("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Ht(s.algorithm,"RSA-PSS"))throw Je("RSA-PSS");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!Ht(s.algorithm,"Ed25519"))throw Je("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!Ht(s.algorithm,"ECDSA"))throw Je("ECDSA");const r=Qn(e);if(s.algorithm.namedCurve!==r)throw Je(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Xn(s,t)}function _n(s,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const n=t.pop();s+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?s+=`one of type ${t[0]} or ${t[1]}.`:s+=`of type ${t[0]}.`;return e==null?s+=` Received ${e}`:typeof e=="function"&&e.name?s+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(s+=` Received an instance of ${e.constructor.name}`),s}const tl=(s,...e)=>_n("Key must be ",s,...e);function wn(s,e,...t){return _n(`Key for the ${s} algorithm must be `,e,...t)}function Sn(s){return(s==null?void 0:s[Symbol.toStringTag])==="CryptoKey"}function kn(s){return(s==null?void 0:s[Symbol.toStringTag])==="KeyObject"}const Ln=s=>Sn(s)||kn(s),sl=(...s)=>{const e=s.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const n=Object.keys(r);if(!t||t.size===0){t=new Set(n);continue}for(const l of n){if(t.has(l))return!1;t.add(l)}}return!0};function rl(s){return typeof s=="object"&&s!==null}const Ks=s=>{if(!rl(s)||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e},nl=(s,e)=>{if(s.startsWith("RS")||s.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${s} requires key modulusLength to be 2048 bits or larger`)}};function ll(s){let e,t;switch(s.kty){case"RSA":{switch(s.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.slice(-3),10)||1}`},t=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(s.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=s.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=s.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(s.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new je('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const Cn=async s=>{if(!s.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=ll(s),r={...s};return delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,s.ext??!s.d,s.key_ops??t)};async function il(s,e,t){if(!Ks(s))throw new TypeError("JWK must be an object");let r;switch(e??(e=s.alg),r??(r=s.ext),s.kty){case"oct":if(typeof s.k!="string"||!s.k)throw new TypeError('missing "k" (Key Value) Parameter value');return yn(s.k);case"RSA":if("oth"in s&&s.oth!==void 0)throw new je('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Cn({...s,alg:e,ext:r});default:throw new je('Unsupported "kty" (Key Type) Parameter value')}}const ol=(s,e,t,r,n)=>{if(n.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new s('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new s('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;t!==void 0?l=new Map([...Object.entries(t),...e.entries()]):l=e;for(const o of r.crit){if(!l.has(o))throw new je(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new s(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&r[o]===void 0)throw new s(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)};function Ws(s){return Ks(s)&&typeof s.kty=="string"}function al(s){return s.kty!=="oct"&&typeof s.d=="string"}function cl(s){return s.kty!=="oct"&&typeof s.d>"u"}function dl(s){return s.kty==="oct"&&typeof s.k=="string"}let Pt;const _r=async(s,e,t,r=!1)=>{Pt||(Pt=new WeakMap);let n=Pt.get(s);if(n!=null&&n[t])return n[t];const l=await Cn({...e,alg:t});return r&&Object.freeze(s),n?n[t]=l:Pt.set(s,{[t]:l}),l},ul=(s,e)=>{var o;Pt||(Pt=new WeakMap);let t=Pt.get(s);if(t!=null&&t[e])return t[e];const r=s.type==="public",n=!!r;let l;if(s.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}l=s.toCryptoKey(s.asymmetricKeyType,n,r?[]:["deriveBits"])}if(s.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");l=s.toCryptoKey(s.asymmetricKeyType,n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="rsa"){let c;switch(e){case"RSA-OAEP":c="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":c="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":c="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":c="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return s.toCryptoKey({name:"RSA-OAEP",hash:c},n,r?["encrypt"]:["decrypt"]);l=s.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:c},n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="ec"){const u=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=s.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!u)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&u==="P-256"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:u},n,[r?"verify":"sign"])),e==="ES384"&&u==="P-384"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:u},n,[r?"verify":"sign"])),e==="ES512"&&u==="P-521"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:u},n,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(l=s.toCryptoKey({name:"ECDH",namedCurve:u},n,r?[]:["deriveBits"]))}if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=l:Pt.set(s,{[e]:l}),l},fl=async(s,e)=>{if(s instanceof Uint8Array||Sn(s))return s;if(kn(s)){if(s.type==="secret")return s.export();if("toCryptoKey"in s&&typeof s.toCryptoKey=="function")try{return ul(s,e)}catch(r){if(r instanceof TypeError)throw r}let t=s.export({format:"jwk"});return _r(s,t,e)}if(Ws(s))return s.k?yn(s.k):_r(s,s,e,!0);throw new Error("unreachable")},xt=s=>s==null?void 0:s[Symbol.toStringTag],Bs=(s,e,t)=>{var r,n;if(e.use!==void 0){let l;switch(t){case"sign":case"verify":l="sig";break;case"encrypt":case"decrypt":l="enc";break}if(e.use!==l)throw new TypeError(`Invalid key for this operation, its "use" must be "${l}" when present`)}if(e.alg!==void 0&&e.alg!==s)throw new TypeError(`Invalid key for this operation, its "alg" must be "${s}" when present`);if(Array.isArray(e.key_ops)){let l;switch(!0){case t==="sign":case s==="dir":case s.includes("CBC-HS"):l=t;break;case s.startsWith("PBES2"):l="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(s):!s.includes("GCM")&&s.endsWith("KW")?l="unwrapKey":l=t;break;case t==="encrypt":l="wrapKey";break;case t==="decrypt":l=s.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(l&&((n=(r=e.key_ops)==null?void 0:r.includes)==null?void 0:n.call(r,l))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${l}" when present`)}return!0},ml=(s,e,t)=>{if(!(e instanceof Uint8Array)){if(Ws(e)){if(dl(e)&&Bs(s,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Ln(e))throw new TypeError(wn(s,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${xt(e)} instances for symmetric algorithms must be of type "secret"`)}},pl=(s,e,t)=>{if(Ws(e))switch(t){case"decrypt":case"sign":if(al(e)&&Bs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(cl(e)&&Bs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Ln(e))throw new TypeError(wn(s,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${xt(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${xt(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${xt(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${xt(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${xt(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},hl=(s,e,t)=>{s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(s)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(s)?ml(s,e,t):pl(s,e,t)},gl=(s,e)=>{const t=`SHA-${s.slice(-3)}`;switch(s){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(s.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new je(`alg ${s} is not supported either by JOSE or your javascript runtime`)}},bl=async(s,e,t)=>{if(e instanceof Uint8Array){if(!s.startsWith("HS"))throw new TypeError(tl(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${s.slice(-3)}`,name:"HMAC"},!1,[t])}return el(e,s,t),e},ot=s=>Math.floor(s.getTime()/1e3),xn=60,Mn=xn*60,Us=Mn*24,yl=Us*7,vl=Us*365.25,_l=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Es=s=>{const e=_l.exec(s);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let n;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*xn);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*Mn);break;case"day":case"days":case"d":n=Math.round(t*Us);break;case"week":case"weeks":case"w":n=Math.round(t*yl);break;default:n=Math.round(t*vl);break}return e[1]==="-"||e[4]==="ago"?-n:n};function at(s,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${s} input`);return e}var fe;class wl{constructor(e){Ze(this,fe);if(!Ks(e))throw new TypeError("JWT Claims Set MUST be an object");Qe(this,fe,structuredClone(e))}data(){return At.encode(JSON.stringify(G(this,fe)))}get iss(){return G(this,fe).iss}set iss(e){G(this,fe).iss=e}get sub(){return G(this,fe).sub}set sub(e){G(this,fe).sub=e}get aud(){return G(this,fe).aud}set aud(e){G(this,fe).aud=e}set jti(e){G(this,fe).jti=e}set nbf(e){typeof e=="number"?G(this,fe).nbf=at("setNotBefore",e):e instanceof Date?G(this,fe).nbf=at("setNotBefore",ot(e)):G(this,fe).nbf=ot(new Date)+Es(e)}set exp(e){typeof e=="number"?G(this,fe).exp=at("setExpirationTime",e):e instanceof Date?G(this,fe).exp=at("setExpirationTime",ot(e)):G(this,fe).exp=ot(new Date)+Es(e)}set iat(e){typeof e>"u"?G(this,fe).iat=ot(new Date):e instanceof Date?G(this,fe).iat=at("setIssuedAt",ot(e)):typeof e=="string"?G(this,fe).iat=at("setIssuedAt",ot(new Date)+Es(e)):G(this,fe).iat=at("setIssuedAt",e)}}fe=new WeakMap;const Sl=async(s,e,t)=>{const r=await bl(s,e,"sign");nl(s,r);const n=await crypto.subtle.sign(gl(s,r.algorithm),r,t);return new Uint8Array(n)};var jt,Le,ze;class kl{constructor(e){Ze(this,jt);Ze(this,Le);Ze(this,ze);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Qe(this,jt,e)}setProtectedHeader(e){if(G(this,Le))throw new TypeError("setProtectedHeader can only be called once");return Qe(this,Le,e),this}setUnprotectedHeader(e){if(G(this,ze))throw new TypeError("setUnprotectedHeader can only be called once");return Qe(this,ze,e),this}async sign(e,t){if(!G(this,Le)&&!G(this,ze))throw new Ct("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!sl(G(this,Le),G(this,ze)))throw new Ct("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...G(this,Le),...G(this,ze)},n=ol(Ct,new Map([["b64",!0]]),t==null?void 0:t.crit,G(this,Le),r);let l=!0;if(n.has("b64")&&(l=G(this,Le).b64,typeof l!="boolean"))throw new Ct('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if(typeof o!="string"||!o)throw new Ct('JWS "alg" (Algorithm) Header Parameter missing or invalid');hl(o,e,"sign");let c=G(this,jt);l&&(c=At.encode(Ms(c)));let u;G(this,Le)?u=At.encode(Ms(JSON.stringify(G(this,Le)))):u=At.encode("");const d=Yn(u,At.encode("."),c),m=await fl(e,o),p=await Sl(o,m,d),g={signature:Ms(p),payload:""};return l&&(g.payload=gs.decode(c)),G(this,ze)&&(g.header=G(this,ze)),G(this,Le)&&(g.protected=gs.decode(u)),g}}jt=new WeakMap,Le=new WeakMap,ze=new WeakMap;var Tt;class Ll{constructor(e){Ze(this,Tt);Qe(this,Tt,new kl(e))}setProtectedHeader(e){return G(this,Tt).setProtectedHeader(e),this}async sign(e,t){const r=await G(this,Tt).sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}Tt=new WeakMap;var Xe,Ae;class Cl{constructor(e={}){Ze(this,Xe);Ze(this,Ae);Qe(this,Ae,new wl(e))}setIssuer(e){return G(this,Ae).iss=e,this}setSubject(e){return G(this,Ae).sub=e,this}setAudience(e){return G(this,Ae).aud=e,this}setJti(e){return G(this,Ae).jti=e,this}setNotBefore(e){return G(this,Ae).nbf=e,this}setExpirationTime(e){return G(this,Ae).exp=e,this}setIssuedAt(e){return G(this,Ae).iat=e,this}setProtectedHeader(e){return Qe(this,Xe,e),this}async sign(e,t){var n;const r=new Ll(G(this,Ae).data());if(r.setProtectedHeader(G(this,Xe)),Array.isArray((n=G(this,Xe))==null?void 0:n.crit)&&G(this,Xe).crit.includes("b64")&&G(this,Xe).b64===!1)throw new vn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}Xe=new WeakMap,Ae=new WeakMap;const Ds="bluesky_oauth_session",An="bluesky_code_verifier",En="bluesky_oauth_state",Pn="bluesky_server_url";function xl(s=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const r=new Uint8Array(s);crypto.getRandomValues(r);for(let n=0;n<s;n++)t+=e[r[n]%e.length];return t}async function Ml(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t);return Al(r)}function Al(s){return btoa(String.fromCharCode(...new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wr(){return await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}async function Sr(s,e,t,r,n){try{const l=await crypto.subtle.exportKey("jwk",s.publicKey),o={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};r&&(o.nonce=r);const c=await il(await crypto.subtle.exportKey("jwk",s.privateKey),"ES256");return await new Cl(o).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:l.kty,crv:l.crv,x:l.x,y:l.y}}).sign(c)}catch(l){throw console.error("Error creating DPoP JWT:",l),l}}async function El(s="https://bsky.social"){try{const e=xl();localStorage.setItem(An,e);const t=await Ml(e),r=crypto.randomUUID();localStorage.setItem(En,r),localStorage.setItem(Pn,s);const l=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5173/client-metadata.json":"https://bluesky-list-manager.vercel.app/client-metadata.json",o=`${window.location.origin}/oauth-callback.html`,c=new URL(`${s}/oauth/authorize`);c.searchParams.append("client_id",l),c.searchParams.append("response_type","code"),c.searchParams.append("redirect_uri",o),c.searchParams.append("scope","atproto transition:generic"),c.searchParams.append("state",r),c.searchParams.append("code_challenge",t),c.searchParams.append("code_challenge_method","S256"),window.location.href=c.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}function zt(){const s=localStorage.getItem(Ds);if(s)try{return JSON.parse(s)}catch{localStorage.removeItem(Ds)}return null}function kr(){localStorage.removeItem(Ds),localStorage.removeItem(An),localStorage.removeItem(En),localStorage.removeItem(Pn)}const ke={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},Mt={OAUTH:"oauth",APP_PASSWORD:"app_password"};function Pl(){const{subscribe:s,set:e,update:t}=bn({session:null,authType:null,isLoading:!1,error:null});return{subscribe:s,setSession:(r,n=Mt.APP_PASSWORD)=>{r?(localStorage.setItem(ke.SESSION,JSON.stringify(r)),localStorage.setItem(ke.AUTH_TYPE,n)):(localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE)),e({session:r,authType:n,isLoading:!1,error:null})},setLoading:r=>{t(n=>({...n,isLoading:r}))},setError:r=>{t(n=>({...n,error:r,isLoading:!1}))},getSession:()=>{const r=localStorage.getItem(ke.SESSION),n=localStorage.getItem(ke.AUTH_TYPE)||Mt.APP_PASSWORD;if(r)try{return{session:JSON.parse(r),authType:n}}catch{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE),kr(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE),kr(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:()=>{const r=zt();if(r&&r.accessToken){const o={accessJwt:r.accessToken,refreshJwt:r.refreshToken,handle:r.sub,did:r.sub,email:null};return e({session:o,authType:Mt.OAUTH,isLoading:!1,error:null}),{session:o,authType:Mt.OAUTH}}const{session:n,authType:l}=$e.getSession();return n?(e({session:n,authType:l,isLoading:!1,error:null}),{session:n,authType:l}):{session:null,authType:null}},isOAuthSession:()=>localStorage.getItem(ke.AUTH_TYPE)===Mt.OAUTH}}const $e=Pl(),ps="https://bsky.social/xrpc";class Tl{async signIn(e,t){const r=await fetch(`${ps}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to sign in")}return await r.json()}async getAuthHeaders(e,t="app_password"){if(t==="oauth"){const r=zt();if(!r||!r.accessToken)throw new Error("No OAuth session found");const n=await wr(),l=await Sr(n,"GET",`${ps}/app.bsky.graph.getLists`,r.serverNonce);return{Authorization:`Bearer ${r.accessToken}`,DPoP:l,"Content-Type":"application/json"}}else return{Authorization:`Bearer ${e.accessJwt}`,"Content-Type":"application/json"}}async makeBlueskyRequest(e,t,r="app_password",n="GET",l=null){const o=await this.getAuthHeaders(t,r);if(r==="oauth"&&o.DPoP){const d=zt(),m=await wr(),p=await Sr(m,n,`${ps}/${e}`,d.serverNonce);o.DPoP=p}const c={method:n,headers:o};l&&n!=="GET"&&(c.body=JSON.stringify(l));const u=await fetch(`${ps}/${e}`,c);if(!u.ok){const d=await u.json();throw new Error(d.message||`Failed to fetch from ${e}`)}return await u.json()}async getUserLists(e,t="app_password"){if(t==="oauth"){const r=zt();if(!r.sub)throw new Error("No user DID found in OAuth session");const l=(await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${r.sub}`,e,t)).handle;return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${l}`,e,t)).lists||[]}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${e.handle}`,e,t)).lists||[]}async getListInfo(e,t,r="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,r)).list}async getListMembers(e,t,r="app_password",n=25,l=null){var p;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const c=await this.makeBlueskyRequest(o,e,r),u=c.items||[],d=u.map(g=>g.subject.did),m=u.map(g=>g.subject);return{members:d,profiles:m,cursor:c.cursor,totalCount:((p=c.list)==null?void 0:p.listItemCount)||0}}async getListMembersCount(e,t,r="app_password"){return(await this.getListInfo(e,t,r)).listItemCount||0}async getProfiles(e,t,r="app_password"){if(!t||t.length===0)return[];const n=[];for(const l of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(l)}`,e,r);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${l}:`,o),n.push({did:l,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,r="app_password",n=25,l=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const c=await this.makeBlueskyRequest(o,e,r);return{actors:c.actors||[],cursor:c.cursor}}async addToList(e,t,r,n="app_password"){let l;return n==="oauth"?l=zt().sub:l=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:r,createdAt:new Date().toISOString()}})}async resolveHandle(e,t,r="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,r)).did}}const Fe=new Tl,Me={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Il(){const{subscribe:s,update:e}=bn({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1;return{subscribe:s,setSelectedList:r=>{r?localStorage.setItem(Me.SELECTED_LIST,JSON.stringify(r)):localStorage.removeItem(Me.SELECTED_LIST),e(n=>({...n,selectedList:r,isLoadingList:!!r,listMembers:[],listMemberProfiles:[]}))},setListLoading:r=>{e(n=>({...n,isLoadingList:r}))},setUserLists:r=>{localStorage.setItem(Me.LISTS,JSON.stringify(r)),e(n=>({...n,userLists:r}))},setListMembers:r=>{e(n=>({...n,listMembers:r}))},isProfileInCurrentList:r=>{let n=!1;return e(l=>(n=l.listMembers.includes(r),l)),n},setListMemberProfiles:r=>{e(n=>({...n,listMemberProfiles:r}))},addProfileToList:r=>{e(n=>{const l=n.listMembers.includes(r)?n.listMembers:[r,...n.listMembers];return{...n,listMembers:l}})},addProfileToDisplay:r=>{e(n=>{if(n.listMembers.indexOf(r.did)<25){const o=[r,...n.listMemberProfiles];return{...n,listMemberProfiles:o.slice(0,25)}}return n})},fetchAndAddProfile:(r,n,l="app_password")=>t?Promise.resolve():(t=!0,new Promise(async o=>{try{const c=await Fe.getProfiles(r,[n],l);if(c.length>0){const u=c[0];e(d=>{const m=d.listMembers.includes(n)?d.listMembers:[n,...d.listMembers];if(m.indexOf(n)<25){const g=d.listMemberProfiles.filter(v=>v.did!==n),b=[u,...g];return{...d,listMembers:m,listMemberProfiles:b.slice(0,25)}}return{...d,listMembers:m}}),e(d=>{console.log("Updating member count for DID:",n),console.log("Current selectedList:",d.selectedList),console.log("Current userLists:",d.userLists),console.log("Incrementing member count for successfully added profile");const m=d.selectedList?{...d.selectedList,listItemCount:(d.selectedList.listItemCount||0)+1}:null,p=d.userLists.map(g=>{var b;return g.uri===((b=d.selectedList)==null?void 0:b.uri)?{...g,memberCount:(g.memberCount||0)+1}:g});return console.log("Updated selectedList:",m),console.log("Updated userLists:",p),m&&localStorage.setItem(Me.SELECTED_LIST,JSON.stringify(m)),localStorage.setItem(Me.LISTS,JSON.stringify(p)),{...d,selectedList:m,userLists:p}})}}catch(c){console.error("Failed to fetch profile data:",c),e(u=>{const d=u.listMembers.includes(n)?u.listMembers:[n,...u.listMembers];return{...u,listMembers:d}}),e(u=>{console.log("Updating member count for DID (error case):",n),console.log("Incrementing member count for profile (error case)");const d=u.selectedList?{...u.selectedList,listItemCount:(u.selectedList.listItemCount||0)+1}:null,m=u.userLists.map(p=>{var g;return p.uri===((g=u.selectedList)==null?void 0:g.uri)?{...p,memberCount:(p.memberCount||0)+1}:p});return d&&localStorage.setItem(Me.SELECTED_LIST,JSON.stringify(d)),localStorage.setItem(Me.LISTS,JSON.stringify(m)),{...u,selectedList:d,userLists:m}})}finally{t=!1}o()})),refreshListMembers:()=>{e(r=>({...r,refreshTrigger:Date.now()}))},setLoading:r=>{e(n=>({...n,isLoading:r}))},setError:r=>{e(n=>({...n,error:r,isLoading:!1}))},getSelectedList:()=>{const r=localStorage.getItem(Me.SELECTED_LIST);if(r)try{return JSON.parse(r)}catch{localStorage.removeItem(Me.SELECTED_LIST)}return null},getUserLists:()=>{const r=localStorage.getItem(Me.LISTS);if(r)try{return JSON.parse(r)}catch{localStorage.removeItem(Me.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(Me.SELECTED_LIST),e(r=>({...r,selectedList:null}))}}}const pe=Il();function Rl(s){let e,t,r,n,l,o,c,u,d,m,p,g,b;return{c(){e=f("div"),t=f("label"),t.textContent="Handle",r=w(),n=f("input"),l=w(),o=f("div"),c=f("label"),c.textContent="App Password",u=w(),d=f("input"),m=w(),p=f("p"),p.textContent="Use an app password, not your main account password",a(t,"for","handle"),a(t,"class","block text-sm font-medium text-gray-700 mb-1"),a(n,"id","handle"),a(n,"type","text"),a(n,"placeholder","your-handle.bsky.social"),a(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,a(c,"for","password"),a(c,"class","block text-sm font-medium text-gray-700 mb-1"),a(d,"id","password"),a(d,"type","password"),a(d,"placeholder","Your app password"),a(d,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),d.required=!0,a(p,"class","text-xs text-gray-500 mt-1")},m(v,_){x(v,e,_),i(e,t),i(e,r),i(e,n),Ce(n,s[0]),x(v,l,_),x(v,o,_),i(o,c),i(o,u),i(o,d),Ce(d,s[1]),i(o,m),i(o,p),g||(b=[te(n,"input",s[11]),te(d,"input",s[12])],g=!0)},p(v,_){_&1&&n.value!==v[0]&&Ce(n,v[0]),_&2&&d.value!==v[1]&&Ce(d,v[1])},d(v){v&&(C(e),C(l),C(o)),g=!1,xe(b)}}}function Ol(s){let e;return{c(){e=f("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function Lr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=L(s[3]),a(t,"class","text-red-700 text-sm"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&j(r,n[3])},d(n){n&&C(e)}}}function Bl(s){let e;return{c(){e=L("Sign In")},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function Dl(s){let e;return{c(){e=L("Sign in with Bluesky")},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function Nl(s){let e,t,r;function n(c,u){return c[4]==="oauth"?Wl:Kl}let l=n(s),o=l(s);return{c(){e=f("span"),t=w(),o.c(),r=tt(),a(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(c,u){x(c,e,u),x(c,t,u),o.m(c,u),x(c,r,u)},p(c,u){l!==(l=n(c))&&(o.d(1),o=l(c),o&&(o.c(),o.m(r.parentNode,r)))},d(c){c&&(C(e),C(t),C(r)),o.d(c)}}}function Kl(s){let e;return{c(){e=L("Signing in...")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function Wl(s){let e;return{c(){e=L("Connecting...")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function Ul(s){let e,t,r,n,l,o,c,u,d,m,p,g,b,v,_,P,K,M,W,T,D,k,I,E,N,S,B,R,$,U,q,Z,de,oe,ne;function y(F,V){return F[4]==="oauth"?Ol:Rl}let h=y(s),H=h(s),z=s[3]&&Lr(s);function A(F,V){return F[2]?Nl:F[4]==="oauth"?Dl:Bl}let O=A(s),J=O(s);return de=Nn(s[9][0]),{c(){e=f("div"),t=f("button"),r=w(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Sign in to Bluesky",c=w(),u=f("button"),u.textContent="√ó",d=w(),m=f("form"),p=f("div"),g=f("div"),b=f("fieldset"),v=f("legend"),v.textContent="Sign in with:",_=w(),P=f("div"),K=f("label"),M=f("input"),W=w(),T=f("span"),T.textContent="OAuth (Coming Soon)",D=w(),k=f("label"),I=f("input"),E=w(),N=f("span"),N.textContent="App Password (Recommended)",S=w(),H.c(),B=w(),z&&z.c(),R=w(),$=f("div"),U=f("button"),U.textContent="Cancel",q=w(),Z=f("button"),J.c(),a(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),a(t,"aria-label","Close modal"),a(t,"type","button"),a(o,"class","text-xl font-semibold text-slate-800"),a(u,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),a(l,"class","flex items-center justify-between mb-4"),a(v,"class","block text-sm font-medium text-gray-700 mb-2"),a(M,"type","radio"),M.__value="oauth",Ce(M,M.__value),a(M,"class","mr-2"),M.disabled=!0,a(T,"class","text-sm"),a(K,"class","flex items-center opacity-50 cursor-not-allowed"),a(I,"type","radio"),I.__value="app_password",Ce(I,I.__value),a(I,"class","mr-2"),a(N,"class","text-sm"),a(k,"class","flex items-center"),a(P,"class","space-y-2"),a(U,"type","button"),a(U,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),a(Z,"type","submit"),Z.disabled=s[2],a(Z,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),a($,"class","flex space-x-3 pt-2"),a(p,"class","space-y-4"),a(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),a(n,"role","document"),a(n,"id","sign-in-modal-content"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),a(e,"role","dialog"),a(e,"aria-modal","true"),a(e,"tabindex","-1"),a(e,"id","sign-in-modal"),de.p(M,I)},m(F,V){x(F,e,V),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,c),i(l,u),i(n,d),i(n,m),i(m,p),i(p,g),i(g,b),i(b,v),i(b,_),i(b,P),i(P,K),i(K,M),M.checked=M.__value===s[4],i(K,W),i(K,T),i(P,D),i(P,k),i(k,I),I.checked=I.__value===s[4],i(k,E),i(k,N),i(p,S),H.m(p,null),i(p,B),z&&z.m(p,null),i(p,R),i(p,$),i($,U),i($,q),i($,Z),J.m(Z,null),oe||(ne=[te(t,"click",s[7]),te(u,"click",s[6]),te(M,"change",s[8]),te(I,"change",s[10]),te(U,"click",s[6]),te(m,"submit",pn(s[5])),te(e,"keydown",s[13])],oe=!0)},p(F,[V]){V&16&&(M.checked=M.__value===F[4]),V&16&&(I.checked=I.__value===F[4]),h===(h=y(F))&&H?H.p(F,V):(H.d(1),H=h(F),H&&(H.c(),H.m(p,B))),F[3]?z?z.p(F,V):(z=Lr(F),z.c(),z.m(p,R)):z&&(z.d(1),z=null),O===(O=A(F))&&J?J.p(F,V):(J.d(1),J=O(F),J&&(J.c(),J.m(Z,null))),V&4&&(Z.disabled=F[2])},i:X,o:X,d(F){F&&C(e),H.d(),z&&z.d(),J.d(),de.r(),oe=!1,xe(ne)}}}function Hl(s,e,t){const r=Un();let n="",l="",o=!1,c="",u="app_password";async function d(){t(2,o=!0),t(3,c="");try{await El()}catch(T){t(3,c=T.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function m(){if(!n||!l){t(3,c="Please enter both handle and password");return}t(2,o=!0),t(3,c="");try{const T=await Fe.signIn(n,l);$e.setSession(T,Mt.APP_PASSWORD),r("close")}catch(T){t(3,c=T.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function p(){u==="oauth"?await d():await m()}function g(){r("close")}function b(){g()}const v=[[]];function _(){u=this.__value,t(4,u)}function P(){u=this.__value,t(4,u)}function K(){n=this.value,t(0,n)}function M(){l=this.value,t(1,l)}return[n,l,o,c,u,p,g,b,_,v,P,K,M,T=>T.key==="Escape"&&g()]}class Tn extends Ne{constructor(e){super(),De(this,e,Hl,Ul,Ie,{})}}const zl=!0,bs={staticBase:"static",isDevelopment:!1,isProduction:zl,buildTime:new Date().toISOString(),getAssetPath:s=>`./${s.replace("static/","")}`};function Cr(s,e,t){const r=s.slice();return r[10]=e[t],r}function Fl(s){let e,t,r;return{c(){e=f("button"),e.textContent="üîê Sign in with Bluesky",a(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200"),a(e,"id","sign-in-button")},m(n,l){x(n,e,l),t||(r=te(e,"click",s[6]),t=!0)},p:X,d(n){n&&C(e),t=!1,r()}}}function Jl(s){let e,t,r,n,l,o,c,u,d,m,p,g=s[1].session.handle+"",b,v,_,P,K;function M(k,I){return k[3]?ql:k[4]?$l:jl}let W=M(s),T=W(s),D=s[3]&&Mr();return{c(){e=f("div"),t=f("label"),t.textContent="List:",r=w(),n=f("select"),l=f("option"),l.textContent="Select a list...",T.c(),c=w(),D&&D.c(),u=w(),d=f("div"),m=f("div"),p=L("@"),b=L(g),v=w(),_=f("button"),_.textContent="Sign out",a(t,"for","list-selector"),a(t,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),l.__value="",Ce(l,l.__value),a(n,"id","list-selector"),n.disabled=s[3],a(n,"class","bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm w-64 text-slate-800 focus:border-slate-500 focus:ring-1 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-3"),a(e,"id","list-selector-container"),a(m,"class","text-sm text-slate-700"),a(_,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),a(_,"id","sign-out-button"),a(d,"class","text-right"),a(d,"id","user-info")},m(k,I){var E;x(k,e,I),i(e,t),i(e,r),i(e,n),i(n,l),T.m(n,null),yr(n,((E=s[0].selectedList)==null?void 0:E.uri)||""),i(e,c),D&&D.m(e,null),x(k,u,I),x(k,d,I),i(d,m),i(m,p),i(m,b),i(d,v),i(d,_),P||(K=[te(n,"change",s[5]),te(_,"click",s[8])],P=!0)},p(k,I){var E,N;W===(W=M(k))&&T?T.p(k,I):(T.d(1),T=W(k),T&&(T.c(),T.m(n,null))),I&1&&o!==(o=((E=k[0].selectedList)==null?void 0:E.uri)||"")&&yr(n,((N=k[0].selectedList)==null?void 0:N.uri)||""),I&8&&(n.disabled=k[3]),k[3]?D||(D=Mr(),D.c(),D.m(e,null)):D&&(D.d(1),D=null),I&2&&g!==(g=k[1].session.handle+"")&&j(b,g)},d(k){k&&(C(e),C(u),C(d)),T.d(),D&&D.d(),P=!1,xe(K)}}}function jl(s){let e,t=he(s[0].userLists),r=[];for(let n=0;n<t.length;n+=1)r[n]=xr(Cr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=tt()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);x(n,e,l)},p(n,l){if(l&1){t=he(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const c=Cr(n,t,o);r[o]?r[o].p(c,l):(r[o]=xr(c),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&C(e),et(r,n)}}}function $l(s){let e;return{c(){e=f("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",Ce(e,e.__value)},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function ql(s){let e;return{c(){e=f("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",Ce(e,e.__value)},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function xr(s){let e,t=s[10].name+"",r,n,l=s[10].memberCount.toLocaleString()+"",o,c,u;return{c(){e=f("option"),r=L(t),n=L(" ("),o=L(l),c=L(` members)
									`),e.__value=u=s[10].uri,Ce(e,e.__value)},m(d,m){x(d,e,m),i(e,r),i(e,n),i(e,o),i(e,c)},p(d,m){m&1&&t!==(t=d[10].name+"")&&j(r,t),m&1&&l!==(l=d[10].memberCount.toLocaleString()+"")&&j(o,l),m&1&&u!==(u=d[10].uri)&&(e.__value=u,Ce(e,e.__value))},d(d){d&&C(e)}}}function Mr(s){let e;return{c(){e=f("div"),a(e,"class","loading-spinner svelte-1myfg8v")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function Ar(s){let e,t;return e=new Tn({}),e.$on("close",s[7]),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p:X,i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Vl(s){let e,t,r,n,l,o,c,u,d;function m(v,_){return v[1].session?Jl:Fl}let p=m(s),g=p(s),b=s[2]&&Ar(s);return{c(){e=f("header"),t=f("div"),r=f("div"),n=f("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${bs.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,l=w(),o=f("div"),g.c(),c=w(),b&&b.c(),u=tt(),a(o,"class","flex items-center space-x-4"),a(r,"class","flex items-center justify-between mb-4"),a(t,"class","max-w-6xl mx-auto px-6 py-4"),a(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50"),a(e,"id","app-header")},m(v,_){x(v,e,_),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),g.m(o,null),x(v,c,_),b&&b.m(v,_),x(v,u,_),d=!0},p(v,[_]){p===(p=m(v))&&g?g.p(v,_):(g.d(1),g=p(v),g&&(g.c(),g.m(o,null))),v[2]?b?(b.p(v,_),_&4&&re(b,1)):(b=Ar(v),b.c(),re(b,1),b.m(u.parentNode,u)):b&&(Rt(),ue(b,1,1,()=>{b=null}),Ot())},i(v){d||(re(b),d=!0)},o(v){ue(b),d=!1},d(v){v&&(C(e),C(c),C(u)),g.d(),b&&b.d(v)}}}function Yl(s,e,t){let r,n;Ee(s,pe,b=>t(0,r=b)),Ee(s,$e,b=>t(1,n=b));let l=!1,o=!1,c="";Ns(async()=>{n.session&&await u()});async function u(){if(n.session){t(3,o=!0),t(4,c="");try{const v=(await Fe.getUserLists(n.session,n.authType)).map(_=>({uri:_.uri,name:_.name,description:_.description||"",purpose:_.purpose||"app.bsky.graph.defs#modlist",createdAt:_.createdAt,memberCount:_.listItemCount||0})).sort((_,P)=>new Date(P.createdAt)-new Date(_.createdAt));pe.setUserLists(v)}catch(b){t(4,c=b.message||"Failed to load your lists")}finally{t(3,o=!1)}}}function d(b){const v=b.target.value;if(v){const _=r.userLists.find(P=>P.uri===v);_&&pe.setSelectedList(_)}else pe.setSelectedList(null)}function m(){t(2,l=!0)}function p(){t(2,l=!1)}function g(){$e.signOut(),pe.setSelectedList(null)}return s.$$.update=()=>{s.$$.dirty&3&&n.session&&r.userLists.length===0&&u(),s.$$.dirty&1&&r.userLists.length>0&&console.log("Header: userLists updated:",r.userLists)},[r,n,l,o,c,d,m,p,g]}class Gl extends Ne{constructor(e){super(),De(this,e,Yl,Vl,Ie,{})}}function Er(s){let e,t;return e=new Tn({}),e.$on("close",s[2]),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p:X,i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Zl(s){let e,t,r,n,l,o,c,u,d,m,p,g,b,v,_,P,K,M,W,T,D,k,I,E,N,S,B,R=s[0]&&Er(s);return{c(){e=f("div"),t=f("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${bs.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-4xl font-bold text-slate-800 mb-4">Bluesky List Manager</h2> <p class="text-xl text-slate-600 mb-2">Manage your lists like a pro.</p> <p class="text-xl text-slate-600 mb-6"><strong class="text-blue-600">Get insights and powerful tools to grow your curated lists.</strong></p>`,r=w(),n=f("div"),l=f("button"),l.textContent="üöÄ Start Building Better Lists - Sign in with Bluesky",o=w(),c=f("p"),c.textContent="100% free ‚Ä¢ No registration required ‚Ä¢ Works instantly ‚Ä¢ Zero data stored on our servers",u=w(),d=f("div"),d.innerHTML=`<div class="bg-gray-50 p-4 rounded-lg border border-gray-200"><img src="${bs.getAssetPath("static/screencapture.png")}" alt="Bluesky List Manager Preview - Showing list statistics and member management interface" class="w-full max-w-4xl mx-auto rounded-lg shadow-md"/> <p class="text-sm text-gray-600 mt-3">See your list insights and manage members with powerful analytics</p></div>`,m=w(),p=f("div"),p.innerHTML='<div class="bg-red-50 p-6 rounded-lg border border-red-200"><h3 class="text-lg font-semibold text-red-800 mb-3">üò§ The Manual Way (Slow &amp; Painful)</h3> <ul class="space-y-2 text-red-700"><li class="flex items-start"><span class="text-red-500 mr-2">‚Ä¢</span> <span>Search one profile at a time</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">‚Ä¢</span> <span>Click through each profile manually</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">‚Ä¢</span> <span>Forget who you&#39;ve already added</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">‚Ä¢</span> <span>Hours of repetitive clicking</span></li></ul></div> <div class="bg-green-50 p-6 rounded-lg border border-green-200"><h3 class="text-lg font-semibold text-green-800 mb-3">‚ö° The Smart Way (Fast &amp; Easy)</h3> <ul class="space-y-2 text-green-700"><li class="flex items-start"><span class="text-green-500 mr-2">‚Ä¢</span> <span><strong>Bulk search</strong> by keywords, bio, or handle</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">‚Ä¢</span> <span><strong>Instant filtering</strong> - see who&#39;s already in your list</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">‚Ä¢</span> <span><strong>One-click adding</strong> of multiple profiles</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">‚Ä¢</span> <span><strong>Minutes instead of hours</strong></span></li></ul></div>',g=w(),b=f("div"),b.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-4">üéØ Perfect for:</h3> <div class="grid md:grid-cols-3 gap-4 text-blue-700"><div class="text-center"><div class="text-2xl mb-2">üë•</div> <div class="font-medium">Community Builders</div> <div class="text-sm">Grow your curated lists quickly</div></div> <div class="text-center"><div class="text-2xl mb-2">üîç</div> <div class="font-medium">Content Creators</div> <div class="text-sm">Find your target audience</div></div> <div class="text-center"><div class="text-2xl mb-2">üìä</div> <div class="font-medium">List Managers</div> <div class="text-sm">Maintain and expand your lists</div></div></div>',v=w(),_=f("div"),_.innerHTML='<h3 class="text-lg font-semibold text-purple-800 mb-3">‚ú® Key Features</h3> <div class="grid md:grid-cols-2 gap-4 text-purple-700"><div><div class="font-medium mb-1">üîç Smart Search</div> <div class="text-sm">Search across bios, display names, and handles with powerful filters</div></div> <div><div class="font-medium mb-1">üìä Real-time Stats</div> <div class="text-sm">See engagement rates, verification status, and growth metrics</div></div> <div><div class="font-medium mb-1">üîí Privacy First</div> <div class="text-sm">Client-side app - your data never leaves your browser</div></div></div>',P=w(),K=f("div"),K.innerHTML=`<h3 class="text-lg font-semibold text-gray-800 mb-3">üîê Privacy &amp; Security</h3> <p class="text-gray-700 mb-3">This is a <strong>client-side application</strong>. Your Bluesky credentials are stored
			locally in your browser and are never sent to our servers. We only communicate directly with
			Bluesky&#39;s API using your authentication token.</p> <p class="text-sm text-gray-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code (and
			contribute!) on
			<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-gray-600 hover:text-gray-700 underline">GitHub</a>.</p>`,M=w(),W=f("div"),T=f("button"),T.textContent="üöÄ Start Building Better Lists - Sign in with Bluesky",D=w(),k=f("p"),k.textContent="100% free ‚Ä¢ No registration required ‚Ä¢ Works instantly ‚Ä¢ Zero data stored on our servers",I=w(),R&&R.c(),E=tt(),a(t,"class","text-center mb-8"),a(l,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),a(l,"id","auth-sign-in-button"),a(c,"class","text-sm text-gray-500 mt-3"),a(n,"class","text-center mb-8"),a(n,"id","auth-cta"),a(d,"class","mb-8 text-center"),a(p,"class","grid md:grid-cols-2 gap-8 mb-8"),a(b,"class","bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8"),a(_,"class","bg-purple-50 p-6 rounded-lg border border-purple-200 mb-8"),a(K,"class","bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8"),a(T,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),a(k,"class","text-sm text-gray-500 mt-3"),a(W,"class","text-center"),a(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-4xl mx-auto relative z-100"),a(e,"id","auth-instructions")},m($,U){x($,e,U),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,c),i(e,u),i(e,d),i(e,m),i(e,p),i(e,g),i(e,b),i(e,v),i(e,_),i(e,P),i(e,K),i(e,M),i(e,W),i(W,T),i(W,D),i(W,k),x($,I,U),R&&R.m($,U),x($,E,U),N=!0,S||(B=[te(l,"click",s[1]),te(T,"click",s[1])],S=!0)},p($,[U]){$[0]?R?(R.p($,U),U&1&&re(R,1)):(R=Er($),R.c(),re(R,1),R.m(E.parentNode,E)):R&&(Rt(),ue(R,1,1,()=>{R=null}),Ot())},i($){N||(re(R),N=!0)},o($){ue(R),N=!1},d($){$&&(C(e),C(I),C(E)),R&&R.d($),S=!1,xe(B)}}}function Ql(s,e,t){let r=!1;function n(){t(0,r=!0)}function l(){t(0,r=!1)}return[r,n,l]}class Xl extends Ne{constructor(e){super(),De(this,e,Ql,Zl,Ie,{})}}function ei(s){let e,t,r;return{c(){e=f("h3"),e.textContent="Select a List",t=w(),r=f("p"),r.textContent="Choose a list from the dropdown above to get started.",a(e,"class","text-lg font-semibold text-slate-800 mb-2"),a(r,"class","text-slate-600")},m(n,l){x(n,e,l),x(n,t,l),x(n,r,l)},d(n){n&&(C(e),C(t),C(r))}}}function ti(s){let e,t,r;return{c(){e=f("h3"),e.textContent="No Lists Found",t=w(),r=f("p"),r.textContent="You don't have any lists yet. Create a list on Bluesky first!",a(e,"class","text-lg font-semibold text-slate-800 mb-2"),a(r,"class","text-slate-600")},m(n,l){x(n,e,l),x(n,t,l),x(n,r,l)},d(n){n&&(C(e),C(t),C(r))}}}function si(s){let e,t,r,n,l,o,c;function u(p,g){return p[0].userLists.length===0?ti:ei}let d=u(s),m=d(s);return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=w(),l=f("div"),o=f("div"),o.innerHTML=`<img src="${bs.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,c=w(),m.c(),a(r,"class","text-center mb-8"),a(o,"class","text-4xl mb-4"),a(l,"class","text-center py-12"),a(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),a(t,"id","list-selector-content"),a(e,"class","max-w-4xl mx-auto"),a(e,"id","list-selector")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,c),m.m(l,null)},p(p,[g]){d!==(d=u(p))&&(m.d(1),m=d(p),m&&(m.c(),m.m(l,null)))},i:X,o:X,d(p){p&&C(e),m.d()}}}function ri(s,e,t){let r;return Ee(s,pe,n=>t(0,r=n)),[r]}class ni extends Ne{constructor(e){super(),De(this,e,ri,si,Ie,{})}}function li(s){let e,t,r,n,l,o,c,u,d,m,p,g=(s[0].displayName||s[0].handle)+"",b,v,_,P,K=s[0].handle+"",M,W,T,D,k=s[0].description&&Pr(s);function I(S,B){if(S[3]==="Already in list")return ci;if(S[3]==="New candidate")return ai;if(S[2])return oi}let E=I(s),N=E&&E(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),u=w(),d=f("div"),m=f("div"),p=f("h3"),b=L(g),v=w(),_=f("span"),P=L("@"),M=L(K),W=w(),k&&k.c(),T=w(),N&&N.c(),It(n.src,l=ys(s[0]))||a(n,"src",l),a(n,"alt",o=s[0].displayName||s[0].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(p,"class","text-base font-semibold text-gray-900 truncate"),a(_,"class","text-sm text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(d,"class","flex-1 min-w-0"),a(t,"class","flex items-start space-x-3"),a(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200"),a(e,"id",D="profile-card-"+s[0].did)},m(S,B){x(S,e,B),i(e,t),i(t,r),i(r,n),i(t,u),i(t,d),i(d,m),i(m,p),i(p,b),i(m,v),i(m,_),i(_,P),i(_,M),i(d,W),k&&k.m(d,null),i(d,T),N&&N.m(d,null)},p(S,B){B&1&&!It(n.src,l=ys(S[0]))&&a(n,"src",l),B&1&&o!==(o=S[0].displayName||S[0].handle)&&a(n,"alt",o),B&1&&c!==(c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(S[0].displayName||S[0].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",c),B&1&&g!==(g=(S[0].displayName||S[0].handle)+"")&&j(b,g),B&1&&K!==(K=S[0].handle+"")&&j(M,K),S[0].description?k?k.p(S,B):(k=Pr(S),k.c(),k.m(d,T)):k&&(k.d(1),k=null),E===(E=I(S))&&N?N.p(S,B):(N&&N.d(1),N=E&&E(S),N&&(N.c(),N.m(d,null))),B&1&&D!==(D="profile-card-"+S[0].did)&&a(e,"id",D)},d(S){S&&C(e),k&&k.d(),N&&N.d()}}}function ii(s){let e,t,r,n,l,o,c,u,d,m,p,g=(s[0].displayName||s[0].handle)+"",b,v,_,P,K=s[0].handle+"",M,W,T,D,k,I,E,N,S,B=s[0].description&&Tr(s);function R(q,Z){if(q[3]==="Already in list")return pi;if(q[3]==="New candidate")return mi;if(q[2])return fi}let $=R(s),U=$&&$(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),u=w(),d=f("div"),m=f("div"),p=f("h3"),b=L(g),v=w(),_=f("span"),P=L("@"),M=L(K),W=w(),B&&B.c(),T=w(),U&&U.c(),D=w(),k=f("div"),k.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',It(n.src,l=ys(s[0]))||a(n,"src",l),a(n,"alt",o=s[0].displayName||s[0].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(p,"class","text-base font-semibold text-gray-900 truncate"),a(_,"class","text-sm text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(d,"class","flex-1 min-w-0"),a(k,"class","flex-shrink-0"),a(t,"class","flex items-start space-x-3"),a(e,"href",I="https://bsky.app/profile/"+s[0].handle),a(e,"target","_blank"),a(e,"rel","noopener noreferrer"),a(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200"),a(e,"id",E="profile-card-"+s[0].did)},m(q,Z){x(q,e,Z),i(e,t),i(t,r),i(r,n),i(t,u),i(t,d),i(d,m),i(m,p),i(p,b),i(m,v),i(m,_),i(_,P),i(_,M),i(d,W),B&&B.m(d,null),i(d,T),U&&U.m(d,null),i(t,D),i(t,k),N||(S=te(e,"click",s[8]),N=!0)},p(q,Z){Z&1&&!It(n.src,l=ys(q[0]))&&a(n,"src",l),Z&1&&o!==(o=q[0].displayName||q[0].handle)&&a(n,"alt",o),Z&1&&c!==(c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(q[0].displayName||q[0].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",c),Z&1&&g!==(g=(q[0].displayName||q[0].handle)+"")&&j(b,g),Z&1&&K!==(K=q[0].handle+"")&&j(M,K),q[0].description?B?B.p(q,Z):(B=Tr(q),B.c(),B.m(d,T)):B&&(B.d(1),B=null),$===($=R(q))&&U?U.p(q,Z):(U&&U.d(1),U=$&&$(q),U&&(U.c(),U.m(d,null))),Z&1&&I!==(I="https://bsky.app/profile/"+q[0].handle)&&a(e,"href",I),Z&1&&E!==(E="profile-card-"+q[0].did)&&a(e,"id",E)},d(q){q&&C(e),B&&B.d(),U&&U.d(),N=!1,S()}}}function Pr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=L(t),a(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&j(r,t)},d(n){n&&C(e)}}}function oi(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",a(t,"type","checkbox"),t.checked=s[1],a(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),a(n,"class","text-sm text-gray-600"),a(e,"class","flex items-center space-x-2")},m(c,u){x(c,e,u),i(e,t),i(e,r),i(e,n),l||(o=te(t,"change",s[6]),l=!0)},p(c,u){u&2&&(t.checked=c[1])},d(c){c&&C(e),l=!1,o()}}}function ai(s){let e,t,r,n,l,o,c;function u(p,g){return p[5]?ui:di}let d=u(s),m=d(s);return{c(){e=f("div"),t=f("span"),r=L(s[3]),n=w(),l=f("button"),m.c(),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],a(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-2")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(c=te(l,"click",s[7]),o=!0)},p(p,g){g&8&&j(r,p[3]),d!==(d=u(p))&&(m.d(1),m=d(p),m&&(m.c(),m.m(l,null))),g&32&&(l.disabled=p[5])},d(p){p&&C(e),m.d(),o=!1,c()}}}function ci(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=L(s[3]),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),a(e,"class","flex items-center space-x-2")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&j(r,n[3])},d(n){n&&C(e)}}}function di(s){let e;return{c(){e=L("Add to list")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function ui(s){let e,t;return{c(){e=f("span"),t=L(`
								Adding...`),a(e,"class","loading-spinner mr-1")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(C(e),C(t))}}}function Tr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=L(t),a(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&j(r,t)},d(n){n&&C(e)}}}function fi(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",a(t,"type","checkbox"),t.checked=s[1],a(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),a(n,"class","text-sm text-gray-600"),a(e,"class","flex items-center space-x-2")},m(c,u){x(c,e,u),i(e,t),i(e,r),i(e,n),l||(o=te(t,"change",s[6]),l=!0)},p(c,u){u&2&&(t.checked=c[1])},d(c){c&&C(e),l=!1,o()}}}function mi(s){let e,t,r,n,l,o,c;function u(p,g){return p[5]?gi:hi}let d=u(s),m=d(s);return{c(){e=f("div"),t=f("span"),r=L(s[3]),n=w(),l=f("button"),m.c(),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],a(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-2")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(c=te(l,"click",s[7]),o=!0)},p(p,g){g&8&&j(r,p[3]),d!==(d=u(p))&&(m.d(1),m=d(p),m&&(m.c(),m.m(l,null))),g&32&&(l.disabled=p[5])},d(p){p&&C(e),m.d(),o=!1,c()}}}function pi(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=L(s[3]),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),a(e,"class","flex items-center space-x-2")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&j(r,n[3])},d(n){n&&C(e)}}}function hi(s){let e;return{c(){e=L("Add to list")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function gi(s){let e,t;return{c(){e=f("span"),t=L(`
								Adding...`),a(e,"class","loading-spinner mr-1")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(C(e),C(t))}}}function bi(s){let e;function t(l,o){return l[4]?ii:li}let r=t(s),n=r(s);return{c(){n.c(),e=tt()},m(l,o){n.m(l,o),x(l,e,o)},p(l,[o]){r===(r=t(l))&&n?n.p(l,o):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:X,o:X,d(l){l&&C(e),n.d(l)}}}function ys(s){return s.avatar?s.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName||s.handle)}&background=6366f1&color=fff&size=64`}function yi(s,e,t){let{profile:r}=e,{isSelected:n=!1}=e,{onSelect:l=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:c=null}=e,{clickable:u=!1}=e,{onAddToList:d=()=>{}}=e,{isAddingToList:m=!1}=e;function p(){l(r)}function g(v){v.preventDefault(),v.stopPropagation(),d(r)}function b(v){u&&!o||u&&o&&(v.target.type==="checkbox"||v.target.closest('input[type="checkbox"]'))&&(v.preventDefault(),v.stopPropagation())}return s.$$set=v=>{"profile"in v&&t(0,r=v.profile),"isSelected"in v&&t(1,n=v.isSelected),"onSelect"in v&&t(9,l=v.onSelect),"showCheckbox"in v&&t(2,o=v.showCheckbox),"statusTag"in v&&t(3,c=v.statusTag),"clickable"in v&&t(4,u=v.clickable),"onAddToList"in v&&t(10,d=v.onAddToList),"isAddingToList"in v&&t(5,m=v.isAddingToList)},[r,n,o,c,u,m,p,g,b,l,d]}class vi extends Ne{constructor(e){super(),De(this,e,yi,bi,Ie,{profile:0,isSelected:1,onSelect:9,showCheckbox:2,statusTag:3,clickable:4,onAddToList:10,isAddingToList:5})}}var $t={};(function s(e,t,r,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!e.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),h=y.getContext("2d");h.fillRect(0,0,1,1);var H=y.transferToImageBitmap();try{h.createPattern(H,"no-repeat")}catch{return!1}return!0}();function u(){}function d(y){var h=t.exports.Promise,H=h!==void 0?h:e.Promise;return typeof H=="function"?new H(y):(y(u,u),null)}var m=function(y,h){return{transform:function(H){if(y)return H;if(h.has(H))return h.get(H);var z=new OffscreenCanvas(H.width,H.height),A=z.getContext("2d");return A.drawImage(H,0,0),h.set(H,z),z},clear:function(){h.clear()}}}(c,new Map),p=function(){var y=Math.floor(16.666666666666668),h,H,z={},A=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(O){var J=Math.random();return z[J]=requestAnimationFrame(function F(V){A===V||A+y-1<V?(A=V,delete z[J],O()):z[J]=requestAnimationFrame(F)}),J},H=function(O){z[O]&&cancelAnimationFrame(z[O])}):(h=function(O){return setTimeout(O,y)},H=function(O){return clearTimeout(O)}),{frame:h,cancel:H}}(),g=function(){var y,h,H={};function z(A){function O(J,F){A.postMessage({options:J||{},callback:F})}A.init=function(F){var V=F.transferControlToOffscreen();A.postMessage({canvas:V},[V])},A.fire=function(F,V,ee){if(h)return O(F,null),h;var ie=Math.random().toString(36).slice(2);return h=d(function(le){function se(ae){ae.data.callback===ie&&(delete H[ie],A.removeEventListener("message",se),h=null,m.clear(),ee(),le())}A.addEventListener("message",se),O(F,ie),H[ie]=se.bind(null,{data:{callback:ie}})}),h},A.reset=function(){A.postMessage({reset:!0});for(var F in H)H[F](),delete H[F]}}return function(){if(y)return y;if(!r&&l){var A=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([A])))}catch(O){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",O),null}z(y)}return y}}(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(y,h){return h?h(y):y}function _(y){return y!=null}function P(y,h,H){return v(y&&_(y[h])?y[h]:b[h],H)}function K(y){return y<0?0:Math.floor(y)}function M(y,h){return Math.floor(Math.random()*(h-y))+y}function W(y){return parseInt(y,16)}function T(y){return y.map(D)}function D(y){var h=String(y).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:W(h.substring(0,2)),g:W(h.substring(2,4)),b:W(h.substring(4,6))}}function k(y){var h=P(y,"origin",Object);return h.x=P(h,"x",Number),h.y=P(h,"y",Number),h}function I(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function E(y){var h=y.getBoundingClientRect();y.width=h.width,y.height=h.height}function N(y){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=y,h}function S(y,h,H,z,A,O,J,F,V){y.save(),y.translate(h,H),y.rotate(O),y.scale(z,A),y.arc(0,0,1,J,F,V),y.restore()}function B(y){var h=y.angle*(Math.PI/180),H=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-h+(.5*H-Math.random()*H),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function R(y,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var H=h.tick++/h.totalTicks,z=h.x+h.random*h.tiltCos,A=h.y+h.random*h.tiltSin,O=h.wobbleX+h.random*h.tiltCos,J=h.wobbleY+h.random*h.tiltSin;if(y.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-H)+")",y.beginPath(),o&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))y.fill(de(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(O-z)*.1,Math.abs(J-A)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var F=Math.PI/10*h.wobble,V=Math.abs(O-z)*.1,ee=Math.abs(J-A)*.1,ie=h.shape.bitmap.width*h.scalar,le=h.shape.bitmap.height*h.scalar,se=new DOMMatrix([Math.cos(F)*V,Math.sin(F)*V,-Math.sin(F)*ee,Math.cos(F)*ee,h.x,h.y]);se.multiplySelf(new DOMMatrix(h.shape.matrix));var ae=y.createPattern(m.transform(h.shape.bitmap),"no-repeat");ae.setTransform(se),y.globalAlpha=1-H,y.fillStyle=ae,y.fillRect(h.x-ie/2,h.y-le/2,ie,le),y.globalAlpha=1}else if(h.shape==="circle")y.ellipse?y.ellipse(h.x,h.y,Math.abs(O-z)*h.ovalScalar,Math.abs(J-A)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):S(y,h.x,h.y,Math.abs(O-z)*h.ovalScalar,Math.abs(J-A)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var Q=Math.PI/2*3,me=4*h.scalar,ye=8*h.scalar,be=h.x,ve=h.y,Re=5,Se=Math.PI/Re;Re--;)be=h.x+Math.cos(Q)*ye,ve=h.y+Math.sin(Q)*ye,y.lineTo(be,ve),Q+=Se,be=h.x+Math.cos(Q)*me,ve=h.y+Math.sin(Q)*me,y.lineTo(be,ve),Q+=Se;else y.moveTo(Math.floor(h.x),Math.floor(h.y)),y.lineTo(Math.floor(h.wobbleX),Math.floor(A)),y.lineTo(Math.floor(O),Math.floor(J)),y.lineTo(Math.floor(z),Math.floor(h.wobbleY));return y.closePath(),y.fill(),h.tick<h.totalTicks}function $(y,h,H,z,A){var O=h.slice(),J=y.getContext("2d"),F,V,ee=d(function(ie){function le(){F=V=null,J.clearRect(0,0,z.width,z.height),m.clear(),A(),ie()}function se(){r&&!(z.width===n.width&&z.height===n.height)&&(z.width=y.width=n.width,z.height=y.height=n.height),!z.width&&!z.height&&(H(y),z.width=y.width,z.height=y.height),J.clearRect(0,0,z.width,z.height),O=O.filter(function(ae){return R(J,ae)}),O.length?F=p.frame(se):le()}F=p.frame(se),V=le});return{addFettis:function(ie){return O=O.concat(ie),ee},canvas:y,promise:ee,reset:function(){F&&p.cancel(F),V&&V()}}}function U(y,h){var H=!y,z=!!P(h||{},"resize"),A=!1,O=P(h,"disableForReducedMotion",Boolean),J=l&&!!P(h||{},"useWorker"),F=J?g():null,V=H?I:E,ee=y&&F?!!y.__confetti_initialized:!1,ie=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,le;function se(Q,me,ye){for(var be=P(Q,"particleCount",K),ve=P(Q,"angle",Number),Re=P(Q,"spread",Number),Se=P(Q,"startVelocity",Number),dt=P(Q,"decay",Number),qt=P(Q,"gravity",Number),ut=P(Q,"drift",Number),st=P(Q,"colors",T),Bt=P(Q,"ticks",Number),Dt=P(Q,"shapes"),qe=P(Q,"scalar"),Ve=!!P(Q,"flat"),Ye=k(Q),rt=be,ft=[],mt=y.width*Ye.x,pt=y.height*Ye.y;rt--;)ft.push(B({x:mt,y:pt,angle:ve,spread:Re,startVelocity:Se,color:st[rt%st.length],shape:Dt[M(0,Dt.length)],ticks:Bt,decay:dt,gravity:qt,drift:ut,scalar:qe,flat:Ve}));return le?le.addFettis(ft):(le=$(y,ft,V,me,ye),le.promise)}function ae(Q){var me=O||P(Q,"disableForReducedMotion",Boolean),ye=P(Q,"zIndex",Number);if(me&&ie)return d(function(Se){Se()});H&&le?y=le.canvas:H&&!y&&(y=N(ye),document.body.appendChild(y)),z&&!ee&&V(y);var be={width:y.width,height:y.height};F&&!ee&&F.init(y),ee=!0,F&&(y.__confetti_initialized=!0);function ve(){if(F){var Se={getBoundingClientRect:function(){if(!H)return y.getBoundingClientRect()}};V(Se),F.postMessage({resize:{width:Se.width,height:Se.height}});return}be.width=be.height=null}function Re(){le=null,z&&(A=!1,e.removeEventListener("resize",ve)),H&&y&&(document.body.contains(y)&&document.body.removeChild(y),y=null,ee=!1)}return z&&!A&&(A=!0,e.addEventListener("resize",ve,!1)),F?F.fire(Q,be,Re):se(Q,be,Re)}return ae.reset=function(){F&&F.reset(),le&&le.reset()},ae}var q;function Z(){return q||(q=U(null,{useWorker:!0,resize:!0})),q}function de(y,h,H,z,A,O,J){var F=new Path2D(y),V=new Path2D;V.addPath(F,new DOMMatrix(h));var ee=new Path2D;return ee.addPath(V,new DOMMatrix([Math.cos(J)*A,Math.sin(J)*A,-Math.sin(J)*O,Math.cos(J)*O,H,z])),ee}function oe(y){if(!o)throw new Error("path confetti are not supported in this browser");var h,H;typeof y=="string"?h=y:(h=y.path,H=y.matrix);var z=new Path2D(h),A=document.createElement("canvas"),O=A.getContext("2d");if(!H){for(var J=1e3,F=J,V=J,ee=0,ie=0,le,se,ae=0;ae<J;ae+=2)for(var Q=0;Q<J;Q+=2)O.isPointInPath(z,ae,Q,"nonzero")&&(F=Math.min(F,ae),V=Math.min(V,Q),ee=Math.max(ee,ae),ie=Math.max(ie,Q));le=ee-F,se=ie-V;var me=10,ye=Math.min(me/le,me/se);H=[ye,0,0,ye,-Math.round(le/2+F)*ye,-Math.round(se/2+V)*ye]}return{type:"path",path:h,matrix:H}}function ne(y){var h,H=1,z="#000000",A='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?h=y:(h=y.text,H="scalar"in y?y.scalar:H,A="fontFamily"in y?y.fontFamily:A,z="color"in y?y.color:z);var O=10*H,J=""+O+"px "+A,F=new OffscreenCanvas(O,O),V=F.getContext("2d");V.font=J;var ee=V.measureText(h),ie=Math.ceil(ee.actualBoundingBoxRight+ee.actualBoundingBoxLeft),le=Math.ceil(ee.actualBoundingBoxAscent+ee.actualBoundingBoxDescent),se=2,ae=ee.actualBoundingBoxLeft+se,Q=ee.actualBoundingBoxAscent+se;ie+=se+se,le+=se+se,F=new OffscreenCanvas(ie,le),V=F.getContext("2d"),V.font=J,V.fillStyle=z,V.fillText(h,ae,Q);var me=1/H;return{type:"bitmap",bitmap:F.transferToImageBitmap(),matrix:[me,0,0,me,-ie*me/2,-le*me/2]}}t.exports=function(){return Z().apply(this,arguments)},t.exports.reset=function(){Z().reset()},t.exports.create=U,t.exports.shapeFromPath=oe,t.exports.shapeFromText=ne})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),$t,!1);const Ps=$t.exports;$t.exports.create;function Ir(s,e,t){const r=s.slice();return r[21]=e[t].profile,r[22]=e[t].status,r}function _i(s){let e;return{c(){e=L("üîç Search")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function wi(s){let e,t;return{c(){e=f("span"),t=L(`
						Searching...`),a(e,"class","loading-spinner svelte-165a6uh")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(C(e),C(t))}}}function Rr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=L(s[4]),a(t,"class","text-red-700"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&16&&j(r,n[4])},d(n){n&&C(e)}}}function Si(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">üîç</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',a(e,"class","text-center py-8")},m(t,r){x(t,e,r)},p:X,i:X,o:X,d(t){t&&C(e)}}}function ki(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">üîç</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',a(e,"class","text-center py-8")},m(t,r){x(t,e,r)},p:X,i:X,o:X,d(t){t&&C(e)}}}function Li(s){let e,t,r,n=he(s[7]),l=[];for(let u=0;u<n.length;u+=1)l[u]=Or(Ir(s,n,u));const o=u=>ue(l[u],1,1,()=>{l[u]=null});let c=s[5]&&Br(s);return{c(){e=f("div");for(let u=0;u<l.length;u+=1)l[u].c();t=w(),c&&c.c(),a(e,"class","space-y-4")},m(u,d){x(u,e,d);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);i(e,t),c&&c.m(e,null),r=!0},p(u,d){if(d&3266){n=he(u[7]);let m;for(m=0;m<n.length;m+=1){const p=Ir(u,n,m);l[m]?(l[m].p(p,d),re(l[m],1)):(l[m]=Or(p),l[m].c(),re(l[m],1),l[m].m(e,t))}for(Rt(),m=n.length;m<l.length;m+=1)o(m);Ot()}u[5]?c?c.p(u,d):(c=Br(u),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(u){if(!r){for(let d=0;d<n.length;d+=1)re(l[d]);r=!0}},o(u){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)ue(l[d]);r=!1},d(u){u&&C(e),et(l,u),c&&c.d()}}}function Or(s){let e,t;return e=new vi({props:{profile:s[21],isSelected:s[1].has(s[21].did),onSelect:s[10],statusTag:s[22],clickable:!0,onAddToList:s[11],isAddingToList:s[6].has(s[21].did)}}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p(r,n){const l={};n&128&&(l.profile=r[21]),n&130&&(l.isSelected=r[1].has(r[21].did)),n&128&&(l.statusTag=r[22]),n&192&&(l.isAddingToList=r[6].has(r[21].did)),e.$set(l)},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Br(s){let e,t,r,n;function l(u,d){return u[3]?xi:Ci}let o=l(s),c=o(s);return{c(){e=f("div"),t=f("button"),c.c(),t.disabled=s[3],a(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","text-center pt-4 border-t border-gray-200")},m(u,d){x(u,e,d),i(e,t),c.m(t,null),r||(n=te(t,"click",s[9]),r=!0)},p(u,d){o!==(o=l(u))&&(c.d(1),c=o(u),c&&(c.c(),c.m(t,null))),d&8&&(t.disabled=u[3])},d(u){u&&C(e),c.d(),r=!1,n()}}}function Ci(s){let e;return{c(){e=L("Load More Results")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function xi(s){let e,t;return{c(){e=f("span"),t=L(`
								Loading...`),a(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(C(e),C(t))}}}function Mi(s){let e,t,r,n,l,o,c,u,d,m,p,g,b,v,_,P,K,M;function W(S,B){return S[3]?wi:_i}let T=W(s),D=T(s),k=s[4]&&Rr(s);const I=[Li,ki,Si],E=[];function N(S,B){return S[0].length>0?0:S[2]&&!S[3]?1:S[2]?-1:2}return~(v=N(s))&&(_=E[v]=I[v](s)),{c(){e=f("div"),t=f("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',r=w(),n=f("div"),l=f("form"),o=f("div"),c=f("label"),c.textContent="Search for:",u=w(),d=f("input"),m=w(),p=f("button"),D.c(),g=w(),k&&k.c(),b=w(),_&&_.c(),a(t,"class","p-6 border-b border-gray-200"),a(c,"for","search-input"),a(c,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),a(d,"id","search-input"),a(d,"type","text"),a(d,"placeholder","e.g., belge, artist, developer..."),a(d,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),d.required=!0,a(p,"type","submit"),p.disabled=s[3],a(p,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(o,"class","flex gap-4 items-center flex-wrap"),a(l,"class","mb-6"),a(n,"id","profile-search-container"),a(n,"class","p-6"),a(e,"class","bg-white rounded-lg shadow-sm border border-gray-200"),a(e,"id","profile-search")},m(S,B){x(S,e,B),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(o,c),i(o,u),i(o,d),Ce(d,s[2]),i(o,m),i(o,p),D.m(p,null),i(n,g),k&&k.m(n,null),i(n,b),~v&&E[v].m(n,null),P=!0,K||(M=[te(d,"input",s[15]),te(l,"submit",pn(s[8]))],K=!0)},p(S,[B]){B&4&&d.value!==S[2]&&Ce(d,S[2]),T!==(T=W(S))&&(D.d(1),D=T(S),D&&(D.c(),D.m(p,null))),(!P||B&8)&&(p.disabled=S[3]),S[4]?k?k.p(S,B):(k=Rr(S),k.c(),k.m(n,b)):k&&(k.d(1),k=null);let R=v;v=N(S),v===R?~v&&E[v].p(S,B):(_&&(Rt(),ue(E[R],1,1,()=>{E[R]=null}),Ot()),~v?(_=E[v],_?_.p(S,B):(_=E[v]=I[v](S),_.c()),re(_,1),_.m(n,null)):_=null)},i(S){P||(re(_),P=!0)},o(S){ue(_),P=!1},d(S){S&&C(e),D.d(),k&&k.d(),~v&&E[v].d(),K=!1,xe(M)}}}function Ai(s,e,t){let r,n,l;Ee(s,$e,k=>t(17,n=k)),Ee(s,pe,k=>t(14,l=k));let o="",c=[],u=!1,d="",m=new Set,p=null,g=!1,b=new Set;async function v(){if(!(!o.trim()||!n.session)){t(3,u=!0),t(4,d=""),t(0,c=[]),m.clear(),p=null,t(5,g=!1);try{const k=await Fe.searchProfiles(n.session,o,n.authType);t(0,c=k.actors||[]),p=k.cursor,t(5,g=!!k.cursor)}catch(k){t(4,d=k.message||"Failed to search profiles")}finally{t(3,u=!1)}}}async function _(){if(!(!g||u||!n.session)){t(3,u=!0),t(4,d="");try{const k=await Fe.searchProfiles(n.session,o,n.authType,25,p);t(0,c=[...c,...k.actors||[]]),p=k.cursor,t(5,g=!!k.cursor)}catch(k){t(4,d=k.message||"Failed to load more profiles")}finally{t(3,u=!1)}}}function P(k){m.has(k.did)?m.delete(k.did):m.add(k.did),t(1,m)}let K=null,M=!0;async function W(k){if(!(!n.session||!l.selectedList||b.has(k.did))){b.add(k.did),t(6,b);try{await Fe.addToList(n.session,k.did,l.selectedList.uri),await pe.fetchAndAddProfile(n.session,k.did),T()}catch(I){console.error("Failed to add profile to list:",I)}finally{b.delete(k.did),t(6,b)}}}function T(){Ps({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Ps({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Ps({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}function D(){o=this.value,t(2,o),t(14,l),t(13,M),t(12,K),t(1,m)}return s.$$.update=()=>{s.$$.dirty&28674&&l.selectedList&&(!M&&K&&K!==l.selectedList.uri&&(t(2,o=""),t(0,c=[]),m.clear(),p=null,t(5,g=!1),t(4,d="")),t(12,K=l.selectedList.uri),t(13,M=!1)),s.$$.dirty&16385&&t(7,r=c.map(k=>({profile:k,status:l.listMembers.includes(k.did)?"Already in list":"New candidate"})))},[c,m,o,u,d,g,b,r,v,_,P,W,K,M,l,D]}class Ei extends Ne{constructor(e){super(),De(this,e,Ai,Mi,Ie,{})}}function Dr(s,e,t){const r=s.slice();return r[15]=e[t],r}function Nr(s,e,t){const r=s.slice();return r[18]=e[t],r}function Kr(s){let e,t=s[2].selectedList.description+"",r;return{c(){e=f("p"),r=L(t),a(e,"class","text-slate-600 mt-1")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&4&&t!==(t=n[2].selectedList.description+"")&&j(r,t)},d(n){n&&C(e)}}}function Wr(s){let e,t,r,n,l,o,c,u,d,m=s[4].length.toLocaleString()+"",p,g,b=s[0].totalMembers.toLocaleString()+"",v,_,P,K,M,W,T;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("div"),o=f("div"),o.textContent="Calculating comprehensive statistics...",c=w(),u=f("div"),d=L("Processing "),p=L(m),g=L(" of "),v=L(b),_=L(`
						members (`),P=L(s[3]),K=L("%)"),M=w(),W=f("div"),T=f("div"),a(r,"class","loading-spinner svelte-1myfg8v"),a(o,"class","text-blue-700 font-medium"),a(u,"class","text-blue-600 text-sm"),a(t,"class","flex items-center justify-center space-x-3"),a(T,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),ge(T,"width",s[3]+"%"),a(W,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(D,k){x(D,e,k),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,c),i(l,u),i(u,d),i(u,p),i(u,g),i(u,v),i(u,_),i(u,P),i(u,K),i(e,M),i(e,W),i(W,T)},p(D,k){k&16&&m!==(m=D[4].length.toLocaleString()+"")&&j(p,m),k&1&&b!==(b=D[0].totalMembers.toLocaleString()+"")&&j(v,b),k&8&&j(P,D[3]),k&8&&ge(T,"width",D[3]+"%")},d(D){D&&C(e)}}}function Pi(s){let e,t,r,n,l,o=s[0].avgBioLength+"",c,u,d,m,p,g,b,v=s[0].accountsWithBios.toLocaleString()+"",_,P,K=s[0].totalMembers.toLocaleString()+"",M,W,T,D,k,I,E=s[0].accountsWithDisplayNames.toLocaleString()+"",N,S,B=s[0].totalMembers.toLocaleString()+"",R,$,U=s[0].mostCommonWords.length>0&&Ur(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average bio length:",n=w(),l=f("span"),c=L(o),u=L(" characters"),d=w(),m=f("div"),p=f("span"),p.textContent="Bios with content:",g=w(),b=f("span"),_=L(v),P=L(" / "),M=L(K),W=w(),T=f("div"),D=f("span"),D.textContent="Display names:",k=w(),I=f("span"),N=L(E),S=L(" / "),R=L(B),$=w(),U&&U.c(),a(r,"class","text-gray-600"),a(l,"class","font-medium"),a(t,"class","flex justify-between text-sm"),a(p,"class","text-gray-600"),a(b,"class","font-medium"),a(m,"class","flex justify-between text-sm"),a(D,"class","text-gray-600"),a(I,"class","font-medium"),a(T,"class","flex justify-between text-sm"),a(e,"class","space-y-2")},m(q,Z){x(q,e,Z),i(e,t),i(t,r),i(t,n),i(t,l),i(l,c),i(l,u),i(e,d),i(e,m),i(m,p),i(m,g),i(m,b),i(b,_),i(b,P),i(b,M),i(e,W),i(e,T),i(T,D),i(T,k),i(T,I),i(I,N),i(I,S),i(I,R),i(e,$),U&&U.m(e,null)},p(q,Z){Z&1&&o!==(o=q[0].avgBioLength+"")&&j(c,o),Z&1&&v!==(v=q[0].accountsWithBios.toLocaleString()+"")&&j(_,v),Z&1&&K!==(K=q[0].totalMembers.toLocaleString()+"")&&j(M,K),Z&1&&E!==(E=q[0].accountsWithDisplayNames.toLocaleString()+"")&&j(N,E),Z&1&&B!==(B=q[0].totalMembers.toLocaleString()+"")&&j(R,B),q[0].mostCommonWords.length>0?U?U.p(q,Z):(U=Ur(q),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},d(q){q&&C(e),U&&U.d()}}}function Ti(s){let e;return{c(){e=f("div"),e.textContent="Calculating comprehensive bio statistics...",a(e,"class","text-gray-500 text-sm")},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function Ur(s){let e,t,r,n,l=he(s[0].mostCommonWords),o=[];for(let c=0;c<l.length;c+=1)o[c]=Hr(Nr(s,l,c));return{c(){e=f("div"),t=f("div"),t.textContent="Most common words:",r=w(),n=f("div");for(let c=0;c<o.length;c+=1)o[c].c();a(t,"class","text-xs text-gray-500 mb-2"),a(n,"class","flex flex-wrap gap-1"),a(e,"class","mt-3")},m(c,u){x(c,e,u),i(e,t),i(e,r),i(e,n);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(n,null)},p(c,u){if(u&1){l=he(c[0].mostCommonWords);let d;for(d=0;d<l.length;d+=1){const m=Nr(c,l,d);o[d]?o[d].p(m,u):(o[d]=Hr(m),o[d].c(),o[d].m(n,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}},d(c){c&&C(e),et(o,c)}}}function Hr(s){let e,t=s[18].word+"",r,n,l=s[18].count+"",o,c;return{c(){e=f("span"),r=L(t),n=L(" ("),o=L(l),c=L(`)
									`),a(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(u,d){x(u,e,d),i(e,r),i(e,n),i(e,o),i(e,c)},p(u,d){d&1&&t!==(t=u[18].word+"")&&j(r,t),d&1&&l!==(l=u[18].count+"")&&j(o,l)},d(u){u&&C(e)}}}function Ii(s){let e,t,r,n,l,o=s[0].avgHandleLength+"",c,u,d,m=s[0].topDomains.length>0&&zr(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average handle length:",n=w(),l=f("span"),c=L(o),u=L(" characters"),d=w(),m&&m.c(),a(r,"class","text-gray-600"),a(l,"class","font-medium"),a(t,"class","flex justify-between text-sm"),a(e,"class","space-y-2")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,c),i(l,u),i(e,d),m&&m.m(e,null)},p(p,g){g&1&&o!==(o=p[0].avgHandleLength+"")&&j(c,o),p[0].topDomains.length>0?m?m.p(p,g):(m=zr(p),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(p){p&&C(e),m&&m.d()}}}function Ri(s){let e;return{c(){e=f("div"),e.textContent="Calculating handle statistics...",a(e,"class","text-gray-500 text-sm")},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function zr(s){let e,t,r,n,l=he(s[0].topDomains),o=[];for(let c=0;c<l.length;c+=1)o[c]=Fr(Dr(s,l,c));return{c(){e=f("div"),t=f("div"),t.textContent="Top domains:",r=w(),n=f("div");for(let c=0;c<o.length;c+=1)o[c].c();a(t,"class","text-xs text-gray-500 mb-2"),a(n,"class","space-y-1"),a(e,"class","mt-3")},m(c,u){x(c,e,u),i(e,t),i(e,r),i(e,n);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(n,null)},p(c,u){if(u&1){l=he(c[0].topDomains);let d;for(d=0;d<l.length;d+=1){const m=Dr(c,l,d);o[d]?o[d].p(m,u):(o[d]=Fr(m),o[d].c(),o[d].m(n,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}},d(c){c&&C(e),et(o,c)}}}function Fr(s){let e,t,r,n=s[15].domain+"",l,o,c,u=s[15].count+"",d,m,p;return{c(){e=f("div"),t=f("span"),r=L("."),l=L(n),o=w(),c=f("span"),d=L(u),m=L(" users"),p=w(),a(t,"class","font-medium"),a(c,"class","text-gray-600"),a(e,"class","flex justify-between text-xs")},m(g,b){x(g,e,b),i(e,t),i(t,r),i(t,l),i(e,o),i(e,c),i(c,d),i(c,m),i(e,p)},p(g,b){b&1&&n!==(n=g[15].domain+"")&&j(l,n),b&1&&u!==(u=g[15].count+"")&&j(d,u)},d(g){g&&C(e)}}}function Oi(s){let e;return{c(){e=L("Unknown")},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function Bi(s){let e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=L(e)},m(r,n){x(r,t,n)},p(r,n){n&4&&e!==(e=new Date(r[2].selectedList.createdAt).toLocaleDateString()+"")&&j(t,e)},d(r){r&&C(t)}}}function Di(s){var cr,dr,ur;let e,t,r,n,l=(((cr=s[2].selectedList)==null?void 0:cr.name)||"List")+"",o,c,u,d,m,p=s[0].totalMembers.toLocaleString()+"",g,b,v,_,P,K,M,W,T,D,k,I,E=s[1]?"...":kt(s[0].accountsWithBios,s[0].totalMembers)+"%",N,S,B,R,$,U=s[1]?"Calculating...":`${s[0].accountsWithBios.toLocaleString()} have bios`,q,Z,de,oe,ne,y,h,H,z=s[1]?"...":kt(s[0].verifiedAccounts,s[0].totalMembers)+"%",A,O,J,F,V,ee=s[1]?"Calculating...":`${s[0].verifiedAccounts.toLocaleString()} verified accounts`,ie,le,se,ae,Q,me,ye,be,ve=s[1]?"...":kt(s[0].accountsWithAvatars,s[0].totalMembers)+"%",Re,Se,dt,qt,ut,st=s[1]?"Calculating...":`${s[0].accountsWithAvatars.toLocaleString()} have avatars`,Bt,Dt,qe,Ve,Ye,rt,ft,mt,pt=s[0].listAge+"",_s,Hs,Vt,zs,Yt,Fs,Ge,nt,Gt,Js,js,lt,Zt,$s,qs,ht,Qt,Vs,Ke,gt,Xt,Ys,es,ts=((dr=s[2].selectedList)==null?void 0:dr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",ws,Gs,bt,ss,Zs,Nt,Qs,yt,rs,Xs,Kt,ns=s[0].growthRate+"",Ss,er,tr,vt,ls,sr,is,os=s[1]?"Calculating...":`${s[0].recentAdditions} in last batch`,ks,rr,as,_t,Wt,nr,it,cs=s[1]?"Calculating...":"Refresh Stats",Ls,Cs,lr,_e=((ur=s[2].selectedList)==null?void 0:ur.description)&&Kr(s),we=s[1]&&Wr(s);function ir(Y,ce){return Y[1]?Ti:Pi}let ds=ir(s),We=ds(s);function or(Y,ce){return Y[1]?Ri:Ii}let us=or(s),Ue=us(s);function ar(Y,ce){var Ut;return(Ut=Y[2].selectedList)!=null&&Ut.createdAt?Bi:Oi}let fs=ar(s),He=fs(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("h2"),o=L(l),c=w(),_e&&_e.c(),u=w(),d=f("div"),m=f("div"),g=L(p),b=w(),v=f("div"),v.textContent="Total Members",_=w(),we&&we.c(),P=w(),K=f("div"),M=f("div"),W=f("div"),T=f("div"),D=f("div"),D.textContent="üìä Engagement",k=w(),I=f("div"),N=L(E),S=w(),B=f("div"),B.textContent="üí¨",R=w(),$=f("div"),q=L(U),Z=w(),de=f("div"),oe=f("div"),ne=f("div"),y=f("div"),y.textContent="‚úÖ Verified",h=w(),H=f("div"),A=L(z),O=w(),J=f("div"),J.textContent="‚úì",F=w(),V=f("div"),ie=L(ee),le=w(),se=f("div"),ae=f("div"),Q=f("div"),me=f("div"),me.textContent="üñºÔ∏è Complete",ye=w(),be=f("div"),Re=L(ve),Se=w(),dt=f("div"),dt.textContent="üë§",qt=w(),ut=f("div"),Bt=L(st),Dt=w(),qe=f("div"),Ve=f("div"),Ye=f("div"),rt=f("div"),rt.textContent="üìÖ Age",ft=w(),mt=f("div"),_s=L(pt),Hs=w(),Vt=f("div"),Vt.textContent="üìÜ",zs=w(),Yt=f("div"),Yt.textContent="days old",Fs=w(),Ge=f("div"),nt=f("div"),Gt=f("h3"),Gt.textContent="üìù Bio Analysis",Js=w(),We.c(),js=w(),lt=f("div"),Zt=f("h3"),Zt.textContent="üîó Handle Analysis",$s=w(),Ue.c(),qs=w(),ht=f("div"),Qt=f("h3"),Qt.textContent="üìã List Details",Vs=w(),Ke=f("div"),gt=f("div"),Xt=f("span"),Xt.textContent="Type:",Ys=w(),es=f("span"),ws=L(ts),Gs=w(),bt=f("div"),ss=f("span"),ss.textContent="Created:",Zs=w(),Nt=f("span"),He.c(),Qs=w(),yt=f("div"),rs=f("span"),rs.textContent="Growth rate:",Xs=w(),Kt=f("span"),Ss=L(ns),er=L(" members/day"),tr=w(),vt=f("div"),ls=f("span"),ls.textContent="Recent activity:",sr=w(),is=f("span"),ks=L(os),rr=w(),as=f("div"),_t=f("div"),Wt=f("button"),Wt.textContent="View on Bluesky",nr=w(),it=f("button"),Ls=L(cs),a(n,"class","text-xl font-bold text-slate-800"),a(m,"class","text-3xl font-bold text-blue-600"),a(v,"class","text-sm text-slate-500"),a(d,"class","text-right"),a(t,"class","flex items-center justify-between mb-6"),a(D,"class","text-blue-600 font-semibold text-sm"),a(I,"class","text-2xl font-bold text-blue-700"),a(B,"class","text-blue-400 text-3xl"),a(W,"class","flex items-center justify-between"),a($,"class","text-xs text-blue-600 mt-1"),a(M,"class","bg-blue-50 p-4 rounded-lg"),a(y,"class","text-green-600 font-semibold text-sm"),a(H,"class","text-2xl font-bold text-green-700"),a(J,"class","text-green-400 text-3xl"),a(oe,"class","flex items-center justify-between"),a(V,"class","text-xs text-green-600 mt-1"),a(de,"class","bg-green-50 p-4 rounded-lg"),a(me,"class","text-purple-600 font-semibold text-sm"),a(be,"class","text-2xl font-bold text-purple-700"),a(dt,"class","text-purple-400 text-3xl"),a(ae,"class","flex items-center justify-between"),a(ut,"class","text-xs text-purple-600 mt-1"),a(se,"class","bg-purple-50 p-4 rounded-lg"),a(rt,"class","text-yellow-600 font-semibold text-sm"),a(mt,"class","text-2xl font-bold text-yellow-700"),a(Vt,"class","text-yellow-400 text-3xl"),a(Ve,"class","flex items-center justify-between"),a(Yt,"class","text-xs text-yellow-600 mt-1"),a(qe,"class","bg-yellow-50 p-4 rounded-lg"),a(K,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),a(Gt,"class","text-sm font-semibold text-gray-700 mb-3"),a(nt,"class","bg-gray-50 p-4 rounded-lg"),a(Zt,"class","text-sm font-semibold text-gray-700 mb-3"),a(lt,"class","bg-gray-50 p-4 rounded-lg"),a(Qt,"class","text-sm font-semibold text-gray-700 mb-3"),a(Xt,"class","text-gray-600"),a(es,"class","font-medium"),a(gt,"class","flex justify-between text-sm"),a(ss,"class","text-gray-600"),a(Nt,"class","font-medium"),a(bt,"class","flex justify-between text-sm"),a(rs,"class","text-gray-600"),a(Kt,"class","font-medium"),a(yt,"class","flex justify-between text-sm"),a(ls,"class","text-gray-600"),a(is,"class","font-medium"),a(vt,"class","flex justify-between text-sm"),a(Ke,"class","space-y-2"),a(ht,"class","bg-gray-50 p-4 rounded-lg"),a(Ge,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),a(Wt,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),a(it,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),it.disabled=s[1],a(_t,"class","flex flex-wrap gap-2"),a(as,"class","mt-6 pt-4 border-t border-gray-200"),a(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),a(e,"id","list-statistics")},m(Y,ce){x(Y,e,ce),i(e,t),i(t,r),i(r,n),i(n,o),i(r,c),_e&&_e.m(r,null),i(t,u),i(t,d),i(d,m),i(m,g),i(d,b),i(d,v),i(e,_),we&&we.m(e,null),i(e,P),i(e,K),i(K,M),i(M,W),i(W,T),i(T,D),i(T,k),i(T,I),i(I,N),i(W,S),i(W,B),i(M,R),i(M,$),i($,q),i(K,Z),i(K,de),i(de,oe),i(oe,ne),i(ne,y),i(ne,h),i(ne,H),i(H,A),i(oe,O),i(oe,J),i(de,F),i(de,V),i(V,ie),i(K,le),i(K,se),i(se,ae),i(ae,Q),i(Q,me),i(Q,ye),i(Q,be),i(be,Re),i(ae,Se),i(ae,dt),i(se,qt),i(se,ut),i(ut,Bt),i(K,Dt),i(K,qe),i(qe,Ve),i(Ve,Ye),i(Ye,rt),i(Ye,ft),i(Ye,mt),i(mt,_s),i(Ve,Hs),i(Ve,Vt),i(qe,zs),i(qe,Yt),i(e,Fs),i(e,Ge),i(Ge,nt),i(nt,Gt),i(nt,Js),We.m(nt,null),i(Ge,js),i(Ge,lt),i(lt,Zt),i(lt,$s),Ue.m(lt,null),i(Ge,qs),i(Ge,ht),i(ht,Qt),i(ht,Vs),i(ht,Ke),i(Ke,gt),i(gt,Xt),i(gt,Ys),i(gt,es),i(es,ws),i(Ke,Gs),i(Ke,bt),i(bt,ss),i(bt,Zs),i(bt,Nt),He.m(Nt,null),i(Ke,Qs),i(Ke,yt),i(yt,rs),i(yt,Xs),i(yt,Kt),i(Kt,Ss),i(Kt,er),i(Ke,tr),i(Ke,vt),i(vt,ls),i(vt,sr),i(vt,is),i(is,ks),i(e,rr),i(e,as),i(as,_t),i(_t,Wt),i(_t,nr),i(_t,it),i(it,Ls),Cs||(lr=[te(Wt,"click",s[8]),te(it,"click",s[6])],Cs=!0)},p(Y,[ce]){var Ut,fr,mr;ce&4&&l!==(l=(((Ut=Y[2].selectedList)==null?void 0:Ut.name)||"List")+"")&&j(o,l),(fr=Y[2].selectedList)!=null&&fr.description?_e?_e.p(Y,ce):(_e=Kr(Y),_e.c(),_e.m(r,null)):_e&&(_e.d(1),_e=null),ce&1&&p!==(p=Y[0].totalMembers.toLocaleString()+"")&&j(g,p),Y[1]?we?we.p(Y,ce):(we=Wr(Y),we.c(),we.m(e,P)):we&&(we.d(1),we=null),ce&3&&E!==(E=Y[1]?"...":kt(Y[0].accountsWithBios,Y[0].totalMembers)+"%")&&j(N,E),ce&3&&U!==(U=Y[1]?"Calculating...":`${Y[0].accountsWithBios.toLocaleString()} have bios`)&&j(q,U),ce&3&&z!==(z=Y[1]?"...":kt(Y[0].verifiedAccounts,Y[0].totalMembers)+"%")&&j(A,z),ce&3&&ee!==(ee=Y[1]?"Calculating...":`${Y[0].verifiedAccounts.toLocaleString()} verified accounts`)&&j(ie,ee),ce&3&&ve!==(ve=Y[1]?"...":kt(Y[0].accountsWithAvatars,Y[0].totalMembers)+"%")&&j(Re,ve),ce&3&&st!==(st=Y[1]?"Calculating...":`${Y[0].accountsWithAvatars.toLocaleString()} have avatars`)&&j(Bt,st),ce&1&&pt!==(pt=Y[0].listAge+"")&&j(_s,pt),ds===(ds=ir(Y))&&We?We.p(Y,ce):(We.d(1),We=ds(Y),We&&(We.c(),We.m(nt,null))),us===(us=or(Y))&&Ue?Ue.p(Y,ce):(Ue.d(1),Ue=us(Y),Ue&&(Ue.c(),Ue.m(lt,null))),ce&4&&ts!==(ts=((mr=Y[2].selectedList)==null?void 0:mr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&j(ws,ts),fs===(fs=ar(Y))&&He?He.p(Y,ce):(He.d(1),He=fs(Y),He&&(He.c(),He.m(Nt,null))),ce&1&&ns!==(ns=Y[0].growthRate+"")&&j(Ss,ns),ce&3&&os!==(os=Y[1]?"Calculating...":`${Y[0].recentAdditions} in last batch`)&&j(ks,os),ce&2&&cs!==(cs=Y[1]?"Calculating...":"Refresh Stats")&&j(Ls,cs),ce&2&&(it.disabled=Y[1])},i:X,o:X,d(Y){Y&&C(e),_e&&_e.d(),we&&we.d(),We.d(),Ue.d(),He.d(),Cs=!1,xe(lr)}}}function kt(s,e){return e===0?0:Math.round(s/e*100)}function Ni(s,e,t){let r,n;Ee(s,pe,M=>t(2,r=M)),Ee(s,$e,M=>t(5,n=M));let l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,c=0,u=[],d=null,m=!1,p=null;function g(){t(0,l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,c=0),t(4,u=[])}function b(){var k,I;r.listMemberProfiles;const M=((k=r.selectedList)==null?void 0:k.listItemCount)||0,W=(I=r.selectedList)==null?void 0:I.createdAt,T=W?Math.floor((Date.now()-new Date(W).getTime())/(1e3*60*60*24)):0,D=T>0?Math.round(M/T):0;t(0,l={...l,totalMembers:M,listAge:T,growthRate:D})}async function v(){if(!n.session||!r.selectedList||o)return;const M=Date.now();d=M,t(1,o=!0),t(3,c=0),t(4,u=[]);try{const W=r.selectedList.listItemCount||0;if(W===0){_([]),m=!0;return}let T=null,D=0;const k=100;do{D++,t(3,c=Math.round(u.length/W*100));const I=await Fe.getListMembers(n.session,r.selectedList.uri,n.authType,k,T);if(d!==M)return;t(4,u=[...u,...I.profiles]),T=I.cursor,t(3,c=Math.round(u.length/W*100))}while(T&&u.length<W);if(d!==M)return;_(u),m=!0}catch(W){console.error("Error loading all members for statistics:",W),b(),m=!0}finally{d===M&&(t(1,o=!1),t(3,c=0))}}function _(M){var z;const W=M.length,T=M.filter(A=>A.verified).length,D=M.filter(A=>A.avatar).length,k=M.filter(A=>A.description&&A.description.trim().length>0).length,I=M.filter(A=>A.displayName&&A.displayName.trim().length>0).length,E=M.map(A=>A.description||"").filter(A=>A.trim().length>0),N=E.length>0?Math.round(E.reduce((A,O)=>A+O.length,0)/E.length):0,S=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],B=E.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(A=>A.length>2&&!S.includes(A)),R={};B.forEach(A=>{R[A]=(R[A]||0)+1});const $=Object.entries(R).sort(([,A],[,O])=>O-A).slice(0,5).map(([A,O])=>({word:A,count:O})),U=M.map(A=>A.handle||"").filter(A=>A.length>0),q=U.length>0?Math.round(U.reduce((A,O)=>A+O.length,0)/U.length):0,Z=U.map(A=>{const O=A.split(".");return O.length>1?O[O.length-1]:null}).filter(A=>A&&A.length>0),de={};Z.forEach(A=>{de[A]=(de[A]||0)+1});const oe=Object.entries(de).sort(([,A],[,O])=>O-A).slice(0,3).map(([A,O])=>({domain:A,count:O})),ne=(z=r.selectedList)==null?void 0:z.createdAt,y=ne?Math.floor((Date.now()-new Date(ne).getTime())/(1e3*60*60*24)):0,h=y>0?Math.round(W/y):0,H=Math.min(25,M.length);t(0,l={totalMembers:W,recentAdditions:H,verifiedAccounts:T,accountsWithAvatars:D,accountsWithBios:k,avgBioLength:N,mostCommonWords:$,listAge:y,accountsWithDisplayNames:I,avgHandleLength:q,topDomains:oe,growthRate:h})}function P(){o||(m=!1,v())}const K=()=>{var W,T,D;const M=(W=r.selectedList)==null?void 0:W.uri;if(M){const k=M.split("/"),I=k[k.length-1],E=`https://bsky.app/profile/${(T=n.session)==null?void 0:T.handle}/lists/${I}`;window.open(E,"_blank")}else window.open(`https://bsky.app/profile/${(D=n.session)==null?void 0:D.handle}/lists`,"_blank")};return s.$$.update=()=>{var M,W;s.$$.dirty&4&&r.selectedList&&b(),s.$$.dirty&7&&((M=r.selectedList)==null?void 0:M.listItemCount)!==l.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(W=r.selectedList)==null?void 0:W.listItemCount),console.log("Current stats.totalMembers:",l.totalMembers),b()),s.$$.dirty&132&&!r.selectedList&&p!==null&&(t(7,p=null),m=!1,g()),s.$$.dirty&134&&r.selectedList&&r.selectedList.uri!==p&&!o&&(t(7,p=r.selectedList.uri),m=!1,g(),v())},[l,o,r,c,u,n,P,p,K]}class Ki extends Ne{constructor(e){super(),De(this,e,Ni,Di,Ie,{})}}function Jr(s,e,t){const r=s.slice();return r[25]=e[t],r}function jr(s,e,t){const r=s.slice();return r[31]=e[t],r}function $r(s,e,t){const r=s.slice();return r[28]=e[t],r}function qr(s,e,t){const r=s.slice();return r[34]=e[t],r}function Vr(s){let e,t,r,n,l,o,c=s[4].size+"",u,d,m,p;function g(_,P){return _[5]?Ui:Wi}let b=g(s),v=b(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("button"),v.c(),l=w(),o=f("div"),u=L(c),d=L(" profiles selected"),n.disabled=s[5],a(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),a(r,"class","flex items-center gap-3"),a(o,"class","text-sm text-slate-600"),a(t,"class","flex items-center justify-between"),a(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm"),a(e,"id","action-bar")},m(_,P){x(_,e,P),i(e,t),i(t,r),i(r,n),v.m(n,null),i(t,l),i(t,o),i(o,u),i(o,d),m||(p=te(n,"click",s[12]),m=!0)},p(_,P){b===(b=g(_))&&v?v.p(_,P):(v.d(1),v=b(_),v&&(v.c(),v.m(n,null))),P[0]&32&&(n.disabled=_[5]),P[0]&16&&c!==(c=_[4].size+"")&&j(u,c)},d(_){_&&C(e),v.d(),m=!1,p()}}}function Wi(s){let e,t=s[4].size+"",r,n;return{c(){e=L("Add "),r=L(t),n=L(" to List")},m(l,o){x(l,e,o),x(l,r,o),x(l,n,o)},p(l,o){o[0]&16&&t!==(t=l[4].size+"")&&j(r,t)},d(l){l&&(C(e),C(r),C(n))}}}function Ui(s){let e,t;return{c(){e=f("span"),t=L(`
							Adding...`),a(e,"class","loading-spinner mr-2 svelte-srpbru")},m(r,n){x(r,e,n),x(r,t,n)},p:X,d(r){r&&(C(e),C(t))}}}function Yr(s){let e,t,r,n=s[6].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=L("‚úÖ Successfully added "),l=L(n),o=L(" profiles to your list!"),a(t,"class","text-green-700 font-medium"),a(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(c,u){x(c,e,u),i(e,t),i(t,r),i(t,l),i(t,o)},p(c,u){u[0]&64&&n!==(n=c[6].success.length+"")&&j(l,n)},d(c){c&&C(e)}}}function Gr(s){let e,t,r,n=s[6].errors.length+"",l,o,c,u,d=he(s[6].errors),m=[];for(let p=0;p<d.length;p+=1)m[p]=Zr(qr(s,d,p));return{c(){e=f("div"),t=f("p"),r=L("‚ùå Failed to add "),l=L(n),o=L(" profiles:"),c=w(),u=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();a(t,"class","text-red-700 font-medium mb-2"),a(u,"class","text-red-600 text-sm space-y-1"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,g){x(p,e,g),i(e,t),i(t,r),i(t,l),i(t,o),i(e,c),i(e,u);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(u,null)},p(p,g){if(g[0]&64&&n!==(n=p[6].errors.length+"")&&j(l,n),g[0]&64){d=he(p[6].errors);let b;for(b=0;b<d.length;b+=1){const v=qr(p,d,b);m[b]?m[b].p(v,g):(m[b]=Zr(v),m[b].c(),m[b].m(u,null))}for(;b<m.length;b+=1)m[b].d(1);m.length=d.length}},d(p){p&&C(e),et(m,p)}}}function Zr(s){let e,t,r=s[34].error+"",n;return{c(){e=f("li"),t=L("‚Ä¢ "),n=L(r)},m(l,o){x(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&64&&r!==(r=l[34].error+"")&&j(n,r)},d(l){l&&C(e)}}}function Hi(s){let e,t,r;function n(u,d){return u[8]?qi:u[1].listMemberProfiles.length>0?$i:ji}let l=n(s),o=l(s),c=s[9]>1&&sn(s);return{c(){e=f("div"),t=f("div"),o.c(),r=w(),c&&c.c(),a(t,"class","space-y-4 flex-1 overflow-y-auto"),a(e,"class","flex flex-col flex-1")},m(u,d){x(u,e,d),i(e,t),o.m(t,null),i(e,r),c&&c.m(e,null)},p(u,d){l===(l=n(u))&&o?o.p(u,d):(o.d(1),o=l(u),o&&(o.c(),o.m(t,null))),u[9]>1?c?c.p(u,d):(c=sn(u),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(u){u&&C(e),o.d(),c&&c.d()}}}function zi(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">üìù</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Members Yet</h3> <p class="text-slate-600">Your list is empty. Use the search to find and add profiles!</p></div>',a(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function Fi(s){let e,t,r,n,l,o,c,u;return{c(){e=f("div"),t=f("div"),r=f("p"),n=L(s[3]),l=w(),o=f("button"),o.textContent="Try again",a(r,"class","text-red-700 mb-4"),a(o,"class","text-red-600 hover:text-red-800 underline"),a(t,"class","text-center"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(d,m){x(d,e,m),i(e,t),i(t,r),i(r,n),i(t,l),i(t,o),c||(u=te(o,"click",s[10]),c=!0)},p(d,m){m[0]&8&&j(n,d[3])},d(d){d&&C(e),c=!1,u()}}}function Ji(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-srpbru"></div> <p class="text-slate-600">Loading list members...</p></div>',a(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){x(t,e,r)},p:X,d(t){t&&C(e)}}}function ji(s){let e,t,r=s[3]&&Qr(s),n=he(s[1].listMembers.slice(0,100)),l=[];for(let o=0;o<n.length;o+=1)l[o]=Xr(jr(s,n,o));return{c(){r&&r.c(),e=w();for(let o=0;o<l.length;o+=1)l[o].c();t=tt()},m(o,c){r&&r.m(o,c),x(o,e,c);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(o,c);x(o,t,c)},p(o,c){if(o[3]?r?r.p(o,c):(r=Qr(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),c[0]&2){n=he(o[1].listMembers.slice(0,100));let u;for(u=0;u<n.length;u+=1){const d=jr(o,n,u);l[u]?l[u].p(d,c):(l[u]=Xr(d),l[u].c(),l[u].m(t.parentNode,t))}for(;u<l.length;u+=1)l[u].d(1);l.length=n.length}},d(o){o&&(C(e),C(t)),r&&r.d(o),et(l,o)}}}function $i(s){let e,t=he(s[1].listMemberProfiles),r=[];for(let n=0;n<t.length;n+=1)r[n]=tn($r(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=tt()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);x(n,e,l)},p(n,l){if(l[0]&2){t=he(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const c=$r(n,t,o);r[o]?r[o].p(c,l):(r[o]=tn(c),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&C(e),et(r,n)}}}function qi(s){let e,t,r,n,l,o,c;return{c(){e=f("div"),t=f("div"),r=w(),n=f("p"),l=L("Loading page "),o=L(s[7]),c=L("..."),a(t,"class","loading-spinner mx-auto mb-4 svelte-srpbru"),a(n,"class","text-slate-600"),a(e,"class","text-center py-8")},m(u,d){x(u,e,d),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,c)},p(u,d){d[0]&128&&j(o,u[7])},d(u){u&&C(e)}}}function Qr(s){let e,t,r,n,l,o,c,u,d,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("p"),n.textContent="‚ö†Ô∏è Profile loading issue",l=w(),o=f("p"),c=L(s[3]),u=w(),d=f("button"),d.textContent="Retry",a(n,"class","text-yellow-800 font-medium"),a(o,"class","text-yellow-700 text-sm mt-1"),a(d,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),a(t,"class","flex items-center justify-between"),a(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(g,b){x(g,e,b),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(o,c),i(t,u),i(t,d),m||(p=te(d,"click",s[19]),m=!0)},p(g,b){b[0]&8&&j(c,g[3])},d(g){g&&C(e),m=!1,p()}}}function Xr(s){let e,t,r,n,l,o,c=s[31]+"",u,d,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=w(),l=f("div"),o=f("div"),u=L(c),d=w(),m=f("div"),m.textContent="Member of list",p=w(),a(r,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),a(o,"class","text-sm text-gray-600 font-mono text-xs break-all"),a(m,"class","text-xs text-gray-500"),a(l,"class","flex-1"),a(t,"class","flex items-center space-x-3"),a(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(g,b){x(g,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(o,u),i(l,d),i(l,m),i(e,p)},p(g,b){b[0]&2&&c!==(c=g[31]+"")&&j(u,c)},d(g){g&&C(e)}}}function en(s){let e,t=s[28].description+"",r;return{c(){e=f("p"),r=L(t),a(e,"class","text-xs text-gray-600 line-clamp-2 svelte-srpbru")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l[0]&2&&t!==(t=n[28].description+"")&&j(r,t)},d(n){n&&C(e)}}}function tn(s){let e,t,r,n,l,o,c,u,d,m,p,g=(s[28].displayName||s[28].handle)+"",b,v,_,P,K=s[28].handle+"",M,W,T,D,k,I,E=s[28].description&&en(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),u=w(),d=f("div"),m=f("div"),p=f("h4"),b=L(g),v=w(),_=f("span"),P=L("@"),M=L(K),W=w(),E&&E.c(),T=w(),D=f("div"),D.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',k=w(),It(n.src,l=s[28].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[28].displayName||s[28].handle)}&background=6366f1&color=fff&size=64`)||a(n,"src",l),a(n,"alt",o=s[28].displayName||s[28].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[28].displayName||s[28].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(p,"class","text-sm font-semibold text-gray-900 truncate"),a(_,"class","text-xs text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(d,"class","flex-1 min-w-0"),a(D,"class","flex-shrink-0"),a(t,"class","flex items-center space-x-3"),a(e,"href",I="https://bsky.app/profile/"+s[28].handle),a(e,"target","_blank"),a(e,"rel","noopener noreferrer"),a(e,"class","block bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200 cursor-pointer")},m(N,S){x(N,e,S),i(e,t),i(t,r),i(r,n),i(t,u),i(t,d),i(d,m),i(m,p),i(p,b),i(m,v),i(m,_),i(_,P),i(_,M),i(d,W),E&&E.m(d,null),i(t,T),i(t,D),i(e,k)},p(N,S){S[0]&2&&!It(n.src,l=N[28].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(N[28].displayName||N[28].handle)}&background=6366f1&color=fff&size=64`)&&a(n,"src",l),S[0]&2&&o!==(o=N[28].displayName||N[28].handle)&&a(n,"alt",o),S[0]&2&&c!==(c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(N[28].displayName||N[28].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",c),S[0]&2&&g!==(g=(N[28].displayName||N[28].handle)+"")&&j(b,g),S[0]&2&&K!==(K=N[28].handle+"")&&j(M,K),N[28].description?E?E.p(N,S):(E=en(N),E.c(),E.m(d,null)):E&&(E.d(1),E=null),S[0]&2&&I!==(I="https://bsky.app/profile/"+N[28].handle)&&a(e,"href",I)},d(N){N&&C(e),E&&E.d()}}}function sn(s){let e,t,r,n,l,o,c,u,d,m,p,g,b,v,_,P,K,M,W,T,D,k,I,E=s[8]&&s[7]>1&&rn(),N=he(Array.from({length:Math.min(5,s[9])},s[20])),S=[];for(let R=0;R<N.length;R+=1)S[R]=nn(Jr(s,N,R));let B=s[8]&&s[7]<s[9]&&ln();return{c(){e=f("div"),t=f("div"),r=f("div"),n=L("Page "),l=L(s[7]),o=L(" of "),c=L(s[9]),u=L(" ("),d=L(s[0]),m=L(" total members)"),p=w(),g=f("div"),b=f("button"),E&&E.c(),v=L(`
											Previous`),P=w(),K=f("div");for(let R=0;R<S.length;R+=1)S[R].c();M=w(),W=f("button"),T=L(`Next
											`),B&&B.c(),a(r,"class","text-sm text-gray-600"),b.disabled=_=s[7]===1||s[8],a(b,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),a(K,"class","flex items-center space-x-1"),W.disabled=D=s[7]===s[9]||s[8],a(W,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),a(g,"class","flex items-center space-x-2"),a(t,"class","flex items-center justify-between"),a(e,"class","mt-6 pt-4 border-t border-gray-200")},m(R,$){x(R,e,$),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(r,c),i(r,u),i(r,d),i(r,m),i(t,p),i(t,g),i(g,b),E&&E.m(b,null),i(b,v),i(g,P),i(g,K);for(let U=0;U<S.length;U+=1)S[U]&&S[U].m(K,null);i(g,M),i(g,W),i(W,T),B&&B.m(W,null),k||(I=[te(b,"click",s[15]),te(W,"click",s[14])],k=!0)},p(R,$){if($[0]&128&&j(l,R[7]),$[0]&512&&j(c,R[9]),$[0]&1&&j(d,R[0]),R[8]&&R[7]>1?E||(E=rn(),E.c(),E.m(b,v)):E&&(E.d(1),E=null),$[0]&384&&_!==(_=R[7]===1||R[8])&&(b.disabled=_),$[0]&9088){N=he(Array.from({length:Math.min(5,R[9])},R[20]));let U;for(U=0;U<N.length;U+=1){const q=Jr(R,N,U);S[U]?S[U].p(q,$):(S[U]=nn(q),S[U].c(),S[U].m(K,null))}for(;U<S.length;U+=1)S[U].d(1);S.length=N.length}R[8]&&R[7]<R[9]?B||(B=ln(),B.c(),B.m(W,null)):B&&(B.d(1),B=null),$[0]&896&&D!==(D=R[7]===R[9]||R[8])&&(W.disabled=D)},d(R){R&&C(e),E&&E.d(),et(S,R),B&&B.d(),k=!1,xe(I)}}}function rn(s){let e;return{c(){e=f("span"),a(e,"class","loading-spinner mr-1 svelte-srpbru")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function nn(s){let e,t=s[25]+"",r,n,l,o,c;function u(){return s[21](s[25])}return{c(){e=f("button"),r=L(t),n=w(),e.disabled=s[8],a(e,"class",l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[7]===s[25]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(d,m){x(d,e,m),i(e,r),i(e,n),o||(c=te(e,"click",u),o=!0)},p(d,m){s=d,m[0]&640&&t!==(t=s[25]+"")&&j(r,t),m[0]&256&&(e.disabled=s[8]),m[0]&640&&l!==(l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[7]===s[25]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&a(e,"class",l)},d(d){d&&C(e),o=!1,c()}}}function ln(s){let e;return{c(){e=f("span"),a(e,"class","loading-spinner ml-1 svelte-srpbru")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function Vi(s){let e,t,r,n,l,o,c,u,d,m,p,g,b,v=(s[8]?"...":s[1].listMemberProfiles.length)+"",_,P,K,M,W,T,D,k,I,E,N=s[1].listMemberProfiles.length+"",S,B,R=s[1].listMembers.length+"",$,U,q,Z,de,oe;t=new Ki({});let ne=s[4].size>0&&Vr(s),y=s[6].success.length>0&&Yr(s),h=s[6].errors.length>0&&Gr(s);function H(O,J){return O[2]?Ji:O[3]?Fi:O[1].listMembers.length===0?zi:Hi}let z=H(s),A=z(s);return de=new Ei({}),{c(){e=f("div"),Be(t.$$.fragment),r=w(),ne&&ne.c(),n=w(),y&&y.c(),l=w(),h&&h.c(),o=w(),c=f("div"),u=f("div"),d=f("div"),m=f("h3"),m.textContent="Latest list members",p=w(),g=f("p"),b=L("Showing "),_=L(v),P=L(" of "),K=L(s[0]),M=L(`
					total members`),W=w(),T=f("div"),D=f("div"),k=L("Debug: isLoadingMembers="),I=L(s[2]),E=L(", profiles="),S=L(N),B=L(", members="),$=L(R),U=w(),A.c(),q=w(),Z=f("div"),Be(de.$$.fragment),a(m,"class","text-lg font-semibold text-slate-800 mb-2"),a(g,"class","text-sm text-slate-600"),a(d,"class","p-6 border-b border-gray-200"),a(D,"class","text-xs text-gray-500 mb-2"),a(T,"class","p-6 flex flex-col flex-1"),a(u,"id","list-members-container"),a(u,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),a(c,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),a(c,"id","list-manager-layout"),a(e,"class","space-y-6"),a(e,"id","list-manager")},m(O,J){x(O,e,J),Pe(t,e,null),i(e,r),ne&&ne.m(e,null),i(e,n),y&&y.m(e,null),i(e,l),h&&h.m(e,null),i(e,o),i(e,c),i(c,u),i(u,d),i(d,m),i(d,p),i(d,g),i(g,b),i(g,_),i(g,P),i(g,K),i(g,M),i(u,W),i(u,T),i(T,D),i(D,k),i(D,I),i(D,E),i(D,S),i(D,B),i(D,$),i(T,U),A.m(T,null),i(c,q),i(c,Z),Pe(de,Z,null),oe=!0},p(O,J){O[4].size>0?ne?ne.p(O,J):(ne=Vr(O),ne.c(),ne.m(e,n)):ne&&(ne.d(1),ne=null),O[6].success.length>0?y?y.p(O,J):(y=Yr(O),y.c(),y.m(e,l)):y&&(y.d(1),y=null),O[6].errors.length>0?h?h.p(O,J):(h=Gr(O),h.c(),h.m(e,o)):h&&(h.d(1),h=null),(!oe||J[0]&258)&&v!==(v=(O[8]?"...":O[1].listMemberProfiles.length)+"")&&j(_,v),(!oe||J[0]&1)&&j(K,O[0]),(!oe||J[0]&4)&&j(I,O[2]),(!oe||J[0]&2)&&N!==(N=O[1].listMemberProfiles.length+"")&&j(S,N),(!oe||J[0]&2)&&R!==(R=O[1].listMembers.length+"")&&j($,R),z===(z=H(O))&&A?A.p(O,J):(A.d(1),A=z(O),A&&(A.c(),A.m(T,null)))},i(O){oe||(re(t.$$.fragment,O),re(de.$$.fragment,O),oe=!0)},o(O){ue(t.$$.fragment,O),ue(de.$$.fragment,O),oe=!1},d(O){O&&C(e),Te(t),ne&&ne.d(),y&&y.d(),h&&h.d(),A.d(),Te(de)}}}const Ts=25;function Yi(s,e,t){let r,n;Ee(s,pe,S=>t(1,r=S)),Ee(s,$e,S=>t(18,n=S));let l=!1,o="",c=new Set,u=!1,d={success:[],errors:[]},m=1,p=!1,g=!1,b=0,v=new Map,_=0,P=null;async function K(){if(!(!r.selectedList||!n.session||g)){t(16,g=!0),t(2,l=!0),t(3,o=""),t(7,m=1),v.clear();try{const S=await Fe.getListInfo(n.session,r.selectedList.uri,n.authType),B={...r.selectedList,name:S.name,description:S.description,createdAt:S.createdAt,listItemCount:S.listItemCount};pe.setSelectedList(B),t(0,_=S.listItemCount||0),t(9,b=Math.ceil(_/Ts)),console.log("Total pages:",b,"Total count:",_),await M(1),pe.setListLoading(!1)}catch(S){console.error("Error loading list members:",S),t(3,o=S.message||"Failed to load list members"),pe.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,l=!1),t(16,g=!1),console.log("Final state - isLoadingMembers:",l,"isCurrentlyLoadingMembers:",g)}}}async function M(S){if(!(!n.session||!r.selectedList)){t(8,p=!0),t(7,m=S);try{let B=v.get(S-1);const R=await Fe.getListMembers(n.session,r.selectedList.uri,n.authType,Ts,B);console.log(`Fetched ${R.members.length} members for page ${S}`),console.log("Members received:",R.members),R.cursor&&v.set(S,R.cursor),R.members.length===0?(console.warn("No members returned from API for page",S),t(3,o="No member data received from API")):t(3,o="");const $=R.profiles||[];console.log(`Using ${$.length} profiles from API response for page ${S}`),console.log("Setting profiles in store:",$.length),pe.setListMembers(R.members),pe.setListMemberProfiles($),console.log("Profiles set in store, current count:",r.listMemberProfiles.length)}catch(B){console.error("Error loading members page:",B),t(3,o=B.message||"Failed to load page"),pe.setListMemberProfiles([])}finally{t(8,p=!1)}}}async function W(){if(c.size===0)return;t(5,u=!0),t(6,d={success:[],errors:[]});const S=Array.from(c);for(const B of S)try{await Fe.addToList(n.session,B,r.selectedList.uri,n.authType),d.success.push(B),await pe.fetchAndAddProfile(n.session,B,n.authType)}catch(R){d.errors.push({did:B,error:R.message})}c.clear(),t(4,c),t(5,u=!1)}async function T(S){S>=1&&S<=b&&await M(S)}async function D(){m<b&&await M(m+1)}async function k(){m>1&&await M(m-1)}const I=()=>M(m),E=(S,B)=>{let R;return b<=5||m<=3?R=B+1:m>=b-2?R=b-4+B:R=m-2+B,R},N=S=>T(S);return s.$$.update=()=>{var S,B,R;s.$$.dirty[0]&2&&r.refreshTrigger&&K(),s.$$.dirty[0]&2&&console.log("Profile count changed:",r.listMemberProfiles.length),s.$$.dirty[0]&3&&((S=r.selectedList)==null?void 0:S.listItemCount)!==_&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(B=r.selectedList)==null?void 0:B.listItemCount),console.log("Current totalMemberCount:",_),t(0,_=((R=r.selectedList)==null?void 0:R.listItemCount)||0),t(9,b=Math.ceil(_/Ts))),s.$$.dirty[0]&458754&&r.selectedList&&n.session&&!g&&P!==r.selectedList.uri&&(console.log("List changed, loading members for:",r.selectedList.name),t(17,P=r.selectedList.uri),K())},[_,r,l,o,c,u,d,m,p,b,K,M,W,T,D,k,g,P,n,I,E,N]}class Gi extends Ne{constructor(e){super(),De(this,e,Yi,Vi,Ie,{},null,[-1,-1])}}function on(s){let e,t,r,n,l,o,c,u;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("h3"),l.textContent="Getting Ready",o=w(),c=f("p"),u=L(s[1]),a(r,"class","loading-spinner mx-auto mb-4 svelte-847qwb"),a(l,"class","text-lg font-semibold text-slate-800 mb-2"),a(c,"class","text-slate-600"),a(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),a(t,"id","loading-overlay-content"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"),a(e,"id","loading-overlay")},m(d,m){x(d,e,m),i(e,t),i(t,r),i(t,n),i(t,l),i(t,o),i(t,c),i(c,u)},p(d,m){m&2&&j(u,d[1])},d(d){d&&C(e)}}}function Zi(s){let e,t=s[0]&&on(s);return{c(){t&&t.c(),e=tt()},m(r,n){t&&t.m(r,n),x(r,e,n)},p(r,[n]){r[0]?t?t.p(r,n):(t=on(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:X,o:X,d(r){r&&C(e),t&&t.d(r)}}}function Qi(s,e,t){let{isLoading:r=!1}=e,{message:n="Loading list data..."}=e;return s.$$set=l=>{"isLoading"in l&&t(0,r=l.isLoading),"message"in l&&t(1,n=l.message)},[r,n]}class Xi extends Ne{constructor(e){super(),De(this,e,Qi,Zi,Ie,{isLoading:0,message:1})}}function an(s,e,t){const r=s.slice();return r[8]=e[t],r}function cn(s,e){let t,r,n;return{key:s,first:null,c(){t=f("div"),r=br("svg"),n=br("path"),a(n,"d","m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"),a(n,"fill","#1185fe"),a(n,"opacity","0.4"),a(r,"width","100%"),a(r,"height","100%"),a(r,"viewBox","0 0 600 530"),a(r,"xmlns","http://www.w3.org/2000/svg"),a(r,"class","butterfly-svg svelte-1l7ozht"),a(t,"class","butterfly svelte-1l7ozht"),ge(t,"left",e[8].x+"%"),ge(t,"top",e[8].y+"%"),ge(t,"width",e[8].size+"px"),ge(t,"height",e[8].size+"px"),ge(t,"animation-duration",e[8].speed+"s"),ge(t,"animation-delay",e[8].delay+"s"),ge(t,"transform","rotate("+e[8].rotation+"deg)"),ge(t,"opacity",.6+Math.random()*.4),this.first=t},m(l,o){x(l,t,o),i(t,r),i(r,n)},p(l,o){e=l,o&1&&ge(t,"left",e[8].x+"%"),o&1&&ge(t,"top",e[8].y+"%"),o&1&&ge(t,"width",e[8].size+"px"),o&1&&ge(t,"height",e[8].size+"px"),o&1&&ge(t,"animation-duration",e[8].speed+"s"),o&1&&ge(t,"animation-delay",e[8].delay+"s"),o&1&&ge(t,"transform","rotate("+e[8].rotation+"deg)")},d(l){l&&C(t)}}}function dn(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="message-content svelte-1l7ozht" id="empty-list-content"><svg width="60" height="53" viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg" class="svelte-1l7ozht"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe" opacity="0.3"></path></svg> <p class="svelte-1l7ozht">Add members to your list to see butterflies flutter by!</p></div>',a(e,"class","empty-list-message svelte-1l7ozht"),a(e,"id","empty-list-message")},m(t,r){x(t,e,r)},d(t){t&&C(e)}}}function eo(s){let e,t=[],r=new Map,n,l=he(s[0]);const o=u=>u[8].id;for(let u=0;u<l.length;u+=1){let d=an(s,l,u),m=o(d);r.set(m,t[u]=cn(m,d))}let c=s[2].selectedList&&s[1]===0&&dn();return{c(){e=f("div");for(let u=0;u<t.length;u+=1)t[u].c();n=w(),c&&c.c(),a(e,"class","butterfly-background svelte-1l7ozht"),a(e,"id","butterfly-background")},m(u,d){x(u,e,d);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i(e,n),c&&c.m(e,null),s[5](e)},p(u,[d]){d&1&&(l=he(u[0]),t=$n(t,d,o,1,u,l,r,e,jn,cn,n,an)),u[2].selectedList&&u[1]===0?c||(c=dn(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:X,o:X,d(u){u&&C(e);for(let d=0;d<t.length;d+=1)t[d].d();c&&c.d(),s[5](null)}}}function to(s,e,t){let r,n,l;Ee(s,pe,p=>t(2,l=p));let o,c=[];const u={baseCount:12,maxCount:50,minSize:20,maxSize:45,minSpeed:15,maxSpeed:45,minDelay:0,maxDelay:15};Ns(()=>{d()});function d(){t(0,c=[]);for(let p=0;p<n;p++)c.push({id:p,x:Math.random()*100,y:Math.random()*100,size:Math.random()*(u.maxSize-u.minSize)+u.minSize,speed:Math.random()*(u.maxSpeed-u.minSpeed)+u.minSpeed,delay:Math.random()*(u.maxDelay-u.minDelay)+u.minDelay,rotation:Math.random()*60-30,rotationSpeed:(Math.random()-.5)*2,floatingDirection:Math.random()*360,floatingSpeed:Math.random()*.5+.1})}function m(p){Is[p?"unshift":"push"](()=>{o=p,t(3,o)})}return s.$$.update=()=>{var p;s.$$.dirty&4&&t(1,r=((p=l.selectedList)==null?void 0:p.listItemCount)||0),s.$$.dirty&6&&t(4,n=l.selectedList?Math.min(u.maxCount,Math.max(u.baseCount,Math.floor(r/2))):u.baseCount),s.$$.dirty&17&&n!==c.length&&d()},[c,r,l,o,n,m]}class so extends Ne{constructor(e){super(),De(this,e,to,eo,Ie,{})}}function un(s){let e,t;return e=new Gl({}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function ro(s){let e,t;return e=new Gi({}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function no(s){let e,t;return e=new ni({}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function lo(s){let e,t;return e=new Xl({}),{c(){Be(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(re(e.$$.fragment,r),t=!0)},o(r){ue(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function io(s){let e,t,r,n,l,o,c,u,d,m;t=new so({});let p=s[1]!=="auth"&&un();const g=[lo,no,ro],b=[];function v(_,P){return _[1]==="auth"?0:_[1]==="list-selector"?1:_[1]==="manager"?2:-1}return~(o=v(s))&&(c=b[o]=g[o](s)),d=new Xi({props:{isLoading:s[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=f("main"),Be(t.$$.fragment),r=w(),p&&p.c(),n=w(),l=f("div"),c&&c.c(),u=w(),Be(d.$$.fragment),a(l,"class","max-w-6xl mx-auto p-6"),a(l,"id","app-content"),a(e,"class","min-h-screen bg-gray-50"),a(e,"id","app-main")},m(_,P){x(_,e,P),Pe(t,e,null),i(e,r),p&&p.m(e,null),i(e,n),i(e,l),~o&&b[o].m(l,null),i(e,u),Pe(d,e,null),m=!0},p(_,[P]){_[1]!=="auth"?p?P&2&&re(p,1):(p=un(),p.c(),re(p,1),p.m(e,n)):p&&(Rt(),ue(p,1,1,()=>{p=null}),Ot());let K=o;o=v(_),o!==K&&(c&&(Rt(),ue(b[K],1,1,()=>{b[K]=null}),Ot()),~o?(c=b[o],c||(c=b[o]=g[o](_),c.c()),re(c,1),c.m(l,null)):c=null);const M={};P&1&&(M.isLoading=_[0].isLoadingList),d.$set(M)},i(_){m||(re(t.$$.fragment,_),re(p),re(c),re(d.$$.fragment,_),m=!0)},o(_){ue(t.$$.fragment,_),ue(p),ue(c),ue(d.$$.fragment,_),m=!1},d(_){_&&C(e),Te(t),p&&p.d(),~o&&b[o].d(),Te(d)}}}function oo(s,e,t){let r,n;Ee(s,pe,o=>t(0,r=o)),Ee(s,$e,o=>t(2,n=o));let l="auth";return Ns(()=>{const{session:o,authType:c}=$e.initializeSession();o&&(console.log("Session restored:",{authType:c,handle:o.handle||o.did}),t(1,l="list-selector"))}),s.$$.update=()=>{s.$$.dirty&5&&(n.session?r.selectedList?t(1,l="manager"):t(1,l="list-selector"):t(1,l="auth"))},[r,l,n]}class ao extends Ne{constructor(e){super(),De(this,e,oo,io,Ie,{})}}new ao({target:document.getElementById("app")})});export default co();
