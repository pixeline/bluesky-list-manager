var Hn=Object.defineProperty;var _r=s=>{throw TypeError(s)};var Un=(s,e,t)=>e in s?Hn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var zn=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Ke=(s,e,t)=>Un(s,typeof e!="symbol"?e+"":e,t),wr=(s,e,t)=>e.has(s)||_r("Cannot "+t);var X=(s,e,t)=>(wr(s,e,"read from private field"),t?t.call(s):e.get(s)),Xe=(s,e,t)=>e.has(s)?_r("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Qe=(s,e,t,r)=>(wr(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);var Ko=zn((Ho,qt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function Q(){}function wn(s){return s()}function Sr(){return Object.create(null)}function Ae(s){s.forEach(wn)}function Sn(s){return typeof s=="function"}function Pe(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let ms;function tt(s,e){return s===e?!0:(ms||(ms=document.createElement("a")),ms.href=e,s===ms.href)}function Fn(s){return Object.keys(s).length===0}function jn(s,...e){if(s==null){for(const r of e)r(void 0);return Q}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Re(s,e,t){s.$$.on_destroy.push(jn(e,t))}function i(s,e){s.appendChild(e)}function x(s,e,t){s.insertBefore(e,t||null)}function M(s){s.parentNode&&s.parentNode.removeChild(s)}function Ve(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function m(s){return document.createElement(s)}function _s(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function S(s){return document.createTextNode(s)}function w(){return S(" ")}function st(){return S("")}function le(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function kn(s){return function(e){return e.preventDefault(),s.call(this,e)}}function c(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Jn(s){let e;return{p(...t){e=t,e.forEach(r=>s.push(r))},r(){e.forEach(t=>s.splice(s.indexOf(t),1))}}}function qn(s){return Array.from(s.childNodes)}function V(s,e){e=""+e,s.data!==e&&(s.data=e)}function Ce(s,e){s.value=e??""}function ce(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function kr(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}s.selectedIndex=-1}function Vn(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}let jt;function Ft(s){jt=s}function zs(){if(!jt)throw new Error("Function called outside component initialization");return jt}function Cs(s){zs().$$.on_mount.push(s)}function Ln(s){zs().$$.on_destroy.push(s)}function Yn(){const s=zs();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const l=Vn(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,l)}),!l.defaultPrevented}return!0}}const Ct=[],ws=[];let Tt=[];const Lr=[],Zn=Promise.resolve();let Ks=!1;function Gn(){Ks||(Ks=!0,Zn.then(Cn))}function Ws(s){Tt.push(s)}const Rs=new Set;let St=0;function Cn(){if(St!==0)return;const s=jt;do{try{for(;St<Ct.length;){const e=Ct[St];St++,Ft(e),$n(e.$$)}}catch(e){throw Ct.length=0,St=0,e}for(Ft(null),Ct.length=0,St=0;ws.length;)ws.pop()();for(let e=0;e<Tt.length;e+=1){const t=Tt[e];Rs.has(t)||(Rs.add(t),t())}Tt.length=0}while(Ct.length);for(;Lr.length;)Lr.pop()();Ks=!1,Rs.clear(),Ft(s)}function $n(s){if(s.fragment!==null){s.update(),Ae(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Ws)}}function Xn(s){const e=[],t=[];Tt.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Tt=e}const bs=new Set;let ut;function Ot(){ut={r:0,c:[],p:ut}}function Dt(){ut.r||Ae(ut.c),ut=ut.p}function ie(s,e){s&&s.i&&(bs.delete(s),s.i(e))}function fe(s,e,t,r){if(s&&s.o){if(bs.has(s))return;bs.add(s),ut.c.push(()=>{bs.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}function pe(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Qn(s,e){s.d(1),e.delete(s.key)}function el(s,e,t,r,n,l,o,u,d,a,f,h){let b=s.length,g=l.length,_=b;const v={};for(;_--;)v[s[_].key]=_;const T=[],H=new Map,A=new Map,W=[];for(_=g;_--;){const I=h(n,l,_),L=t(I);let U=o.get(L);U?W.push(()=>U.p(I,e)):(U=a(L,I),U.c()),H.set(L,T[_]=U),L in v&&A.set(L,Math.abs(_-v[L]))}const O=new Set,E=new Set;function k(I){ie(I,1),I.m(u,f),o.set(I.key,I),f=I.first,g--}for(;b&&g;){const I=T[g-1],L=s[b-1],U=I.key,P=L.key;I===L?(f=I.first,b--,g--):H.has(P)?!o.has(U)||O.has(U)?k(I):E.has(P)?b--:A.get(U)>A.get(P)?(E.add(U),k(I)):(O.add(P),b--):(d(L,o),b--)}for(;b--;){const I=s[b];H.has(I.key)||d(I,o)}for(;g;)k(T[g-1]);return Ae(W),T}function Oe(s){s&&s.c()}function xe(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Ws(()=>{const l=s.$$.on_mount.map(wn).filter(Sn);s.$$.on_destroy?s.$$.on_destroy.push(...l):Ae(l),s.$$.on_mount=[]}),n.forEach(Ws)}function Ee(s,e){const t=s.$$;t.fragment!==null&&(Xn(t.after_update),Ae(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function tl(s,e){s.$$.dirty[0]===-1&&(Ct.push(s),Gn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function De(s,e,t,r,n,l,o=null,u=[-1]){const d=jt;Ft(s);const a=s.$$={fragment:null,ctx:[],props:l,update:Q,not_equal:n,bound:Sr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Sr(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};o&&o(a.root);let f=!1;if(a.ctx=t?t(s,e.props||{},(h,b,...g)=>{const _=g.length?g[0]:b;return a.ctx&&n(a.ctx[h],a.ctx[h]=_)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](_),f&&tl(s,h)),b}):[],a.update(),f=!0,Ae(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const h=qn(e.target);a.fragment&&a.fragment.l(h),h.forEach(M)}else a.fragment&&a.fragment.c();e.intro&&ie(s.$$.fragment),xe(s,e.target,e.anchor),Cn()}Ft(d)}class Ne{constructor(){Ke(this,"$$");Ke(this,"$$set")}$destroy(){Ee(this,1),this.$destroy=Q}$on(e,t){if(!Sn(t))return Q;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Fn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const sl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sl);const kt=[];function Fs(s,e=Q){let t;const r=new Set;function n(u){if(Pe(s,u)&&(s=u,t)){const d=!kt.length;for(const a of r)a[1](),kt.push(a,s);if(d){for(let a=0;a<kt.length;a+=2)kt[a][0](kt[a+1]);kt.length=0}}}function l(u){n(u(s))}function o(u,d=Q){const a=[u,d];return r.add(a),r.size===1&&(t=e(n,l)||Q),u(s),()=>{r.delete(a),r.size===0&&t&&(t(),t=null)}}return{set:n,update:l,subscribe:o}}const Pt=new TextEncoder,Ss=new TextDecoder;function rl(...s){const e=s.reduce((n,{length:l})=>n+l,0),t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function nl(s){if(Uint8Array.prototype.toBase64)return s.toBase64();const e=32768,t=[];for(let r=0;r<s.length;r+=e)t.push(String.fromCharCode.apply(null,s.subarray(r,r+e)));return btoa(t.join(""))}function ll(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(s);const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Mn(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof s=="string"?s:Ss.decode(s),{alphabet:"base64url"});let e=s;e instanceof Uint8Array&&(e=Ss.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return ll(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Os(s){let e=s;return typeof e=="string"&&(e=Pt.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):nl(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class Ms extends Error{constructor(t,r){var n;super(t,r);Ke(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Ke(Ms,"code","ERR_JOSE_GENERIC");class Je extends Ms{constructor(){super(...arguments);Ke(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Ke(Je,"code","ERR_JOSE_NOT_SUPPORTED");class Mt extends Ms{constructor(){super(...arguments);Ke(this,"code","ERR_JWS_INVALID")}}Ke(Mt,"code","ERR_JWS_INVALID");class xn extends Ms{constructor(){super(...arguments);Ke(this,"code","ERR_JWT_INVALID")}}Ke(xn,"code","ERR_JWT_INVALID");function je(s,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${s}`)}function zt(s,e){return s.name===e}function Ds(s){return parseInt(s.name.slice(4),10)}function il(s){switch(s){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function ol(s,e){if(!s.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function al(s,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!zt(s.algorithm,"HMAC"))throw je("HMAC");const r=parseInt(e.slice(2),10);if(Ds(s.algorithm.hash)!==r)throw je(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!zt(s.algorithm,"RSASSA-PKCS1-v1_5"))throw je("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(Ds(s.algorithm.hash)!==r)throw je(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!zt(s.algorithm,"RSA-PSS"))throw je("RSA-PSS");const r=parseInt(e.slice(2),10);if(Ds(s.algorithm.hash)!==r)throw je(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!zt(s.algorithm,"Ed25519"))throw je("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!zt(s.algorithm,"ECDSA"))throw je("ECDSA");const r=il(e);if(s.algorithm.namedCurve!==r)throw je(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}ol(s,t)}function En(s,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const n=t.pop();s+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?s+=`one of type ${t[0]} or ${t[1]}.`:s+=`of type ${t[0]}.`;return e==null?s+=` Received ${e}`:typeof e=="function"&&e.name?s+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(s+=` Received an instance of ${e.constructor.name}`),s}const cl=(s,...e)=>En("Key must be ",s,...e);function An(s,e,...t){return En(`Key for the ${s} algorithm must be `,e,...t)}function Pn(s){return(s==null?void 0:s[Symbol.toStringTag])==="CryptoKey"}function Tn(s){return(s==null?void 0:s[Symbol.toStringTag])==="KeyObject"}const In=s=>Pn(s)||Tn(s),ul=(...s)=>{const e=s.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const n=Object.keys(r);if(!t||t.size===0){t=new Set(n);continue}for(const l of n){if(t.has(l))return!1;t.add(l)}}return!0};function dl(s){return typeof s=="object"&&s!==null}const js=s=>{if(!dl(s)||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e},fl=(s,e)=>{if(s.startsWith("RS")||s.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${s} requires key modulusLength to be 2048 bits or larger`)}};function ml(s){let e,t;switch(s.kty){case"RSA":{switch(s.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.slice(-3),10)||1}`},t=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(s.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=s.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=s.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new Je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(s.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new Je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Je('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const Rn=async s=>{if(!s.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=ml(s),r={...s};return delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,s.ext??!s.d,s.key_ops??t)};async function hl(s,e,t){if(!js(s))throw new TypeError("JWK must be an object");let r;switch(e??(e=s.alg),r??(r=s.ext),s.kty){case"oct":if(typeof s.k!="string"||!s.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Mn(s.k);case"RSA":if("oth"in s&&s.oth!==void 0)throw new Je('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Rn({...s,alg:e,ext:r});default:throw new Je('Unsupported "kty" (Key Type) Parameter value')}}const pl=(s,e,t,r,n)=>{if(n.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new s('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new s('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;t!==void 0?l=new Map([...Object.entries(t),...e.entries()]):l=e;for(const o of r.crit){if(!l.has(o))throw new Je(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new s(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&r[o]===void 0)throw new s(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)};function Js(s){return js(s)&&typeof s.kty=="string"}function gl(s){return s.kty!=="oct"&&typeof s.d=="string"}function bl(s){return s.kty!=="oct"&&typeof s.d>"u"}function yl(s){return s.kty==="oct"&&typeof s.k=="string"}let It;const Cr=async(s,e,t,r=!1)=>{It||(It=new WeakMap);let n=It.get(s);if(n!=null&&n[t])return n[t];const l=await Rn({...e,alg:t});return r&&Object.freeze(s),n?n[t]=l:It.set(s,{[t]:l}),l},vl=(s,e)=>{var o;It||(It=new WeakMap);let t=It.get(s);if(t!=null&&t[e])return t[e];const r=s.type==="public",n=!!r;let l;if(s.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}l=s.toCryptoKey(s.asymmetricKeyType,n,r?[]:["deriveBits"])}if(s.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");l=s.toCryptoKey(s.asymmetricKeyType,n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="rsa"){let u;switch(e){case"RSA-OAEP":u="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":u="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":u="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":u="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return s.toCryptoKey({name:"RSA-OAEP",hash:u},n,r?["encrypt"]:["decrypt"]);l=s.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:u},n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="ec"){const d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=s.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!d)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&d==="P-256"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES384"&&d==="P-384"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES512"&&d==="P-521"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(l=s.toCryptoKey({name:"ECDH",namedCurve:d},n,r?[]:["deriveBits"]))}if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=l:It.set(s,{[e]:l}),l},_l=async(s,e)=>{if(s instanceof Uint8Array||Pn(s))return s;if(Tn(s)){if(s.type==="secret")return s.export();if("toCryptoKey"in s&&typeof s.toCryptoKey=="function")try{return vl(s,e)}catch(r){if(r instanceof TypeError)throw r}let t=s.export({format:"jwk"});return Cr(s,t,e)}if(Js(s))return s.k?Mn(s.k):Cr(s,s,e,!0);throw new Error("unreachable")},xt=s=>s==null?void 0:s[Symbol.toStringTag],Hs=(s,e,t)=>{var r,n;if(e.use!==void 0){let l;switch(t){case"sign":case"verify":l="sig";break;case"encrypt":case"decrypt":l="enc";break}if(e.use!==l)throw new TypeError(`Invalid key for this operation, its "use" must be "${l}" when present`)}if(e.alg!==void 0&&e.alg!==s)throw new TypeError(`Invalid key for this operation, its "alg" must be "${s}" when present`);if(Array.isArray(e.key_ops)){let l;switch(!0){case t==="sign":case s==="dir":case s.includes("CBC-HS"):l=t;break;case s.startsWith("PBES2"):l="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(s):!s.includes("GCM")&&s.endsWith("KW")?l="unwrapKey":l=t;break;case t==="encrypt":l="wrapKey";break;case t==="decrypt":l=s.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(l&&((n=(r=e.key_ops)==null?void 0:r.includes)==null?void 0:n.call(r,l))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${l}" when present`)}return!0},wl=(s,e,t)=>{if(!(e instanceof Uint8Array)){if(Js(e)){if(yl(e)&&Hs(s,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!In(e))throw new TypeError(An(s,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${xt(e)} instances for symmetric algorithms must be of type "secret"`)}},Sl=(s,e,t)=>{if(Js(e))switch(t){case"decrypt":case"sign":if(gl(e)&&Hs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(bl(e)&&Hs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!In(e))throw new TypeError(An(s,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${xt(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${xt(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${xt(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${xt(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${xt(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},kl=(s,e,t)=>{s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(s)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(s)?wl(s,e,t):Sl(s,e,t)},Ll=(s,e)=>{const t=`SHA-${s.slice(-3)}`;switch(s){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(s.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new Je(`alg ${s} is not supported either by JOSE or your javascript runtime`)}},Cl=async(s,e,t)=>{if(e instanceof Uint8Array){if(!s.startsWith("HS"))throw new TypeError(cl(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${s.slice(-3)}`,name:"HMAC"},!1,[t])}return al(e,s,t),e},at=s=>Math.floor(s.getTime()/1e3),On=60,Dn=On*60,qs=Dn*24,Ml=qs*7,xl=qs*365.25,El=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Ns=s=>{const e=El.exec(s);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let n;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*On);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*Dn);break;case"day":case"days":case"d":n=Math.round(t*qs);break;case"week":case"weeks":case"w":n=Math.round(t*Ml);break;default:n=Math.round(t*xl);break}return e[1]==="-"||e[4]==="ago"?-n:n};function ct(s,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${s} input`);return e}var he;class Al{constructor(e){Xe(this,he);if(!js(e))throw new TypeError("JWT Claims Set MUST be an object");Qe(this,he,structuredClone(e))}data(){return Pt.encode(JSON.stringify(X(this,he)))}get iss(){return X(this,he).iss}set iss(e){X(this,he).iss=e}get sub(){return X(this,he).sub}set sub(e){X(this,he).sub=e}get aud(){return X(this,he).aud}set aud(e){X(this,he).aud=e}set jti(e){X(this,he).jti=e}set nbf(e){typeof e=="number"?X(this,he).nbf=ct("setNotBefore",e):e instanceof Date?X(this,he).nbf=ct("setNotBefore",at(e)):X(this,he).nbf=at(new Date)+Ns(e)}set exp(e){typeof e=="number"?X(this,he).exp=ct("setExpirationTime",e):e instanceof Date?X(this,he).exp=ct("setExpirationTime",at(e)):X(this,he).exp=at(new Date)+Ns(e)}set iat(e){typeof e>"u"?X(this,he).iat=at(new Date):e instanceof Date?X(this,he).iat=ct("setIssuedAt",at(e)):typeof e=="string"?X(this,he).iat=ct("setIssuedAt",at(new Date)+Ns(e)):X(this,he).iat=ct("setIssuedAt",e)}}he=new WeakMap;const Pl=async(s,e,t)=>{const r=await Cl(s,e,"sign");fl(s,r);const n=await crypto.subtle.sign(Ll(s,r.algorithm),r,t);return new Uint8Array(n)};var Jt,Le,Fe;class Tl{constructor(e){Xe(this,Jt);Xe(this,Le);Xe(this,Fe);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Qe(this,Jt,e)}setProtectedHeader(e){if(X(this,Le))throw new TypeError("setProtectedHeader can only be called once");return Qe(this,Le,e),this}setUnprotectedHeader(e){if(X(this,Fe))throw new TypeError("setUnprotectedHeader can only be called once");return Qe(this,Fe,e),this}async sign(e,t){if(!X(this,Le)&&!X(this,Fe))throw new Mt("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!ul(X(this,Le),X(this,Fe)))throw new Mt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...X(this,Le),...X(this,Fe)},n=pl(Mt,new Map([["b64",!0]]),t==null?void 0:t.crit,X(this,Le),r);let l=!0;if(n.has("b64")&&(l=X(this,Le).b64,typeof l!="boolean"))throw new Mt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if(typeof o!="string"||!o)throw new Mt('JWS "alg" (Algorithm) Header Parameter missing or invalid');kl(o,e,"sign");let u=X(this,Jt);l&&(u=Pt.encode(Os(u)));let d;X(this,Le)?d=Pt.encode(Os(JSON.stringify(X(this,Le)))):d=Pt.encode("");const a=rl(d,Pt.encode("."),u),f=await _l(e,o),h=await Pl(o,f,a),b={signature:Os(h),payload:""};return l&&(b.payload=Ss.decode(u)),X(this,Fe)&&(b.header=X(this,Fe)),X(this,Le)&&(b.protected=Ss.decode(d)),b}}Jt=new WeakMap,Le=new WeakMap,Fe=new WeakMap;var Rt;class Il{constructor(e){Xe(this,Rt);Qe(this,Rt,new Tl(e))}setProtectedHeader(e){return X(this,Rt).setProtectedHeader(e),this}async sign(e,t){const r=await X(this,Rt).sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}Rt=new WeakMap;var et,Ie;class Rl{constructor(e={}){Xe(this,et);Xe(this,Ie);Qe(this,Ie,new Al(e))}setIssuer(e){return X(this,Ie).iss=e,this}setSubject(e){return X(this,Ie).sub=e,this}setAudience(e){return X(this,Ie).aud=e,this}setJti(e){return X(this,Ie).jti=e,this}setNotBefore(e){return X(this,Ie).nbf=e,this}setExpirationTime(e){return X(this,Ie).exp=e,this}setIssuedAt(e){return X(this,Ie).iat=e,this}setProtectedHeader(e){return Qe(this,et,e),this}async sign(e,t){var n;const r=new Il(X(this,Ie).data());if(r.setProtectedHeader(X(this,et)),Array.isArray((n=X(this,et))==null?void 0:n.crit)&&X(this,et).crit.includes("b64")&&X(this,et).b64===!1)throw new xn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}et=new WeakMap,Ie=new WeakMap;const Us="bluesky_oauth_session",Nn="bluesky_code_verifier",Bn="bluesky_oauth_state",Kn="bluesky_server_url";function Ol(s=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const r=new Uint8Array(s);crypto.getRandomValues(r);for(let n=0;n<s;n++)t+=e[r[n]%e.length];return t}async function Dl(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t);return Nl(r)}function Nl(s){return btoa(String.fromCharCode(...new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mr(){return await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}async function xr(s,e,t,r,n){try{const l=await crypto.subtle.exportKey("jwk",s.publicKey),o={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};r&&(o.nonce=r);const u=await hl(await crypto.subtle.exportKey("jwk",s.privateKey),"ES256");return await new Rl(o).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:l.kty,crv:l.crv,x:l.x,y:l.y}}).sign(u)}catch(l){throw console.error("Error creating DPoP JWT:",l),l}}async function Bl(s="https://bsky.social"){try{const e=Ol();localStorage.setItem(Nn,e);const t=await Dl(e),r=crypto.randomUUID();localStorage.setItem(Bn,r),localStorage.setItem(Kn,s);const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l=n?"http://localhost:5174/.well-known/oauth-client-metadata.json":"https://pixeline.be/bluesky-list-manager/.well-known/oauth-client-metadata.json",u=window.location.pathname.includes("/bluesky-list-manager")?"/bluesky-list-manager":"",d=n?`${window.location.origin}/oauth-callback.html`:`${window.location.origin}${u}/oauth-callback-standalone.html`,a=new URL(`${s}/oauth/authorize`);a.searchParams.append("client_id",l),a.searchParams.append("response_type","code"),a.searchParams.append("redirect_uri",d),a.searchParams.append("scope","atproto transition:generic"),a.searchParams.append("state",r),a.searchParams.append("code_challenge",t),a.searchParams.append("code_challenge_method","S256"),window.location.href=a.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}function Et(){const s=localStorage.getItem(Us);if(s)try{return JSON.parse(s)}catch{localStorage.removeItem(Us)}return null}function Er(){localStorage.removeItem(Us),localStorage.removeItem(Nn),localStorage.removeItem(Bn),localStorage.removeItem(Kn)}const ke={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},At={OAUTH:"oauth",APP_PASSWORD:"app_password"};function Kl(){const{subscribe:s,set:e,update:t}=Fs({session:null,authType:null,isLoading:!1,error:null});return{subscribe:s,setSession:(r,n=At.APP_PASSWORD)=>{r?(localStorage.setItem(ke.SESSION,JSON.stringify(r)),localStorage.setItem(ke.AUTH_TYPE,n)):(localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE)),e({session:r,authType:n,isLoading:!1,error:null})},setLoading:r=>{t(n=>({...n,isLoading:r}))},setError:r=>{t(n=>({...n,error:r,isLoading:!1}))},getSession:()=>{const r=localStorage.getItem(ke.SESSION),n=localStorage.getItem(ke.AUTH_TYPE)||At.APP_PASSWORD;if(r)try{return{session:JSON.parse(r),authType:n}}catch{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE),Er(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(ke.SESSION),localStorage.removeItem(ke.AUTH_TYPE),Er(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:()=>{const r=Et();if(r&&r.accessToken){const o={accessJwt:r.accessToken,refreshJwt:r.refreshToken,handle:r.sub,did:r.sub,email:null};return e({session:o,authType:At.OAUTH,isLoading:!1,error:null}),{session:o,authType:At.OAUTH}}const{session:n,authType:l}=qe.getSession();return n?(e({session:n,authType:l,isLoading:!1,error:null}),{session:n,authType:l}):{session:null,authType:null}},isOAuthSession:()=>localStorage.getItem(ke.AUTH_TYPE)===At.OAUTH}}const qe=Kl(),hs="https://bsky.social/xrpc";class Wl{async signIn(e,t){const r=await fetch(`${hs}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to sign in")}return await r.json()}async getAuthHeaders(e,t="app_password"){if(t==="oauth"){const r=Et();if(!r||!r.accessToken)throw new Error("No OAuth session found");const n=await Mr(),l=await xr(n,"GET",`${hs}/app.bsky.graph.getLists`,r.serverNonce);return{Authorization:`Bearer ${r.accessToken}`,DPoP:l,"Content-Type":"application/json"}}else return{Authorization:`Bearer ${e.accessJwt}`,"Content-Type":"application/json"}}async makeBlueskyRequest(e,t,r="app_password",n="GET",l=null){const o=await this.getAuthHeaders(t,r);if(r==="oauth"&&o.DPoP){const a=Et(),f=await Mr(),h=await xr(f,n,`${hs}/${e}`,a.serverNonce);o.DPoP=h}const u={method:n,headers:o};l&&n!=="GET"&&(u.body=JSON.stringify(l));const d=await fetch(`${hs}/${e}`,u);if(!d.ok){const a=await d.json();throw new Error(a.message||`Failed to fetch from ${e}`)}return await d.json()}async getUserLists(e,t="app_password"){if(t==="oauth"){const r=Et();if(!r.sub)throw new Error("No user DID found in OAuth session");const l=(await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${r.sub}`,e,t)).handle;return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${l}`,e,t)).lists||[]}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${e.handle}`,e,t)).lists||[]}async getListInfo(e,t,r="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,r)).list}async getListMembers(e,t,r="app_password",n=25,l=null){var h;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r),d=u.items||[],a=d.map(b=>b.subject.did),f=d.map(b=>b.subject);return{members:a,profiles:f,cursor:u.cursor,totalCount:((h=u.list)==null?void 0:h.listItemCount)||0}}async getListMembersCount(e,t,r="app_password"){return(await this.getListInfo(e,t,r)).listItemCount||0}async getProfiles(e,t,r="app_password"){if(!t||t.length===0)return[];const n=[];for(const l of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(l)}`,e,r);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${l}:`,o),n.push({did:l,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,r="app_password",n=25,l=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r);return{actors:u.actors||[],cursor:u.cursor}}async addToList(e,t,r,n="app_password"){let l;return n==="oauth"?l=Et().sub:l=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:r,createdAt:new Date().toISOString()}})}async removeFromList(e,t,r,n="app_password"){var h;let l;n==="oauth"?l=Et().sub:l=e.did,console.log("removeFromList: Searching for DID:",t,"in list:",r,"for user:",l);let o=null,u=null,d=0;do{const b=await this.makeBlueskyRequest(`com.atproto.repo.listRecords?repo=${l}&collection=app.bsky.graph.listitem&limit=100${o?`&cursor=${encodeURIComponent(o)}`:""}`,e,n);if(console.log("removeFromList: Found",((h=b.records)==null?void 0:h.length)||0,"records in this batch"),u=b.records.find(g=>{d++;const _=g.value.subject===t&&g.value.list===r;return _&&console.log("removeFromList: Found matching record:",g),_}),u){console.log("removeFromList: Found record with rkey:",u.rkey);break}o=b.cursor}while(o&&!u);if(console.log("removeFromList: Total records checked:",d),!u)throw new Error("List item not found");const a=u.uri.split("/").pop();if(!a)throw console.error("removeFromList: Could not extract rkey from URI:",u.uri),new Error("Could not extract rkey from URI");console.log("removeFromList: Deleting record with rkey:",a);const f=await this.makeBlueskyRequest("com.atproto.repo.deleteRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",rkey:a});return console.log("removeFromList: Delete successful"),f}async resolveHandle(e,t,r="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,r)).did}}const Me=new Wl,Te={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Hl(){const{subscribe:s,update:e}=Fs({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1,r=new Map;return{subscribe:s,setSelectedList:n=>{n?localStorage.setItem(Te.SELECTED_LIST,JSON.stringify(n)):localStorage.removeItem(Te.SELECTED_LIST),e(l=>({...l,selectedList:n,isLoadingList:!!n,listMembers:[],listMemberProfiles:[]})),r.clear()},setListLoading:n=>{e(l=>({...l,isLoadingList:n}))},setUserLists:n=>{localStorage.setItem(Te.LISTS,JSON.stringify(n)),e(l=>({...l,userLists:n}))},setListMembers:n=>{e(l=>({...l,listMembers:n}))},isProfileInCurrentList:n=>{let l=!1;return e(o=>(l=o.listMembers.includes(n),o)),l},async isProfileInEntireList(n,l,o="app_password"){var a;let u;e(f=>(u=f,f));const d=`${(a=u.selectedList)==null?void 0:a.uri}-${l}`;if(r.has(d))return r.get(d);if(u.listMembers.includes(l))return r.set(d,!0),!0;try{let f=null;const h=100;do{const b=await Me.getListMembers(n,u.selectedList.uri,o,h,f);if(b.members.includes(l))return r.set(d,!0),!0;f=b.cursor}while(f);return r.set(d,!1),!1}catch(f){console.error("Error checking profile membership:",f);const h=u.listMembers.includes(l);return r.set(d,h),h}},setListMemberProfiles:n=>{e(l=>({...l,listMemberProfiles:n}))},addProfileToList:n=>{e(l=>{const o=l.listMembers.includes(n)?l.listMembers:[n,...l.listMembers];return{...l,listMembers:o}})},addProfileToDisplay:n=>{e(l=>{if(l.listMembers.indexOf(n.did)<25){const u=[n,...l.listMemberProfiles];return{...l,listMemberProfiles:u.slice(0,25)}}return l})},fetchAndAddProfile:(n,l,o="app_password")=>t?Promise.resolve():(t=!0,new Promise(async u=>{try{const d=await Me.getProfiles(n,[l],o);if(d.length>0){const a=d[0];e(f=>{const h=f.listMembers.includes(l)?f.listMembers:[l,...f.listMembers];if(h.indexOf(l)<25){const g=f.listMemberProfiles.filter(v=>v.did!==l),_=[a,...g];return{...f,listMembers:h,listMemberProfiles:_.slice(0,25)}}return{...f,listMembers:h}}),e(f=>{console.log("Updating member count for DID:",l),console.log("Current selectedList:",f.selectedList),console.log("Current userLists:",f.userLists),console.log("Incrementing member count for successfully added profile");const h=f.selectedList?{...f.selectedList,listItemCount:(f.selectedList.listItemCount||0)+1}:null,b=f.userLists.map(g=>{var _;return g.uri===((_=f.selectedList)==null?void 0:_.uri)?{...g,memberCount:(g.memberCount||0)+1}:g});return console.log("Updated selectedList:",h),console.log("Updated userLists:",b),h&&localStorage.setItem(Te.SELECTED_LIST,JSON.stringify(h)),localStorage.setItem(Te.LISTS,JSON.stringify(b)),{...f,selectedList:h,userLists:b}})}}catch(d){console.error("Failed to fetch profile data:",d),e(a=>{const f=a.listMembers.includes(l)?a.listMembers:[l,...a.listMembers];return{...a,listMembers:f}}),e(a=>{console.log("Updating member count for DID (error case):",l),console.log("Incrementing member count for profile (error case)");const f=a.selectedList?{...a.selectedList,listItemCount:(a.selectedList.listItemCount||0)+1}:null,h=a.userLists.map(b=>{var g;return b.uri===((g=a.selectedList)==null?void 0:g.uri)?{...b,memberCount:(b.memberCount||0)+1}:b});return f&&localStorage.setItem(Te.SELECTED_LIST,JSON.stringify(f)),localStorage.setItem(Te.LISTS,JSON.stringify(h)),{...a,selectedList:f,userLists:h}})}finally{t=!1}u()})),refreshListMembers:()=>{e(n=>({...n,refreshTrigger:Date.now()}))},setLoading:n=>{e(l=>({...l,isLoading:n}))},setError:n=>{e(l=>({...l,error:n,isLoading:!1}))},getSelectedList:()=>{const n=localStorage.getItem(Te.SELECTED_LIST);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(Te.SELECTED_LIST)}return null},getUserLists:()=>{const n=localStorage.getItem(Te.LISTS);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(Te.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(Te.SELECTED_LIST),e(n=>({...n,selectedList:null}))},async getAllListMemberDids(n,l="app_password"){let o;if(e(d=>(o=d,d)),!o.selectedList)return new Set;const u=`${o.selectedList.uri}-all-dids`;if(r.has(u))return r.get(u);try{let d=new Set,a=null;const f=100;do{const h=await Me.getListMembers(n,o.selectedList.uri,l,f,a);h.members.forEach(b=>d.add(b)),a=h.cursor}while(a);return r.set(u,d),d}catch(d){console.error("Error getting all list member DIDs:",d);const a=new Set(o.listMembers);return r.set(u,a),a}}}}const me=Hl();function Ul(s){let e,t,r,n,l,o,u,d,a,f,h,b,g;return{c(){e=m("div"),t=m("label"),t.textContent="Handle",r=w(),n=m("input"),l=w(),o=m("div"),u=m("label"),u.textContent="App Password",d=w(),a=m("input"),f=w(),h=m("p"),h.textContent="Use an app password, not your main account password",c(t,"for","handle"),c(t,"class","block text-sm font-medium text-gray-700 mb-1"),c(n,"id","handle"),c(n,"type","text"),c(n,"placeholder","your-handle.bsky.social"),c(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,c(u,"for","password"),c(u,"class","block text-sm font-medium text-gray-700 mb-1"),c(a,"id","password"),c(a,"type","password"),c(a,"placeholder","Your app password"),c(a,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a.required=!0,c(h,"class","text-xs text-gray-500 mt-1")},m(_,v){x(_,e,v),i(e,t),i(e,r),i(e,n),Ce(n,s[0]),x(_,l,v),x(_,o,v),i(o,u),i(o,d),i(o,a),Ce(a,s[1]),i(o,f),i(o,h),b||(g=[le(n,"input",s[11]),le(a,"input",s[12])],b=!0)},p(_,v){v&1&&n.value!==_[0]&&Ce(n,_[0]),v&2&&a.value!==_[1]&&Ce(a,_[1])},d(_){_&&(M(e),M(l),M(o)),b=!1,Ae(g)}}}function zl(s){let e;return{c(){e=m("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,c(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function Ar(s){let e,t,r;return{c(){e=m("div"),t=m("p"),r=S(s[3]),c(t,"class","text-red-700 text-sm"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&V(r,n[3])},d(n){n&&M(e)}}}function Fl(s){let e;return{c(){e=S("Sign In")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function jl(s){let e;return{c(){e=S("Sign in with Bluesky")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function Jl(s){let e,t,r;function n(u,d){return u[4]==="oauth"?Vl:ql}let l=n(s),o=l(s);return{c(){e=m("span"),t=w(),o.c(),r=st(),c(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(u,d){x(u,e,d),x(u,t,d),o.m(u,d),x(u,r,d)},p(u,d){l!==(l=n(u))&&(o.d(1),o=l(u),o&&(o.c(),o.m(r.parentNode,r)))},d(u){u&&(M(e),M(t),M(r)),o.d(u)}}}function ql(s){let e;return{c(){e=S("Signing in...")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function Vl(s){let e;return{c(){e=S("Connecting...")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function Yl(s){let e,t,r,n,l,o,u,d,a,f,h,b,g,_,v,T,H,A,W,O,E,k,I,L,U,P,N,q,G,C,K,j,ee,ne,te;function y(F,Y){return F[4]==="oauth"?zl:Ul}let p=y(s),B=p(s),D=s[3]&&Ar(s);function R(F,Y){return F[2]?Jl:F[4]==="oauth"?jl:Fl}let z=R(s),Z=z(s);return ee=Jn(s[9][0]),{c(){e=m("div"),t=m("button"),r=w(),n=m("div"),l=m("div"),o=m("h2"),o.textContent="Sign in to Bluesky",u=w(),d=m("button"),d.textContent="×",a=w(),f=m("form"),h=m("div"),b=m("div"),g=m("fieldset"),_=m("legend"),_.textContent="Sign in with:",v=w(),T=m("div"),H=m("label"),A=m("input"),W=w(),O=m("span"),O.textContent="OAuth (Recommended)",E=w(),k=m("label"),I=m("input"),L=w(),U=m("span"),U.textContent="App Password (Legacy)",P=w(),B.c(),N=w(),D&&D.c(),q=w(),G=m("div"),C=m("button"),C.textContent="Cancel",K=w(),j=m("button"),Z.c(),c(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),c(t,"aria-label","Close modal"),c(t,"type","button"),c(o,"class","text-xl font-semibold text-slate-800"),c(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),c(l,"class","flex items-center justify-between mb-4"),c(_,"class","block text-sm font-medium text-gray-700 mb-2"),c(A,"type","radio"),A.__value="oauth",Ce(A,A.__value),c(A,"class","mr-2"),c(O,"class","text-sm"),c(H,"class","flex items-center"),c(I,"type","radio"),I.__value="app_password",Ce(I,I.__value),c(I,"class","mr-2"),c(U,"class","text-sm"),c(k,"class","flex items-center"),c(T,"class","space-y-2"),c(C,"type","button"),c(C,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),c(j,"type","submit"),j.disabled=s[2],c(j,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),c(G,"class","flex space-x-3 pt-2"),c(h,"class","space-y-4"),c(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),c(n,"role","document"),c(n,"id","sign-in-modal-content"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),c(e,"role","dialog"),c(e,"aria-modal","true"),c(e,"tabindex","-1"),c(e,"id","sign-in-modal"),ee.p(A,I)},m(F,Y){x(F,e,Y),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,a),i(n,f),i(f,h),i(h,b),i(b,g),i(g,_),i(g,v),i(g,T),i(T,H),i(H,A),A.checked=A.__value===s[4],i(H,W),i(H,O),i(T,E),i(T,k),i(k,I),I.checked=I.__value===s[4],i(k,L),i(k,U),i(h,P),B.m(h,null),i(h,N),D&&D.m(h,null),i(h,q),i(h,G),i(G,C),i(G,K),i(G,j),Z.m(j,null),ne||(te=[le(t,"click",s[7]),le(d,"click",s[6]),le(A,"change",s[8]),le(I,"change",s[10]),le(C,"click",s[6]),le(f,"submit",kn(s[5])),le(e,"keydown",s[13])],ne=!0)},p(F,[Y]){Y&16&&(A.checked=A.__value===F[4]),Y&16&&(I.checked=I.__value===F[4]),p===(p=y(F))&&B?B.p(F,Y):(B.d(1),B=p(F),B&&(B.c(),B.m(h,N))),F[3]?D?D.p(F,Y):(D=Ar(F),D.c(),D.m(h,q)):D&&(D.d(1),D=null),z===(z=R(F))&&Z?Z.p(F,Y):(Z.d(1),Z=z(F),Z&&(Z.c(),Z.m(j,null))),Y&4&&(j.disabled=F[2])},i:Q,o:Q,d(F){F&&M(e),B.d(),D&&D.d(),Z.d(),ee.r(),ne=!1,Ae(te)}}}function Zl(s,e,t){const r=Yn();let n="",l="",o=!1,u="",d="app_password";async function a(){t(2,o=!0),t(3,u="");try{await Bl()}catch(O){t(3,u=O.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function f(){if(!n||!l){t(3,u="Please enter both handle and password");return}t(2,o=!0),t(3,u="");try{const O=await Me.signIn(n,l);qe.setSession(O,At.APP_PASSWORD),r("close")}catch(O){t(3,u=O.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function h(){d==="oauth"?await a():await f()}function b(){r("close")}function g(){b()}const _=[[]];function v(){d=this.__value,t(4,d)}function T(){d=this.__value,t(4,d)}function H(){n=this.value,t(0,n)}function A(){l=this.value,t(1,l)}return[n,l,o,u,d,h,b,g,v,_,T,H,A,O=>O.key==="Escape"&&b()]}class Wn extends Ne{constructor(e){super(),De(this,e,Zl,Yl,Pe,{})}}const Gl=!0,ks={staticBase:"static",isDevelopment:!1,isProduction:Gl,buildTime:new Date().toISOString(),getAssetPath:s=>`./${s.replace("static/","")}`};function Pr(s,e,t){const r=s.slice();return r[10]=e[t],r}function $l(s){let e,t,r;return{c(){e=m("button"),e.textContent="🔐 Sign in with Bluesky",c(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200"),c(e,"id","sign-in-button")},m(n,l){x(n,e,l),t||(r=le(e,"click",s[6]),t=!0)},p:Q,d(n){n&&M(e),t=!1,r()}}}function Xl(s){let e,t,r,n,l,o,u,d,a,f,h,b=s[1].session.handle+"",g,_,v,T,H;function A(k,I){return k[3]?ti:k[4]?ei:Ql}let W=A(s),O=W(s),E=s[3]&&Ir();return{c(){e=m("div"),t=m("label"),t.textContent="List:",r=w(),n=m("select"),l=m("option"),l.textContent="Select a list...",O.c(),u=w(),E&&E.c(),d=w(),a=m("div"),f=m("div"),h=S("@"),g=S(b),_=w(),v=m("button"),v.textContent="Sign out",c(t,"for","list-selector"),c(t,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),l.__value="",Ce(l,l.__value),c(n,"id","list-selector"),n.disabled=s[3],c(n,"class","bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm w-64 text-slate-800 focus:border-slate-500 focus:ring-1 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed"),c(e,"class","flex items-center space-x-3"),c(e,"id","list-selector-container"),c(f,"class","text-sm text-slate-700"),c(v,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),c(v,"id","sign-out-button"),c(a,"class","text-right"),c(a,"id","user-info")},m(k,I){var L;x(k,e,I),i(e,t),i(e,r),i(e,n),i(n,l),O.m(n,null),kr(n,((L=s[0].selectedList)==null?void 0:L.uri)||""),i(e,u),E&&E.m(e,null),x(k,d,I),x(k,a,I),i(a,f),i(f,h),i(f,g),i(a,_),i(a,v),T||(H=[le(n,"change",s[5]),le(v,"click",s[8])],T=!0)},p(k,I){var L,U;W===(W=A(k))&&O?O.p(k,I):(O.d(1),O=W(k),O&&(O.c(),O.m(n,null))),I&1&&o!==(o=((L=k[0].selectedList)==null?void 0:L.uri)||"")&&kr(n,((U=k[0].selectedList)==null?void 0:U.uri)||""),I&8&&(n.disabled=k[3]),k[3]?E||(E=Ir(),E.c(),E.m(e,null)):E&&(E.d(1),E=null),I&2&&b!==(b=k[1].session.handle+"")&&V(g,b)},d(k){k&&(M(e),M(d),M(a)),O.d(),E&&E.d(),T=!1,Ae(H)}}}function Ql(s){let e,t=pe(s[0].userLists),r=[];for(let n=0;n<t.length;n+=1)r[n]=Tr(Pr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);x(n,e,l)},p(n,l){if(l&1){t=pe(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const u=Pr(n,t,o);r[o]?r[o].p(u,l):(r[o]=Tr(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&M(e),Ve(r,n)}}}function ei(s){let e;return{c(){e=m("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",Ce(e,e.__value)},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function ti(s){let e;return{c(){e=m("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",Ce(e,e.__value)},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function Tr(s){let e,t=s[10].name+"",r,n,l=s[10].memberCount.toLocaleString()+"",o,u,d;return{c(){e=m("option"),r=S(t),n=S(" ("),o=S(l),u=S(` members)
									`),e.__value=d=s[10].uri,Ce(e,e.__value)},m(a,f){x(a,e,f),i(e,r),i(e,n),i(e,o),i(e,u)},p(a,f){f&1&&t!==(t=a[10].name+"")&&V(r,t),f&1&&l!==(l=a[10].memberCount.toLocaleString()+"")&&V(o,l),f&1&&d!==(d=a[10].uri)&&(e.__value=d,Ce(e,e.__value))},d(a){a&&M(e)}}}function Ir(s){let e;return{c(){e=m("div"),c(e,"class","loading-spinner svelte-1myfg8v")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function Rr(s){let e,t;return e=new Wn({}),e.$on("close",s[7]),{c(){Oe(e.$$.fragment)},m(r,n){xe(e,r,n),t=!0},p:Q,i(r){t||(ie(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Ee(e,r)}}}function si(s){let e,t,r,n,l,o,u,d,a;function f(_,v){return _[1].session?Xl:$l}let h=f(s),b=h(s),g=s[2]&&Rr(s);return{c(){e=m("header"),t=m("div"),r=m("div"),n=m("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,l=w(),o=m("div"),b.c(),u=w(),g&&g.c(),d=st(),c(o,"class","flex items-center space-x-4"),c(r,"class","flex items-center justify-between mb-4"),c(t,"class","max-w-6xl mx-auto px-6 py-4"),c(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50"),c(e,"id","app-header")},m(_,v){x(_,e,v),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),b.m(o,null),x(_,u,v),g&&g.m(_,v),x(_,d,v),a=!0},p(_,[v]){h===(h=f(_))&&b?b.p(_,v):(b.d(1),b=h(_),b&&(b.c(),b.m(o,null))),_[2]?g?(g.p(_,v),v&4&&ie(g,1)):(g=Rr(_),g.c(),ie(g,1),g.m(d.parentNode,d)):g&&(Ot(),fe(g,1,1,()=>{g=null}),Dt())},i(_){a||(ie(g),a=!0)},o(_){fe(g),a=!1},d(_){_&&(M(e),M(u),M(d)),b.d(),g&&g.d(_)}}}function ri(s,e,t){let r,n;Re(s,me,g=>t(0,r=g)),Re(s,qe,g=>t(1,n=g));let l=!1,o=!1,u="";Cs(async()=>{n.session&&await d()});async function d(){if(n.session){t(3,o=!0),t(4,u="");try{const _=(await Me.getUserLists(n.session,n.authType)).map(v=>({uri:v.uri,name:v.name,description:v.description||"",purpose:v.purpose||"app.bsky.graph.defs#modlist",createdAt:v.createdAt,memberCount:v.listItemCount||0})).sort((v,T)=>new Date(T.createdAt)-new Date(v.createdAt));me.setUserLists(_)}catch(g){t(4,u=g.message||"Failed to load your lists")}finally{t(3,o=!1)}}}function a(g){const _=g.target.value;if(_){const v=r.userLists.find(T=>T.uri===_);v&&me.setSelectedList(v)}else me.setSelectedList(null)}function f(){t(2,l=!0)}function h(){t(2,l=!1)}function b(){qe.signOut(),me.setSelectedList(null)}return s.$$.update=()=>{s.$$.dirty&3&&n.session&&r.userLists.length===0&&d(),s.$$.dirty&1&&r.userLists.length>0&&console.log("Header: userLists updated:",r.userLists)},[r,n,l,o,u,a,f,h,b]}class ni extends Ne{constructor(e){super(),De(this,e,ri,si,Pe,{})}}function ys(s){s.preventDefault()}var li=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]);function ii(s){if(li.has(s.key))return ys(s),!1}var vs=new AbortController,ps=vs.signal;function oi(){window.addEventListener("DOMMouseScroll",ys,{signal:ps}),window.addEventListener("wheel",ys,{passive:!1,signal:ps}),window.addEventListener("touchmove",ys,{passive:!1,signal:ps}),window.addEventListener("keydown",ii,{signal:ps})}function ai(){vs==null||vs.abort()}function ci(s){if(!s)throw new Error("Please specify a container for the zoom image");const e=s.querySelector("img");if(!e)throw new Error("Please place an image inside the container");return e}var ui=50,di=()=>({createZoomImage:(e,t,r)=>{if(e.src===t)return;e.src=t;let n=!1;e.onload=()=>{n=!0,r.setState({zoomedImgStatus:"loaded"})},e.onerror=()=>{n=!0,r.setState({zoomedImgStatus:"error"})},setTimeout(()=>{n||r.setState({zoomedImgStatus:"loading"})},ui)}}),fi=di();function mi(s){let e=new Set,t=!1,r=s,n,l=(u={})=>{n={...n,...u},o()},o=()=>{if(t)return;let u=!1;if(n){for(let d in n)if(r[d]!==n[d]){u=!0;break}}u&&(r={...r,...n},e.forEach(d=>d({state:r,updatedProperties:n})),n=void 0)};return{subscribe:u=>(e.add(u),()=>{e.delete(u)}),cleanup:()=>e.clear(),getState:()=>r,setState:l,batch:u=>{t=!0,u(),t=!1,o()}}}function hi(s,e={}){var W,O;let t=null;const r=ci(s),n={zoomFactor:e.zoomFactor??4,zoomImageSource:e.zoomImageSource??r.src,disabledContextMenu:e.disabledContextMenu??!1},{disabledContextMenu:l,zoomFactor:o,zoomImageSource:u}=n,d=mi({zoomedImgStatus:"idle"}),a=document.createElement("img");(W=e.zoomImageProps)!=null&&W.alt&&(a.alt=e.zoomImageProps.alt),(O=e.zoomImageProps)!=null&&O.className&&(a.className=e.zoomImageProps.className),a.style.maxWidth="none",a.style.position="absolute",a.style.top="0",a.style.left="0",l&&(a.style["-webkit-user-select"]="none",a.style["-webkit-touch-callout"]="none",a.oncontextmenu=()=>!1);const f=E=>t&&E.pointerId===t;function h(E){if(t===null){t=E.pointerId,s.appendChild(a),a.style.display="block";const k=r.clientWidth*o,I=r.clientHeight*o;a.style.width=`${k}px`,a.style.height=`${I}px`,fi.createZoomImage(a,u,d),T(E),E.pointerType!=="mouse"&&oi()}}function b(E){f(E)&&T(E)}function g(E){f(E)&&(s.contains(a)&&s.removeChild(a),a.style.display="none",a.style.transform="none",ai(),t=null)}const _=E=>{const k=s.clientWidth;return E>0?0:E+k*o<k?-k*(o-1):E},v=E=>{const k=s.clientHeight;return E>0?0:E+k*o<k?-k*(o-1):E};function T(E){a.style.display="block";const k=s.getBoundingClientRect(),I=E.clientX-k.left,L=E.clientY-k.top,U=_(-I*o+I),P=v(-L*o+L);a.style.transform=`translate(${U}px, ${P}px)`}const H=new AbortController,{signal:A}=H;return s.addEventListener("pointerenter",h,{signal:A}),s.addEventListener("pointermove",b,{signal:A}),s.addEventListener("pointerleave",g,{signal:A}),s.addEventListener("touchstart",E=>{l&&E.preventDefault()},{signal:A}),{cleanup:()=>{H.abort(),s.contains(a)&&s.removeChild(a),d.cleanup()},subscribe:d.subscribe,getState:d.getState}}function pi(){let s;const{set:e,subscribe:t}=Fs({zoomedImgStatus:"idle"}),r=(...n)=>{s==null||s.cleanup(),s=hi(...n),e(s.getState()),s.subscribe(({state:l})=>{e(l)})};return Ln(()=>{s==null||s.cleanup()}),{createZoomImage:r,zoomImageState:{subscribe:t}}}function gi(s){let e,t,r,n;return{c(){e=m("div"),t=m("img"),tt(t.src,r=s[0])||c(t,"src",r),c(t,"alt",s[1]),c(t,"class","base-image svelte-6dnnuj"),ce(t,"width","100%"),ce(t,"height","100%"),ce(t,"object-fit","cover"),c(e,"class",n="zoom-image-container "+s[4]+" svelte-6dnnuj"),ce(e,"width",s[2]),ce(e,"height",s[3]),ce(e,"overflow","hidden"),ce(e,"position","relative"),c(e,"id","zoomable-image-"+Math.random().toString(36).substr(2,9))},m(l,o){x(l,e,o),i(e,t),s[7](e)},p(l,[o]){o&1&&!tt(t.src,r=l[0])&&c(t,"src",r),o&2&&c(t,"alt",l[1]),o&16&&n!==(n="zoom-image-container "+l[4]+" svelte-6dnnuj")&&c(e,"class",n),o&4&&ce(e,"width",l[2]),o&8&&ce(e,"height",l[3])},i:Q,o:Q,d(l){l&&M(e),s[7](null)}}}function bi(s,e,t){let{src:r=""}=e,{alt:n=""}=e,{width:l="auto"}=e,{height:o="auto"}=e,{className:u=""}=e,{zoomFactor:d=2}=e,a,f;const{createZoomImage:h}=pi();Cs(()=>{a&&(f=h(a,{zoomFactor:d,zoomImageSource:r,zoomImageProps:{alt:n,className:"zoom-image"}}))}),Ln(()=>{f&&f.cleanup&&f.cleanup()});function b(g){ws[g?"unshift":"push"](()=>{a=g,t(5,a)})}return s.$$set=g=>{"src"in g&&t(0,r=g.src),"alt"in g&&t(1,n=g.alt),"width"in g&&t(2,l=g.width),"height"in g&&t(3,o=g.height),"className"in g&&t(4,u=g.className),"zoomFactor"in g&&t(6,d=g.zoomFactor)},[r,n,l,o,u,a,d,b]}class yi extends Ne{constructor(e){super(),De(this,e,bi,gi,Pe,{src:0,alt:1,width:2,height:3,className:4,zoomFactor:6})}}function Or(s){let e,t;return e=new Wn({}),e.$on("close",s[2]),{c(){Oe(e.$$.fragment)},m(r,n){xe(e,r,n),t=!0},p:Q,i(r){t||(ie(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Ee(e,r)}}}function vi(s){let e,t,r,n,l,o,u,d,a,f,h,b,g,_,v,T,H,A,W,O,E,k,I,L,U,P,N,q,G,C,K,j,ee,ne;b=new yi({props:{src:ks.getAssetPath("static/screencapture.png"),alt:"Bluesky List Manager Preview - Showing list statistics and member management interface",width:"100%",height:"auto",className:"screenshot-zoom-image",zoomFactor:3}});let te=s[0]&&Or(s);return{c(){e=m("div"),t=m("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-4xl font-bold text-slate-800 mb-4">Bluesky List Manager</h2> <p class="text-xl text-slate-600 mb-2">Manage your lists like a pro.</p> <p class="text-xl text-slate-600 mb-6"><strong class="text-blue-600">Get insights and powerful tools to grow your curated lists.</strong></p>`,r=w(),n=m("div"),l=m("button"),l.textContent="🚀 Sign in with Bluesky to manage your lists",o=w(),u=m("p"),u.textContent="100% free • No registration required • Works instantly • Zero data stored on our servers",d=w(),a=m("div"),f=m("div"),h=m("div"),Oe(b.$$.fragment),g=w(),_=m("div"),_.innerHTML='<div class="zoom-hint svelte-163esy5">🔍 Move mouse to zoom and explore the interface</div>',v=w(),T=m("p"),T.textContent="See your list insights and manage members with powerful analytics",H=w(),A=m("div"),A.innerHTML='<div class="bg-red-50 p-6 rounded-lg border border-red-200"><h3 class="text-lg font-semibold text-red-800 mb-3">😤 The Manual Way (Slow &amp; Painful)</h3> <ul class="space-y-2 text-red-700"><li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Search one profile at a time</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Forget who you&#39;ve already added</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">•</span> <span>Hours of repetitive clicking</span></li></ul></div> <div class="bg-green-50 p-6 rounded-lg border border-green-200"><h3 class="text-lg font-semibold text-green-800 mb-3">⚡ The Smart Way (Fast &amp; Easy)</h3> <ul class="space-y-2 text-green-700"><li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Bulk search</strong> by keywords, bio, or handle</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Instant filtering</strong> - see who&#39;s already in your list</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">•</span> <span><strong>Minutes instead of hours</strong></span></li></ul></div>',W=w(),O=m("div"),O.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-4">🎯 Perfect for:</h3> <div class="grid md:grid-cols-3 gap-4 text-blue-700"><div class="text-center"><div class="text-2xl mb-2">👥</div> <div class="font-medium">Community Builders</div> <div class="text-sm">Grow your curated lists quickly</div></div> <div class="text-center"><div class="text-2xl mb-2">🔍</div> <div class="font-medium">Content Creators</div> <div class="text-sm">Find your target audience</div></div> <div class="text-center"><div class="text-2xl mb-2">📊</div> <div class="font-medium">List Managers</div> <div class="text-sm">Maintain and expand your lists</div></div></div>',E=w(),k=m("div"),k.innerHTML='<h3 class="text-lg font-semibold text-purple-800 mb-3">✨ Key Features</h3> <div class="grid md:grid-cols-2 gap-4 text-purple-700"><div><div class="font-medium mb-1">🔍 Smart Search</div> <div class="text-sm">Search across bios, display names, and handles with powerful filters</div></div> <div><div class="font-medium mb-1">📊 Real-time Stats</div> <div class="text-sm">See engagement rates, verification status, and growth metrics</div></div> <div><div class="font-medium mb-1">🔒 Privacy First</div> <div class="text-sm">Client-side app - your data never leaves your browser</div></div></div>',I=w(),L=m("div"),L.innerHTML=`<h3 class="text-lg font-semibold text-gray-800 mb-3">🔐 Privacy &amp; Security</h3> <p class="text-gray-700 mb-3">This is a <strong>client-side application</strong>. Your Bluesky credentials are stored
			locally in your browser and are never sent to our servers. We only communicate directly with
			Bluesky&#39;s API using your authentication token.</p> <p class="text-sm text-gray-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code (and
			contribute!) on
			<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-gray-600 hover:text-gray-700 underline">GitHub</a>.</p>`,U=w(),P=m("div"),N=m("button"),N.textContent="🚀 Start Building Better Lists - Sign in with Bluesky",q=w(),G=m("p"),G.textContent="100% free • No registration required • Works instantly • Zero data stored on our servers",C=w(),te&&te.c(),K=st(),c(t,"class","text-center mb-8"),c(l,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),c(l,"id","auth-sign-in-button"),c(u,"class","text-sm text-gray-500 mt-3"),c(n,"class","text-center mb-8"),c(n,"id","auth-cta"),c(_,"class","zoom-overlay svelte-163esy5"),c(h,"class","screenshot-container svelte-163esy5"),c(T,"class","text-sm text-gray-600 mt-4"),c(f,"class","bg-gray-50 p-6 rounded-lg border border-gray-200"),c(a,"class","mb-8 text-center"),c(A,"class","grid md:grid-cols-2 gap-8 mb-8"),c(O,"class","bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8"),c(k,"class","bg-purple-50 p-6 rounded-lg border border-purple-200 mb-8"),c(L,"class","bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8"),c(N,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),c(G,"class","text-sm text-gray-500 mt-3"),c(P,"class","text-center"),c(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-4xl mx-auto relative z-100"),c(e,"id","auth-instructions")},m(y,p){x(y,e,p),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u),i(e,d),i(e,a),i(a,f),i(f,h),xe(b,h,null),i(h,g),i(h,_),i(f,v),i(f,T),i(e,H),i(e,A),i(e,W),i(e,O),i(e,E),i(e,k),i(e,I),i(e,L),i(e,U),i(e,P),i(P,N),i(P,q),i(P,G),x(y,C,p),te&&te.m(y,p),x(y,K,p),j=!0,ee||(ne=[le(l,"click",s[1]),le(N,"click",s[1])],ee=!0)},p(y,[p]){y[0]?te?(te.p(y,p),p&1&&ie(te,1)):(te=Or(y),te.c(),ie(te,1),te.m(K.parentNode,K)):te&&(Ot(),fe(te,1,1,()=>{te=null}),Dt())},i(y){j||(ie(b.$$.fragment,y),ie(te),j=!0)},o(y){fe(b.$$.fragment,y),fe(te),j=!1},d(y){y&&(M(e),M(C),M(K)),Ee(b),te&&te.d(y),ee=!1,Ae(ne)}}}function _i(s,e,t){let r=!1;function n(){t(0,r=!0)}function l(){t(0,r=!1)}return[r,n,l]}class wi extends Ne{constructor(e){super(),De(this,e,_i,vi,Pe,{})}}function Si(s){let e,t,r;return{c(){e=m("h3"),e.textContent="Select a List",t=w(),r=m("p"),r.textContent="Choose a list from the dropdown above to get started.",c(e,"class","text-lg font-semibold text-slate-800 mb-2"),c(r,"class","text-slate-600")},m(n,l){x(n,e,l),x(n,t,l),x(n,r,l)},d(n){n&&(M(e),M(t),M(r))}}}function ki(s){let e,t,r;return{c(){e=m("h3"),e.textContent="No Lists Found",t=w(),r=m("p"),r.textContent="You don't have any lists yet. Create a list on Bluesky first!",c(e,"class","text-lg font-semibold text-slate-800 mb-2"),c(r,"class","text-slate-600")},m(n,l){x(n,e,l),x(n,t,l),x(n,r,l)},d(n){n&&(M(e),M(t),M(r))}}}function Li(s){let e,t,r,n,l,o,u;function d(h,b){return h[0].userLists.length===0?ki:Si}let a=d(s),f=a(s);return{c(){e=m("div"),t=m("div"),r=m("div"),r.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=w(),l=m("div"),o=m("div"),o.innerHTML=`<img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,u=w(),f.c(),c(r,"class","text-center mb-8"),c(o,"class","text-4xl mb-4"),c(l,"class","text-center py-12"),c(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),c(t,"id","list-selector-content"),c(e,"class","max-w-4xl mx-auto"),c(e,"id","list-selector")},m(h,b){x(h,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),f.m(l,null)},p(h,[b]){a!==(a=d(h))&&(f.d(1),f=a(h),f&&(f.c(),f.m(l,null)))},i:Q,o:Q,d(h){h&&M(e),f.d()}}}function Ci(s,e,t){let r;return Re(s,me,n=>t(0,r=n)),[r]}class Mi extends Ne{constructor(e){super(),De(this,e,Ci,Li,Pe,{})}}function xi(s){let e,t,r,n,l,o,u,d,a,f,h,b=(s[0].displayName||s[0].handle)+"",g,_,v,T,H=s[0].handle+"",A,W,O,E,k=s[0].description&&Dr(s);function I(P,N){if(P[3]==="Already in list")return Ii;if(P[3]==="New candidate")return Ti;if(P[6])return Pi;if(P[2])return Ai}let L=I(s),U=L&&L(s);return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("img"),d=w(),a=m("div"),f=m("div"),h=m("h3"),g=S(b),_=w(),v=m("span"),T=S("@"),A=S(H),W=w(),k&&k.c(),O=w(),U&&U.c(),tt(n.src,l=Ls(s[0]))||c(n,"src",l),c(n,"alt",o=s[0].displayName||s[0].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(h,"class","text-base font-semibold text-gray-900 truncate"),c(v,"class","text-sm text-gray-600 truncate"),c(f,"class","flex items-center space-x-2 mb-1"),c(a,"class","flex-1 min-w-0"),c(t,"class","flex items-start space-x-3"),c(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200"),c(e,"id",E="profile-card-"+s[0].did)},m(P,N){x(P,e,N),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,f),i(f,h),i(h,g),i(f,_),i(f,v),i(v,T),i(v,A),i(a,W),k&&k.m(a,null),i(a,O),U&&U.m(a,null)},p(P,N){N&1&&!tt(n.src,l=Ls(P[0]))&&c(n,"src",l),N&1&&o!==(o=P[0].displayName||P[0].handle)&&c(n,"alt",o),N&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(P[0].displayName||P[0].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),N&1&&b!==(b=(P[0].displayName||P[0].handle)+"")&&V(g,b),N&1&&H!==(H=P[0].handle+"")&&V(A,H),P[0].description?k?k.p(P,N):(k=Dr(P),k.c(),k.m(a,O)):k&&(k.d(1),k=null),L===(L=I(P))&&U?U.p(P,N):(U&&U.d(1),U=L&&L(P),U&&(U.c(),U.m(a,null))),N&1&&E!==(E="profile-card-"+P[0].did)&&c(e,"id",E)},d(P){P&&M(e),k&&k.d(),U&&U.d()}}}function Ei(s){let e,t,r,n,l,o,u,d,a,f,h,b=(s[0].displayName||s[0].handle)+"",g,_,v,T,H=s[0].handle+"",A,W,O,E,k,I,L,U,P,N=s[0].description&&Nr(s);function q(K,j){if(K[3]==="Already in list")return Ki;if(K[3]==="New candidate")return Bi;if(K[6])return Ni;if(K[2])return Di}let G=q(s),C=G&&G(s);return{c(){e=m("a"),t=m("div"),r=m("div"),n=m("img"),d=w(),a=m("div"),f=m("div"),h=m("h3"),g=S(b),_=w(),v=m("span"),T=S("@"),A=S(H),W=w(),N&&N.c(),O=w(),C&&C.c(),E=w(),k=m("div"),k.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',tt(n.src,l=Ls(s[0]))||c(n,"src",l),c(n,"alt",o=s[0].displayName||s[0].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(h,"class","text-base font-semibold text-gray-900 truncate"),c(v,"class","text-sm text-gray-600 truncate"),c(f,"class","flex items-center space-x-2 mb-1"),c(a,"class","flex-1 min-w-0"),c(k,"class","flex-shrink-0"),c(t,"class","flex items-start space-x-3"),c(e,"href",I="https://bsky.app/profile/"+s[0].handle),c(e,"target","_blank"),c(e,"rel","noopener noreferrer"),c(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200"),c(e,"id",L="profile-card-"+s[0].did)},m(K,j){x(K,e,j),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,f),i(f,h),i(h,g),i(f,_),i(f,v),i(v,T),i(v,A),i(a,W),N&&N.m(a,null),i(a,O),C&&C.m(a,null),i(t,E),i(t,k),U||(P=le(e,"click",s[9]),U=!0)},p(K,j){j&1&&!tt(n.src,l=Ls(K[0]))&&c(n,"src",l),j&1&&o!==(o=K[0].displayName||K[0].handle)&&c(n,"alt",o),j&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(K[0].displayName||K[0].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),j&1&&b!==(b=(K[0].displayName||K[0].handle)+"")&&V(g,b),j&1&&H!==(H=K[0].handle+"")&&V(A,H),K[0].description?N?N.p(K,j):(N=Nr(K),N.c(),N.m(a,O)):N&&(N.d(1),N=null),G===(G=q(K))&&C?C.p(K,j):(C&&C.d(1),C=G&&G(K),C&&(C.c(),C.m(a,null))),j&1&&I!==(I="https://bsky.app/profile/"+K[0].handle)&&c(e,"href",I),j&1&&L!==(L="profile-card-"+K[0].did)&&c(e,"id",L)},d(K){K&&M(e),N&&N.d(),C&&C.d(),U=!1,P()}}}function Dr(s){let e,t=s[0].description+"",r;return{c(){e=m("p"),r=S(t),c(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&V(r,t)},d(n){n&&M(e)}}}function Ai(s){let e,t,r,n,l,o;return{c(){e=m("div"),t=m("input"),r=w(),n=m("span"),n.textContent="Select to add to list",c(t,"type","checkbox"),t.checked=s[1],c(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),c(n,"class","text-sm text-gray-600"),c(e,"class","flex items-center space-x-2")},m(u,d){x(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=le(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&M(e),l=!1,o()}}}function Pi(s){let e;return{c(){e=m("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,c(e,"class","flex items-center space-x-2")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function Ti(s){let e,t,r,n,l,o,u;function d(h,b){return h[5]?Oi:Ri}let a=d(s),f=a(s);return{c(){e=m("div"),t=m("span"),r=S(s[3]),n=w(),l=m("button"),f.c(),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],c(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","flex items-center space-x-2")},m(h,b){x(h,e,b),i(e,t),i(t,r),i(e,n),i(e,l),f.m(l,null),o||(u=le(l,"click",s[8]),o=!0)},p(h,b){b&8&&V(r,h[3]),a!==(a=d(h))&&(f.d(1),f=a(h),f&&(f.c(),f.m(l,null))),b&32&&(l.disabled=h[5])},d(h){h&&M(e),f.d(),o=!1,u()}}}function Ii(s){let e,t,r;return{c(){e=m("div"),t=m("span"),r=S(s[3]),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),c(e,"class","flex items-center space-x-2")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&V(r,n[3])},d(n){n&&M(e)}}}function Ri(s){let e;return{c(){e=S("Add to list")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function Oi(s){let e,t;return{c(){e=m("span"),t=S(`
								Adding...`),c(e,"class","loading-spinner mr-1")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(M(e),M(t))}}}function Nr(s){let e,t=s[0].description+"",r;return{c(){e=m("p"),r=S(t),c(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&V(r,t)},d(n){n&&M(e)}}}function Di(s){let e,t,r,n,l,o;return{c(){e=m("div"),t=m("input"),r=w(),n=m("span"),n.textContent="Select to add to list",c(t,"type","checkbox"),t.checked=s[1],c(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),c(n,"class","text-sm text-gray-600"),c(e,"class","flex items-center space-x-2")},m(u,d){x(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=le(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&M(e),l=!1,o()}}}function Ni(s){let e;return{c(){e=m("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,c(e,"class","flex items-center space-x-2")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function Bi(s){let e,t,r,n,l,o,u;function d(h,b){return h[5]?Hi:Wi}let a=d(s),f=a(s);return{c(){e=m("div"),t=m("span"),r=S(s[3]),n=w(),l=m("button"),f.c(),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],c(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","flex items-center space-x-2")},m(h,b){x(h,e,b),i(e,t),i(t,r),i(e,n),i(e,l),f.m(l,null),o||(u=le(l,"click",s[8]),o=!0)},p(h,b){b&8&&V(r,h[3]),a!==(a=d(h))&&(f.d(1),f=a(h),f&&(f.c(),f.m(l,null))),b&32&&(l.disabled=h[5])},d(h){h&&M(e),f.d(),o=!1,u()}}}function Ki(s){let e,t,r;return{c(){e=m("div"),t=m("span"),r=S(s[3]),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),c(e,"class","flex items-center space-x-2")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&V(r,n[3])},d(n){n&&M(e)}}}function Wi(s){let e;return{c(){e=S("Add to list")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function Hi(s){let e,t;return{c(){e=m("span"),t=S(`
								Adding...`),c(e,"class","loading-spinner mr-1")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(M(e),M(t))}}}function Ui(s){let e;function t(l,o){return l[4]?Ei:xi}let r=t(s),n=r(s);return{c(){n.c(),e=st()},m(l,o){n.m(l,o),x(l,e,o)},p(l,[o]){r===(r=t(l))&&n?n.p(l,o):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(l){l&&M(e),n.d(l)}}}function Ls(s){return s.avatar?s.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName||s.handle)}&background=6366f1&color=fff&size=64`}function zi(s,e,t){let{profile:r}=e,{isSelected:n=!1}=e,{onSelect:l=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:u=null}=e,{clickable:d=!1}=e,{onAddToList:a=()=>{}}=e,{isAddingToList:f=!1}=e,{isCheckingMembership:h=!1}=e;function b(){l(r)}function g(v){v.preventDefault(),v.stopPropagation(),a(r)}function _(v){d&&!o||d&&o&&(v.target.type==="checkbox"||v.target.closest('input[type="checkbox"]'))&&(v.preventDefault(),v.stopPropagation())}return s.$$set=v=>{"profile"in v&&t(0,r=v.profile),"isSelected"in v&&t(1,n=v.isSelected),"onSelect"in v&&t(10,l=v.onSelect),"showCheckbox"in v&&t(2,o=v.showCheckbox),"statusTag"in v&&t(3,u=v.statusTag),"clickable"in v&&t(4,d=v.clickable),"onAddToList"in v&&t(11,a=v.onAddToList),"isAddingToList"in v&&t(5,f=v.isAddingToList),"isCheckingMembership"in v&&t(6,h=v.isCheckingMembership)},[r,n,o,u,d,f,h,b,g,_,l,a]}class Fi extends Ne{constructor(e){super(),De(this,e,zi,Ui,Pe,{profile:0,isSelected:1,onSelect:10,showCheckbox:2,statusTag:3,clickable:4,onAddToList:11,isAddingToList:5,isCheckingMembership:6})}}var qt={};(function s(e,t,r,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!e.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),p=y.getContext("2d");p.fillRect(0,0,1,1);var B=y.transferToImageBitmap();try{p.createPattern(B,"no-repeat")}catch{return!1}return!0}();function d(){}function a(y){var p=t.exports.Promise,B=p!==void 0?p:e.Promise;return typeof B=="function"?new B(y):(y(d,d),null)}var f=function(y,p){return{transform:function(B){if(y)return B;if(p.has(B))return p.get(B);var D=new OffscreenCanvas(B.width,B.height),R=D.getContext("2d");return R.drawImage(B,0,0),p.set(B,D),D},clear:function(){p.clear()}}}(u,new Map),h=function(){var y=Math.floor(16.666666666666668),p,B,D={},R=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(p=function(z){var Z=Math.random();return D[Z]=requestAnimationFrame(function F(Y){R===Y||R+y-1<Y?(R=Y,delete D[Z],z()):D[Z]=requestAnimationFrame(F)}),Z},B=function(z){D[z]&&cancelAnimationFrame(D[z])}):(p=function(z){return setTimeout(z,y)},B=function(z){return clearTimeout(z)}),{frame:p,cancel:B}}(),b=function(){var y,p,B={};function D(R){function z(Z,F){R.postMessage({options:Z||{},callback:F})}R.init=function(F){var Y=F.transferControlToOffscreen();R.postMessage({canvas:Y},[Y])},R.fire=function(F,Y,J){if(p)return z(F,null),p;var se=Math.random().toString(36).slice(2);return p=a(function(ae){function oe(ue){ue.data.callback===se&&(delete B[se],R.removeEventListener("message",oe),p=null,f.clear(),J(),ae())}R.addEventListener("message",oe),z(F,se),B[se]=oe.bind(null,{data:{callback:se}})}),p},R.reset=function(){R.postMessage({reset:!0});for(var F in B)B[F](),delete B[F]}}return function(){if(y)return y;if(!r&&l){var R=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([R])))}catch(z){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",z),null}D(y)}return y}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(y,p){return p?p(y):y}function v(y){return y!=null}function T(y,p,B){return _(y&&v(y[p])?y[p]:g[p],B)}function H(y){return y<0?0:Math.floor(y)}function A(y,p){return Math.floor(Math.random()*(p-y))+y}function W(y){return parseInt(y,16)}function O(y){return y.map(E)}function E(y){var p=String(y).replace(/[^0-9a-f]/gi,"");return p.length<6&&(p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]),{r:W(p.substring(0,2)),g:W(p.substring(2,4)),b:W(p.substring(4,6))}}function k(y){var p=T(y,"origin",Object);return p.x=T(p,"x",Number),p.y=T(p,"y",Number),p}function I(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function L(y){var p=y.getBoundingClientRect();y.width=p.width,y.height=p.height}function U(y){var p=document.createElement("canvas");return p.style.position="fixed",p.style.top="0px",p.style.left="0px",p.style.pointerEvents="none",p.style.zIndex=y,p}function P(y,p,B,D,R,z,Z,F,Y){y.save(),y.translate(p,B),y.rotate(z),y.scale(D,R),y.arc(0,0,1,Z,F,Y),y.restore()}function N(y){var p=y.angle*(Math.PI/180),B=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-p+(.5*B-Math.random()*B),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function q(y,p){p.x+=Math.cos(p.angle2D)*p.velocity+p.drift,p.y+=Math.sin(p.angle2D)*p.velocity+p.gravity,p.velocity*=p.decay,p.flat?(p.wobble=0,p.wobbleX=p.x+10*p.scalar,p.wobbleY=p.y+10*p.scalar,p.tiltSin=0,p.tiltCos=0,p.random=1):(p.wobble+=p.wobbleSpeed,p.wobbleX=p.x+10*p.scalar*Math.cos(p.wobble),p.wobbleY=p.y+10*p.scalar*Math.sin(p.wobble),p.tiltAngle+=.1,p.tiltSin=Math.sin(p.tiltAngle),p.tiltCos=Math.cos(p.tiltAngle),p.random=Math.random()+2);var B=p.tick++/p.totalTicks,D=p.x+p.random*p.tiltCos,R=p.y+p.random*p.tiltSin,z=p.wobbleX+p.random*p.tiltCos,Z=p.wobbleY+p.random*p.tiltSin;if(y.fillStyle="rgba("+p.color.r+", "+p.color.g+", "+p.color.b+", "+(1-B)+")",y.beginPath(),o&&p.shape.type==="path"&&typeof p.shape.path=="string"&&Array.isArray(p.shape.matrix))y.fill(ee(p.shape.path,p.shape.matrix,p.x,p.y,Math.abs(z-D)*.1,Math.abs(Z-R)*.1,Math.PI/10*p.wobble));else if(p.shape.type==="bitmap"){var F=Math.PI/10*p.wobble,Y=Math.abs(z-D)*.1,J=Math.abs(Z-R)*.1,se=p.shape.bitmap.width*p.scalar,ae=p.shape.bitmap.height*p.scalar,oe=new DOMMatrix([Math.cos(F)*Y,Math.sin(F)*Y,-Math.sin(F)*J,Math.cos(F)*J,p.x,p.y]);oe.multiplySelf(new DOMMatrix(p.shape.matrix));var ue=y.createPattern(f.transform(p.shape.bitmap),"no-repeat");ue.setTransform(oe),y.globalAlpha=1-B,y.fillStyle=ue,y.fillRect(p.x-se/2,p.y-ae/2,se,ae),y.globalAlpha=1}else if(p.shape==="circle")y.ellipse?y.ellipse(p.x,p.y,Math.abs(z-D)*p.ovalScalar,Math.abs(Z-R)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI):P(y,p.x,p.y,Math.abs(z-D)*p.ovalScalar,Math.abs(Z-R)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI);else if(p.shape==="star")for(var re=Math.PI/2*3,ge=4*p.scalar,ye=8*p.scalar,be=p.x,ve=p.y,Be=5,Se=Math.PI/Be;Be--;)be=p.x+Math.cos(re)*ye,ve=p.y+Math.sin(re)*ye,y.lineTo(be,ve),re+=Se,be=p.x+Math.cos(re)*ge,ve=p.y+Math.sin(re)*ge,y.lineTo(be,ve),re+=Se;else y.moveTo(Math.floor(p.x),Math.floor(p.y)),y.lineTo(Math.floor(p.wobbleX),Math.floor(R)),y.lineTo(Math.floor(z),Math.floor(Z)),y.lineTo(Math.floor(D),Math.floor(p.wobbleY));return y.closePath(),y.fill(),p.tick<p.totalTicks}function G(y,p,B,D,R){var z=p.slice(),Z=y.getContext("2d"),F,Y,J=a(function(se){function ae(){F=Y=null,Z.clearRect(0,0,D.width,D.height),f.clear(),R(),se()}function oe(){r&&!(D.width===n.width&&D.height===n.height)&&(D.width=y.width=n.width,D.height=y.height=n.height),!D.width&&!D.height&&(B(y),D.width=y.width,D.height=y.height),Z.clearRect(0,0,D.width,D.height),z=z.filter(function(ue){return q(Z,ue)}),z.length?F=h.frame(oe):ae()}F=h.frame(oe),Y=ae});return{addFettis:function(se){return z=z.concat(se),J},canvas:y,promise:J,reset:function(){F&&h.cancel(F),Y&&Y()}}}function C(y,p){var B=!y,D=!!T(p||{},"resize"),R=!1,z=T(p,"disableForReducedMotion",Boolean),Z=l&&!!T(p||{},"useWorker"),F=Z?b():null,Y=B?I:L,J=y&&F?!!y.__confetti_initialized:!1,se=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ae;function oe(re,ge,ye){for(var be=T(re,"particleCount",H),ve=T(re,"angle",Number),Be=T(re,"spread",Number),Se=T(re,"startVelocity",Number),dt=T(re,"decay",Number),Vt=T(re,"gravity",Number),ft=T(re,"drift",Number),rt=T(re,"colors",O),Nt=T(re,"ticks",Number),Bt=T(re,"shapes"),Ye=T(re,"scalar"),Ze=!!T(re,"flat"),Ge=k(re),nt=be,mt=[],ht=y.width*Ge.x,pt=y.height*Ge.y;nt--;)mt.push(N({x:ht,y:pt,angle:ve,spread:Be,startVelocity:Se,color:rt[nt%rt.length],shape:Bt[A(0,Bt.length)],ticks:Nt,decay:dt,gravity:Vt,drift:ft,scalar:Ye,flat:Ze}));return ae?ae.addFettis(mt):(ae=G(y,mt,Y,ge,ye),ae.promise)}function ue(re){var ge=z||T(re,"disableForReducedMotion",Boolean),ye=T(re,"zIndex",Number);if(ge&&se)return a(function(Se){Se()});B&&ae?y=ae.canvas:B&&!y&&(y=U(ye),document.body.appendChild(y)),D&&!J&&Y(y);var be={width:y.width,height:y.height};F&&!J&&F.init(y),J=!0,F&&(y.__confetti_initialized=!0);function ve(){if(F){var Se={getBoundingClientRect:function(){if(!B)return y.getBoundingClientRect()}};Y(Se),F.postMessage({resize:{width:Se.width,height:Se.height}});return}be.width=be.height=null}function Be(){ae=null,D&&(R=!1,e.removeEventListener("resize",ve)),B&&y&&(document.body.contains(y)&&document.body.removeChild(y),y=null,J=!1)}return D&&!R&&(R=!0,e.addEventListener("resize",ve,!1)),F?F.fire(re,be,Be):oe(re,be,Be)}return ue.reset=function(){F&&F.reset(),ae&&ae.reset()},ue}var K;function j(){return K||(K=C(null,{useWorker:!0,resize:!0})),K}function ee(y,p,B,D,R,z,Z){var F=new Path2D(y),Y=new Path2D;Y.addPath(F,new DOMMatrix(p));var J=new Path2D;return J.addPath(Y,new DOMMatrix([Math.cos(Z)*R,Math.sin(Z)*R,-Math.sin(Z)*z,Math.cos(Z)*z,B,D])),J}function ne(y){if(!o)throw new Error("path confetti are not supported in this browser");var p,B;typeof y=="string"?p=y:(p=y.path,B=y.matrix);var D=new Path2D(p),R=document.createElement("canvas"),z=R.getContext("2d");if(!B){for(var Z=1e3,F=Z,Y=Z,J=0,se=0,ae,oe,ue=0;ue<Z;ue+=2)for(var re=0;re<Z;re+=2)z.isPointInPath(D,ue,re,"nonzero")&&(F=Math.min(F,ue),Y=Math.min(Y,re),J=Math.max(J,ue),se=Math.max(se,re));ae=J-F,oe=se-Y;var ge=10,ye=Math.min(ge/ae,ge/oe);B=[ye,0,0,ye,-Math.round(ae/2+F)*ye,-Math.round(oe/2+Y)*ye]}return{type:"path",path:p,matrix:B}}function te(y){var p,B=1,D="#000000",R='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?p=y:(p=y.text,B="scalar"in y?y.scalar:B,R="fontFamily"in y?y.fontFamily:R,D="color"in y?y.color:D);var z=10*B,Z=""+z+"px "+R,F=new OffscreenCanvas(z,z),Y=F.getContext("2d");Y.font=Z;var J=Y.measureText(p),se=Math.ceil(J.actualBoundingBoxRight+J.actualBoundingBoxLeft),ae=Math.ceil(J.actualBoundingBoxAscent+J.actualBoundingBoxDescent),oe=2,ue=J.actualBoundingBoxLeft+oe,re=J.actualBoundingBoxAscent+oe;se+=oe+oe,ae+=oe+oe,F=new OffscreenCanvas(se,ae),Y=F.getContext("2d"),Y.font=Z,Y.fillStyle=D,Y.fillText(p,ue,re);var ge=1/B;return{type:"bitmap",bitmap:F.transferToImageBitmap(),matrix:[ge,0,0,ge,-se*ge/2,-ae*ge/2]}}t.exports=function(){return j().apply(this,arguments)},t.exports.reset=function(){j().reset()},t.exports.create=C,t.exports.shapeFromPath=ne,t.exports.shapeFromText=te})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),qt,!1);const Bs=qt.exports;qt.exports.create;function Br(s,e,t){const r=s.slice();return r[23]=e[t].profile,r[24]=e[t].status,r}function ji(s){let e;return{c(){e=S("🔍 Search")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function Ji(s){let e,t;return{c(){e=m("span"),t=S(`
						Checking membership...`),c(e,"class","loading-spinner svelte-165a6uh")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(M(e),M(t))}}}function qi(s){let e,t;return{c(){e=m("span"),t=S(`
						Searching...`),c(e,"class","loading-spinner svelte-165a6uh")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(M(e),M(t))}}}function Kr(s){let e,t,r;return{c(){e=m("div"),t=m("p"),r=S(s[5]),c(t,"class","text-red-700"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,l){x(n,e,l),i(e,t),i(t,r)},p(n,l){l&32&&V(r,n[5])},d(n){n&&M(e)}}}function Vi(s){let e;return{c(){e=m("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',c(e,"class","text-center py-8")},m(t,r){x(t,e,r)},p:Q,i:Q,o:Q,d(t){t&&M(e)}}}function Yi(s){let e;return{c(){e=m("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',c(e,"class","text-center py-8")},m(t,r){x(t,e,r)},p:Q,i:Q,o:Q,d(t){t&&M(e)}}}function Zi(s){let e,t,r,n=pe(s[8]),l=[];for(let d=0;d<n.length;d+=1)l[d]=Wr(Br(s,n,d));const o=d=>fe(l[d],1,1,()=>{l[d]=null});let u=s[6]&&Hr(s);return{c(){e=m("div");for(let d=0;d<l.length;d+=1)l[d].c();t=w(),u&&u.c(),c(e,"class","space-y-4")},m(d,a){x(d,e,a);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);i(e,t),u&&u.m(e,null),r=!0},p(d,a){if(a&6530){n=pe(d[8]);let f;for(f=0;f<n.length;f+=1){const h=Br(d,n,f);l[f]?(l[f].p(h,a),ie(l[f],1)):(l[f]=Wr(h),l[f].c(),ie(l[f],1),l[f].m(e,t))}for(Ot(),f=n.length;f<l.length;f+=1)o(f);Dt()}d[6]?u?u.p(d,a):(u=Hr(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(d){if(!r){for(let a=0;a<n.length;a+=1)ie(l[a]);r=!0}},o(d){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)fe(l[a]);r=!1},d(d){d&&M(e),Ve(l,d),u&&u.d()}}}function Gi(s){let e;return{c(){e=m("div"),e.innerHTML='<div class="loading-spinner mx-auto mb-4 svelte-165a6uh"></div> <p class="text-slate-600">Checking membership status...</p>',c(e,"class","text-center py-8")},m(t,r){x(t,e,r)},p:Q,i:Q,o:Q,d(t){t&&M(e)}}}function Wr(s){let e,t;return e=new Fi({props:{profile:s[23],isSelected:s[1].has(s[23].did),onSelect:s[11],statusTag:s[24],clickable:!0,onAddToList:s[12],isAddingToList:s[7].has(s[23].did)}}),{c(){Oe(e.$$.fragment)},m(r,n){xe(e,r,n),t=!0},p(r,n){const l={};n&256&&(l.profile=r[23]),n&258&&(l.isSelected=r[1].has(r[23].did)),n&256&&(l.statusTag=r[24]),n&384&&(l.isAddingToList=r[7].has(r[23].did)),e.$set(l)},i(r){t||(ie(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Ee(e,r)}}}function Hr(s){let e,t,r,n;function l(d,a){return d[3]?Xi:$i}let o=l(s),u=o(s);return{c(){e=m("div"),t=m("button"),u.c(),t.disabled=s[3],c(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","text-center pt-4 border-t border-gray-200")},m(d,a){x(d,e,a),i(e,t),u.m(t,null),r||(n=le(t,"click",s[10]),r=!0)},p(d,a){o!==(o=l(d))&&(u.d(1),u=o(d),u&&(u.c(),u.m(t,null))),a&8&&(t.disabled=d[3])},d(d){d&&M(e),u.d(),r=!1,n()}}}function $i(s){let e;return{c(){e=S("Load More Results")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function Xi(s){let e,t;return{c(){e=m("span"),t=S(`
								Loading...`),c(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(M(e),M(t))}}}function Qi(s){let e,t,r,n,l,o,u,d,a,f,h,b,g,_,v,T,H,A;function W(P,N){return P[3]?qi:P[4]?Ji:ji}let O=W(s),E=O(s),k=s[5]&&Kr(s);const I=[Gi,Zi,Yi,Vi],L=[];function U(P,N){return P[4]?0:P[0].length>0?1:P[2]&&!P[3]?2:P[2]?-1:3}return~(_=U(s))&&(v=L[_]=I[_](s)),{c(){e=m("div"),t=m("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',r=w(),n=m("div"),l=m("form"),o=m("div"),u=m("label"),u.textContent="Search for:",d=w(),a=m("input"),f=w(),h=m("button"),E.c(),b=w(),k&&k.c(),g=w(),v&&v.c(),c(t,"class","p-6 border-b border-gray-200"),c(u,"for","search-input"),c(u,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),c(a,"id","search-input"),c(a,"type","text"),c(a,"placeholder","e.g., belge, artist, developer..."),c(a,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),a.required=!0,c(h,"type","submit"),h.disabled=s[3],c(h,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(o,"class","flex gap-4 items-center flex-wrap"),c(l,"class","mb-6"),c(n,"id","profile-search-container"),c(n,"class","p-6"),c(e,"class","bg-white rounded-lg shadow-sm border border-gray-200"),c(e,"id","profile-search")},m(P,N){x(P,e,N),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(o,u),i(o,d),i(o,a),Ce(a,s[2]),i(o,f),i(o,h),E.m(h,null),i(n,b),k&&k.m(n,null),i(n,g),~_&&L[_].m(n,null),T=!0,H||(A=[le(a,"input",s[16]),le(l,"submit",kn(s[9]))],H=!0)},p(P,[N]){N&4&&a.value!==P[2]&&Ce(a,P[2]),O!==(O=W(P))&&(E.d(1),E=O(P),E&&(E.c(),E.m(h,null))),(!T||N&8)&&(h.disabled=P[3]),P[5]?k?k.p(P,N):(k=Kr(P),k.c(),k.m(n,g)):k&&(k.d(1),k=null);let q=_;_=U(P),_===q?~_&&L[_].p(P,N):(v&&(Ot(),fe(L[q],1,1,()=>{L[q]=null}),Dt()),~_?(v=L[_],v?v.p(P,N):(v=L[_]=I[_](P),v.c()),ie(v,1),v.m(n,null)):v=null)},i(P){T||(ie(v),T=!0)},o(P){fe(v),T=!1},d(P){P&&M(e),E.d(),k&&k.d(),~_&&L[_].d(),H=!1,Ae(A)}}}function eo(s,e,t){let r,n,l;Re(s,qe,L=>t(18,n=L)),Re(s,me,L=>t(15,l=L));let o="",u=[],d=!1,a=!1,f="",h=new Set,b=null,g=!1,_=new Set;async function v(){if(!(!o.trim()||!n.session)){t(3,d=!0),t(4,a=!1),t(5,f=""),t(0,u=[]),h.clear(),b=null,t(6,g=!1);try{const L=await Me.searchProfiles(n.session,o,n.authType);t(4,a=!0);const U=await k(L.actors||[]);t(0,u=U),b=L.cursor,t(6,g=!!L.cursor)}catch(L){t(5,f=L.message||"Failed to search profiles")}finally{t(3,d=!1),t(4,a=!1)}}}async function T(){if(!(!g||d||!n.session)){t(3,d=!0),t(4,a=!1),t(5,f="");try{const L=await Me.searchProfiles(n.session,o,n.authType,25,b);t(4,a=!0);const U=await k(L.actors||[]);t(0,u=[...u,...U]),b=L.cursor,t(6,g=!!L.cursor)}catch(L){t(5,f=L.message||"Failed to load more profiles")}finally{t(3,d=!1),t(4,a=!1)}}}function H(L){h.has(L.did)?h.delete(L.did):h.add(L.did),t(1,h)}let A=null,W=!0;async function O(L){if(!(!n.session||!l.selectedList||_.has(L.did))){_.add(L.did),t(7,_);try{await Me.addToList(n.session,L.did,l.selectedList.uri),await me.fetchAndAddProfile(n.session,L.did),E()}catch(U){console.error("Failed to add profile to list:",U)}finally{_.delete(L.did),t(7,_)}}}function E(){Bs({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Bs({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Bs({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}async function k(L){if(!L.length||!l.selectedList)return L;const U=await me.getAllListMemberDids(n.session,n.authType);return L.map(N=>({...N,_isInList:U.has(N.did)}))}function I(){o=this.value,t(2,o),t(15,l),t(14,W),t(13,A),t(1,h)}return s.$$.update=()=>{s.$$.dirty&57346&&l.selectedList&&(!W&&A&&A!==l.selectedList.uri&&(t(2,o=""),t(0,u=[]),h.clear(),b=null,t(6,g=!1),t(5,f="")),t(13,A=l.selectedList.uri),t(14,W=!1)),s.$$.dirty&32769&&t(8,r=u.map(L=>({profile:L,status:L._isInList||l.listMembers.includes(L.did)?"Already in list":"New candidate"})))},[u,h,o,d,a,f,g,_,r,v,T,H,O,A,W,l,I]}class to extends Ne{constructor(e){super(),De(this,e,eo,Qi,Pe,{})}}function Ur(s,e,t){const r=s.slice();return r[15]=e[t],r}function zr(s,e,t){const r=s.slice();return r[18]=e[t],r}function Fr(s){let e,t=s[2].selectedList.description+"",r;return{c(){e=m("p"),r=S(t),c(e,"class","text-slate-600 mt-1")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l&4&&t!==(t=n[2].selectedList.description+"")&&V(r,t)},d(n){n&&M(e)}}}function jr(s){let e,t,r,n,l,o,u,d,a,f=s[4].length.toLocaleString()+"",h,b,g=s[0].totalMembers.toLocaleString()+"",_,v,T,H,A,W,O;return{c(){e=m("div"),t=m("div"),r=m("div"),n=w(),l=m("div"),o=m("div"),o.textContent="Calculating comprehensive statistics...",u=w(),d=m("div"),a=S("Processing "),h=S(f),b=S(" of "),_=S(g),v=S(`
						members (`),T=S(s[3]),H=S("%)"),A=w(),W=m("div"),O=m("div"),c(r,"class","loading-spinner svelte-1myfg8v"),c(o,"class","text-blue-700 font-medium"),c(d,"class","text-blue-600 text-sm"),c(t,"class","flex items-center justify-center space-x-3"),c(O,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),ce(O,"width",s[3]+"%"),c(W,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),c(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(E,k){x(E,e,k),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),i(l,d),i(d,a),i(d,h),i(d,b),i(d,_),i(d,v),i(d,T),i(d,H),i(e,A),i(e,W),i(W,O)},p(E,k){k&16&&f!==(f=E[4].length.toLocaleString()+"")&&V(h,f),k&1&&g!==(g=E[0].totalMembers.toLocaleString()+"")&&V(_,g),k&8&&V(T,E[3]),k&8&&ce(O,"width",E[3]+"%")},d(E){E&&M(e)}}}function so(s){let e,t,r,n,l,o=s[0].avgBioLength+"",u,d,a,f,h,b,g,_=s[0].accountsWithBios.toLocaleString()+"",v,T,H=s[0].totalMembers.toLocaleString()+"",A,W,O,E,k,I,L=s[0].accountsWithDisplayNames.toLocaleString()+"",U,P,N=s[0].totalMembers.toLocaleString()+"",q,G,C=s[0].mostCommonWords.length>0&&Jr(s);return{c(){e=m("div"),t=m("div"),r=m("span"),r.textContent="Average bio length:",n=w(),l=m("span"),u=S(o),d=S(" characters"),a=w(),f=m("div"),h=m("span"),h.textContent="Bios with content:",b=w(),g=m("span"),v=S(_),T=S(" / "),A=S(H),W=w(),O=m("div"),E=m("span"),E.textContent="Display names:",k=w(),I=m("span"),U=S(L),P=S(" / "),q=S(N),G=w(),C&&C.c(),c(r,"class","text-gray-600"),c(l,"class","font-medium"),c(t,"class","flex justify-between text-sm"),c(h,"class","text-gray-600"),c(g,"class","font-medium"),c(f,"class","flex justify-between text-sm"),c(E,"class","text-gray-600"),c(I,"class","font-medium"),c(O,"class","flex justify-between text-sm"),c(e,"class","space-y-2")},m(K,j){x(K,e,j),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,a),i(e,f),i(f,h),i(f,b),i(f,g),i(g,v),i(g,T),i(g,A),i(e,W),i(e,O),i(O,E),i(O,k),i(O,I),i(I,U),i(I,P),i(I,q),i(e,G),C&&C.m(e,null)},p(K,j){j&1&&o!==(o=K[0].avgBioLength+"")&&V(u,o),j&1&&_!==(_=K[0].accountsWithBios.toLocaleString()+"")&&V(v,_),j&1&&H!==(H=K[0].totalMembers.toLocaleString()+"")&&V(A,H),j&1&&L!==(L=K[0].accountsWithDisplayNames.toLocaleString()+"")&&V(U,L),j&1&&N!==(N=K[0].totalMembers.toLocaleString()+"")&&V(q,N),K[0].mostCommonWords.length>0?C?C.p(K,j):(C=Jr(K),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},d(K){K&&M(e),C&&C.d()}}}function ro(s){let e;return{c(){e=m("div"),e.textContent="Calculating comprehensive bio statistics...",c(e,"class","text-gray-500 text-sm")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function Jr(s){let e,t,r,n,l=pe(s[0].mostCommonWords),o=[];for(let u=0;u<l.length;u+=1)o[u]=qr(zr(s,l,u));return{c(){e=m("div"),t=m("div"),t.textContent="Most common words:",r=w(),n=m("div");for(let u=0;u<o.length;u+=1)o[u].c();c(t,"class","text-xs text-gray-500 mb-2"),c(n,"class","flex flex-wrap gap-1"),c(e,"class","mt-3")},m(u,d){x(u,e,d),i(e,t),i(e,r),i(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(u,d){if(d&1){l=pe(u[0].mostCommonWords);let a;for(a=0;a<l.length;a+=1){const f=zr(u,l,a);o[a]?o[a].p(f,d):(o[a]=qr(f),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(u){u&&M(e),Ve(o,u)}}}function qr(s){let e,t=s[18].word+"",r,n,l=s[18].count+"",o,u;return{c(){e=m("span"),r=S(t),n=S(" ("),o=S(l),u=S(`)
									`),c(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(d,a){x(d,e,a),i(e,r),i(e,n),i(e,o),i(e,u)},p(d,a){a&1&&t!==(t=d[18].word+"")&&V(r,t),a&1&&l!==(l=d[18].count+"")&&V(o,l)},d(d){d&&M(e)}}}function no(s){let e,t,r,n,l,o=s[0].avgHandleLength+"",u,d,a,f=s[0].topDomains.length>0&&Vr(s);return{c(){e=m("div"),t=m("div"),r=m("span"),r.textContent="Average handle length:",n=w(),l=m("span"),u=S(o),d=S(" characters"),a=w(),f&&f.c(),c(r,"class","text-gray-600"),c(l,"class","font-medium"),c(t,"class","flex justify-between text-sm"),c(e,"class","space-y-2")},m(h,b){x(h,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,a),f&&f.m(e,null)},p(h,b){b&1&&o!==(o=h[0].avgHandleLength+"")&&V(u,o),h[0].topDomains.length>0?f?f.p(h,b):(f=Vr(h),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(h){h&&M(e),f&&f.d()}}}function lo(s){let e;return{c(){e=m("div"),e.textContent="Calculating handle statistics...",c(e,"class","text-gray-500 text-sm")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function Vr(s){let e,t,r,n,l=pe(s[0].topDomains),o=[];for(let u=0;u<l.length;u+=1)o[u]=Yr(Ur(s,l,u));return{c(){e=m("div"),t=m("div"),t.textContent="Top domains:",r=w(),n=m("div");for(let u=0;u<o.length;u+=1)o[u].c();c(t,"class","text-xs text-gray-500 mb-2"),c(n,"class","space-y-1"),c(e,"class","mt-3")},m(u,d){x(u,e,d),i(e,t),i(e,r),i(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(u,d){if(d&1){l=pe(u[0].topDomains);let a;for(a=0;a<l.length;a+=1){const f=Ur(u,l,a);o[a]?o[a].p(f,d):(o[a]=Yr(f),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(u){u&&M(e),Ve(o,u)}}}function Yr(s){let e,t,r,n=s[15].domain+"",l,o,u,d=s[15].count+"",a,f,h;return{c(){e=m("div"),t=m("span"),r=S("."),l=S(n),o=w(),u=m("span"),a=S(d),f=S(" users"),h=w(),c(t,"class","font-medium"),c(u,"class","text-gray-600"),c(e,"class","flex justify-between text-xs")},m(b,g){x(b,e,g),i(e,t),i(t,r),i(t,l),i(e,o),i(e,u),i(u,a),i(u,f),i(e,h)},p(b,g){g&1&&n!==(n=b[15].domain+"")&&V(l,n),g&1&&d!==(d=b[15].count+"")&&V(a,d)},d(b){b&&M(e)}}}function io(s){let e;return{c(){e=S("Unknown")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function oo(s){let e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=S(e)},m(r,n){x(r,t,n)},p(r,n){n&4&&e!==(e=new Date(r[2].selectedList.createdAt).toLocaleDateString()+"")&&V(t,e)},d(r){r&&M(t)}}}function ao(s){var pr,gr,br;let e,t,r,n,l=(((pr=s[2].selectedList)==null?void 0:pr.name)||"List")+"",o,u,d,a,f,h=s[0].totalMembers.toLocaleString()+"",b,g,_,v,T,H,A,W,O,E,k,I,L=s[1]?"...":Lt(s[0].accountsWithBios,s[0].totalMembers)+"%",U,P,N,q,G,C=s[1]?"Calculating...":`${s[0].accountsWithBios.toLocaleString()} have bios`,K,j,ee,ne,te,y,p,B,D=s[1]?"...":Lt(s[0].verifiedAccounts,s[0].totalMembers)+"%",R,z,Z,F,Y,J=s[1]?"Calculating...":`${s[0].verifiedAccounts.toLocaleString()} verified accounts`,se,ae,oe,ue,re,ge,ye,be,ve=s[1]?"...":Lt(s[0].accountsWithAvatars,s[0].totalMembers)+"%",Be,Se,dt,Vt,ft,rt=s[1]?"Calculating...":`${s[0].accountsWithAvatars.toLocaleString()} have avatars`,Nt,Bt,Ye,Ze,Ge,nt,mt,ht,pt=s[0].listAge+"",xs,Vs,Yt,Ys,Zt,Zs,$e,lt,Gt,Gs,$s,it,$t,Xs,Qs,gt,Xt,er,We,bt,Qt,tr,es,ts=((gr=s[2].selectedList)==null?void 0:gr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",Es,sr,yt,ss,rr,Kt,nr,vt,rs,lr,Wt,ns=s[0].growthRate+"",As,ir,or,_t,ls,ar,is,os=s[1]?"Calculating...":`${s[0].recentAdditions} in last batch`,Ps,cr,as,wt,Ht,ur,ot,cs=s[1]?"Calculating...":"Refresh Stats",Ts,Is,dr,_e=((br=s[2].selectedList)==null?void 0:br.description)&&Fr(s),we=s[1]&&jr(s);function fr($,de){return $[1]?ro:so}let us=fr(s),He=us(s);function mr($,de){return $[1]?lo:no}let ds=mr(s),Ue=ds(s);function hr($,de){var Ut;return(Ut=$[2].selectedList)!=null&&Ut.createdAt?oo:io}let fs=hr(s),ze=fs(s);return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("h2"),o=S(l),u=w(),_e&&_e.c(),d=w(),a=m("div"),f=m("div"),b=S(h),g=w(),_=m("div"),_.textContent="Total Members",v=w(),we&&we.c(),T=w(),H=m("div"),A=m("div"),W=m("div"),O=m("div"),E=m("div"),E.textContent="📊 Engagement",k=w(),I=m("div"),U=S(L),P=w(),N=m("div"),N.textContent="💬",q=w(),G=m("div"),K=S(C),j=w(),ee=m("div"),ne=m("div"),te=m("div"),y=m("div"),y.textContent="✅ Verified",p=w(),B=m("div"),R=S(D),z=w(),Z=m("div"),Z.textContent="✓",F=w(),Y=m("div"),se=S(J),ae=w(),oe=m("div"),ue=m("div"),re=m("div"),ge=m("div"),ge.textContent="🖼️ Complete",ye=w(),be=m("div"),Be=S(ve),Se=w(),dt=m("div"),dt.textContent="👤",Vt=w(),ft=m("div"),Nt=S(rt),Bt=w(),Ye=m("div"),Ze=m("div"),Ge=m("div"),nt=m("div"),nt.textContent="📅 Age",mt=w(),ht=m("div"),xs=S(pt),Vs=w(),Yt=m("div"),Yt.textContent="📆",Ys=w(),Zt=m("div"),Zt.textContent="days old",Zs=w(),$e=m("div"),lt=m("div"),Gt=m("h3"),Gt.textContent="📝 Bio Analysis",Gs=w(),He.c(),$s=w(),it=m("div"),$t=m("h3"),$t.textContent="🔗 Handle Analysis",Xs=w(),Ue.c(),Qs=w(),gt=m("div"),Xt=m("h3"),Xt.textContent="📋 List Details",er=w(),We=m("div"),bt=m("div"),Qt=m("span"),Qt.textContent="Type:",tr=w(),es=m("span"),Es=S(ts),sr=w(),yt=m("div"),ss=m("span"),ss.textContent="Created:",rr=w(),Kt=m("span"),ze.c(),nr=w(),vt=m("div"),rs=m("span"),rs.textContent="Growth rate:",lr=w(),Wt=m("span"),As=S(ns),ir=S(" members/day"),or=w(),_t=m("div"),ls=m("span"),ls.textContent="Recent activity:",ar=w(),is=m("span"),Ps=S(os),cr=w(),as=m("div"),wt=m("div"),Ht=m("button"),Ht.textContent="View on Bluesky",ur=w(),ot=m("button"),Ts=S(cs),c(n,"class","text-xl font-bold text-slate-800"),c(f,"class","text-3xl font-bold text-blue-600"),c(_,"class","text-sm text-slate-500"),c(a,"class","text-right"),c(t,"class","flex items-center justify-between mb-6"),c(E,"class","text-blue-600 font-semibold text-sm"),c(I,"class","text-2xl font-bold text-blue-700"),c(N,"class","text-blue-400 text-3xl"),c(W,"class","flex items-center justify-between"),c(G,"class","text-xs text-blue-600 mt-1"),c(A,"class","bg-blue-50 p-4 rounded-lg"),c(y,"class","text-green-600 font-semibold text-sm"),c(B,"class","text-2xl font-bold text-green-700"),c(Z,"class","text-green-400 text-3xl"),c(ne,"class","flex items-center justify-between"),c(Y,"class","text-xs text-green-600 mt-1"),c(ee,"class","bg-green-50 p-4 rounded-lg"),c(ge,"class","text-purple-600 font-semibold text-sm"),c(be,"class","text-2xl font-bold text-purple-700"),c(dt,"class","text-purple-400 text-3xl"),c(ue,"class","flex items-center justify-between"),c(ft,"class","text-xs text-purple-600 mt-1"),c(oe,"class","bg-purple-50 p-4 rounded-lg"),c(nt,"class","text-yellow-600 font-semibold text-sm"),c(ht,"class","text-2xl font-bold text-yellow-700"),c(Yt,"class","text-yellow-400 text-3xl"),c(Ze,"class","flex items-center justify-between"),c(Zt,"class","text-xs text-yellow-600 mt-1"),c(Ye,"class","bg-yellow-50 p-4 rounded-lg"),c(H,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),c(Gt,"class","text-sm font-semibold text-gray-700 mb-3"),c(lt,"class","bg-gray-50 p-4 rounded-lg"),c($t,"class","text-sm font-semibold text-gray-700 mb-3"),c(it,"class","bg-gray-50 p-4 rounded-lg"),c(Xt,"class","text-sm font-semibold text-gray-700 mb-3"),c(Qt,"class","text-gray-600"),c(es,"class","font-medium"),c(bt,"class","flex justify-between text-sm"),c(ss,"class","text-gray-600"),c(Kt,"class","font-medium"),c(yt,"class","flex justify-between text-sm"),c(rs,"class","text-gray-600"),c(Wt,"class","font-medium"),c(vt,"class","flex justify-between text-sm"),c(ls,"class","text-gray-600"),c(is,"class","font-medium"),c(_t,"class","flex justify-between text-sm"),c(We,"class","space-y-2"),c(gt,"class","bg-gray-50 p-4 rounded-lg"),c($e,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),c(Ht,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),c(ot,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),ot.disabled=s[1],c(wt,"class","flex flex-wrap gap-2"),c(as,"class","mt-6 pt-4 border-t border-gray-200"),c(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),c(e,"id","list-statistics")},m($,de){x($,e,de),i(e,t),i(t,r),i(r,n),i(n,o),i(r,u),_e&&_e.m(r,null),i(t,d),i(t,a),i(a,f),i(f,b),i(a,g),i(a,_),i(e,v),we&&we.m(e,null),i(e,T),i(e,H),i(H,A),i(A,W),i(W,O),i(O,E),i(O,k),i(O,I),i(I,U),i(W,P),i(W,N),i(A,q),i(A,G),i(G,K),i(H,j),i(H,ee),i(ee,ne),i(ne,te),i(te,y),i(te,p),i(te,B),i(B,R),i(ne,z),i(ne,Z),i(ee,F),i(ee,Y),i(Y,se),i(H,ae),i(H,oe),i(oe,ue),i(ue,re),i(re,ge),i(re,ye),i(re,be),i(be,Be),i(ue,Se),i(ue,dt),i(oe,Vt),i(oe,ft),i(ft,Nt),i(H,Bt),i(H,Ye),i(Ye,Ze),i(Ze,Ge),i(Ge,nt),i(Ge,mt),i(Ge,ht),i(ht,xs),i(Ze,Vs),i(Ze,Yt),i(Ye,Ys),i(Ye,Zt),i(e,Zs),i(e,$e),i($e,lt),i(lt,Gt),i(lt,Gs),He.m(lt,null),i($e,$s),i($e,it),i(it,$t),i(it,Xs),Ue.m(it,null),i($e,Qs),i($e,gt),i(gt,Xt),i(gt,er),i(gt,We),i(We,bt),i(bt,Qt),i(bt,tr),i(bt,es),i(es,Es),i(We,sr),i(We,yt),i(yt,ss),i(yt,rr),i(yt,Kt),ze.m(Kt,null),i(We,nr),i(We,vt),i(vt,rs),i(vt,lr),i(vt,Wt),i(Wt,As),i(Wt,ir),i(We,or),i(We,_t),i(_t,ls),i(_t,ar),i(_t,is),i(is,Ps),i(e,cr),i(e,as),i(as,wt),i(wt,Ht),i(wt,ur),i(wt,ot),i(ot,Ts),Is||(dr=[le(Ht,"click",s[8]),le(ot,"click",s[6])],Is=!0)},p($,[de]){var Ut,yr,vr;de&4&&l!==(l=(((Ut=$[2].selectedList)==null?void 0:Ut.name)||"List")+"")&&V(o,l),(yr=$[2].selectedList)!=null&&yr.description?_e?_e.p($,de):(_e=Fr($),_e.c(),_e.m(r,null)):_e&&(_e.d(1),_e=null),de&1&&h!==(h=$[0].totalMembers.toLocaleString()+"")&&V(b,h),$[1]?we?we.p($,de):(we=jr($),we.c(),we.m(e,T)):we&&(we.d(1),we=null),de&3&&L!==(L=$[1]?"...":Lt($[0].accountsWithBios,$[0].totalMembers)+"%")&&V(U,L),de&3&&C!==(C=$[1]?"Calculating...":`${$[0].accountsWithBios.toLocaleString()} have bios`)&&V(K,C),de&3&&D!==(D=$[1]?"...":Lt($[0].verifiedAccounts,$[0].totalMembers)+"%")&&V(R,D),de&3&&J!==(J=$[1]?"Calculating...":`${$[0].verifiedAccounts.toLocaleString()} verified accounts`)&&V(se,J),de&3&&ve!==(ve=$[1]?"...":Lt($[0].accountsWithAvatars,$[0].totalMembers)+"%")&&V(Be,ve),de&3&&rt!==(rt=$[1]?"Calculating...":`${$[0].accountsWithAvatars.toLocaleString()} have avatars`)&&V(Nt,rt),de&1&&pt!==(pt=$[0].listAge+"")&&V(xs,pt),us===(us=fr($))&&He?He.p($,de):(He.d(1),He=us($),He&&(He.c(),He.m(lt,null))),ds===(ds=mr($))&&Ue?Ue.p($,de):(Ue.d(1),Ue=ds($),Ue&&(Ue.c(),Ue.m(it,null))),de&4&&ts!==(ts=((vr=$[2].selectedList)==null?void 0:vr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&V(Es,ts),fs===(fs=hr($))&&ze?ze.p($,de):(ze.d(1),ze=fs($),ze&&(ze.c(),ze.m(Kt,null))),de&1&&ns!==(ns=$[0].growthRate+"")&&V(As,ns),de&3&&os!==(os=$[1]?"Calculating...":`${$[0].recentAdditions} in last batch`)&&V(Ps,os),de&2&&cs!==(cs=$[1]?"Calculating...":"Refresh Stats")&&V(Ts,cs),de&2&&(ot.disabled=$[1])},i:Q,o:Q,d($){$&&M(e),_e&&_e.d(),we&&we.d(),He.d(),Ue.d(),ze.d(),Is=!1,Ae(dr)}}}function Lt(s,e){return e===0?0:Math.round(s/e*100)}function co(s,e,t){let r,n;Re(s,me,A=>t(2,r=A)),Re(s,qe,A=>t(5,n=A));let l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,u=0,d=[],a=null,f=!1,h=null;function b(){t(0,l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,u=0),t(4,d=[])}function g(){var k,I;r.listMemberProfiles;const A=((k=r.selectedList)==null?void 0:k.listItemCount)||0,W=(I=r.selectedList)==null?void 0:I.createdAt,O=W?Math.floor((Date.now()-new Date(W).getTime())/(1e3*60*60*24)):0,E=O>0?Math.round(A/O):0;t(0,l={...l,totalMembers:A,listAge:O,growthRate:E})}async function _(){if(!n.session||!r.selectedList||o)return;const A=Date.now();a=A,t(1,o=!0),t(3,u=0),t(4,d=[]);try{const W=r.selectedList.listItemCount||0;if(W===0){v([]),f=!0;return}let O=null,E=0;const k=100;do{E++,t(3,u=Math.round(d.length/W*100));const I=await Me.getListMembers(n.session,r.selectedList.uri,n.authType,k,O);if(a!==A)return;t(4,d=[...d,...I.profiles]),O=I.cursor,t(3,u=Math.round(d.length/W*100))}while(O&&d.length<W);if(a!==A)return;v(d),f=!0}catch(W){console.error("Error loading all members for statistics:",W),g(),f=!0}finally{a===A&&(t(1,o=!1),t(3,u=0))}}function v(A){var D;const W=A.length,O=A.filter(R=>R.verified).length,E=A.filter(R=>R.avatar).length,k=A.filter(R=>R.description&&R.description.trim().length>0).length,I=A.filter(R=>R.displayName&&R.displayName.trim().length>0).length,L=A.map(R=>R.description||"").filter(R=>R.trim().length>0),U=L.length>0?Math.round(L.reduce((R,z)=>R+z.length,0)/L.length):0,P=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],N=L.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(R=>R.length>2&&!P.includes(R)),q={};N.forEach(R=>{q[R]=(q[R]||0)+1});const G=Object.entries(q).sort(([,R],[,z])=>z-R).slice(0,5).map(([R,z])=>({word:R,count:z})),C=A.map(R=>R.handle||"").filter(R=>R.length>0),K=C.length>0?Math.round(C.reduce((R,z)=>R+z.length,0)/C.length):0,j=C.map(R=>{const z=R.split(".");return z.length>1?z[z.length-1]:null}).filter(R=>R&&R.length>0),ee={};j.forEach(R=>{ee[R]=(ee[R]||0)+1});const ne=Object.entries(ee).sort(([,R],[,z])=>z-R).slice(0,3).map(([R,z])=>({domain:R,count:z})),te=(D=r.selectedList)==null?void 0:D.createdAt,y=te?Math.floor((Date.now()-new Date(te).getTime())/(1e3*60*60*24)):0,p=y>0?Math.round(W/y):0,B=Math.min(25,A.length);t(0,l={totalMembers:W,recentAdditions:B,verifiedAccounts:O,accountsWithAvatars:E,accountsWithBios:k,avgBioLength:U,mostCommonWords:G,listAge:y,accountsWithDisplayNames:I,avgHandleLength:K,topDomains:ne,growthRate:p})}function T(){o||(f=!1,_())}const H=()=>{var W,O,E;const A=(W=r.selectedList)==null?void 0:W.uri;if(A){const k=A.split("/"),I=k[k.length-1],L=`https://bsky.app/profile/${(O=n.session)==null?void 0:O.handle}/lists/${I}`;window.open(L,"_blank")}else window.open(`https://bsky.app/profile/${(E=n.session)==null?void 0:E.handle}/lists`,"_blank")};return s.$$.update=()=>{var A,W;s.$$.dirty&4&&r.selectedList&&g(),s.$$.dirty&7&&((A=r.selectedList)==null?void 0:A.listItemCount)!==l.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(W=r.selectedList)==null?void 0:W.listItemCount),console.log("Current stats.totalMembers:",l.totalMembers),g()),s.$$.dirty&132&&!r.selectedList&&h!==null&&(t(7,h=null),f=!1,b()),s.$$.dirty&134&&r.selectedList&&r.selectedList.uri!==h&&!o&&(t(7,h=r.selectedList.uri),f=!1,b(),_())},[l,o,r,u,d,n,T,h,H]}class uo extends Ne{constructor(e){super(),De(this,e,co,ao,Pe,{})}}function Zr(s,e,t){const r=s.slice();return r[29]=e[t],r}function Gr(s,e,t){const r=s.slice();return r[35]=e[t],r}function $r(s,e,t){const r=s.slice();return r[32]=e[t],r}function Xr(s,e,t){const r=s.slice();return r[38]=e[t],r}function Qr(s,e,t){const r=s.slice();return r[38]=e[t],r}function en(s){let e,t,r,n,l,o,u=s[4].size+"",d,a,f,h;function b(v,T){return v[5]?mo:fo}let g=b(s),_=g(s);return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("button"),_.c(),l=w(),o=m("div"),d=S(u),a=S(" profiles selected"),n.disabled=s[5],c(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),c(r,"class","flex items-center gap-3"),c(o,"class","text-sm text-slate-600"),c(t,"class","flex items-center justify-between"),c(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm"),c(e,"id","action-bar")},m(v,T){x(v,e,T),i(e,t),i(t,r),i(r,n),_.m(n,null),i(t,l),i(t,o),i(o,d),i(o,a),f||(h=le(n,"click",s[14]),f=!0)},p(v,T){g===(g=b(v))&&_?_.p(v,T):(_.d(1),_=g(v),_&&(_.c(),_.m(n,null))),T[0]&32&&(n.disabled=v[5]),T[0]&16&&u!==(u=v[4].size+"")&&V(d,u)},d(v){v&&M(e),_.d(),f=!1,h()}}}function fo(s){let e,t=s[4].size+"",r,n;return{c(){e=S("Add "),r=S(t),n=S(" to List")},m(l,o){x(l,e,o),x(l,r,o),x(l,n,o)},p(l,o){o[0]&16&&t!==(t=l[4].size+"")&&V(r,t)},d(l){l&&(M(e),M(r),M(n))}}}function mo(s){let e,t;return{c(){e=m("span"),t=S(`
							Adding...`),c(e,"class","loading-spinner mr-2 svelte-srpbru")},m(r,n){x(r,e,n),x(r,t,n)},p:Q,d(r){r&&(M(e),M(t))}}}function tn(s){let e,t,r,n=s[6].success.length+"",l,o;return{c(){e=m("div"),t=m("p"),r=S("✅ Successfully added "),l=S(n),o=S(" profiles to your list!"),c(t,"class","text-green-700 font-medium"),c(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(u,d){x(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&64&&n!==(n=u[6].success.length+"")&&V(l,n)},d(u){u&&M(e)}}}function sn(s){let e,t,r,n=s[6].errors.length+"",l,o,u,d,a=pe(s[6].errors),f=[];for(let h=0;h<a.length;h+=1)f[h]=rn(Qr(s,a,h));return{c(){e=m("div"),t=m("p"),r=S("❌ Failed to add "),l=S(n),o=S(" profiles:"),u=w(),d=m("ul");for(let h=0;h<f.length;h+=1)f[h].c();c(t,"class","text-red-700 font-medium mb-2"),c(d,"class","text-red-600 text-sm space-y-1"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(h,b){x(h,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(d,null)},p(h,b){if(b[0]&64&&n!==(n=h[6].errors.length+"")&&V(l,n),b[0]&64){a=pe(h[6].errors);let g;for(g=0;g<a.length;g+=1){const _=Qr(h,a,g);f[g]?f[g].p(_,b):(f[g]=rn(_),f[g].c(),f[g].m(d,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},d(h){h&&M(e),Ve(f,h)}}}function rn(s){let e,t,r=s[38].error+"",n;return{c(){e=m("li"),t=S("• "),n=S(r)},m(l,o){x(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&64&&r!==(r=l[38].error+"")&&V(n,r)},d(l){l&&M(e)}}}function nn(s){let e,t,r,n=s[7].success.length+"",l,o;return{c(){e=m("div"),t=m("p"),r=S("🗑️ Successfully removed "),l=S(n),o=S(" profiles from your list!"),c(t,"class","text-blue-700 font-medium"),c(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(u,d){x(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&128&&n!==(n=u[7].success.length+"")&&V(l,n)},d(u){u&&M(e)}}}function ln(s){let e,t,r,n=s[7].errors.length+"",l,o,u,d,a=pe(s[7].errors),f=[];for(let h=0;h<a.length;h+=1)f[h]=on(Xr(s,a,h));return{c(){e=m("div"),t=m("p"),r=S("❌ Failed to remove "),l=S(n),o=S(" profiles:"),u=w(),d=m("ul");for(let h=0;h<f.length;h+=1)f[h].c();c(t,"class","text-red-700 font-medium mb-2"),c(d,"class","text-red-600 text-sm space-y-1"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(h,b){x(h,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(d,null)},p(h,b){if(b[0]&128&&n!==(n=h[7].errors.length+"")&&V(l,n),b[0]&128){a=pe(h[7].errors);let g;for(g=0;g<a.length;g+=1){const _=Xr(h,a,g);f[g]?f[g].p(_,b):(f[g]=on(_),f[g].c(),f[g].m(d,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},d(h){h&&M(e),Ve(f,h)}}}function on(s){let e,t,r=s[38].error+"",n;return{c(){e=m("li"),t=S("• "),n=S(r)},m(l,o){x(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&128&&r!==(r=l[38].error+"")&&V(n,r)},d(l){l&&M(e)}}}function ho(s){let e,t,r;function n(d,a){return d[9]?_o:d[1].listMemberProfiles.length>0?vo:yo}let l=n(s),o=l(s),u=s[10]>1&&fn(s);return{c(){e=m("div"),t=m("div"),o.c(),r=w(),u&&u.c(),c(t,"class","space-y-4 flex-1 overflow-y-auto"),c(e,"class","flex flex-col flex-1")},m(d,a){x(d,e,a),i(e,t),o.m(t,null),i(e,r),u&&u.m(e,null)},p(d,a){l===(l=n(d))&&o?o.p(d,a):(o.d(1),o=l(d),o&&(o.c(),o.m(t,null))),d[10]>1?u?u.p(d,a):(u=fn(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&M(e),o.d(),u&&u.d()}}}function po(s){let e;return{c(){e=m("div"),e.innerHTML='<div><div class="text-4xl mb-4">📝</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Members Yet</h3> <p class="text-slate-600">Your list is empty. Use the search to find and add profiles!</p></div>',c(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function go(s){let e,t,r,n,l,o,u,d;return{c(){e=m("div"),t=m("div"),r=m("p"),n=S(s[3]),l=w(),o=m("button"),o.textContent="Try again",c(r,"class","text-red-700 mb-4"),c(o,"class","text-red-600 hover:text-red-800 underline"),c(t,"class","text-center"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(a,f){x(a,e,f),i(e,t),i(t,r),i(r,n),i(t,l),i(t,o),u||(d=le(o,"click",s[12]),u=!0)},p(a,f){f[0]&8&&V(n,a[3])},d(a){a&&M(e),u=!1,d()}}}function bo(s){let e;return{c(){e=m("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-srpbru"></div> <p class="text-slate-600">Loading list members...</p></div>',c(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){x(t,e,r)},p:Q,d(t){t&&M(e)}}}function yo(s){let e,t,r=s[3]&&an(s),n=pe(s[1].listMembers.slice(0,100)),l=[];for(let o=0;o<n.length;o+=1)l[o]=cn(Gr(s,n,o));return{c(){r&&r.c(),e=w();for(let o=0;o<l.length;o+=1)l[o].c();t=st()},m(o,u){r&&r.m(o,u),x(o,e,u);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(o,u);x(o,t,u)},p(o,u){if(o[3]?r?r.p(o,u):(r=an(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0]&2){n=pe(o[1].listMembers.slice(0,100));let d;for(d=0;d<n.length;d+=1){const a=Gr(o,n,d);l[d]?l[d].p(a,u):(l[d]=cn(a),l[d].c(),l[d].m(t.parentNode,t))}for(;d<l.length;d+=1)l[d].d(1);l.length=n.length}},d(o){o&&(M(e),M(t)),r&&r.d(o),Ve(l,o)}}}function vo(s){let e,t=pe(s[1].listMemberProfiles),r=[];for(let n=0;n<t.length;n+=1)r[n]=dn($r(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);x(n,e,l)},p(n,l){if(l[0]&34818){t=pe(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const u=$r(n,t,o);r[o]?r[o].p(u,l):(r[o]=dn(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&M(e),Ve(r,n)}}}function _o(s){let e,t,r,n,l,o,u;return{c(){e=m("div"),t=m("div"),r=w(),n=m("p"),l=S("Loading page "),o=S(s[8]),u=S("..."),c(t,"class","loading-spinner mx-auto mb-4 svelte-srpbru"),c(n,"class","text-slate-600"),c(e,"class","text-center py-8")},m(d,a){x(d,e,a),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u)},p(d,a){a[0]&256&&V(o,d[8])},d(d){d&&M(e)}}}function an(s){let e,t,r,n,l,o,u,d,a,f,h;return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("p"),n.textContent="⚠️ Profile loading issue",l=w(),o=m("p"),u=S(s[3]),d=w(),a=m("button"),a.textContent="Retry",c(n,"class","text-yellow-800 font-medium"),c(o,"class","text-yellow-700 text-sm mt-1"),c(a,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),c(t,"class","flex items-center justify-between"),c(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(b,g){x(b,e,g),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(o,u),i(t,d),i(t,a),f||(h=le(a,"click",s[23]),f=!0)},p(b,g){g[0]&8&&V(u,b[3])},d(b){b&&M(e),f=!1,h()}}}function cn(s){let e,t,r,n,l,o,u=s[35]+"",d,a,f,h;return{c(){e=m("div"),t=m("div"),r=m("div"),r.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=w(),l=m("div"),o=m("div"),d=S(u),a=w(),f=m("div"),f.textContent="Member of list",h=w(),c(r,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),c(o,"class","text-sm text-gray-600 font-mono text-xs break-all"),c(f,"class","text-xs text-gray-500"),c(l,"class","flex-1"),c(t,"class","flex items-center space-x-3"),c(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(b,g){x(b,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(o,d),i(l,a),i(l,f),i(e,h)},p(b,g){g[0]&2&&u!==(u=b[35]+"")&&V(d,u)},d(b){b&&M(e)}}}function un(s){let e,t=s[32].description+"",r;return{c(){e=m("p"),r=S(t),c(e,"class","text-xs text-gray-600 line-clamp-2 svelte-srpbru")},m(n,l){x(n,e,l),i(e,r)},p(n,l){l[0]&2&&t!==(t=n[32].description+"")&&V(r,t)},d(n){n&&M(e)}}}function wo(s){let e;return{c(){e=S("🗑️ Remove")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function So(s){let e,t;return{c(){e=m("span"),t=S(`
														Removing...`),c(e,"class","loading-spinner mr-1 svelte-srpbru")},m(r,n){x(r,e,n),x(r,t,n)},d(r){r&&(M(e),M(t))}}}function dn(s){let e,t,r,n,l,o,u,d,a,f,h,b,g=(s[32].displayName||s[32].handle)+"",_,v,T,H,A=s[32].handle+"",W,O,E,k,I,L,U,P,N,q,G,C,K,j,ee=s[32].description&&un(s);function ne(B,D){return D[0]&2&&(q=null),q==null&&(q=!!B[11].has(B[32].did)),q?So:wo}let te=ne(s,[-1,-1]),y=te(s);function p(){return s[22](s[32])}return{c(){e=m("div"),t=m("div"),r=m("div"),n=m("img"),d=w(),a=m("div"),f=m("a"),h=m("div"),b=m("h4"),_=S(g),v=w(),T=m("span"),H=S("@"),W=S(A),O=w(),E=_s("svg"),k=_s("path"),I=w(),ee&&ee.c(),U=w(),P=m("div"),N=m("button"),y.c(),C=w(),tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)||c(n,"src",l),c(n,"alt",o=s[32].displayName||s[32].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(b,"class","text-sm font-semibold text-gray-900 truncate"),c(T,"class","text-xs text-gray-600 truncate"),c(k,"stroke-linecap","round"),c(k,"stroke-linejoin","round"),c(k,"stroke-width","2"),c(k,"d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"),c(E,"class","w-3 h-3 text-gray-400"),c(E,"fill","none"),c(E,"stroke","currentColor"),c(E,"viewBox","0 0 24 24"),c(h,"class","flex items-center space-x-2 mb-1"),c(f,"href",L="https://bsky.app/profile/"+s[32].handle),c(f,"target","_blank"),c(f,"rel","noopener noreferrer"),c(f,"class","block hover:underline"),c(a,"class","flex-1 min-w-0"),N.disabled=G=s[11].has(s[32].did),c(N,"class","bg-red-100 hover:bg-red-200 text-red-700 border border-red-300 px-3 py-1.5 rounded text-xs font-medium cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"),c(N,"title","Remove from list"),c(P,"class","flex-shrink-0"),c(t,"class","flex items-center space-x-3"),c(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200")},m(B,D){x(B,e,D),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,f),i(f,h),i(h,b),i(b,_),i(h,v),i(h,T),i(T,H),i(T,W),i(h,O),i(h,E),i(E,k),i(f,I),ee&&ee.m(f,null),i(t,U),i(t,P),i(P,N),y.m(N,null),i(e,C),K||(j=le(N,"click",p),K=!0)},p(B,D){s=B,D[0]&2&&!tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)&&c(n,"src",l),D[0]&2&&o!==(o=s[32].displayName||s[32].handle)&&c(n,"alt",o),D[0]&2&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),D[0]&2&&g!==(g=(s[32].displayName||s[32].handle)+"")&&V(_,g),D[0]&2&&A!==(A=s[32].handle+"")&&V(W,A),s[32].description?ee?ee.p(s,D):(ee=un(s),ee.c(),ee.m(f,null)):ee&&(ee.d(1),ee=null),D[0]&2&&L!==(L="https://bsky.app/profile/"+s[32].handle)&&c(f,"href",L),te!==(te=ne(s,D))&&(y.d(1),y=te(s),y&&(y.c(),y.m(N,null))),D[0]&2&&G!==(G=s[11].has(s[32].did))&&(N.disabled=G)},d(B){B&&M(e),ee&&ee.d(),y.d(),K=!1,j()}}}function fn(s){let e,t,r,n,l,o,u,d,a,f,h,b,g,_,v,T,H,A,W,O,E,k,I,L=s[9]&&s[8]>1&&mn(),U=pe(Array.from({length:Math.min(5,s[10])},s[24])),P=[];for(let q=0;q<U.length;q+=1)P[q]=hn(Zr(s,U,q));let N=s[9]&&s[8]<s[10]&&pn();return{c(){e=m("div"),t=m("div"),r=m("div"),n=S("Page "),l=S(s[8]),o=S(" of "),u=S(s[10]),d=S(" ("),a=S(s[0]),f=S(" total members)"),h=w(),b=m("div"),g=m("button"),L&&L.c(),_=S(`
											Previous`),T=w(),H=m("div");for(let q=0;q<P.length;q+=1)P[q].c();A=w(),W=m("button"),O=S(`Next
											`),N&&N.c(),c(r,"class","text-sm text-gray-600"),g.disabled=v=s[8]===1||s[9],c(g,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),c(H,"class","flex items-center space-x-1"),W.disabled=E=s[8]===s[10]||s[9],c(W,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),c(b,"class","flex items-center space-x-2"),c(t,"class","flex items-center justify-between"),c(e,"class","mt-6 pt-4 border-t border-gray-200")},m(q,G){x(q,e,G),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(r,u),i(r,d),i(r,a),i(r,f),i(t,h),i(t,b),i(b,g),L&&L.m(g,null),i(g,_),i(b,T),i(b,H);for(let C=0;C<P.length;C+=1)P[C]&&P[C].m(H,null);i(b,A),i(b,W),i(W,O),N&&N.m(W,null),k||(I=[le(g,"click",s[18]),le(W,"click",s[17])],k=!0)},p(q,G){if(G[0]&256&&V(l,q[8]),G[0]&1024&&V(u,q[10]),G[0]&1&&V(a,q[0]),q[9]&&q[8]>1?L||(L=mn(),L.c(),L.m(g,_)):L&&(L.d(1),L=null),G[0]&768&&v!==(v=q[8]===1||q[9])&&(g.disabled=v),G[0]&67328){U=pe(Array.from({length:Math.min(5,q[10])},q[24]));let C;for(C=0;C<U.length;C+=1){const K=Zr(q,U,C);P[C]?P[C].p(K,G):(P[C]=hn(K),P[C].c(),P[C].m(H,null))}for(;C<P.length;C+=1)P[C].d(1);P.length=U.length}q[9]&&q[8]<q[10]?N||(N=pn(),N.c(),N.m(W,null)):N&&(N.d(1),N=null),G[0]&1792&&E!==(E=q[8]===q[10]||q[9])&&(W.disabled=E)},d(q){q&&M(e),L&&L.d(),Ve(P,q),N&&N.d(),k=!1,Ae(I)}}}function mn(s){let e;return{c(){e=m("span"),c(e,"class","loading-spinner mr-1 svelte-srpbru")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function hn(s){let e,t=s[29]+"",r,n,l,o,u;function d(){return s[25](s[29])}return{c(){e=m("button"),r=S(t),n=w(),e.disabled=s[9],c(e,"class",l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(a,f){x(a,e,f),i(e,r),i(e,n),o||(u=le(e,"click",d),o=!0)},p(a,f){s=a,f[0]&1280&&t!==(t=s[29]+"")&&V(r,t),f[0]&512&&(e.disabled=s[9]),f[0]&1280&&l!==(l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&c(e,"class",l)},d(a){a&&M(e),o=!1,u()}}}function pn(s){let e;return{c(){e=m("span"),c(e,"class","loading-spinner ml-1 svelte-srpbru")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function ko(s){let e,t,r,n,l,o,u,d,a,f,h,b,g,_,v,T=(s[9]?"...":s[1].listMemberProfiles.length)+"",H,A,W,O,E,k,I,L,U,P,N=s[1].listMemberProfiles.length+"",q,G,C=s[1].listMembers.length+"",K,j,ee,ne,te,y;t=new uo({});let p=s[4].size>0&&en(s),B=s[6].success.length>0&&tn(s),D=s[6].errors.length>0&&sn(s),R=s[7].success.length>0&&nn(s),z=s[7].errors.length>0&&ln(s);function Z(J,se){return J[2]?bo:J[3]?go:J[1].listMembers.length===0?po:ho}let F=Z(s),Y=F(s);return te=new to({}),{c(){e=m("div"),Oe(t.$$.fragment),r=w(),p&&p.c(),n=w(),B&&B.c(),l=w(),D&&D.c(),o=w(),R&&R.c(),u=w(),z&&z.c(),d=w(),a=m("div"),f=m("div"),h=m("div"),b=m("h3"),b.textContent="Latest list members",g=w(),_=m("p"),v=S("Showing "),H=S(T),A=S(" of "),W=S(s[0]),O=S(`
					total members`),E=w(),k=m("div"),I=m("div"),L=S("Debug: isLoadingMembers="),U=S(s[2]),P=S(", profiles="),q=S(N),G=S(", members="),K=S(C),j=w(),Y.c(),ee=w(),ne=m("div"),Oe(te.$$.fragment),c(b,"class","text-lg font-semibold text-slate-800 mb-2"),c(_,"class","text-sm text-slate-600"),c(h,"class","p-6 border-b border-gray-200"),c(I,"class","text-xs text-gray-500 mb-2"),c(k,"class","p-6 flex flex-col flex-1"),c(f,"id","list-members-container"),c(f,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),c(a,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),c(a,"id","list-manager-layout"),c(e,"class","space-y-6 relative z-100"),c(e,"id","list-manager")},m(J,se){x(J,e,se),xe(t,e,null),i(e,r),p&&p.m(e,null),i(e,n),B&&B.m(e,null),i(e,l),D&&D.m(e,null),i(e,o),R&&R.m(e,null),i(e,u),z&&z.m(e,null),i(e,d),i(e,a),i(a,f),i(f,h),i(h,b),i(h,g),i(h,_),i(_,v),i(_,H),i(_,A),i(_,W),i(_,O),i(f,E),i(f,k),i(k,I),i(I,L),i(I,U),i(I,P),i(I,q),i(I,G),i(I,K),i(k,j),Y.m(k,null),i(a,ee),i(a,ne),xe(te,ne,null),y=!0},p(J,se){J[4].size>0?p?p.p(J,se):(p=en(J),p.c(),p.m(e,n)):p&&(p.d(1),p=null),J[6].success.length>0?B?B.p(J,se):(B=tn(J),B.c(),B.m(e,l)):B&&(B.d(1),B=null),J[6].errors.length>0?D?D.p(J,se):(D=sn(J),D.c(),D.m(e,o)):D&&(D.d(1),D=null),J[7].success.length>0?R?R.p(J,se):(R=nn(J),R.c(),R.m(e,u)):R&&(R.d(1),R=null),J[7].errors.length>0?z?z.p(J,se):(z=ln(J),z.c(),z.m(e,d)):z&&(z.d(1),z=null),(!y||se[0]&514)&&T!==(T=(J[9]?"...":J[1].listMemberProfiles.length)+"")&&V(H,T),(!y||se[0]&1)&&V(W,J[0]),(!y||se[0]&4)&&V(U,J[2]),(!y||se[0]&2)&&N!==(N=J[1].listMemberProfiles.length+"")&&V(q,N),(!y||se[0]&2)&&C!==(C=J[1].listMembers.length+"")&&V(K,C),F===(F=Z(J))&&Y?Y.p(J,se):(Y.d(1),Y=F(J),Y&&(Y.c(),Y.m(k,null)))},i(J){y||(ie(t.$$.fragment,J),ie(te.$$.fragment,J),y=!0)},o(J){fe(t.$$.fragment,J),fe(te.$$.fragment,J),y=!1},d(J){J&&M(e),Ee(t),p&&p.d(),B&&B.d(),D&&D.d(),R&&R.d(),z&&z.d(),Y.d(),Ee(te)}}}const gs=25;function Lo(s,e,t){let r,n;Re(s,me,C=>t(1,r=C)),Re(s,qe,C=>t(21,n=C));let l=!1,o="",u=new Set,d=!1,a={success:[],errors:[]},f=new Set,h={success:[],errors:[]},b=1,g=!1,_=!1,v=0,T=new Map,H=0,A=null;async function W(){if(!(!r.selectedList||!n.session||_)){t(19,_=!0),t(2,l=!0),t(3,o=""),t(8,b=1),T.clear();try{const C=await Me.getListInfo(n.session,r.selectedList.uri,n.authType),K={...r.selectedList,name:C.name,description:C.description,createdAt:C.createdAt,listItemCount:C.listItemCount};me.setSelectedList(K),t(0,H=C.listItemCount||0),t(10,v=Math.ceil(H/gs)),console.log("Total pages:",v,"Total count:",H),await O(1),me.setListLoading(!1)}catch(C){console.error("Error loading list members:",C),t(3,o=C.message||"Failed to load list members"),me.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,l=!1),t(19,_=!1),console.log("Final state - isLoadingMembers:",l,"isCurrentlyLoadingMembers:",_)}}}async function O(C){if(!(!n.session||!r.selectedList)){t(9,g=!0),t(8,b=C);try{let K=T.get(C-1);const j=await Me.getListMembers(n.session,r.selectedList.uri,n.authType,gs,K);console.log(`Fetched ${j.members.length} members for page ${C}`),console.log("Members received:",j.members),j.cursor&&T.set(C,j.cursor),j.members.length===0?(console.warn("No members returned from API for page",C),t(3,o="No member data received from API")):t(3,o="");const ee=j.profiles||[];console.log(`Using ${ee.length} profiles from API response for page ${C}`),console.log("Setting profiles in store:",ee.length),me.setListMembers(j.members),me.setListMemberProfiles(ee),console.log("Profiles set in store, current count:",r.listMemberProfiles.length)}catch(K){console.error("Error loading members page:",K),t(3,o=K.message||"Failed to load page"),me.setListMemberProfiles([])}finally{t(9,g=!1)}}}async function E(){if(u.size===0)return;t(5,d=!0),t(6,a={success:[],errors:[]});const C=Array.from(u);for(const K of C)try{await Me.addToList(n.session,K,r.selectedList.uri,n.authType),a.success.push(K),await me.fetchAndAddProfile(n.session,K,n.authType)}catch(j){a.errors.push({did:K,error:j.message})}u.clear(),t(4,u),t(5,d=!1)}async function k(C){if(!(!C||!r.selectedList||!n.session)){f.add(C);try{await Me.removeFromList(n.session,C,r.selectedList.uri,n.authType),h.success.push(C);const K=r.listMemberProfiles.filter(ne=>ne.did!==C);me.setListMemberProfiles(K);const j=r.listMembers.filter(ne=>ne!==C);me.setListMembers(j),t(0,H=Math.max(0,H-1)),t(10,v=Math.ceil(H/gs));const ee=r.userLists.map(ne=>ne.uri===r.selectedList.uri?{...ne,memberCount:Math.max(0,(ne.memberCount||0)-1)}:ne);me.setUserLists(ee)}catch(K){console.error("Failed to remove profile from list:",K),h.errors.push({profileDid:C,error:K.message})}finally{f.delete(C),setTimeout(()=>{t(7,h={success:[],errors:[]})},5e3)}}}async function I(C){C>=1&&C<=v&&await O(C)}async function L(){b<v&&await O(b+1)}async function U(){b>1&&await O(b-1)}const P=C=>k(C.did),N=()=>O(b),q=(C,K)=>{let j;return v<=5||b<=3?j=K+1:b>=v-2?j=v-4+K:j=b-2+K,j},G=C=>I(C);return s.$$.update=()=>{var C,K,j;s.$$.dirty[0]&2&&r.refreshTrigger&&W(),s.$$.dirty[0]&2&&console.log("Profile count changed:",r.listMemberProfiles.length),s.$$.dirty[0]&3&&((C=r.selectedList)==null?void 0:C.listItemCount)!==H&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(K=r.selectedList)==null?void 0:K.listItemCount),console.log("Current totalMemberCount:",H),t(0,H=((j=r.selectedList)==null?void 0:j.listItemCount)||0),t(10,v=Math.ceil(H/gs))),s.$$.dirty[0]&3670018&&r.selectedList&&n.session&&!_&&A!==r.selectedList.uri&&(console.log("List changed, loading members for:",r.selectedList.name),t(20,A=r.selectedList.uri),W())},[H,r,l,o,u,d,a,h,b,g,v,f,W,O,E,k,I,L,U,_,A,n,P,N,q,G]}class Co extends Ne{constructor(e){super(),De(this,e,Lo,ko,Pe,{},null,[-1,-1])}}function gn(s){let e,t,r,n,l,o,u,d;return{c(){e=m("div"),t=m("div"),r=m("div"),n=w(),l=m("h3"),l.textContent="Getting Ready",o=w(),u=m("p"),d=S(s[1]),c(r,"class","loading-spinner mx-auto mb-4 svelte-847qwb"),c(l,"class","text-lg font-semibold text-slate-800 mb-2"),c(u,"class","text-slate-600"),c(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),c(t,"id","loading-overlay-content"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"),c(e,"id","loading-overlay")},m(a,f){x(a,e,f),i(e,t),i(t,r),i(t,n),i(t,l),i(t,o),i(t,u),i(u,d)},p(a,f){f&2&&V(d,a[1])},d(a){a&&M(e)}}}function Mo(s){let e,t=s[0]&&gn(s);return{c(){t&&t.c(),e=st()},m(r,n){t&&t.m(r,n),x(r,e,n)},p(r,[n]){r[0]?t?t.p(r,n):(t=gn(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Q,o:Q,d(r){r&&M(e),t&&t.d(r)}}}function xo(s,e,t){let{isLoading:r=!1}=e,{message:n="Loading list data..."}=e;return s.$$set=l=>{"isLoading"in l&&t(0,r=l.isLoading),"message"in l&&t(1,n=l.message)},[r,n]}class Eo extends Ne{constructor(e){super(),De(this,e,xo,Mo,Pe,{isLoading:0,message:1})}}function bn(s,e,t){const r=s.slice();return r[8]=e[t],r}function yn(s,e){let t,r,n;return{key:s,first:null,c(){t=m("div"),r=_s("svg"),n=_s("path"),c(n,"d","m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"),c(n,"fill","#1185fe"),c(n,"opacity","0.4"),c(r,"width","100%"),c(r,"height","100%"),c(r,"viewBox","0 0 600 530"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(r,"class","butterfly-svg svelte-1l7ozht"),c(t,"class","butterfly svelte-1l7ozht"),ce(t,"left",e[8].x+"%"),ce(t,"top",e[8].y+"%"),ce(t,"width",e[8].size+"px"),ce(t,"height",e[8].size+"px"),ce(t,"animation-duration",e[8].speed+"s"),ce(t,"animation-delay",e[8].delay+"s"),ce(t,"transform","rotate("+e[8].rotation+"deg)"),ce(t,"opacity",.6+Math.random()*.4),this.first=t},m(l,o){x(l,t,o),i(t,r),i(r,n)},p(l,o){e=l,o&1&&ce(t,"left",e[8].x+"%"),o&1&&ce(t,"top",e[8].y+"%"),o&1&&ce(t,"width",e[8].size+"px"),o&1&&ce(t,"height",e[8].size+"px"),o&1&&ce(t,"animation-duration",e[8].speed+"s"),o&1&&ce(t,"animation-delay",e[8].delay+"s"),o&1&&ce(t,"transform","rotate("+e[8].rotation+"deg)")},d(l){l&&M(t)}}}function vn(s){let e;return{c(){e=m("div"),e.innerHTML='<div class="message-content svelte-1l7ozht" id="empty-list-content"><svg width="60" height="53" viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg" class="svelte-1l7ozht"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe" opacity="0.3"></path></svg> <p class="svelte-1l7ozht">Add members to your list to see butterflies flutter by!</p></div>',c(e,"class","empty-list-message svelte-1l7ozht"),c(e,"id","empty-list-message")},m(t,r){x(t,e,r)},d(t){t&&M(e)}}}function Ao(s){let e,t=[],r=new Map,n,l=pe(s[0]);const o=d=>d[8].id;for(let d=0;d<l.length;d+=1){let a=bn(s,l,d),f=o(a);r.set(f,t[d]=yn(f,a))}let u=s[2].selectedList&&s[1]===0&&vn();return{c(){e=m("div");for(let d=0;d<t.length;d+=1)t[d].c();n=w(),u&&u.c(),c(e,"class","butterfly-background svelte-1l7ozht"),c(e,"id","butterfly-background")},m(d,a){x(d,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);i(e,n),u&&u.m(e,null),s[5](e)},p(d,[a]){a&1&&(l=pe(d[0]),t=el(t,a,o,1,d,l,r,e,Qn,yn,n,bn)),d[2].selectedList&&d[1]===0?u||(u=vn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:Q,o:Q,d(d){d&&M(e);for(let a=0;a<t.length;a+=1)t[a].d();u&&u.d(),s[5](null)}}}function Po(s,e,t){let r,n,l;Re(s,me,h=>t(2,l=h));let o,u=[];const d={baseCount:12,maxCount:50,minSize:20,maxSize:45,minSpeed:15,maxSpeed:45,minDelay:0,maxDelay:15};Cs(()=>{a()});function a(){t(0,u=[]);for(let h=0;h<n;h++)u.push({id:h,x:Math.random()*100,y:Math.random()*100,size:Math.random()*(d.maxSize-d.minSize)+d.minSize,speed:Math.random()*(d.maxSpeed-d.minSpeed)+d.minSpeed,delay:Math.random()*(d.maxDelay-d.minDelay)+d.minDelay,rotation:Math.random()*60-30,rotationSpeed:(Math.random()-.5)*2,floatingDirection:Math.random()*360,floatingSpeed:Math.random()*.5+.1})}function f(h){ws[h?"unshift":"push"](()=>{o=h,t(3,o)})}return s.$$.update=()=>{var h;s.$$.dirty&4&&t(1,r=((h=l.selectedList)==null?void 0:h.listItemCount)||0),s.$$.dirty&6&&t(4,n=l.selectedList?Math.min(d.maxCount,Math.max(d.baseCount,Math.floor(r/2))):d.baseCount),s.$$.dirty&17&&n!==u.length&&a()},[u,r,l,o,n,f]}class To extends Ne{constructor(e){super(),De(this,e,Po,Ao,Pe,{})}}function _n(s){let e,t;return e=new ni({}),{c(){Oe(e.$$.fragment)},m(r,n){xe(e,r,n),t=!0},i(r){t||(ie(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Ee(e,r)}}}function Io(s){let e,t;return e=new Co({}),{c(){Oe(e.$$.fragment)},m(r,n){xe(e,r,n),t=!0},i(r){t||(ie(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Ee(e,r)}}}function Ro(s){let e,t;return e=new Mi({}),{c(){Oe(e.$$.fragment)},m(r,n){xe(e,r,n),t=!0},i(r){t||(ie(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Ee(e,r)}}}function Oo(s){let e,t;return e=new wi({}),{c(){Oe(e.$$.fragment)},m(r,n){xe(e,r,n),t=!0},i(r){t||(ie(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Ee(e,r)}}}function Do(s){let e,t,r,n,l,o,u,d,a,f;t=new To({});let h=s[1]!=="auth"&&_n();const b=[Oo,Ro,Io],g=[];function _(v,T){return v[1]==="auth"?0:v[1]==="list-selector"?1:v[1]==="manager"?2:-1}return~(o=_(s))&&(u=g[o]=b[o](s)),a=new Eo({props:{isLoading:s[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=m("main"),Oe(t.$$.fragment),r=w(),h&&h.c(),n=w(),l=m("div"),u&&u.c(),d=w(),Oe(a.$$.fragment),c(l,"class","max-w-6xl mx-auto p-6"),c(l,"id","app-content"),c(e,"class","min-h-screen bg-gray-50"),c(e,"id","app-main")},m(v,T){x(v,e,T),xe(t,e,null),i(e,r),h&&h.m(e,null),i(e,n),i(e,l),~o&&g[o].m(l,null),i(e,d),xe(a,e,null),f=!0},p(v,[T]){v[1]!=="auth"?h?T&2&&ie(h,1):(h=_n(),h.c(),ie(h,1),h.m(e,n)):h&&(Ot(),fe(h,1,1,()=>{h=null}),Dt());let H=o;o=_(v),o!==H&&(u&&(Ot(),fe(g[H],1,1,()=>{g[H]=null}),Dt()),~o?(u=g[o],u||(u=g[o]=b[o](v),u.c()),ie(u,1),u.m(l,null)):u=null);const A={};T&1&&(A.isLoading=v[0].isLoadingList),a.$set(A)},i(v){f||(ie(t.$$.fragment,v),ie(h),ie(u),ie(a.$$.fragment,v),f=!0)},o(v){fe(t.$$.fragment,v),fe(h),fe(u),fe(a.$$.fragment,v),f=!1},d(v){v&&M(e),Ee(t),h&&h.d(),~o&&g[o].d(),Ee(a)}}}function No(s,e,t){let r,n;Re(s,me,o=>t(0,r=o)),Re(s,qe,o=>t(2,n=o));let l="auth";return Cs(()=>{const{session:o,authType:u}=qe.initializeSession();o&&(console.log("Session restored:",{authType:u,handle:o.handle||o.did}),t(1,l="list-selector"))}),s.$$.update=()=>{s.$$.dirty&5&&(n.session?r.selectedList?t(1,l="manager"):t(1,l="list-selector"):t(1,l="auth"))},[r,l,n]}class Bo extends Ne{constructor(e){super(),De(this,e,No,Do,Pe,{})}}new Bo({target:document.getElementById("app")})});export default Ko();
