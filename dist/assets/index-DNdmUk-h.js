var Qr=Object.defineProperty;var Nt=r=>{throw TypeError(r)};var Xr=(r,e,t)=>e in r?Qr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var es=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ve=(r,e,t)=>Xr(r,typeof e!="symbol"?e+"":e,t),Dt=(r,e,t)=>e.has(r)||Nt("Cannot "+t);var F=(r,e,t)=>(Dt(r,e,"read from private field"),t?t.call(r):e.get(r)),Ke=(r,e,t)=>e.has(r)?Nt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Ne=(r,e,t,s)=>(Dt(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);var ki=es((Pi,dt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function Y(){}function kr(r){return r()}function Ut(){return Object.create(null)}function Me(r){r.forEach(kr)}function Er(r){return typeof r=="function"}function ke(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let ft;function rt(r,e){return r===e?!0:(ft||(ft=document.createElement("a")),ft.href=e,r===ft.href)}function ts(r){return Object.keys(r).length===0}function rs(r,...e){if(r==null){for(const s of e)s(void 0);return Y}const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Le(r,e,t){r.$$.on_destroy.push(rs(e,t))}function o(r,e){r.appendChild(e)}function L(r,e,t){r.insertBefore(e,t||null)}function P(r){r.parentNode&&r.parentNode.removeChild(r)}function it(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function p(r){return document.createElement(r)}function M(r){return document.createTextNode(r)}function A(){return M(" ")}function He(){return M("")}function ee(r,e,t,s){return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}function Pr(r){return function(e){return e.preventDefault(),r.call(this,e)}}function ss(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function d(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function ns(r){let e;return{p(...t){e=t,e.forEach(s=>r.push(s))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function is(r){return Array.from(r.childNodes)}function q(r,e){e=""+e,r.data!==e&&(r.data=e)}function he(r,e){r.value=e??""}function Bt(r,e,t){for(let s=0;s<r.options.length;s+=1){const n=r.options[s];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function ls(r,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:s})}let ct;function at(r){ct=r}function Lr(){if(!ct)throw new Error("Function called outside component initialization");return ct}function Ar(r){Lr().$$.on_mount.push(r)}function os(){const r=Lr();return(e,t,{cancelable:s=!1}={})=>{const n=r.$$.callbacks[e];if(n){const i=ls(e,t,{cancelable:s});return n.slice().forEach(l=>{l.call(r,i)}),!i.defaultPrevented}return!0}}function as(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const qe=[],Ht=[];let Xe=[];const $t=[],cs=Promise.resolve();let Pt=!1;function us(){Pt||(Pt=!0,cs.then(Mr))}function Lt(r){Xe.push(r)}const vt=new Set;let ze=0;function Mr(){if(ze!==0)return;const r=ct;do{try{for(;ze<qe.length;){const e=qe[ze];ze++,at(e),ds(e.$$)}}catch(e){throw qe.length=0,ze=0,e}for(at(null),qe.length=0,ze=0;Ht.length;)Ht.pop()();for(let e=0;e<Xe.length;e+=1){const t=Xe[e];vt.has(t)||(vt.add(t),t())}Xe.length=0}while(qe.length);for(;$t.length;)$t.pop()();Pt=!1,vt.clear(),at(r)}function ds(r){if(r.fragment!==null){r.update(),Me(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Lt)}}function fs(r){const e=[],t=[];Xe.forEach(s=>r.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Xe=e}const mt=new Set;let Je;function st(){Je={r:0,c:[],p:Je}}function nt(){Je.r||Me(Je.c),Je=Je.p}function te(r,e){r&&r.i&&(mt.delete(r),r.i(e))}function ie(r,e,t,s){if(r&&r.o){if(mt.has(r))return;mt.add(r),Je.c.push(()=>{mt.delete(r),s&&(t&&r.d(1),s())}),r.o(e)}else s&&s()}function ge(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Ae(r){r&&r.c()}function we(r,e,t){const{fragment:s,after_update:n}=r.$$;s&&s.m(e,t),Lt(()=>{const i=r.$$.on_mount.map(kr).filter(Er);r.$$.on_destroy?r.$$.on_destroy.push(...i):Me(i),r.$$.on_mount=[]}),n.forEach(Lt)}function Se(r,e){const t=r.$$;t.fragment!==null&&(fs(t.after_update),Me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ps(r,e){r.$$.dirty[0]===-1&&(qe.push(r),us(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Te(r,e,t,s,n,i,l=null,a=[-1]){const u=ct;at(r);const c=r.$$={fragment:null,ctx:[],props:i,update:Y,not_equal:n,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ut(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};l&&l(c.root);let f=!1;if(c.ctx=t?t(r,e.props||{},(h,y,...v)=>{const g=v.length?v[0]:y;return c.ctx&&n(c.ctx[h],c.ctx[h]=g)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](g),f&&ps(r,h)),y}):[],c.update(),f=!0,Me(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const h=is(e.target);c.fragment&&c.fragment.l(h),h.forEach(P)}else c.fragment&&c.fragment.c();e.intro&&te(r.$$.fragment),we(r,e.target,e.anchor),Mr()}at(u)}class Ce{constructor(){ve(this,"$$");ve(this,"$$set")}$destroy(){Se(this,1),this.$destroy=Y}$on(e,t){if(!Er(t))return Y;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!ts(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ms="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ms);const je=[];function Tr(r,e=Y){let t;const s=new Set;function n(a){if(ke(r,a)&&(r=a,t)){const u=!je.length;for(const c of s)c[1](),je.push(c,r);if(u){for(let c=0;c<je.length;c+=2)je[c][0](je[c+1]);je.length=0}}}function i(a){n(a(r))}function l(a,u=Y){const c=[a,u];return s.add(c),s.size===1&&(t=e(n,i)||Y),a(r),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:n,update:i,subscribe:l}}const Ze=new TextEncoder,ht=new TextDecoder;function hs(...r){const e=r.reduce((n,{length:i})=>n+i,0),t=new Uint8Array(e);let s=0;for(const n of r)t.set(n,s),s+=n.length;return t}function bs(r){if(Uint8Array.prototype.toBase64)return r.toBase64();const e=32768,t=[];for(let s=0;s<r.length;s+=e)t.push(String.fromCharCode.apply(null,r.subarray(s,s+e)));return btoa(t.join(""))}function gs(r){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);const e=atob(r),t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}function Cr(r){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof r=="string"?r:ht.decode(r),{alphabet:"base64url"});let e=r;e instanceof Uint8Array&&(e=ht.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return gs(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function wt(r){let e=r;return typeof e=="string"&&(e=Ze.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):bs(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class gt extends Error{constructor(t,s){var n;super(t,s);ve(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}ve(gt,"code","ERR_JOSE_GENERIC");class Re extends gt{constructor(){super(...arguments);ve(this,"code","ERR_JOSE_NOT_SUPPORTED")}}ve(Re,"code","ERR_JOSE_NOT_SUPPORTED");class Ve extends gt{constructor(){super(...arguments);ve(this,"code","ERR_JWS_INVALID")}}ve(Ve,"code","ERR_JWS_INVALID");class xr extends gt{constructor(){super(...arguments);ve(this,"code","ERR_JWT_INVALID")}}ve(xr,"code","ERR_JWT_INVALID");function Ie(r,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${r}`)}function lt(r,e){return r.name===e}function St(r){return parseInt(r.name.slice(4),10)}function ys(r){switch(r){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function _s(r,e){if(!r.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function vs(r,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!lt(r.algorithm,"HMAC"))throw Ie("HMAC");const s=parseInt(e.slice(2),10);if(St(r.algorithm.hash)!==s)throw Ie(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!lt(r.algorithm,"RSASSA-PKCS1-v1_5"))throw Ie("RSASSA-PKCS1-v1_5");const s=parseInt(e.slice(2),10);if(St(r.algorithm.hash)!==s)throw Ie(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!lt(r.algorithm,"RSA-PSS"))throw Ie("RSA-PSS");const s=parseInt(e.slice(2),10);if(St(r.algorithm.hash)!==s)throw Ie(`SHA-${s}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!lt(r.algorithm,"Ed25519"))throw Ie("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!lt(r.algorithm,"ECDSA"))throw Ie("ECDSA");const s=ys(e);if(r.algorithm.namedCurve!==s)throw Ie(s,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}_s(r,t)}function Ir(r,e,...t){var s;if(t=t.filter(Boolean),t.length>2){const n=t.pop();r+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of type ${t[0]} or ${t[1]}.`:r+=`of type ${t[0]}.`;return e==null?r+=` Received ${e}`:typeof e=="function"&&e.name?r+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(s=e.constructor)!=null&&s.name&&(r+=` Received an instance of ${e.constructor.name}`),r}const ws=(r,...e)=>Ir("Key must be ",r,...e);function Rr(r,e,...t){return Ir(`Key for the ${r} algorithm must be `,e,...t)}function Or(r){return(r==null?void 0:r[Symbol.toStringTag])==="CryptoKey"}function Kr(r){return(r==null?void 0:r[Symbol.toStringTag])==="KeyObject"}const Nr=r=>Or(r)||Kr(r),Ss=(...r)=>{const e=r.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const s of e){const n=Object.keys(s);if(!t||t.size===0){t=new Set(n);continue}for(const i of n){if(t.has(i))return!1;t.add(i)}}return!0};function ks(r){return typeof r=="object"&&r!==null}const Tt=r=>{if(!ks(r)||Object.prototype.toString.call(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e},Es=(r,e)=>{if(r.startsWith("RS")||r.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${r} requires key modulusLength to be 2048 bits or larger`)}};function Ps(r){let e,t;switch(r.kty){case"RSA":{switch(r.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${r.alg.slice(-3)}`},t=r.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${r.alg.slice(-3)}`},t=r.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(r.alg.slice(-3),10)||1}`},t=r.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Re('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(r.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=r.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=r.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=r.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:r.crv},t=r.d?["deriveBits"]:[];break;default:throw new Re('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(r.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=r.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:r.crv},t=r.d?["deriveBits"]:[];break;default:throw new Re('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Re('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const Dr=async r=>{if(!r.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=Ps(r),s={...r};return delete s.alg,delete s.use,crypto.subtle.importKey("jwk",s,e,r.ext??!r.d,r.key_ops??t)};async function Ls(r,e,t){if(!Tt(r))throw new TypeError("JWK must be an object");let s;switch(e??(e=r.alg),s??(s=r.ext),r.kty){case"oct":if(typeof r.k!="string"||!r.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Cr(r.k);case"RSA":if("oth"in r&&r.oth!==void 0)throw new Re('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Dr({...r,alg:e,ext:s});default:throw new Re('Unsupported "kty" (Key Type) Parameter value')}}const As=(r,e,t,s,n)=>{if(n.crit!==void 0&&(s==null?void 0:s.crit)===void 0)throw new r('"crit" (Critical) Header Parameter MUST be integrity protected');if(!s||s.crit===void 0)return new Set;if(!Array.isArray(s.crit)||s.crit.length===0||s.crit.some(l=>typeof l!="string"||l.length===0))throw new r('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;t!==void 0?i=new Map([...Object.entries(t),...e.entries()]):i=e;for(const l of s.crit){if(!i.has(l))throw new Re(`Extension Header Parameter "${l}" is not recognized`);if(n[l]===void 0)throw new r(`Extension Header Parameter "${l}" is missing`);if(i.get(l)&&s[l]===void 0)throw new r(`Extension Header Parameter "${l}" MUST be integrity protected`)}return new Set(s.crit)};function Ct(r){return Tt(r)&&typeof r.kty=="string"}function Ms(r){return r.kty!=="oct"&&typeof r.d=="string"}function Ts(r){return r.kty!=="oct"&&typeof r.d>"u"}function Cs(r){return r.kty==="oct"&&typeof r.k=="string"}let et;const Wt=async(r,e,t,s=!1)=>{et||(et=new WeakMap);let n=et.get(r);if(n!=null&&n[t])return n[t];const i=await Dr({...e,alg:t});return s&&Object.freeze(r),n?n[t]=i:et.set(r,{[t]:i}),i},xs=(r,e)=>{var l;et||(et=new WeakMap);let t=et.get(r);if(t!=null&&t[e])return t[e];const s=r.type==="public",n=!!s;let i;if(r.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}i=r.toCryptoKey(r.asymmetricKeyType,n,s?[]:["deriveBits"])}if(r.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");i=r.toCryptoKey(r.asymmetricKeyType,n,[s?"verify":"sign"])}if(r.asymmetricKeyType==="rsa"){let a;switch(e){case"RSA-OAEP":a="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":a="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":a="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":a="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return r.toCryptoKey({name:"RSA-OAEP",hash:a},n,s?["encrypt"]:["decrypt"]);i=r.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:a},n,[s?"verify":"sign"])}if(r.asymmetricKeyType==="ec"){const u=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((l=r.asymmetricKeyDetails)==null?void 0:l.namedCurve);if(!u)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&u==="P-256"&&(i=r.toCryptoKey({name:"ECDSA",namedCurve:u},n,[s?"verify":"sign"])),e==="ES384"&&u==="P-384"&&(i=r.toCryptoKey({name:"ECDSA",namedCurve:u},n,[s?"verify":"sign"])),e==="ES512"&&u==="P-521"&&(i=r.toCryptoKey({name:"ECDSA",namedCurve:u},n,[s?"verify":"sign"])),e.startsWith("ECDH-ES")&&(i=r.toCryptoKey({name:"ECDH",namedCurve:u},n,s?[]:["deriveBits"]))}if(!i)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=i:et.set(r,{[e]:i}),i},Is=async(r,e)=>{if(r instanceof Uint8Array||Or(r))return r;if(Kr(r)){if(r.type==="secret")return r.export();if("toCryptoKey"in r&&typeof r.toCryptoKey=="function")try{return xs(r,e)}catch(s){if(s instanceof TypeError)throw s}let t=r.export({format:"jwk"});return Wt(r,t,e)}if(Ct(r))return r.k?Cr(r.k):Wt(r,r,e,!0);throw new Error("unreachable")},Ye=r=>r==null?void 0:r[Symbol.toStringTag],At=(r,e,t)=>{var s,n;if(e.use!==void 0){let i;switch(t){case"sign":case"verify":i="sig";break;case"encrypt":case"decrypt":i="enc";break}if(e.use!==i)throw new TypeError(`Invalid key for this operation, its "use" must be "${i}" when present`)}if(e.alg!==void 0&&e.alg!==r)throw new TypeError(`Invalid key for this operation, its "alg" must be "${r}" when present`);if(Array.isArray(e.key_ops)){let i;switch(!0){case t==="sign":case r==="dir":case r.includes("CBC-HS"):i=t;break;case r.startsWith("PBES2"):i="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(r):!r.includes("GCM")&&r.endsWith("KW")?i="unwrapKey":i=t;break;case t==="encrypt":i="wrapKey";break;case t==="decrypt":i=r.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(i&&((n=(s=e.key_ops)==null?void 0:s.includes)==null?void 0:n.call(s,i))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${i}" when present`)}return!0},Rs=(r,e,t)=>{if(!(e instanceof Uint8Array)){if(Ct(e)){if(Cs(e)&&At(r,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Nr(e))throw new TypeError(Rr(r,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Ye(e)} instances for symmetric algorithms must be of type "secret"`)}},Os=(r,e,t)=>{if(Ct(e))switch(t){case"decrypt":case"sign":if(Ms(e)&&At(r,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Ts(e)&&At(r,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Nr(e))throw new TypeError(Rr(r,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Ye(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${Ye(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Ye(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${Ye(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Ye(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},Ks=(r,e,t)=>{r.startsWith("HS")||r==="dir"||r.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(r)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(r)?Rs(r,e,t):Os(r,e,t)},Ns=(r,e)=>{const t=`SHA-${r.slice(-3)}`;switch(r){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(r.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new Re(`alg ${r} is not supported either by JOSE or your javascript runtime`)}},Ds=async(r,e,t)=>{if(e instanceof Uint8Array){if(!r.startsWith("HS"))throw new TypeError(ws(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${r.slice(-3)}`,name:"HMAC"},!1,[t])}return vs(e,r,t),e},We=r=>Math.floor(r.getTime()/1e3),Ur=60,Br=Ur*60,xt=Br*24,Us=xt*7,Bs=xt*365.25,Hs=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,kt=r=>{const e=Hs.exec(r);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),s=e[3].toLowerCase();let n;switch(s){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*Ur);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*Br);break;case"day":case"days":case"d":n=Math.round(t*xt);break;case"week":case"weeks":case"w":n=Math.round(t*Us);break;default:n=Math.round(t*Bs);break}return e[1]==="-"||e[4]==="ago"?-n:n};function Fe(r,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${r} input`);return e}var le;class $s{constructor(e){Ke(this,le);if(!Tt(e))throw new TypeError("JWT Claims Set MUST be an object");Ne(this,le,structuredClone(e))}data(){return Ze.encode(JSON.stringify(F(this,le)))}get iss(){return F(this,le).iss}set iss(e){F(this,le).iss=e}get sub(){return F(this,le).sub}set sub(e){F(this,le).sub=e}get aud(){return F(this,le).aud}set aud(e){F(this,le).aud=e}set jti(e){F(this,le).jti=e}set nbf(e){typeof e=="number"?F(this,le).nbf=Fe("setNotBefore",e):e instanceof Date?F(this,le).nbf=Fe("setNotBefore",We(e)):F(this,le).nbf=We(new Date)+kt(e)}set exp(e){typeof e=="number"?F(this,le).exp=Fe("setExpirationTime",e):e instanceof Date?F(this,le).exp=Fe("setExpirationTime",We(e)):F(this,le).exp=We(new Date)+kt(e)}set iat(e){typeof e>"u"?F(this,le).iat=We(new Date):e instanceof Date?F(this,le).iat=Fe("setIssuedAt",We(e)):typeof e=="string"?F(this,le).iat=Fe("setIssuedAt",We(new Date)+kt(e)):F(this,le).iat=Fe("setIssuedAt",e)}}le=new WeakMap;const Ws=async(r,e,t)=>{const s=await Ds(r,e,"sign");Es(r,s);const n=await crypto.subtle.sign(Ns(r,s.algorithm),s,t);return new Uint8Array(n)};var ut,me,Pe;class Fs{constructor(e){Ke(this,ut);Ke(this,me);Ke(this,Pe);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Ne(this,ut,e)}setProtectedHeader(e){if(F(this,me))throw new TypeError("setProtectedHeader can only be called once");return Ne(this,me,e),this}setUnprotectedHeader(e){if(F(this,Pe))throw new TypeError("setUnprotectedHeader can only be called once");return Ne(this,Pe,e),this}async sign(e,t){if(!F(this,me)&&!F(this,Pe))throw new Ve("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Ss(F(this,me),F(this,Pe)))throw new Ve("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const s={...F(this,me),...F(this,Pe)},n=As(Ve,new Map([["b64",!0]]),t==null?void 0:t.crit,F(this,me),s);let i=!0;if(n.has("b64")&&(i=F(this,me).b64,typeof i!="boolean"))throw new Ve('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=s;if(typeof l!="string"||!l)throw new Ve('JWS "alg" (Algorithm) Header Parameter missing or invalid');Ks(l,e,"sign");let a=F(this,ut);i&&(a=Ze.encode(wt(a)));let u;F(this,me)?u=Ze.encode(wt(JSON.stringify(F(this,me)))):u=Ze.encode("");const c=hs(u,Ze.encode("."),a),f=await Is(e,l),h=await Ws(l,f,c),y={signature:wt(h),payload:""};return i&&(y.payload=ht.decode(a)),F(this,Pe)&&(y.header=F(this,Pe)),F(this,me)&&(y.protected=ht.decode(u)),y}}ut=new WeakMap,me=new WeakMap,Pe=new WeakMap;var tt;class Js{constructor(e){Ke(this,tt);Ne(this,tt,new Fs(e))}setProtectedHeader(e){return F(this,tt).setProtectedHeader(e),this}async sign(e,t){const s=await F(this,tt).sign(e,t);if(s.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${s.protected}.${s.payload}.${s.signature}`}}tt=new WeakMap;var Ue,be;class zs{constructor(e={}){Ke(this,Ue);Ke(this,be);Ne(this,be,new $s(e))}setIssuer(e){return F(this,be).iss=e,this}setSubject(e){return F(this,be).sub=e,this}setAudience(e){return F(this,be).aud=e,this}setJti(e){return F(this,be).jti=e,this}setNotBefore(e){return F(this,be).nbf=e,this}setExpirationTime(e){return F(this,be).exp=e,this}setIssuedAt(e){return F(this,be).iat=e,this}setProtectedHeader(e){return Ne(this,Ue,e),this}async sign(e,t){var n;const s=new Js(F(this,be).data());if(s.setProtectedHeader(F(this,Ue)),Array.isArray((n=F(this,Ue))==null?void 0:n.crit)&&F(this,Ue).crit.includes("b64")&&F(this,Ue).b64===!1)throw new xr("JWTs MUST NOT use unencoded payload");return s.sign(e,t)}}Ue=new WeakMap,be=new WeakMap;const Mt="bluesky_oauth_session",Hr="bluesky_code_verifier",$r="bluesky_oauth_state",Wr="bluesky_server_url";function js(r=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const s=new Uint8Array(r);crypto.getRandomValues(s);for(let n=0;n<r;n++)t+=e[s[n]%e.length];return t}async function qs(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t);return Vs(s)}function Vs(r){return btoa(String.fromCharCode(...new Uint8Array(r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ft(){return await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}async function Jt(r,e,t,s,n){try{const i=await crypto.subtle.exportKey("jwk",r.publicKey),l={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};s&&(l.nonce=s);const a=await Ls(await crypto.subtle.exportKey("jwk",r.privateKey),"ES256");return await new zs(l).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:i.kty,crv:i.crv,x:i.x,y:i.y}}).sign(a)}catch(i){throw console.error("Error creating DPoP JWT:",i),i}}async function Ys(r="https://bsky.social"){try{const e=js();localStorage.setItem(Hr,e);const t=await qs(e),s=crypto.randomUUID();localStorage.setItem($r,s),localStorage.setItem(Wr,r);const i=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5173/client-metadata.json":"https://bluesky-list-manager.vercel.app/client-metadata.json",l=`${window.location.origin}/oauth-callback.html`,a=new URL(`${r}/oauth/authorize`);a.searchParams.append("client_id",i),a.searchParams.append("response_type","code"),a.searchParams.append("redirect_uri",l),a.searchParams.append("scope","atproto transition:generic"),a.searchParams.append("state",s),a.searchParams.append("code_challenge",t),a.searchParams.append("code_challenge_method","S256"),window.location.href=a.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}function ot(){const r=localStorage.getItem(Mt);if(r)try{return JSON.parse(r)}catch{localStorage.removeItem(Mt)}return null}function zt(){localStorage.removeItem(Mt),localStorage.removeItem(Hr),localStorage.removeItem($r),localStorage.removeItem(Wr)}const pe={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},Ge={OAUTH:"oauth",APP_PASSWORD:"app_password"};function Gs(){const{subscribe:r,set:e,update:t}=Tr({session:null,authType:null,isLoading:!1,error:null});return{subscribe:r,setSession:(s,n=Ge.APP_PASSWORD)=>{s?(localStorage.setItem(pe.SESSION,JSON.stringify(s)),localStorage.setItem(pe.AUTH_TYPE,n)):(localStorage.removeItem(pe.SESSION),localStorage.removeItem(pe.AUTH_TYPE)),e({session:s,authType:n,isLoading:!1,error:null})},setLoading:s=>{t(n=>({...n,isLoading:s}))},setError:s=>{t(n=>({...n,error:s,isLoading:!1}))},getSession:()=>{const s=localStorage.getItem(pe.SESSION),n=localStorage.getItem(pe.AUTH_TYPE)||Ge.APP_PASSWORD;if(s)try{return{session:JSON.parse(s),authType:n}}catch{localStorage.removeItem(pe.SESSION),localStorage.removeItem(pe.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(pe.SESSION),localStorage.removeItem(pe.AUTH_TYPE),zt(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(pe.SESSION),localStorage.removeItem(pe.AUTH_TYPE),zt(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:()=>{const s=ot();if(s&&s.accessToken){const l={accessJwt:s.accessToken,refreshJwt:s.refreshToken,handle:s.sub,did:s.sub,email:null};return e({session:l,authType:Ge.OAUTH,isLoading:!1,error:null}),{session:l,authType:Ge.OAUTH}}const{session:n,authType:i}=Be.getSession();return n?(e({session:n,authType:i,isLoading:!1,error:null}),{session:n,authType:i}):{session:null,authType:null}},isOAuthSession:()=>localStorage.getItem(pe.AUTH_TYPE)===Ge.OAUTH}}const Be=Gs(),pt="https://bsky.social/xrpc";class Zs{async signIn(e,t){const s=await fetch(`${pt}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!s.ok){const n=await s.json();throw new Error(n.message||"Failed to sign in")}return await s.json()}async getAuthHeaders(e,t="app_password"){if(t==="oauth"){const s=ot();if(!s||!s.accessToken)throw new Error("No OAuth session found");const n=await Ft(),i=await Jt(n,"GET",`${pt}/app.bsky.graph.getLists`,s.serverNonce);return{Authorization:`Bearer ${s.accessToken}`,DPoP:i,"Content-Type":"application/json"}}else return{Authorization:`Bearer ${e.accessJwt}`,"Content-Type":"application/json"}}async makeBlueskyRequest(e,t,s="app_password",n="GET",i=null){const l=await this.getAuthHeaders(t,s);if(s==="oauth"&&l.DPoP){const c=ot(),f=await Ft(),h=await Jt(f,n,`${pt}/${e}`,c.serverNonce);l.DPoP=h}const a={method:n,headers:l};i&&n!=="GET"&&(a.body=JSON.stringify(i));const u=await fetch(`${pt}/${e}`,a);if(!u.ok){const c=await u.json();throw new Error(c.message||`Failed to fetch from ${e}`)}return await u.json()}async getUserLists(e,t="app_password"){if(t==="oauth"){const s=ot();if(!s.sub)throw new Error("No user DID found in OAuth session");const i=(await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${s.sub}`,e,t)).handle;return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${i}`,e,t)).lists||[]}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${e.handle}`,e,t)).lists||[]}async getListInfo(e,t,s="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,s)).list}async getListMembers(e,t,s="app_password"){const i=t.split("/")[2];let l=[],a=null;do{let u=`com.atproto.repo.listRecords?repo=${encodeURIComponent(i)}&collection=app.bsky.graph.listitem&limit=100`;a&&(u+=`&cursor=${encodeURIComponent(a)}`);const c=await this.makeBlueskyRequest(u,e,s),f=c.records.filter(h=>h.value.list===t).map(h=>h.value.subject);l=l.concat(f),a=c.cursor}while(a);return l}async getProfiles(e,t,s="app_password"){if(!t||t.length===0)return[];const n=[];for(const i of t)try{const l=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(i)}`,e,s);n.push(l)}catch(l){console.error(`Failed to fetch profile for ${i}:`,l),n.push({did:i,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,s="app_password",n=25,i=null){let l=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;i&&(l+=`&cursor=${encodeURIComponent(i)}`);const a=await this.makeBlueskyRequest(l,e,s);return{actors:a.actors||[],cursor:a.cursor}}async addToList(e,t,s,n="app_password"){let i;return n==="oauth"?i=ot().sub:i=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:i,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:s,createdAt:new Date().toISOString()}})}async resolveHandle(e,t,s="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,s)).did}}const Oe=new Zs,De={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Qs(){const{subscribe:r,update:e}=Tr({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1;return{subscribe:r,setSelectedList:s=>{s?localStorage.setItem(De.SELECTED_LIST,JSON.stringify(s)):localStorage.removeItem(De.SELECTED_LIST),e(n=>({...n,selectedList:s,isLoadingList:!!s,listMembers:[],listMemberProfiles:[]}))},setListLoading:s=>{e(n=>({...n,isLoadingList:s}))},setUserLists:s=>{localStorage.setItem(De.LISTS,JSON.stringify(s)),e(n=>({...n,userLists:s}))},setListMembers:s=>{e(n=>({...n,listMembers:s}))},setListMemberProfiles:s=>{e(n=>({...n,listMemberProfiles:s}))},addProfileToList:s=>{e(n=>{const i=n.listMembers.includes(s)?n.listMembers:[s,...n.listMembers];return{...n,listMembers:i}})},addProfileToDisplay:s=>{e(n=>{if(n.listMembers.indexOf(s.did)<25){const l=[s,...n.listMemberProfiles];return{...n,listMemberProfiles:l.slice(0,25)}}return n})},fetchAndAddProfile:(s,n,i="app_password")=>t?Promise.resolve():(t=!0,new Promise(async l=>{try{const a=await Oe.getProfiles(s,[n],i);if(a.length>0){const u=a[0];e(c=>{const f=c.listMembers.includes(n)?c.listMembers:[n,...c.listMembers];if(f.indexOf(n)<25){const y=c.listMemberProfiles.filter(g=>g.did!==n),v=[u,...y];return{...c,listMembers:f,listMemberProfiles:v.slice(0,25)}}return{...c,listMembers:f}})}}catch(a){console.error("Failed to fetch profile data:",a),e(u=>{const c=u.listMembers.includes(n)?u.listMembers:[n,...u.listMembers];return{...u,listMembers:c}})}finally{t=!1}l()})),refreshListMembers:()=>{e(s=>({...s,refreshTrigger:Date.now()}))},setLoading:s=>{e(n=>({...n,isLoading:s}))},setError:s=>{e(n=>({...n,error:s,isLoading:!1}))},getSelectedList:()=>{const s=localStorage.getItem(De.SELECTED_LIST);if(s)try{return JSON.parse(s)}catch{localStorage.removeItem(De.SELECTED_LIST)}return null},getUserLists:()=>{const s=localStorage.getItem(De.LISTS);if(s)try{return JSON.parse(s)}catch{localStorage.removeItem(De.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(De.SELECTED_LIST),e(s=>({...s,selectedList:null}))}}}const ce=Qs();function Xs(r){let e,t,s,n,i,l,a,u,c,f,h,y,v;return{c(){e=p("div"),t=p("label"),t.textContent="Handle",s=A(),n=p("input"),i=A(),l=p("div"),a=p("label"),a.textContent="App Password",u=A(),c=p("input"),f=A(),h=p("p"),h.textContent="Use an app password, not your main account password",d(t,"for","handle"),d(t,"class","block text-sm font-medium text-gray-700 mb-1"),d(n,"id","handle"),d(n,"type","text"),d(n,"placeholder","your-handle.bsky.social"),d(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,d(a,"for","password"),d(a,"class","block text-sm font-medium text-gray-700 mb-1"),d(c,"id","password"),d(c,"type","password"),d(c,"placeholder","Your app password"),d(c,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c.required=!0,d(h,"class","text-xs text-gray-500 mt-1")},m(g,_){L(g,e,_),o(e,t),o(e,s),o(e,n),he(n,r[0]),L(g,i,_),L(g,l,_),o(l,a),o(l,u),o(l,c),he(c,r[1]),o(l,f),o(l,h),y||(v=[ee(n,"input",r[12]),ee(c,"input",r[13])],y=!0)},p(g,_){_&1&&n.value!==g[0]&&he(n,g[0]),_&2&&c.value!==g[1]&&he(c,g[1])},d(g){g&&(P(e),P(i),P(l)),y=!1,Me(v)}}}function en(r){let e;return{c(){e=p("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,d(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,s){L(t,e,s)},p:Y,d(t){t&&P(e)}}}function jt(r){let e,t,s;return{c(){e=p("div"),t=p("p"),s=M(r[3]),d(t,"class","text-red-700 text-sm"),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,i){L(n,e,i),o(e,t),o(t,s)},p(n,i){i&8&&q(s,n[3])},d(n){n&&P(e)}}}function tn(r){let e;return{c(){e=M("Sign In")},m(t,s){L(t,e,s)},p:Y,d(t){t&&P(e)}}}function rn(r){let e;return{c(){e=M("Sign in with Bluesky")},m(t,s){L(t,e,s)},p:Y,d(t){t&&P(e)}}}function sn(r){let e,t,s;function n(a,u){return a[4]==="oauth"?ln:nn}let i=n(r),l=i(r);return{c(){e=p("span"),t=A(),l.c(),s=He(),d(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(a,u){L(a,e,u),L(a,t,u),l.m(a,u),L(a,s,u)},p(a,u){i!==(i=n(a))&&(l.d(1),l=i(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){a&&(P(e),P(t),P(s)),l.d(a)}}}function nn(r){let e;return{c(){e=M("Signing in...")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function ln(r){let e;return{c(){e=M("Connecting...")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function on(r){let e,t,s,n,i,l,a,u,c,f,h,y,v,g,_,E,C,$,z,H,S,O,W,I,k,w,K,G,B,j,re,de;function fe(N,D){return N[4]==="oauth"?en:Xs}let oe=fe(r),V=oe(r),b=r[3]&&jt(r);function m(N,D){return N[2]?sn:N[4]==="oauth"?rn:tn}let T=m(r),U=T(r);return j=ns(r[10][0]),{c(){e=p("div"),t=p("div"),s=p("div"),n=p("h2"),n.textContent="Sign in to Bluesky",i=A(),l=p("button"),l.textContent="×",a=A(),u=p("form"),c=p("div"),f=p("div"),h=p("label"),h.textContent="Sign in with:",y=A(),v=p("div"),g=p("label"),_=p("input"),E=A(),C=p("span"),C.textContent="OAuth (Coming Soon)",$=A(),z=p("label"),H=p("input"),S=A(),O=p("span"),O.textContent="App Password (Recommended)",W=A(),V.c(),I=A(),b&&b.c(),k=A(),w=p("div"),K=p("button"),K.textContent="Cancel",G=A(),B=p("button"),U.c(),d(n,"class","text-xl font-semibold text-slate-800"),d(l,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),d(s,"class","flex items-center justify-between mb-4"),d(h,"class","block text-sm font-medium text-gray-700 mb-2"),d(_,"type","radio"),_.__value="oauth",he(_,_.__value),d(_,"class","mr-2"),_.disabled=!0,d(C,"class","text-sm"),d(g,"class","flex items-center opacity-50 cursor-not-allowed"),d(H,"type","radio"),H.__value="app_password",he(H,H.__value),d(H,"class","mr-2"),d(O,"class","text-sm"),d(z,"class","flex items-center"),d(v,"class","space-y-2"),d(K,"type","button"),d(K,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),d(B,"type","submit"),B.disabled=r[2],d(B,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),d(w,"class","flex space-x-3 pt-2"),d(c,"class","space-y-4"),d(t,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6"),d(t,"role","document"),d(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),d(e,"role","dialog"),d(e,"aria-modal","true"),d(e,"tabindex","-1"),j.p(_,H)},m(N,D){L(N,e,D),o(e,t),o(t,s),o(s,n),o(s,i),o(s,l),o(t,a),o(t,u),o(u,c),o(c,f),o(f,h),o(f,y),o(f,v),o(v,g),o(g,_),_.checked=_.__value===r[4],o(g,E),o(g,C),o(v,$),o(v,z),o(z,H),H.checked=H.__value===r[4],o(z,S),o(z,O),o(c,W),V.m(c,null),o(c,I),b&&b.m(c,null),o(c,k),o(c,w),o(w,K),o(w,G),o(w,B),U.m(B,null),re||(de=[ee(l,"click",r[6]),ee(_,"change",r[9]),ee(H,"change",r[11]),ee(K,"click",r[6]),ee(u,"submit",Pr(r[5])),ee(t,"click",ss(r[8])),ee(e,"click",r[7]),ee(e,"keydown",r[14])],re=!0)},p(N,[D]){D&16&&(_.checked=_.__value===N[4]),D&16&&(H.checked=H.__value===N[4]),oe===(oe=fe(N))&&V?V.p(N,D):(V.d(1),V=oe(N),V&&(V.c(),V.m(c,I))),N[3]?b?b.p(N,D):(b=jt(N),b.c(),b.m(c,k)):b&&(b.d(1),b=null),T===(T=m(N))&&U?U.p(N,D):(U.d(1),U=T(N),U&&(U.c(),U.m(B,null))),D&4&&(B.disabled=N[2])},i:Y,o:Y,d(N){N&&P(e),V.d(),b&&b.d(),U.d(),j.r(),re=!1,Me(de)}}}function an(r,e,t){const s=os();let n="",i="",l=!1,a="",u="app_password";async function c(){t(2,l=!0),t(3,a="");try{await Ys()}catch(S){t(3,a=S.message||"Failed to start OAuth flow"),t(2,l=!1)}}async function f(){if(!n||!i){t(3,a="Please enter both handle and password");return}t(2,l=!0),t(3,a="");try{const S=await Oe.signIn(n,i);Be.setSession(S,Ge.APP_PASSWORD),s("close")}catch(S){t(3,a=S.message||"Failed to sign in. Please check your credentials.")}finally{t(2,l=!1)}}async function h(){u==="oauth"?await c():await f()}function y(){s("close")}function v(){y()}const g=[[]];function _(S){as.call(this,r,S)}function E(){u=this.__value,t(4,u)}function C(){u=this.__value,t(4,u)}function $(){n=this.value,t(0,n)}function z(){i=this.value,t(1,i)}return[n,i,l,a,u,h,y,v,_,E,g,C,$,z,S=>S.key==="Escape"&&y()]}class Fr extends Ce{constructor(e){super(),Te(this,e,an,on,ke,{})}}const cn=!0,yt={staticBase:"static",isDevelopment:!1,isProduction:cn,buildTime:new Date().toISOString(),getAssetPath:r=>`./${r.replace("static/","")}`};function qt(r,e,t){const s=r.slice();return s[10]=e[t],s}function un(r){let e,t,s;return{c(){e=p("button"),e.textContent="🔐 Sign in with Bluesky",d(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200")},m(n,i){L(n,e,i),t||(s=ee(e,"click",r[6]),t=!0)},p:Y,d(n){n&&P(e),t=!1,s()}}}function dn(r){let e,t,s,n,i,l,a,u,c,f,h,y=r[1].session.handle+"",v,g,_,E,C;function $(O,W){return O[3]?mn:O[4]?pn:fn}let z=$(r),H=z(r),S=r[3]&&Yt();return{c(){e=p("div"),t=p("label"),t.textContent="List:",s=A(),n=p("select"),i=p("option"),i.textContent="Select a list...",H.c(),a=A(),S&&S.c(),u=A(),c=p("div"),f=p("div"),h=M("@"),v=M(y),g=A(),_=p("button"),_.textContent="Sign out",d(t,"for","list-selector"),d(t,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),i.__value="",he(i,i.__value),d(n,"id","list-selector"),n.disabled=r[3],d(n,"class","bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm w-64 text-slate-800 focus:border-slate-500 focus:ring-1 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed"),d(e,"class","flex items-center space-x-3"),d(f,"class","text-sm text-slate-700"),d(_,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),d(c,"class","text-right")},m(O,W){var I;L(O,e,W),o(e,t),o(e,s),o(e,n),o(n,i),H.m(n,null),Bt(n,((I=r[0].selectedList)==null?void 0:I.uri)||""),o(e,a),S&&S.m(e,null),L(O,u,W),L(O,c,W),o(c,f),o(f,h),o(f,v),o(c,g),o(c,_),E||(C=[ee(n,"change",r[5]),ee(_,"click",r[8])],E=!0)},p(O,W){var I,k;z===(z=$(O))&&H?H.p(O,W):(H.d(1),H=z(O),H&&(H.c(),H.m(n,null))),W&1&&l!==(l=((I=O[0].selectedList)==null?void 0:I.uri)||"")&&Bt(n,((k=O[0].selectedList)==null?void 0:k.uri)||""),W&8&&(n.disabled=O[3]),O[3]?S||(S=Yt(),S.c(),S.m(e,null)):S&&(S.d(1),S=null),W&2&&y!==(y=O[1].session.handle+"")&&q(v,y)},d(O){O&&(P(e),P(u),P(c)),H.d(),S&&S.d(),E=!1,Me(C)}}}function fn(r){let e,t=ge(r[0].userLists),s=[];for(let n=0;n<t.length;n+=1)s[n]=Vt(qt(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=He()},m(n,i){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(n,i);L(n,e,i)},p(n,i){if(i&1){t=ge(n[0].userLists);let l;for(l=0;l<t.length;l+=1){const a=qt(n,t,l);s[l]?s[l].p(a,i):(s[l]=Vt(a),s[l].c(),s[l].m(e.parentNode,e))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},d(n){n&&P(e),it(s,n)}}}function pn(r){let e;return{c(){e=p("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",he(e,e.__value)},m(t,s){L(t,e,s)},p:Y,d(t){t&&P(e)}}}function mn(r){let e;return{c(){e=p("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",he(e,e.__value)},m(t,s){L(t,e,s)},p:Y,d(t){t&&P(e)}}}function Vt(r){var c;let e,t=r[10].name+"",s,n,i=(((c=r[0].selectedList)==null?void 0:c.uri)===r[10].uri?r[0].listMembers.length:r[10].memberCount)+"",l,a,u;return{c(){e=p("option"),s=M(t),n=M(" ("),l=M(i),a=M(` members)
									`),e.__value=u=r[10].uri,he(e,e.__value)},m(f,h){L(f,e,h),o(e,s),o(e,n),o(e,l),o(e,a)},p(f,h){var y;h&1&&t!==(t=f[10].name+"")&&q(s,t),h&1&&i!==(i=(((y=f[0].selectedList)==null?void 0:y.uri)===f[10].uri?f[0].listMembers.length:f[10].memberCount)+"")&&q(l,i),h&1&&u!==(u=f[10].uri)&&(e.__value=u,he(e,e.__value))},d(f){f&&P(e)}}}function Yt(r){let e;return{c(){e=p("div"),d(e,"class","loading-spinner svelte-1myfg8v")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function Gt(r){let e,t;return e=new Fr({}),e.$on("close",r[7]),{c(){Ae(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},p:Y,i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function hn(r){let e,t,s,n,i,l,a,u,c;function f(g,_){return g[1].session?dn:un}let h=f(r),y=h(r),v=r[2]&&Gt(r);return{c(){e=p("header"),t=p("div"),s=p("div"),n=p("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${yt.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,i=A(),l=p("div"),y.c(),a=A(),v&&v.c(),u=He(),d(l,"class","flex items-center space-x-4"),d(s,"class","flex items-center justify-between mb-4"),d(t,"class","max-w-6xl mx-auto px-6 py-4"),d(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50")},m(g,_){L(g,e,_),o(e,t),o(t,s),o(s,n),o(s,i),o(s,l),y.m(l,null),L(g,a,_),v&&v.m(g,_),L(g,u,_),c=!0},p(g,[_]){h===(h=f(g))&&y?y.p(g,_):(y.d(1),y=h(g),y&&(y.c(),y.m(l,null))),g[2]?v?(v.p(g,_),_&4&&te(v,1)):(v=Gt(g),v.c(),te(v,1),v.m(u.parentNode,u)):v&&(st(),ie(v,1,1,()=>{v=null}),nt())},i(g){c||(te(v),c=!0)},o(g){ie(v),c=!1},d(g){g&&(P(e),P(a),P(u)),y.d(),v&&v.d(g)}}}function bn(r,e,t){let s,n;Le(r,ce,v=>t(0,s=v)),Le(r,Be,v=>t(1,n=v));let i=!1,l=!1,a="";Ar(async()=>{n.session&&await u()});async function u(){if(n.session){t(3,l=!0),t(4,a="");try{const g=(await Oe.getUserLists(n.session,n.authType)).map(_=>({uri:_.uri,name:_.name,description:_.description||"",purpose:_.purpose||"app.bsky.graph.defs#modlist",createdAt:_.createdAt,memberCount:_.listItemCount||0})).sort((_,E)=>new Date(E.createdAt)-new Date(_.createdAt));ce.setUserLists(g)}catch(v){t(4,a=v.message||"Failed to load your lists")}finally{t(3,l=!1)}}}function c(v){const g=v.target.value;if(g){const _=s.userLists.find(E=>E.uri===g);_&&ce.setSelectedList(_)}else ce.setSelectedList(null)}function f(){t(2,i=!0)}function h(){t(2,i=!1)}function y(){Be.signOut(),ce.setSelectedList(null)}return r.$$.update=()=>{r.$$.dirty&3&&n.session&&s.userLists.length===0&&u()},[s,n,i,l,a,c,f,h,y]}class gn extends Ce{constructor(e){super(),Te(this,e,bn,hn,ke,{})}}function Zt(r){let e,t;return e=new Fr({}),e.$on("close",r[2]),{c(){Ae(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},p:Y,i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function yn(r){let e,t,s,n,i,l,a,u,c,f,h,y,v,g,_,E=r[0]&&Zt(r);return{c(){e=p("div"),t=p("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${yt.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-3xl font-bold text-slate-800 mb-4">Welcome to Bluesky List Manager</h2> <p class="text-lg text-slate-600 mb-6">Find and manage profiles in your Bluesky lists with ease.</p>`,s=A(),n=p("div"),i=p("div"),i.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-3">🔍 What you can do:</h3> <ul class="space-y-2 text-blue-700"><li class="flex items-start"><span class="text-blue-500 mr-2">•</span> <span><strong>Search profiles</strong> by keywords in their bio, display name, or handle</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">•</span> <span><strong>Check if profiles</strong> are already in your selected list</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">•</span> <span><strong>Add multiple profiles</strong> to your lists with one click</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">•</span> <span><strong>View and manage</strong> your existing list members</span></li></ul>',l=A(),a=p("div"),a.innerHTML=`<h3 class="text-lg font-semibold text-green-800 mb-3">🔐 Privacy &amp; Security</h3> <p class="text-green-700 mb-3">This app is a client-side application. Your Bluesky credentials are stored locally in your
				browser and are never sent to our servers. We only communicate directly with Bluesky&#39;s API
				using your authentication token.</p> <p class="text-sm text-green-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code
				(and contribute!) on
				<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-green-600 hover:text-green-700 underline">GitHub</a>.</p>`,u=A(),c=p("div"),f=p("button"),f.textContent="🔐 Get Started - Sign in with Bluesky",h=A(),E&&E.c(),y=He(),d(t,"class","text-center mb-8"),d(i,"class","bg-blue-50 p-6 rounded-lg border border-blue-200"),d(a,"class","bg-green-50 p-6 rounded-lg border border-green-200"),d(f,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-8 py-3 rounded-lg text-lg font-medium cursor-pointer transition-colors duration-200"),d(c,"class","text-center"),d(n,"class","space-y-6"),d(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-2xl mx-auto")},m(C,$){L(C,e,$),o(e,t),o(e,s),o(e,n),o(n,i),o(n,l),o(n,a),o(n,u),o(n,c),o(c,f),L(C,h,$),E&&E.m(C,$),L(C,y,$),v=!0,g||(_=ee(f,"click",r[1]),g=!0)},p(C,[$]){C[0]?E?(E.p(C,$),$&1&&te(E,1)):(E=Zt(C),E.c(),te(E,1),E.m(y.parentNode,y)):E&&(st(),ie(E,1,1,()=>{E=null}),nt())},i(C){v||(te(E),v=!0)},o(C){ie(E),v=!1},d(C){C&&(P(e),P(h),P(y)),E&&E.d(C),g=!1,_()}}}function _n(r,e,t){let s=!1;function n(){t(0,s=!0)}function i(){t(0,s=!1)}return[s,n,i]}class vn extends Ce{constructor(e){super(),Te(this,e,_n,yn,ke,{})}}function wn(r){let e,t,s;return{c(){e=p("h3"),e.textContent="Select a List",t=A(),s=p("p"),s.textContent="Choose a list from the dropdown above to get started.",d(e,"class","text-lg font-semibold text-slate-800 mb-2"),d(s,"class","text-slate-600")},m(n,i){L(n,e,i),L(n,t,i),L(n,s,i)},d(n){n&&(P(e),P(t),P(s))}}}function Sn(r){let e,t,s;return{c(){e=p("h3"),e.textContent="No Lists Found",t=A(),s=p("p"),s.textContent="You don't have any lists yet. Create a list on Bluesky first!",d(e,"class","text-lg font-semibold text-slate-800 mb-2"),d(s,"class","text-slate-600")},m(n,i){L(n,e,i),L(n,t,i),L(n,s,i)},d(n){n&&(P(e),P(t),P(s))}}}function kn(r){let e,t,s,n,i,l,a;function u(h,y){return h[0].userLists.length===0?Sn:wn}let c=u(r),f=c(r);return{c(){e=p("div"),t=p("div"),s=p("div"),s.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=A(),i=p("div"),l=p("div"),l.innerHTML=`<img src="${yt.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,a=A(),f.c(),d(s,"class","text-center mb-8"),d(l,"class","text-4xl mb-4"),d(i,"class","text-center py-12"),d(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),d(e,"class","max-w-4xl mx-auto")},m(h,y){L(h,e,y),o(e,t),o(t,s),o(t,n),o(t,i),o(i,l),o(i,a),f.m(i,null)},p(h,[y]){c!==(c=u(h))&&(f.d(1),f=c(h),f&&(f.c(),f.m(i,null)))},i:Y,o:Y,d(h){h&&P(e),f.d()}}}function En(r,e,t){let s;return Le(r,ce,n=>t(0,s=n)),[s]}class Pn extends Ce{constructor(e){super(),Te(this,e,En,kn,ke,{})}}function Ln(r){let e,t,s,n,i,l,a,u,c,f,h,y=(r[0].displayName||r[0].handle)+"",v,g,_,E,C=r[0].handle+"",$,z,H,S=r[0].description&&Qt(r);function O(k,w){if(k[3]==="Already in list")return Cn;if(k[3]==="New candidate")return Tn;if(k[2])return Mn}let W=O(r),I=W&&W(r);return{c(){e=p("div"),t=p("div"),s=p("div"),n=p("img"),u=A(),c=p("div"),f=p("div"),h=p("h3"),v=M(y),g=A(),_=p("span"),E=M("@"),$=M(C),z=A(),S&&S.c(),H=A(),I&&I.c(),rt(n.src,i=bt(r[0]))||d(n,"src",i),d(n,"alt",l=r[0].displayName||r[0].handle),d(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),d(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(r[0].displayName||r[0].handle)+"&background=6366f1&color=fff&size=64'"),d(s,"class","flex-shrink-0"),d(h,"class","text-base font-semibold text-gray-900 truncate"),d(_,"class","text-sm text-gray-600 truncate"),d(f,"class","flex items-center space-x-2 mb-1"),d(c,"class","flex-1 min-w-0"),d(t,"class","flex items-start space-x-3"),d(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200")},m(k,w){L(k,e,w),o(e,t),o(t,s),o(s,n),o(t,u),o(t,c),o(c,f),o(f,h),o(h,v),o(f,g),o(f,_),o(_,E),o(_,$),o(c,z),S&&S.m(c,null),o(c,H),I&&I.m(c,null)},p(k,w){w&1&&!rt(n.src,i=bt(k[0]))&&d(n,"src",i),w&1&&l!==(l=k[0].displayName||k[0].handle)&&d(n,"alt",l),w&1&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(k[0].displayName||k[0].handle)+"&background=6366f1&color=fff&size=64'")&&d(n,"onerror",a),w&1&&y!==(y=(k[0].displayName||k[0].handle)+"")&&q(v,y),w&1&&C!==(C=k[0].handle+"")&&q($,C),k[0].description?S?S.p(k,w):(S=Qt(k),S.c(),S.m(c,H)):S&&(S.d(1),S=null),W===(W=O(k))&&I?I.p(k,w):(I&&I.d(1),I=W&&W(k),I&&(I.c(),I.m(c,null)))},d(k){k&&P(e),S&&S.d(),I&&I.d()}}}function An(r){let e,t,s,n,i,l,a,u,c,f,h,y=(r[0].displayName||r[0].handle)+"",v,g,_,E,C=r[0].handle+"",$,z,H,S,O,W,I,k,w=r[0].description&&Xt(r);function K(j,re){if(j[3]==="Already in list")return Kn;if(j[3]==="New candidate")return On;if(j[2])return Rn}let G=K(r),B=G&&G(r);return{c(){e=p("a"),t=p("div"),s=p("div"),n=p("img"),u=A(),c=p("div"),f=p("div"),h=p("h3"),v=M(y),g=A(),_=p("span"),E=M("@"),$=M(C),z=A(),w&&w.c(),H=A(),B&&B.c(),S=A(),O=p("div"),O.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',rt(n.src,i=bt(r[0]))||d(n,"src",i),d(n,"alt",l=r[0].displayName||r[0].handle),d(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),d(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(r[0].displayName||r[0].handle)+"&background=6366f1&color=fff&size=64'"),d(s,"class","flex-shrink-0"),d(h,"class","text-base font-semibold text-gray-900 truncate"),d(_,"class","text-sm text-gray-600 truncate"),d(f,"class","flex items-center space-x-2 mb-1"),d(c,"class","flex-1 min-w-0"),d(O,"class","flex-shrink-0"),d(t,"class","flex items-start space-x-3"),d(e,"href",W="https://bsky.app/profile/"+r[0].handle),d(e,"target","_blank"),d(e,"rel","noopener noreferrer"),d(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200")},m(j,re){L(j,e,re),o(e,t),o(t,s),o(s,n),o(t,u),o(t,c),o(c,f),o(f,h),o(h,v),o(f,g),o(f,_),o(_,E),o(_,$),o(c,z),w&&w.m(c,null),o(c,H),B&&B.m(c,null),o(t,S),o(t,O),I||(k=ee(e,"click",r[8]),I=!0)},p(j,re){re&1&&!rt(n.src,i=bt(j[0]))&&d(n,"src",i),re&1&&l!==(l=j[0].displayName||j[0].handle)&&d(n,"alt",l),re&1&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(j[0].displayName||j[0].handle)+"&background=6366f1&color=fff&size=64'")&&d(n,"onerror",a),re&1&&y!==(y=(j[0].displayName||j[0].handle)+"")&&q(v,y),re&1&&C!==(C=j[0].handle+"")&&q($,C),j[0].description?w?w.p(j,re):(w=Xt(j),w.c(),w.m(c,H)):w&&(w.d(1),w=null),G===(G=K(j))&&B?B.p(j,re):(B&&B.d(1),B=G&&G(j),B&&(B.c(),B.m(c,null))),re&1&&W!==(W="https://bsky.app/profile/"+j[0].handle)&&d(e,"href",W)},d(j){j&&P(e),w&&w.d(),B&&B.d(),I=!1,k()}}}function Qt(r){let e,t=r[0].description+"",s;return{c(){e=p("p"),s=M(t),d(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,i){L(n,e,i),o(e,s)},p(n,i){i&1&&t!==(t=n[0].description+"")&&q(s,t)},d(n){n&&P(e)}}}function Mn(r){let e,t,s,n,i,l;return{c(){e=p("div"),t=p("input"),s=A(),n=p("span"),n.textContent="Select to add to list",d(t,"type","checkbox"),t.checked=r[1],d(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),d(n,"class","text-sm text-gray-600"),d(e,"class","flex items-center space-x-2")},m(a,u){L(a,e,u),o(e,t),o(e,s),o(e,n),i||(l=ee(t,"change",r[6]),i=!0)},p(a,u){u&2&&(t.checked=a[1])},d(a){a&&P(e),i=!1,l()}}}function Tn(r){let e,t,s,n,i,l,a;function u(h,y){return h[5]?In:xn}let c=u(r),f=c(r);return{c(){e=p("div"),t=p("span"),s=M(r[3]),n=A(),i=p("button"),f.c(),d(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),i.disabled=r[5],d(i,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),d(e,"class","flex items-center space-x-2")},m(h,y){L(h,e,y),o(e,t),o(t,s),o(e,n),o(e,i),f.m(i,null),l||(a=ee(i,"click",r[7]),l=!0)},p(h,y){y&8&&q(s,h[3]),c!==(c=u(h))&&(f.d(1),f=c(h),f&&(f.c(),f.m(i,null))),y&32&&(i.disabled=h[5])},d(h){h&&P(e),f.d(),l=!1,a()}}}function Cn(r){let e,t,s;return{c(){e=p("div"),t=p("span"),s=M(r[3]),d(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),d(e,"class","flex items-center space-x-2")},m(n,i){L(n,e,i),o(e,t),o(t,s)},p(n,i){i&8&&q(s,n[3])},d(n){n&&P(e)}}}function xn(r){let e;return{c(){e=M("Add to list")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function In(r){let e,t;return{c(){e=p("span"),t=M(`
                Adding...`),d(e,"class","loading-spinner mr-1")},m(s,n){L(s,e,n),L(s,t,n)},d(s){s&&(P(e),P(t))}}}function Xt(r){let e,t=r[0].description+"",s;return{c(){e=p("p"),s=M(t),d(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,i){L(n,e,i),o(e,s)},p(n,i){i&1&&t!==(t=n[0].description+"")&&q(s,t)},d(n){n&&P(e)}}}function Rn(r){let e,t,s,n,i,l;return{c(){e=p("div"),t=p("input"),s=A(),n=p("span"),n.textContent="Select to add to list",d(t,"type","checkbox"),t.checked=r[1],d(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),d(n,"class","text-sm text-gray-600"),d(e,"class","flex items-center space-x-2")},m(a,u){L(a,e,u),o(e,t),o(e,s),o(e,n),i||(l=ee(t,"change",r[6]),i=!0)},p(a,u){u&2&&(t.checked=a[1])},d(a){a&&P(e),i=!1,l()}}}function On(r){let e,t,s,n,i,l,a;function u(h,y){return h[5]?Dn:Nn}let c=u(r),f=c(r);return{c(){e=p("div"),t=p("span"),s=M(r[3]),n=A(),i=p("button"),f.c(),d(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),i.disabled=r[5],d(i,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),d(e,"class","flex items-center space-x-2")},m(h,y){L(h,e,y),o(e,t),o(t,s),o(e,n),o(e,i),f.m(i,null),l||(a=ee(i,"click",r[7]),l=!0)},p(h,y){y&8&&q(s,h[3]),c!==(c=u(h))&&(f.d(1),f=c(h),f&&(f.c(),f.m(i,null))),y&32&&(i.disabled=h[5])},d(h){h&&P(e),f.d(),l=!1,a()}}}function Kn(r){let e,t,s;return{c(){e=p("div"),t=p("span"),s=M(r[3]),d(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),d(e,"class","flex items-center space-x-2")},m(n,i){L(n,e,i),o(e,t),o(t,s)},p(n,i){i&8&&q(s,n[3])},d(n){n&&P(e)}}}function Nn(r){let e;return{c(){e=M("Add to list")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function Dn(r){let e,t;return{c(){e=p("span"),t=M(`
                Adding...`),d(e,"class","loading-spinner mr-1")},m(s,n){L(s,e,n),L(s,t,n)},d(s){s&&(P(e),P(t))}}}function Un(r){let e;function t(i,l){return i[4]?An:Ln}let s=t(r),n=s(r);return{c(){n.c(),e=He()},m(i,l){n.m(i,l),L(i,e,l)},p(i,[l]){s===(s=t(i))&&n?n.p(i,l):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},i:Y,o:Y,d(i){i&&P(e),n.d(i)}}}function bt(r){return r.avatar?r.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.displayName||r.handle)}&background=6366f1&color=fff&size=64`}function Bn(r,e,t){let{profile:s}=e,{isSelected:n=!1}=e,{onSelect:i=()=>{}}=e,{showCheckbox:l=!0}=e,{statusTag:a=null}=e,{clickable:u=!1}=e,{onAddToList:c=()=>{}}=e,{isAddingToList:f=!1}=e;function h(){i(s)}function y(g){g.preventDefault(),g.stopPropagation(),c(s)}function v(g){u&&!l||u&&l&&(g.target.type==="checkbox"||g.target.closest('input[type="checkbox"]'))&&(g.preventDefault(),g.stopPropagation())}return r.$$set=g=>{"profile"in g&&t(0,s=g.profile),"isSelected"in g&&t(1,n=g.isSelected),"onSelect"in g&&t(9,i=g.onSelect),"showCheckbox"in g&&t(2,l=g.showCheckbox),"statusTag"in g&&t(3,a=g.statusTag),"clickable"in g&&t(4,u=g.clickable),"onAddToList"in g&&t(10,c=g.onAddToList),"isAddingToList"in g&&t(5,f=g.isAddingToList)},[s,n,l,a,u,f,h,y,v,i,c]}class Hn extends Ce{constructor(e){super(),Te(this,e,Bn,Un,ke,{profile:0,isSelected:1,onSelect:9,showCheckbox:2,statusTag:3,clickable:4,onAddToList:10,isAddingToList:5})}}var dt={};(function r(e,t,s,n){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),l=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var b=new OffscreenCanvas(1,1),m=b.getContext("2d");m.fillRect(0,0,1,1);var T=b.transferToImageBitmap();try{m.createPattern(T,"no-repeat")}catch{return!1}return!0}();function u(){}function c(b){var m=t.exports.Promise,T=m!==void 0?m:e.Promise;return typeof T=="function"?new T(b):(b(u,u),null)}var f=function(b,m){return{transform:function(T){if(b)return T;if(m.has(T))return m.get(T);var U=new OffscreenCanvas(T.width,T.height),N=U.getContext("2d");return N.drawImage(T,0,0),m.set(T,U),U},clear:function(){m.clear()}}}(a,new Map),h=function(){var b=Math.floor(16.666666666666668),m,T,U={},N=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(m=function(D){var R=Math.random();return U[R]=requestAnimationFrame(function x(J){N===J||N+b-1<J?(N=J,delete U[R],D()):U[R]=requestAnimationFrame(x)}),R},T=function(D){U[D]&&cancelAnimationFrame(U[D])}):(m=function(D){return setTimeout(D,b)},T=function(D){return clearTimeout(D)}),{frame:m,cancel:T}}(),y=function(){var b,m,T={};function U(N){function D(R,x){N.postMessage({options:R||{},callback:x})}N.init=function(x){var J=x.transferControlToOffscreen();N.postMessage({canvas:J},[J])},N.fire=function(x,J,Q){if(m)return D(x,null),m;var se=Math.random().toString(36).slice(2);return m=c(function(X){function ne(ae){ae.data.callback===se&&(delete T[se],N.removeEventListener("message",ne),m=null,f.clear(),Q(),X())}N.addEventListener("message",ne),D(x,se),T[se]=ne.bind(null,{data:{callback:se}})}),m},N.reset=function(){N.postMessage({reset:!0});for(var x in T)T[x](),delete T[x]}}return function(){if(b)return b;if(!s&&i){var N=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{b=new Worker(URL.createObjectURL(new Blob([N])))}catch(D){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",D),null}U(b)}return b}}(),v={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(b,m){return m?m(b):b}function _(b){return b!=null}function E(b,m,T){return g(b&&_(b[m])?b[m]:v[m],T)}function C(b){return b<0?0:Math.floor(b)}function $(b,m){return Math.floor(Math.random()*(m-b))+b}function z(b){return parseInt(b,16)}function H(b){return b.map(S)}function S(b){var m=String(b).replace(/[^0-9a-f]/gi,"");return m.length<6&&(m=m[0]+m[0]+m[1]+m[1]+m[2]+m[2]),{r:z(m.substring(0,2)),g:z(m.substring(2,4)),b:z(m.substring(4,6))}}function O(b){var m=E(b,"origin",Object);return m.x=E(m,"x",Number),m.y=E(m,"y",Number),m}function W(b){b.width=document.documentElement.clientWidth,b.height=document.documentElement.clientHeight}function I(b){var m=b.getBoundingClientRect();b.width=m.width,b.height=m.height}function k(b){var m=document.createElement("canvas");return m.style.position="fixed",m.style.top="0px",m.style.left="0px",m.style.pointerEvents="none",m.style.zIndex=b,m}function w(b,m,T,U,N,D,R,x,J){b.save(),b.translate(m,T),b.rotate(D),b.scale(U,N),b.arc(0,0,1,R,x,J),b.restore()}function K(b){var m=b.angle*(Math.PI/180),T=b.spread*(Math.PI/180);return{x:b.x,y:b.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:b.startVelocity*.5+Math.random()*b.startVelocity,angle2D:-m+(.5*T-Math.random()*T),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:b.color,shape:b.shape,tick:0,totalTicks:b.ticks,decay:b.decay,drift:b.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:b.gravity*3,ovalScalar:.6,scalar:b.scalar,flat:b.flat}}function G(b,m){m.x+=Math.cos(m.angle2D)*m.velocity+m.drift,m.y+=Math.sin(m.angle2D)*m.velocity+m.gravity,m.velocity*=m.decay,m.flat?(m.wobble=0,m.wobbleX=m.x+10*m.scalar,m.wobbleY=m.y+10*m.scalar,m.tiltSin=0,m.tiltCos=0,m.random=1):(m.wobble+=m.wobbleSpeed,m.wobbleX=m.x+10*m.scalar*Math.cos(m.wobble),m.wobbleY=m.y+10*m.scalar*Math.sin(m.wobble),m.tiltAngle+=.1,m.tiltSin=Math.sin(m.tiltAngle),m.tiltCos=Math.cos(m.tiltAngle),m.random=Math.random()+2);var T=m.tick++/m.totalTicks,U=m.x+m.random*m.tiltCos,N=m.y+m.random*m.tiltSin,D=m.wobbleX+m.random*m.tiltCos,R=m.wobbleY+m.random*m.tiltSin;if(b.fillStyle="rgba("+m.color.r+", "+m.color.g+", "+m.color.b+", "+(1-T)+")",b.beginPath(),l&&m.shape.type==="path"&&typeof m.shape.path=="string"&&Array.isArray(m.shape.matrix))b.fill(fe(m.shape.path,m.shape.matrix,m.x,m.y,Math.abs(D-U)*.1,Math.abs(R-N)*.1,Math.PI/10*m.wobble));else if(m.shape.type==="bitmap"){var x=Math.PI/10*m.wobble,J=Math.abs(D-U)*.1,Q=Math.abs(R-N)*.1,se=m.shape.bitmap.width*m.scalar,X=m.shape.bitmap.height*m.scalar,ne=new DOMMatrix([Math.cos(x)*J,Math.sin(x)*J,-Math.sin(x)*Q,Math.cos(x)*Q,m.x,m.y]);ne.multiplySelf(new DOMMatrix(m.shape.matrix));var ae=b.createPattern(f.transform(m.shape.bitmap),"no-repeat");ae.setTransform(ne),b.globalAlpha=1-T,b.fillStyle=ae,b.fillRect(m.x-se/2,m.y-X/2,se,X),b.globalAlpha=1}else if(m.shape==="circle")b.ellipse?b.ellipse(m.x,m.y,Math.abs(D-U)*m.ovalScalar,Math.abs(R-N)*m.ovalScalar,Math.PI/10*m.wobble,0,2*Math.PI):w(b,m.x,m.y,Math.abs(D-U)*m.ovalScalar,Math.abs(R-N)*m.ovalScalar,Math.PI/10*m.wobble,0,2*Math.PI);else if(m.shape==="star")for(var Z=Math.PI/2*3,ue=4*m.scalar,ye=8*m.scalar,_e=m.x,xe=m.y,$e=5,Ee=Math.PI/$e;$e--;)_e=m.x+Math.cos(Z)*ye,xe=m.y+Math.sin(Z)*ye,b.lineTo(_e,xe),Z+=Ee,_e=m.x+Math.cos(Z)*ue,xe=m.y+Math.sin(Z)*ue,b.lineTo(_e,xe),Z+=Ee;else b.moveTo(Math.floor(m.x),Math.floor(m.y)),b.lineTo(Math.floor(m.wobbleX),Math.floor(N)),b.lineTo(Math.floor(D),Math.floor(R)),b.lineTo(Math.floor(U),Math.floor(m.wobbleY));return b.closePath(),b.fill(),m.tick<m.totalTicks}function B(b,m,T,U,N){var D=m.slice(),R=b.getContext("2d"),x,J,Q=c(function(se){function X(){x=J=null,R.clearRect(0,0,U.width,U.height),f.clear(),N(),se()}function ne(){s&&!(U.width===n.width&&U.height===n.height)&&(U.width=b.width=n.width,U.height=b.height=n.height),!U.width&&!U.height&&(T(b),U.width=b.width,U.height=b.height),R.clearRect(0,0,U.width,U.height),D=D.filter(function(ae){return G(R,ae)}),D.length?x=h.frame(ne):X()}x=h.frame(ne),J=X});return{addFettis:function(se){return D=D.concat(se),Q},canvas:b,promise:Q,reset:function(){x&&h.cancel(x),J&&J()}}}function j(b,m){var T=!b,U=!!E(m||{},"resize"),N=!1,D=E(m,"disableForReducedMotion",Boolean),R=i&&!!E(m||{},"useWorker"),x=R?y():null,J=T?W:I,Q=b&&x?!!b.__confetti_initialized:!1,se=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,X;function ne(Z,ue,ye){for(var _e=E(Z,"particleCount",C),xe=E(Z,"angle",Number),$e=E(Z,"spread",Number),Ee=E(Z,"startVelocity",Number),Jr=E(Z,"decay",Number),zr=E(Z,"gravity",Number),jr=E(Z,"drift",Number),It=E(Z,"colors",H),qr=E(Z,"ticks",Number),Rt=E(Z,"shapes"),Vr=E(Z,"scalar"),Yr=!!E(Z,"flat"),Ot=O(Z),Kt=_e,_t=[],Gr=b.width*Ot.x,Zr=b.height*Ot.y;Kt--;)_t.push(K({x:Gr,y:Zr,angle:xe,spread:$e,startVelocity:Ee,color:It[Kt%It.length],shape:Rt[$(0,Rt.length)],ticks:qr,decay:Jr,gravity:zr,drift:jr,scalar:Vr,flat:Yr}));return X?X.addFettis(_t):(X=B(b,_t,J,ue,ye),X.promise)}function ae(Z){var ue=D||E(Z,"disableForReducedMotion",Boolean),ye=E(Z,"zIndex",Number);if(ue&&se)return c(function(Ee){Ee()});T&&X?b=X.canvas:T&&!b&&(b=k(ye),document.body.appendChild(b)),U&&!Q&&J(b);var _e={width:b.width,height:b.height};x&&!Q&&x.init(b),Q=!0,x&&(b.__confetti_initialized=!0);function xe(){if(x){var Ee={getBoundingClientRect:function(){if(!T)return b.getBoundingClientRect()}};J(Ee),x.postMessage({resize:{width:Ee.width,height:Ee.height}});return}_e.width=_e.height=null}function $e(){X=null,U&&(N=!1,e.removeEventListener("resize",xe)),T&&b&&(document.body.contains(b)&&document.body.removeChild(b),b=null,Q=!1)}return U&&!N&&(N=!0,e.addEventListener("resize",xe,!1)),x?x.fire(Z,_e,$e):ne(Z,_e,$e)}return ae.reset=function(){x&&x.reset(),X&&X.reset()},ae}var re;function de(){return re||(re=j(null,{useWorker:!0,resize:!0})),re}function fe(b,m,T,U,N,D,R){var x=new Path2D(b),J=new Path2D;J.addPath(x,new DOMMatrix(m));var Q=new Path2D;return Q.addPath(J,new DOMMatrix([Math.cos(R)*N,Math.sin(R)*N,-Math.sin(R)*D,Math.cos(R)*D,T,U])),Q}function oe(b){if(!l)throw new Error("path confetti are not supported in this browser");var m,T;typeof b=="string"?m=b:(m=b.path,T=b.matrix);var U=new Path2D(m),N=document.createElement("canvas"),D=N.getContext("2d");if(!T){for(var R=1e3,x=R,J=R,Q=0,se=0,X,ne,ae=0;ae<R;ae+=2)for(var Z=0;Z<R;Z+=2)D.isPointInPath(U,ae,Z,"nonzero")&&(x=Math.min(x,ae),J=Math.min(J,Z),Q=Math.max(Q,ae),se=Math.max(se,Z));X=Q-x,ne=se-J;var ue=10,ye=Math.min(ue/X,ue/ne);T=[ye,0,0,ye,-Math.round(X/2+x)*ye,-Math.round(ne/2+J)*ye]}return{type:"path",path:m,matrix:T}}function V(b){var m,T=1,U="#000000",N='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof b=="string"?m=b:(m=b.text,T="scalar"in b?b.scalar:T,N="fontFamily"in b?b.fontFamily:N,U="color"in b?b.color:U);var D=10*T,R=""+D+"px "+N,x=new OffscreenCanvas(D,D),J=x.getContext("2d");J.font=R;var Q=J.measureText(m),se=Math.ceil(Q.actualBoundingBoxRight+Q.actualBoundingBoxLeft),X=Math.ceil(Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent),ne=2,ae=Q.actualBoundingBoxLeft+ne,Z=Q.actualBoundingBoxAscent+ne;se+=ne+ne,X+=ne+ne,x=new OffscreenCanvas(se,X),J=x.getContext("2d"),J.font=R,J.fillStyle=U,J.fillText(m,ae,Z);var ue=1/T;return{type:"bitmap",bitmap:x.transferToImageBitmap(),matrix:[ue,0,0,ue,-se*ue/2,-X*ue/2]}}t.exports=function(){return de().apply(this,arguments)},t.exports.reset=function(){de().reset()},t.exports.create=j,t.exports.shapeFromPath=oe,t.exports.shapeFromText=V})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),dt,!1);const Et=dt.exports;dt.exports.create;function er(r,e,t){const s=r.slice();return s[20]=e[t].profile,s[21]=e[t].status,s}function $n(r){let e;return{c(){e=M("🔍 Search")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function Wn(r){let e,t;return{c(){e=p("span"),t=M(`
						Searching...`),d(e,"class","loading-spinner svelte-165a6uh")},m(s,n){L(s,e,n),L(s,t,n)},d(s){s&&(P(e),P(t))}}}function tr(r){let e,t,s;return{c(){e=p("div"),t=p("p"),s=M(r[4]),d(t,"class","text-red-700"),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,i){L(n,e,i),o(e,t),o(t,s)},p(n,i){i&16&&q(s,n[4])},d(n){n&&P(e)}}}function Fn(r){let e;return{c(){e=p("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',d(e,"class","text-center py-8")},m(t,s){L(t,e,s)},p:Y,i:Y,o:Y,d(t){t&&P(e)}}}function Jn(r){let e;return{c(){e=p("div"),e.innerHTML='<div><div class="text-4xl mb-4">🔍</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',d(e,"class","text-center py-8")},m(t,s){L(t,e,s)},p:Y,i:Y,o:Y,d(t){t&&P(e)}}}function zn(r){let e,t,s,n=ge(r[7]),i=[];for(let u=0;u<n.length;u+=1)i[u]=rr(er(r,n,u));const l=u=>ie(i[u],1,1,()=>{i[u]=null});let a=r[5]&&sr(r);return{c(){e=p("div");for(let u=0;u<i.length;u+=1)i[u].c();t=A(),a&&a.c(),d(e,"class","space-y-4")},m(u,c){L(u,e,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);o(e,t),a&&a.m(e,null),s=!0},p(u,c){if(c&3266){n=ge(u[7]);let f;for(f=0;f<n.length;f+=1){const h=er(u,n,f);i[f]?(i[f].p(h,c),te(i[f],1)):(i[f]=rr(h),i[f].c(),te(i[f],1),i[f].m(e,t))}for(st(),f=n.length;f<i.length;f+=1)l(f);nt()}u[5]?a?a.p(u,c):(a=sr(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){if(!s){for(let c=0;c<n.length;c+=1)te(i[c]);s=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)ie(i[c]);s=!1},d(u){u&&P(e),it(i,u),a&&a.d()}}}function rr(r){let e,t;return e=new Hn({props:{profile:r[20],isSelected:r[1].has(r[20].did),onSelect:r[10],statusTag:r[21],clickable:!0,onAddToList:r[11],isAddingToList:r[6].has(r[20].did)}}),{c(){Ae(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},p(s,n){const i={};n&128&&(i.profile=s[20]),n&130&&(i.isSelected=s[1].has(s[20].did)),n&128&&(i.statusTag=s[21]),n&192&&(i.isAddingToList=s[6].has(s[20].did)),e.$set(i)},i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function sr(r){let e,t,s,n;function i(u,c){return u[3]?qn:jn}let l=i(r),a=l(r);return{c(){e=p("div"),t=p("button"),a.c(),t.disabled=r[3],d(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),d(e,"class","text-center pt-4 border-t border-gray-200")},m(u,c){L(u,e,c),o(e,t),a.m(t,null),s||(n=ee(t,"click",r[9]),s=!0)},p(u,c){l!==(l=i(u))&&(a.d(1),a=l(u),a&&(a.c(),a.m(t,null))),c&8&&(t.disabled=u[3])},d(u){u&&P(e),a.d(),s=!1,n()}}}function jn(r){let e;return{c(){e=M("Load More Results")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function qn(r){let e,t;return{c(){e=p("span"),t=M(`
								Loading...`),d(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(s,n){L(s,e,n),L(s,t,n)},d(s){s&&(P(e),P(t))}}}function Vn(r){let e,t,s,n,i,l,a,u,c,f,h,y,v,g,_,E,C,$;function z(w,K){return w[3]?Wn:$n}let H=z(r),S=H(r),O=r[4]&&tr(r);const W=[zn,Jn,Fn],I=[];function k(w,K){return w[0].length>0?0:w[2]&&!w[3]?1:w[2]?-1:2}return~(g=k(r))&&(_=I[g]=W[g](r)),{c(){e=p("div"),t=p("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search Profiles</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',s=A(),n=p("div"),i=p("form"),l=p("div"),a=p("label"),a.textContent="Search for:",u=A(),c=p("input"),f=A(),h=p("button"),S.c(),y=A(),O&&O.c(),v=A(),_&&_.c(),d(t,"class","p-6 border-b border-gray-200"),d(a,"for","search-input"),d(a,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),d(c,"id","search-input"),d(c,"type","text"),d(c,"placeholder","e.g., belge, artist, developer..."),d(c,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),c.required=!0,d(h,"type","submit"),h.disabled=r[3],d(h,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),d(l,"class","flex gap-4 items-center flex-wrap"),d(i,"class","mb-6"),d(n,"id","profile-search-container"),d(n,"class","p-6"),d(e,"class","bg-white rounded-lg shadow-sm border border-gray-200")},m(w,K){L(w,e,K),o(e,t),o(e,s),o(e,n),o(n,i),o(i,l),o(l,a),o(l,u),o(l,c),he(c,r[2]),o(l,f),o(l,h),S.m(h,null),o(n,y),O&&O.m(n,null),o(n,v),~g&&I[g].m(n,null),E=!0,C||($=[ee(c,"input",r[14]),ee(i,"submit",Pr(r[8]))],C=!0)},p(w,[K]){K&4&&c.value!==w[2]&&he(c,w[2]),H!==(H=z(w))&&(S.d(1),S=H(w),S&&(S.c(),S.m(h,null))),(!E||K&8)&&(h.disabled=w[3]),w[4]?O?O.p(w,K):(O=tr(w),O.c(),O.m(n,v)):O&&(O.d(1),O=null);let G=g;g=k(w),g===G?~g&&I[g].p(w,K):(_&&(st(),ie(I[G],1,1,()=>{I[G]=null}),nt()),~g?(_=I[g],_?_.p(w,K):(_=I[g]=W[g](w),_.c()),te(_,1),_.m(n,null)):_=null)},i(w){E||(te(_),E=!0)},o(w){ie(_),E=!1},d(w){w&&P(e),S.d(),O&&O.d(),~g&&I[g].d(),C=!1,Me($)}}}function Yn(r,e,t){let s,n,i;Le(r,Be,S=>t(16,n=S)),Le(r,ce,S=>t(13,i=S));let l="",a=[],u=!1,c="",f=new Set,h=null,y=!1,v=new Set;async function g(){if(!(!l.trim()||!n.session)){t(3,u=!0),t(4,c=""),t(0,a=[]),f.clear(),h=null,t(5,y=!1);try{const S=await Oe.searchProfiles(n.session,l,n.authType);t(0,a=S.actors||[]),h=S.cursor,t(5,y=!!S.cursor)}catch(S){t(4,c=S.message||"Failed to search profiles")}finally{t(3,u=!1)}}}async function _(){if(!(!y||u||!n.session)){t(3,u=!0),t(4,c="");try{const S=await Oe.searchProfiles(n.session,l,n.authType,25,h);t(0,a=[...a,...S.actors||[]]),h=S.cursor,t(5,y=!!S.cursor)}catch(S){t(4,c=S.message||"Failed to load more profiles")}finally{t(3,u=!1)}}}function E(S){f.has(S.did)?f.delete(S.did):f.add(S.did),t(1,f)}let C=null;async function $(S){if(!(!n.session||!i.selectedList||v.has(S.did))){v.add(S.did),t(6,v);try{await Oe.addToList(n.session,S.did,i.selectedList.uri),await ce.fetchAndAddProfile(n.session,S.did),z()}catch(O){console.error("Failed to add profile to list:",O)}finally{v.delete(S.did),t(6,v)}}}function z(){Et({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Et({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Et({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}function H(){l=this.value,t(2,l)}return r.$$.update=()=>{r.$$.dirty&8192&&i.selectedList&&t(12,C=i.selectedList.uri),r.$$.dirty&12290&&i.selectedList&&C&&C!==i.selectedList.uri&&(t(0,a=[]),f.clear(),h=null,t(5,y=!1)),r.$$.dirty&8193&&t(7,s=a.map(S=>({profile:S,status:i.listMembers.includes(S.did)?"Already in list":"New candidate"})))},[a,f,l,u,c,y,v,s,g,_,E,$,C,i,H]}class Gn extends Ce{constructor(e){super(),Te(this,e,Yn,Vn,ke,{})}}function nr(r){let e,t=r[0].selectedList.description+"",s;return{c(){e=p("p"),s=M(t),d(e,"class","text-slate-600 mt-1")},m(n,i){L(n,e,i),o(e,s)},p(n,i){i&1&&t!==(t=n[0].selectedList.description+"")&&q(s,t)},d(n){n&&P(e)}}}function Zn(r){let e;return{c(){e=M("Unknown")},m(t,s){L(t,e,s)},p:Y,d(t){t&&P(e)}}}function Qn(r){let e=new Date(r[0].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=M(e)},m(s,n){L(s,t,n)},p(s,n){n&1&&e!==(e=new Date(s[0].selectedList.createdAt).toLocaleDateString()+"")&&q(t,e)},d(s){s&&P(t)}}}function Xn(r){var U,N,D,R;let e,t,s,n,i=(((U=r[0].selectedList)==null?void 0:U.name)||"List")+"",l,a,u,c,f,h=r[0].listMembers.length+"",y,v,g,_,E,C,$,z,H,S=((N=r[0].selectedList)==null?void 0:N.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",O,W,I,k,w,K,G,B,j,re,de,fe=(((D=r[0].selectedList)==null?void 0:D.uri)||"Not available")+"",oe,V=((R=r[0].selectedList)==null?void 0:R.description)&&nr(r);function b(x,J){var Q;return(Q=x[0].selectedList)!=null&&Q.createdAt?Qn:Zn}let m=b(r),T=m(r);return{c(){e=p("div"),t=p("div"),s=p("div"),n=p("h2"),l=M(i),a=A(),V&&V.c(),u=A(),c=p("div"),f=p("div"),y=M(h),v=A(),g=p("div"),g.textContent="Total Members",_=A(),E=p("div"),C=p("div"),$=p("div"),$.textContent="📊 List Type",z=A(),H=p("div"),O=M(S),W=A(),I=p("div"),k=p("div"),k.textContent="📅 Created",w=A(),K=p("div"),T.c(),G=A(),B=p("div"),j=p("div"),j.textContent="🔗 List URI",re=A(),de=p("div"),oe=M(fe),d(n,"class","text-xl font-bold text-slate-800"),d(f,"class","text-2xl font-bold text-blue-600"),d(g,"class","text-sm text-slate-500"),d(c,"class","text-right"),d(t,"class","flex items-center justify-between mb-4"),d($,"class","text-blue-600 font-semibold"),d(H,"class","text-sm text-slate-600 mt-1"),d(C,"class","bg-blue-50 p-4 rounded-lg"),d(k,"class","text-green-600 font-semibold"),d(K,"class","text-sm text-slate-600 mt-1"),d(I,"class","bg-green-50 p-4 rounded-lg"),d(j,"class","text-purple-600 font-semibold"),d(de,"class","text-xs text-slate-600 mt-1 break-all"),d(B,"class","bg-purple-50 p-4 rounded-lg"),d(E,"class","grid grid-cols-1 md:grid-cols-3 gap-4"),d(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6")},m(x,J){L(x,e,J),o(e,t),o(t,s),o(s,n),o(n,l),o(s,a),V&&V.m(s,null),o(t,u),o(t,c),o(c,f),o(f,y),o(c,v),o(c,g),o(e,_),o(e,E),o(E,C),o(C,$),o(C,z),o(C,H),o(H,O),o(E,W),o(E,I),o(I,k),o(I,w),o(I,K),T.m(K,null),o(E,G),o(E,B),o(B,j),o(B,re),o(B,de),o(de,oe)},p(x,[J]){var Q,se,X,ne;J&1&&i!==(i=(((Q=x[0].selectedList)==null?void 0:Q.name)||"List")+"")&&q(l,i),(se=x[0].selectedList)!=null&&se.description?V?V.p(x,J):(V=nr(x),V.c(),V.m(s,null)):V&&(V.d(1),V=null),J&1&&h!==(h=x[0].listMembers.length+"")&&q(y,h),J&1&&S!==(S=((X=x[0].selectedList)==null?void 0:X.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&q(O,S),m===(m=b(x))&&T?T.p(x,J):(T.d(1),T=m(x),T&&(T.c(),T.m(K,null))),J&1&&fe!==(fe=(((ne=x[0].selectedList)==null?void 0:ne.uri)||"Not available")+"")&&q(oe,fe)},i:Y,o:Y,d(x){x&&P(e),V&&V.d(),T.d()}}}function ei(r,e,t){let s;return Le(r,ce,n=>t(0,s=n)),[s]}class ti extends Ce{constructor(e){super(),Te(this,e,ei,Xn,ke,{})}}function ir(r,e,t){const s=r.slice();return s[24]=e[t],s}function lr(r,e,t){const s=r.slice();return s[30]=e[t],s}function or(r,e,t){const s=r.slice();return s[27]=e[t],s}function ar(r,e,t){const s=r.slice();return s[33]=e[t],s}function cr(r){let e,t,s,n,i,l,a=r[3].size+"",u,c,f,h;function y(_,E){return _[4]?si:ri}let v=y(r),g=v(r);return{c(){e=p("div"),t=p("div"),s=p("div"),n=p("button"),g.c(),i=A(),l=p("div"),u=M(a),c=M(" profiles selected"),n.disabled=r[4],d(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),d(s,"class","flex items-center gap-3"),d(l,"class","text-sm text-slate-600"),d(t,"class","flex items-center justify-between"),d(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm")},m(_,E){L(_,e,E),o(e,t),o(t,s),o(s,n),g.m(n,null),o(t,i),o(t,l),o(l,u),o(l,c),f||(h=ee(n,"click",r[10]),f=!0)},p(_,E){v===(v=y(_))&&g?g.p(_,E):(g.d(1),g=v(_),g&&(g.c(),g.m(n,null))),E[0]&16&&(n.disabled=_[4]),E[0]&8&&a!==(a=_[3].size+"")&&q(u,a)},d(_){_&&P(e),g.d(),f=!1,h()}}}function ri(r){let e,t=r[3].size+"",s,n;return{c(){e=M("Add "),s=M(t),n=M(" to List")},m(i,l){L(i,e,l),L(i,s,l),L(i,n,l)},p(i,l){l[0]&8&&t!==(t=i[3].size+"")&&q(s,t)},d(i){i&&(P(e),P(s),P(n))}}}function si(r){let e,t;return{c(){e=p("span"),t=M(`
							Adding...`),d(e,"class","loading-spinner mr-2 svelte-srpbru")},m(s,n){L(s,e,n),L(s,t,n)},p:Y,d(s){s&&(P(e),P(t))}}}function ur(r){let e,t,s,n=r[5].success.length+"",i,l;return{c(){e=p("div"),t=p("p"),s=M("✅ Successfully added "),i=M(n),l=M(" profiles to your list!"),d(t,"class","text-green-700 font-medium"),d(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(a,u){L(a,e,u),o(e,t),o(t,s),o(t,i),o(t,l)},p(a,u){u[0]&32&&n!==(n=a[5].success.length+"")&&q(i,n)},d(a){a&&P(e)}}}function dr(r){let e,t,s,n=r[5].errors.length+"",i,l,a,u,c=ge(r[5].errors),f=[];for(let h=0;h<c.length;h+=1)f[h]=fr(ar(r,c,h));return{c(){e=p("div"),t=p("p"),s=M("❌ Failed to add "),i=M(n),l=M(" profiles:"),a=A(),u=p("ul");for(let h=0;h<f.length;h+=1)f[h].c();d(t,"class","text-red-700 font-medium mb-2"),d(u,"class","text-red-600 text-sm space-y-1"),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(h,y){L(h,e,y),o(e,t),o(t,s),o(t,i),o(t,l),o(e,a),o(e,u);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(u,null)},p(h,y){if(y[0]&32&&n!==(n=h[5].errors.length+"")&&q(i,n),y[0]&32){c=ge(h[5].errors);let v;for(v=0;v<c.length;v+=1){const g=ar(h,c,v);f[v]?f[v].p(g,y):(f[v]=fr(g),f[v].c(),f[v].m(u,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=c.length}},d(h){h&&P(e),it(f,h)}}}function fr(r){let e,t,s=r[33].error+"",n;return{c(){e=p("li"),t=M("• "),n=M(s)},m(i,l){L(i,e,l),o(e,t),o(e,n)},p(i,l){l[0]&32&&s!==(s=i[33].error+"")&&q(n,s)},d(i){i&&P(e)}}}function ni(r){let e,t,s;function n(u,c){return u[7]?ui:u[0].listMemberProfiles.length>0?ci:ai}let i=n(r),l=i(r),a=r[0].listMembers.length>Qe&&gr(r);return{c(){e=p("div"),t=p("div"),l.c(),s=A(),a&&a.c(),d(t,"class","space-y-4 flex-1 overflow-y-auto"),d(e,"class","flex flex-col flex-1")},m(u,c){L(u,e,c),o(e,t),l.m(t,null),o(e,s),a&&a.m(e,null)},p(u,c){i===(i=n(u))&&l?l.p(u,c):(l.d(1),l=i(u),l&&(l.c(),l.m(t,null))),u[0].listMembers.length>Qe?a?a.p(u,c):(a=gr(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(u){u&&P(e),l.d(),a&&a.d()}}}function ii(r){let e;return{c(){e=p("div"),e.innerHTML='<div><div class="text-4xl mb-4">📝</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Members Yet</h3> <p class="text-slate-600">Your list is empty. Use the search to find and add profiles!</p></div>',d(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,s){L(t,e,s)},p:Y,d(t){t&&P(e)}}}function li(r){let e,t,s,n,i,l,a,u;return{c(){e=p("div"),t=p("div"),s=p("p"),n=M(r[2]),i=A(),l=p("button"),l.textContent="Try again",d(s,"class","text-red-700 mb-4"),d(l,"class","text-red-600 hover:text-red-800 underline"),d(t,"class","text-center"),d(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(c,f){L(c,e,f),o(e,t),o(t,s),o(s,n),o(t,i),o(t,l),a||(u=ee(l,"click",r[8]),a=!0)},p(c,f){f[0]&4&&q(n,c[2])},d(c){c&&P(e),a=!1,u()}}}function oi(r){let e;return{c(){e=p("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-srpbru"></div> <p class="text-slate-600">Loading list members...</p></div>',d(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,s){L(t,e,s)},p:Y,d(t){t&&P(e)}}}function ai(r){let e,t,s=r[2]&&pr(r),n=ge(r[0].listMembers.slice(0,100)),i=[];for(let l=0;l<n.length;l+=1)i[l]=mr(lr(r,n,l));return{c(){s&&s.c(),e=A();for(let l=0;l<i.length;l+=1)i[l].c();t=He()},m(l,a){s&&s.m(l,a),L(l,e,a);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,a);L(l,t,a)},p(l,a){if(l[2]?s?s.p(l,a):(s=pr(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),a[0]&1){n=ge(l[0].listMembers.slice(0,100));let u;for(u=0;u<n.length;u+=1){const c=lr(l,n,u);i[u]?i[u].p(c,a):(i[u]=mr(c),i[u].c(),i[u].m(t.parentNode,t))}for(;u<i.length;u+=1)i[u].d(1);i.length=n.length}},d(l){l&&(P(e),P(t)),s&&s.d(l),it(i,l)}}}function ci(r){let e,t=ge(r[0].listMemberProfiles),s=[];for(let n=0;n<t.length;n+=1)s[n]=br(or(r,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=He()},m(n,i){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(n,i);L(n,e,i)},p(n,i){if(i[0]&1){t=ge(n[0].listMemberProfiles);let l;for(l=0;l<t.length;l+=1){const a=or(n,t,l);s[l]?s[l].p(a,i):(s[l]=br(a),s[l].c(),s[l].m(e.parentNode,e))}for(;l<s.length;l+=1)s[l].d(1);s.length=t.length}},d(n){n&&P(e),it(s,n)}}}function ui(r){let e,t,s,n,i,l,a;return{c(){e=p("div"),t=p("div"),s=A(),n=p("p"),i=M("Loading page "),l=M(r[6]),a=M("..."),d(t,"class","loading-spinner mx-auto mb-4 svelte-srpbru"),d(n,"class","text-slate-600"),d(e,"class","text-center py-8")},m(u,c){L(u,e,c),o(e,t),o(e,s),o(e,n),o(n,i),o(n,l),o(n,a)},p(u,c){c[0]&64&&q(l,u[6])},d(u){u&&P(e)}}}function pr(r){let e,t,s,n,i,l,a,u,c,f,h;return{c(){e=p("div"),t=p("div"),s=p("div"),n=p("p"),n.textContent="⚠️ Profile loading issue",i=A(),l=p("p"),a=M(r[2]),u=A(),c=p("button"),c.textContent="Retry",d(n,"class","text-yellow-800 font-medium"),d(l,"class","text-yellow-700 text-sm mt-1"),d(c,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),d(t,"class","flex items-center justify-between"),d(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(y,v){L(y,e,v),o(e,t),o(t,s),o(s,n),o(s,i),o(s,l),o(l,a),o(t,u),o(t,c),f||(h=ee(c,"click",r[18]),f=!0)},p(y,v){v[0]&4&&q(a,y[2])},d(y){y&&P(e),f=!1,h()}}}function mr(r){let e,t,s,n,i,l,a=r[30]+"",u,c,f,h;return{c(){e=p("div"),t=p("div"),s=p("div"),s.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=A(),i=p("div"),l=p("div"),u=M(a),c=A(),f=p("div"),f.textContent="Member of list",h=A(),d(s,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),d(l,"class","text-sm text-gray-600 font-mono text-xs break-all"),d(f,"class","text-xs text-gray-500"),d(i,"class","flex-1"),d(t,"class","flex items-center space-x-3"),d(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(y,v){L(y,e,v),o(e,t),o(t,s),o(t,n),o(t,i),o(i,l),o(l,u),o(i,c),o(i,f),o(e,h)},p(y,v){v[0]&1&&a!==(a=y[30]+"")&&q(u,a)},d(y){y&&P(e)}}}function hr(r){let e,t=r[27].description+"",s;return{c(){e=p("p"),s=M(t),d(e,"class","text-xs text-gray-600 line-clamp-2 svelte-srpbru")},m(n,i){L(n,e,i),o(e,s)},p(n,i){i[0]&1&&t!==(t=n[27].description+"")&&q(s,t)},d(n){n&&P(e)}}}function br(r){let e,t,s,n,i,l,a,u,c,f,h,y=(r[27].displayName||r[27].handle)+"",v,g,_,E,C=r[27].handle+"",$,z,H,S,O,W,I=r[27].description&&hr(r);return{c(){e=p("a"),t=p("div"),s=p("div"),n=p("img"),u=A(),c=p("div"),f=p("div"),h=p("h4"),v=M(y),g=A(),_=p("span"),E=M("@"),$=M(C),z=A(),I&&I.c(),H=A(),S=p("div"),S.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',O=A(),rt(n.src,i=r[27].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(r[27].displayName||r[27].handle)}&background=6366f1&color=fff&size=64`)||d(n,"src",i),d(n,"alt",l=r[27].displayName||r[27].handle),d(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),d(n,"onerror",a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(r[27].displayName||r[27].handle)+"&background=6366f1&color=fff&size=64'"),d(s,"class","flex-shrink-0"),d(h,"class","text-sm font-semibold text-gray-900 truncate"),d(_,"class","text-xs text-gray-600 truncate"),d(f,"class","flex items-center space-x-2 mb-1"),d(c,"class","flex-1 min-w-0"),d(S,"class","flex-shrink-0"),d(t,"class","flex items-center space-x-3"),d(e,"href",W="https://bsky.app/profile/"+r[27].handle),d(e,"target","_blank"),d(e,"rel","noopener noreferrer"),d(e,"class","block bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200 cursor-pointer")},m(k,w){L(k,e,w),o(e,t),o(t,s),o(s,n),o(t,u),o(t,c),o(c,f),o(f,h),o(h,v),o(f,g),o(f,_),o(_,E),o(_,$),o(c,z),I&&I.m(c,null),o(t,H),o(t,S),o(e,O)},p(k,w){w[0]&1&&!rt(n.src,i=k[27].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(k[27].displayName||k[27].handle)}&background=6366f1&color=fff&size=64`)&&d(n,"src",i),w[0]&1&&l!==(l=k[27].displayName||k[27].handle)&&d(n,"alt",l),w[0]&1&&a!==(a="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(k[27].displayName||k[27].handle)+"&background=6366f1&color=fff&size=64'")&&d(n,"onerror",a),w[0]&1&&y!==(y=(k[27].displayName||k[27].handle)+"")&&q(v,y),w[0]&1&&C!==(C=k[27].handle+"")&&q($,C),k[27].description?I?I.p(k,w):(I=hr(k),I.c(),I.m(c,null)):I&&(I.d(1),I=null),w[0]&1&&W!==(W="https://bsky.app/profile/"+k[27].handle)&&d(e,"href",W)},d(k){k&&P(e),I&&I.d()}}}function gr(r){let e,t,s,n,i,l,a=r[11]()+"",u,c,f,h,y,v,g,_,E,C,$,z=r[7]&&r[6]<r[11](),H,S,O,W=r[7]&&r[6]>1&&yr(),I=ge(Array.from({length:Math.min(5,r[11]())},r[19])),k=[];for(let K=0;K<I.length;K+=1)k[K]=_r(ir(r,I,K));let w=z&&vr();return{c(){e=p("div"),t=p("div"),s=p("div"),n=M("Page "),i=M(r[6]),l=M(" of "),u=M(a),c=A(),f=p("div"),h=p("button"),W&&W.c(),y=M(`
											Previous`),g=A(),_=p("div");for(let K=0;K<k.length;K+=1)k[K].c();E=A(),C=p("button"),$=M(`Next
											`),w&&w.c(),d(s,"class","text-sm text-gray-600"),h.disabled=v=r[6]===1||r[7],d(h,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),d(_,"class","flex items-center space-x-1"),C.disabled=H=r[6]===r[11]()||r[7],d(C,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),d(f,"class","flex items-center space-x-2"),d(t,"class","flex items-center justify-between"),d(e,"class","mt-6 pt-4 border-t border-gray-200")},m(K,G){L(K,e,G),o(e,t),o(t,s),o(s,n),o(s,i),o(s,l),o(s,u),o(t,c),o(t,f),o(f,h),W&&W.m(h,null),o(h,y),o(f,g),o(f,_);for(let B=0;B<k.length;B+=1)k[B]&&k[B].m(_,null);o(f,E),o(f,C),o(C,$),w&&w.m(C,null),S||(O=[ee(h,"click",r[14]),ee(C,"click",r[13])],S=!0)},p(K,G){if(G[0]&64&&q(i,K[6]),K[7]&&K[6]>1?W||(W=yr(),W.c(),W.m(h,y)):W&&(W.d(1),W=null),G[0]&192&&v!==(v=K[6]===1||K[7])&&(h.disabled=v),G[0]&6336){I=ge(Array.from({length:Math.min(5,K[11]())},K[19]));let B;for(B=0;B<I.length;B+=1){const j=ir(K,I,B);k[B]?k[B].p(j,G):(k[B]=_r(j),k[B].c(),k[B].m(_,null))}for(;B<k.length;B+=1)k[B].d(1);k.length=I.length}G[0]&192&&(z=K[7]&&K[6]<K[11]()),z?w||(w=vr(),w.c(),w.m(C,null)):w&&(w.d(1),w=null),G[0]&192&&H!==(H=K[6]===K[11]()||K[7])&&(C.disabled=H)},d(K){K&&P(e),W&&W.d(),it(k,K),w&&w.d(),S=!1,Me(O)}}}function yr(r){let e;return{c(){e=p("span"),d(e,"class","loading-spinner mr-1 svelte-srpbru")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function _r(r){let e,t=r[24]+"",s,n,i,l,a;function u(){return r[20](r[24])}return{c(){e=p("button"),s=M(t),n=A(),e.disabled=r[7],d(e,"class",i="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(r[6]===r[24]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(c,f){L(c,e,f),o(e,s),o(e,n),l||(a=ee(e,"click",u),l=!0)},p(c,f){r=c,f[0]&64&&t!==(t=r[24]+"")&&q(s,t),f[0]&128&&(e.disabled=r[7]),f[0]&64&&i!==(i="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(r[6]===r[24]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&d(e,"class",i)},d(c){c&&P(e),l=!1,a()}}}function vr(r){let e;return{c(){e=p("span"),d(e,"class","loading-spinner ml-1 svelte-srpbru")},m(t,s){L(t,e,s)},d(t){t&&P(e)}}}function di(r){let e,t,s,n,i,l,a,u,c,f,h,y,v,g=(r[7]?"...":r[0].listMemberProfiles.length)+"",_,E,C=r[0].listMembers.length+"",$,z,H,S,O,W,I,k,w=r[0].listMemberProfiles.length+"",K,G,B=r[0].listMembers.length+"",j,re,de,fe,oe,V;t=new ti({});let b=r[3].size>0&&cr(r),m=r[5].success.length>0&&ur(r),T=r[5].errors.length>0&&dr(r);function U(R,x){return R[1]?oi:R[2]?li:R[0].listMembers.length===0?ii:ni}let N=U(r),D=N(r);return oe=new Gn({}),{c(){e=p("div"),Ae(t.$$.fragment),s=A(),b&&b.c(),n=A(),m&&m.c(),i=A(),T&&T.c(),l=A(),a=p("div"),u=p("div"),c=p("div"),f=p("h3"),f.textContent="Latest List Members",h=A(),y=p("p"),v=M("Showing "),_=M(g),E=M(" of "),$=M(C),z=M(" total members"),H=A(),S=p("div"),O=p("div"),W=M("Debug: isLoadingMembers="),I=M(r[1]),k=M(", profiles="),K=M(w),G=M(", members="),j=M(B),re=A(),D.c(),de=A(),fe=p("div"),Ae(oe.$$.fragment),d(f,"class","text-lg font-semibold text-slate-800 mb-2"),d(y,"class","text-sm text-slate-600"),d(c,"class","p-6 border-b border-gray-200"),d(O,"class","text-xs text-gray-500 mb-2"),d(S,"class","p-6 flex flex-col flex-1"),d(u,"id","list-members-container"),d(u,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),d(a,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),d(e,"class","space-y-6")},m(R,x){L(R,e,x),we(t,e,null),o(e,s),b&&b.m(e,null),o(e,n),m&&m.m(e,null),o(e,i),T&&T.m(e,null),o(e,l),o(e,a),o(a,u),o(u,c),o(c,f),o(c,h),o(c,y),o(y,v),o(y,_),o(y,E),o(y,$),o(y,z),o(u,H),o(u,S),o(S,O),o(O,W),o(O,I),o(O,k),o(O,K),o(O,G),o(O,j),o(S,re),D.m(S,null),o(a,de),o(a,fe),we(oe,fe,null),V=!0},p(R,x){R[3].size>0?b?b.p(R,x):(b=cr(R),b.c(),b.m(e,n)):b&&(b.d(1),b=null),R[5].success.length>0?m?m.p(R,x):(m=ur(R),m.c(),m.m(e,i)):m&&(m.d(1),m=null),R[5].errors.length>0?T?T.p(R,x):(T=dr(R),T.c(),T.m(e,l)):T&&(T.d(1),T=null),(!V||x[0]&129)&&g!==(g=(R[7]?"...":R[0].listMemberProfiles.length)+"")&&q(_,g),(!V||x[0]&1)&&C!==(C=R[0].listMembers.length+"")&&q($,C),(!V||x[0]&2)&&q(I,R[1]),(!V||x[0]&1)&&w!==(w=R[0].listMemberProfiles.length+"")&&q(K,w),(!V||x[0]&1)&&B!==(B=R[0].listMembers.length+"")&&q(j,B),N===(N=U(R))&&D?D.p(R,x):(D.d(1),D=N(R),D&&(D.c(),D.m(S,null)))},i(R){V||(te(t.$$.fragment,R),te(oe.$$.fragment,R),V=!0)},o(R){ie(t.$$.fragment,R),ie(oe.$$.fragment,R),V=!1},d(R){R&&P(e),Se(t),b&&b.d(),m&&m.d(),T&&T.d(),D.d(),Se(oe)}}}const Qe=25;function fi(r,e,t){let s,n;Le(r,ce,k=>t(0,s=k)),Le(r,Be,k=>t(17,n=k));let i=!1,l="",a=new Set,u=!1,c={success:[],errors:[]},f=1,h=!1,y=!1,v=0,g=null;async function _(){if(!(!s.selectedList||!n.session||y)){t(15,y=!0),t(1,i=!0),t(2,l=""),t(6,f=1);try{const k=await Oe.getListMembers(n.session,s.selectedList.uri,n.authType);console.log("Raw member DIDs:",k),ce.setListMembers(k),v=Math.ceil(k.length/Qe),console.log("Total pages:",v),await E(1),ce.setListLoading(!1)}catch(k){console.error("Error loading list members:",k),t(2,l=k.message||"Failed to load list members"),ce.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(1,i=!1),t(15,y=!1),console.log("Final state - isLoadingMembers:",i,"isCurrentlyLoadingMembers:",y)}}}async function E(k){if(!(!n.session||!s.selectedList||!s.listMembers.length)){t(7,h=!0),t(6,f=k);try{const w=(k-1)*Qe,K=w+Qe,G=s.listMembers.slice(w,K);console.log(`Loading page ${k}: DIDs ${w+1}-${Math.min(K,s.listMembers.length)}`),console.log("Page DIDs:",G);const B=await Oe.getProfiles(n.session,G,n.authType);console.log(`Fetched ${B.length} profiles for page ${k}`),console.log("Profiles received:",B),B.length===0?(console.warn("No profiles returned from API for page",k),t(2,l="No profile data received from API")):t(2,l=""),console.log("Setting profiles in store:",B.length),ce.setListMemberProfiles(B),console.log("Profiles set in store, current count:",s.listMemberProfiles.length)}catch(w){console.error("Error loading members page:",w),t(2,l=w.message||"Failed to load page"),ce.setListMemberProfiles([])}finally{t(7,h=!1)}}}async function C(){if(a.size===0)return;t(4,u=!0),t(5,c={success:[],errors:[]});const k=Array.from(a);for(const w of k)try{await Oe.addToList(n.session,w,s.selectedList.uri,n.authType),c.success.push(w),await ce.fetchAndAddProfile(n.session,w,n.authType)}catch(K){c.errors.push({did:w,error:K.message})}a.clear(),t(3,a),t(4,u=!1)}function $(){return Math.ceil(s.listMembers.length/Qe)}async function z(k){k>=1&&k<=$()&&await E(k)}async function H(){f<$()&&await E(f+1)}async function S(){f>1&&await E(f-1)}const O=()=>E(f),W=(k,w)=>{let K;return $()<=5||f<=3?K=w+1:f>=$()-2?K=$()-4+w:K=f-2+w,K},I=k=>z(k);return r.$$.update=()=>{r.$$.dirty[0]&1&&s.refreshTrigger&&_(),r.$$.dirty[0]&1&&console.log("Profile count changed:",s.listMemberProfiles.length),r.$$.dirty[0]&229377&&s.selectedList&&n.session&&!y&&g!==s.selectedList.uri&&(console.log("List changed, loading members for:",s.selectedList.name),t(16,g=s.selectedList.uri),_())},[s,i,l,a,u,c,f,h,_,E,C,$,z,H,S,y,g,n,O,W,I]}class pi extends Ce{constructor(e){super(),Te(this,e,fi,di,ke,{},null,[-1,-1])}}function wr(r){let e,t,s,n,i,l,a,u;return{c(){e=p("div"),t=p("div"),s=p("div"),n=A(),i=p("h3"),i.textContent="Getting Ready",l=A(),a=p("p"),u=M(r[1]),d(s,"class","loading-spinner mx-auto mb-4 svelte-3t5r6s"),d(i,"class","text-lg font-semibold text-slate-800 mb-2"),d(a,"class","text-slate-600"),d(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),d(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]")},m(c,f){L(c,e,f),o(e,t),o(t,s),o(t,n),o(t,i),o(t,l),o(t,a),o(a,u)},p(c,f){f&2&&q(u,c[1])},d(c){c&&P(e)}}}function mi(r){let e,t=r[0]&&wr(r);return{c(){t&&t.c(),e=He()},m(s,n){t&&t.m(s,n),L(s,e,n)},p(s,[n]){s[0]?t?t.p(s,n):(t=wr(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Y,o:Y,d(s){s&&P(e),t&&t.d(s)}}}function hi(r,e,t){let{isLoading:s=!1}=e,{message:n="Loading list data..."}=e;return r.$$set=i=>{"isLoading"in i&&t(0,s=i.isLoading),"message"in i&&t(1,n=i.message)},[s,n]}class bi extends Ce{constructor(e){super(),Te(this,e,hi,mi,ke,{isLoading:0,message:1})}}function Sr(r){let e,t;return e=new gn({}),{c(){Ae(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function gi(r){let e,t;return e=new pi({}),{c(){Ae(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function yi(r){let e,t;return e=new Pn({}),{c(){Ae(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function _i(r){let e,t;return e=new vn({}),{c(){Ae(e.$$.fragment)},m(s,n){we(e,s,n),t=!0},i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ie(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function vi(r){let e,t,s,n,i,l,a,u,c,f=r[1]!=="auth"&&Sr(),h=yt.isDevelopment;const y=[_i,yi,gi],v=[];function g(_,E){return _[1]==="auth"?0:_[1]==="list-selector"?1:_[1]==="manager"?2:-1}return~(i=g(r))&&(l=v[i]=y[i](r)),u=new bi({props:{isLoading:r[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=p("main"),f&&f.c(),t=A(),s=p("div"),n=A(),l&&l.c(),a=A(),Ae(u.$$.fragment),d(s,"class","max-w-6xl mx-auto p-6"),d(e,"class","min-h-screen bg-gray-50")},m(_,E){L(_,e,E),f&&f.m(e,null),o(e,t),o(e,s),o(s,n),~i&&v[i].m(s,null),o(e,a),we(u,e,null),c=!0},p(_,[E]){_[1]!=="auth"?f?E&2&&te(f,1):(f=Sr(),f.c(),te(f,1),f.m(e,t)):f&&(st(),ie(f,1,1,()=>{f=null}),nt());let C=i;i=g(_),i!==C&&(l&&(st(),ie(v[C],1,1,()=>{v[C]=null}),nt()),~i?(l=v[i],l||(l=v[i]=y[i](_),l.c()),te(l,1),l.m(s,null)):l=null);const $={};E&1&&($.isLoading=_[0].isLoadingList),u.$set($)},i(_){c||(te(f),te(h),te(l),te(u.$$.fragment,_),c=!0)},o(_){ie(f),ie(h),ie(l),ie(u.$$.fragment,_),c=!1},d(_){_&&P(e),f&&f.d(),~i&&v[i].d(),Se(u)}}}function wi(r,e,t){let s,n;Le(r,ce,l=>t(0,s=l)),Le(r,Be,l=>t(2,n=l));let i="auth";return Ar(()=>{const{session:l,authType:a}=Be.initializeSession();l&&(console.log("Session restored:",{authType:a,handle:l.handle||l.did}),t(1,i="list-selector"))}),r.$$.update=()=>{r.$$.dirty&5&&(n.session?s.selectedList?t(1,i="manager"):t(1,i="list-selector"):t(1,i="auth"))},[s,i,n]}class Si extends Ce{constructor(e){super(),Te(this,e,wi,vi,ke,{})}}new Si({target:document.getElementById("app")})});export default ki();
