var Qn=Object.defineProperty;var Ar=s=>{throw TypeError(s)};var el=(s,e,t)=>e in s?Qn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Be=(s,e,t)=>el(s,typeof e!="symbol"?e+"":e,t),Er=(s,e,t)=>e.has(s)||Ar("Cannot "+t);var re=(s,e,t)=>(Er(s,e,"read from private field"),t?t.call(s):e.get(s)),Xe=(s,e,t)=>e.has(s)?Ar("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Qe=(s,e,t,r)=>(Er(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function ne(){}function En(s){return s()}function Pr(){return Object.create(null)}function Me(s){s.forEach(En)}function Pn(s){return typeof s=="function"}function Ae(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let ps;function tt(s,e){return s===e?!0:(ps||(ps=document.createElement("a")),ps.href=e,s===ps.href)}function tl(s){return Object.keys(s).length===0}function sl(s,...e){if(s==null){for(const r of e)r(void 0);return ne}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ie(s,e,t){s.$$.on_destroy.push(sl(e,t))}function i(s,e){s.appendChild(e)}function E(s,e,t){s.insertBefore(e,t||null)}function A(s){s.parentNode&&s.parentNode.removeChild(s)}function Ve(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function f(s){return document.createElement(s)}function _s(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function L(s){return document.createTextNode(s)}function w(){return L(" ")}function st(){return L("")}function ie(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function js(s){return function(e){return e.preventDefault(),s.call(this,e)}}function a(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Tn(s){let e;return{p(...t){e=t,e.forEach(r=>s.push(r))},r(){e.forEach(t=>s.splice(s.indexOf(t),1))}}}function rl(s){return Array.from(s.childNodes)}function q(s,e){e=""+e,s.data!==e&&(s.data=e)}function be(s,e){s.value=e??""}function fe(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function Tr(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}s.selectedIndex=-1}function nl(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}let Jt;function jt(s){Jt=s}function Js(){if(!Jt)throw new Error("Function called outside component initialization");return Jt}function Cs(s){Js().$$.on_mount.push(s)}function In(s){Js().$$.on_destroy.push(s)}function Rn(){const s=Js();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const l=nl(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,l)}),!l.defaultPrevented}return!0}}const At=[],ws=[];let Rt=[];const Ir=[],ll=Promise.resolve();let Ws=!1;function il(){Ws||(Ws=!0,ll.then(On))}function Hs(s){Rt.push(s)}const Os=new Set;let Ct=0;function On(){if(Ct!==0)return;const s=Jt;do{try{for(;Ct<At.length;){const e=At[Ct];Ct++,jt(e),ol(e.$$)}}catch(e){throw At.length=0,Ct=0,e}for(jt(null),At.length=0,Ct=0;ws.length;)ws.pop()();for(let e=0;e<Rt.length;e+=1){const t=Rt[e];Os.has(t)||(Os.add(t),t())}Rt.length=0}while(At.length);for(;Ir.length;)Ir.pop()();Ws=!1,Os.clear(),jt(s)}function ol(s){if(s.fragment!==null){s.update(),Me(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Hs)}}function al(s){const e=[],t=[];Rt.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Rt=e}const bs=new Set;let dt;function ft(){dt={r:0,c:[],p:dt}}function mt(){dt.r||Me(dt.c),dt=dt.p}function ce(s,e){s&&s.i&&(bs.delete(s),s.i(e))}function de(s,e,t,r){if(s&&s.o){if(bs.has(s))return;bs.add(s),dt.c.push(()=>{bs.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}function ge(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function cl(s,e){s.d(1),e.delete(s.key)}function ul(s,e,t,r,n,l,o,u,d,c,m,p){let b=s.length,g=l.length,_=b;const v={};for(;_--;)v[s[_].key]=_;const x=[],T=new Map,C=new Map,R=[];for(_=g;_--;){const B=p(n,l,_),M=t(B);let U=o.get(M);U?R.push(()=>U.p(B,e)):(U=c(M,B),U.c()),T.set(M,x[_]=U),M in v&&C.set(M,Math.abs(_-v[M]))}const D=new Set,K=new Set;function O(B){ce(B,1),B.m(u,m),o.set(B.key,B),m=B.first,g--}for(;b&&g;){const B=x[g-1],M=s[b-1],U=B.key,k=M.key;B===M?(m=B.first,b--,g--):T.has(k)?!o.has(U)||D.has(U)?O(B):K.has(k)?b--:C.get(U)>C.get(k)?(K.add(U),O(B)):(D.add(k),b--):(d(M,o),b--)}for(;b--;){const B=s[b];T.has(B.key)||d(B,o)}for(;g;)O(x[g-1]);return Me(R),x}function Re(s){s&&s.c()}function Ce(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Hs(()=>{const l=s.$$.on_mount.map(En).filter(Pn);s.$$.on_destroy?s.$$.on_destroy.push(...l):Me(l),s.$$.on_mount=[]}),n.forEach(Hs)}function xe(s,e){const t=s.$$;t.fragment!==null&&(al(t.after_update),Me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function dl(s,e){s.$$.dirty[0]===-1&&(At.push(s),il(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function Oe(s,e,t,r,n,l,o=null,u=[-1]){const d=Jt;jt(s);const c=s.$$={fragment:null,ctx:[],props:l,update:ne,not_equal:n,bound:Pr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Pr(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};o&&o(c.root);let m=!1;if(c.ctx=t?t(s,e.props||{},(p,b,...g)=>{const _=g.length?g[0]:b;return c.ctx&&n(c.ctx[p],c.ctx[p]=_)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](_),m&&dl(s,p)),b}):[],c.update(),m=!0,Me(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const p=rl(e.target);c.fragment&&c.fragment.l(p),p.forEach(A)}else c.fragment&&c.fragment.c();e.intro&&ce(s.$$.fragment),Ce(s,e.target,e.anchor),On()}jt(d)}class De{constructor(){Be(this,"$$");Be(this,"$$set")}$destroy(){xe(this,1),this.$destroy=ne}$on(e,t){if(!Pn(t))return ne;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!tl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fl);const xt=[];function qs(s,e=ne){let t;const r=new Set;function n(u){if(Ae(s,u)&&(s=u,t)){const d=!xt.length;for(const c of r)c[1](),xt.push(c,s);if(d){for(let c=0;c<xt.length;c+=2)xt[c][0](xt[c+1]);xt.length=0}}}function l(u){n(u(s))}function o(u,d=ne){const c=[u,d];return r.add(c),r.size===1&&(t=e(n,l)||ne),u(s),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:n,update:l,subscribe:o}}const It=new TextEncoder,Ss=new TextDecoder;function ml(...s){const e=s.reduce((n,{length:l})=>n+l,0),t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function pl(s){if(Uint8Array.prototype.toBase64)return s.toBase64();const e=32768,t=[];for(let r=0;r<s.length;r+=e)t.push(String.fromCharCode.apply(null,s.subarray(r,r+e)));return btoa(t.join(""))}function hl(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(s);const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Dn(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof s=="string"?s:Ss.decode(s),{alphabet:"base64url"});let e=s;e instanceof Uint8Array&&(e=Ss.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return hl(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Ds(s){let e=s;return typeof e=="string"&&(e=It.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):pl(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class xs extends Error{constructor(t,r){var n;super(t,r);Be(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Be(xs,"code","ERR_JOSE_GENERIC");class qe extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Be(qe,"code","ERR_JOSE_NOT_SUPPORTED");class Et extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JWS_INVALID")}}Be(Et,"code","ERR_JWS_INVALID");class Kn extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JWT_INVALID")}}Be(Kn,"code","ERR_JWT_INVALID");function Je(s,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${s}`)}function zt(s,e){return s.name===e}function Ks(s){return parseInt(s.name.slice(4),10)}function gl(s){switch(s){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function bl(s,e){if(!s.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function yl(s,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!zt(s.algorithm,"HMAC"))throw Je("HMAC");const r=parseInt(e.slice(2),10);if(Ks(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!zt(s.algorithm,"RSASSA-PKCS1-v1_5"))throw Je("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(Ks(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!zt(s.algorithm,"RSA-PSS"))throw Je("RSA-PSS");const r=parseInt(e.slice(2),10);if(Ks(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!zt(s.algorithm,"Ed25519"))throw Je("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!zt(s.algorithm,"ECDSA"))throw Je("ECDSA");const r=gl(e);if(s.algorithm.namedCurve!==r)throw Je(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}bl(s,t)}function Nn(s,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const n=t.pop();s+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?s+=`one of type ${t[0]} or ${t[1]}.`:s+=`of type ${t[0]}.`;return e==null?s+=` Received ${e}`:typeof e=="function"&&e.name?s+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(s+=` Received an instance of ${e.constructor.name}`),s}const vl=(s,...e)=>Nn("Key must be ",s,...e);function Bn(s,e,...t){return Nn(`Key for the ${s} algorithm must be `,e,...t)}function Un(s){return(s==null?void 0:s[Symbol.toStringTag])==="CryptoKey"}function Wn(s){return(s==null?void 0:s[Symbol.toStringTag])==="KeyObject"}const Hn=s=>Un(s)||Wn(s),_l=(...s)=>{const e=s.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const n=Object.keys(r);if(!t||t.size===0){t=new Set(n);continue}for(const l of n){if(t.has(l))return!1;t.add(l)}}return!0};function wl(s){return typeof s=="object"&&s!==null}const Vs=s=>{if(!wl(s)||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e},Sl=(s,e)=>{if(s.startsWith("RS")||s.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${s} requires key modulusLength to be 2048 bits or larger`)}};function kl(s){let e,t;switch(s.kty){case"RSA":{switch(s.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.slice(-3),10)||1}`},t=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(s.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=s.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=s.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(s.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new qe('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const zn=async s=>{if(!s.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=kl(s),r={...s};return delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,s.ext??!s.d,s.key_ops??t)};async function Ll(s,e,t){if(!Vs(s))throw new TypeError("JWK must be an object");let r;switch(e??(e=s.alg),r??(r=s.ext),s.kty){case"oct":if(typeof s.k!="string"||!s.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Dn(s.k);case"RSA":if("oth"in s&&s.oth!==void 0)throw new qe('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return zn({...s,alg:e,ext:r});default:throw new qe('Unsupported "kty" (Key Type) Parameter value')}}const Cl=(s,e,t,r,n)=>{if(n.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new s('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new s('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;t!==void 0?l=new Map([...Object.entries(t),...e.entries()]):l=e;for(const o of r.crit){if(!l.has(o))throw new qe(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new s(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&r[o]===void 0)throw new s(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)};function Ys(s){return Vs(s)&&typeof s.kty=="string"}function xl(s){return s.kty!=="oct"&&typeof s.d=="string"}function Ml(s){return s.kty!=="oct"&&typeof s.d>"u"}function Al(s){return s.kty==="oct"&&typeof s.k=="string"}let Ot;const Rr=async(s,e,t,r=!1)=>{Ot||(Ot=new WeakMap);let n=Ot.get(s);if(n!=null&&n[t])return n[t];const l=await zn({...e,alg:t});return r&&Object.freeze(s),n?n[t]=l:Ot.set(s,{[t]:l}),l},El=(s,e)=>{var o;Ot||(Ot=new WeakMap);let t=Ot.get(s);if(t!=null&&t[e])return t[e];const r=s.type==="public",n=!!r;let l;if(s.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}l=s.toCryptoKey(s.asymmetricKeyType,n,r?[]:["deriveBits"])}if(s.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");l=s.toCryptoKey(s.asymmetricKeyType,n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="rsa"){let u;switch(e){case"RSA-OAEP":u="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":u="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":u="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":u="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return s.toCryptoKey({name:"RSA-OAEP",hash:u},n,r?["encrypt"]:["decrypt"]);l=s.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:u},n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="ec"){const d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=s.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!d)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&d==="P-256"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES384"&&d==="P-384"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES512"&&d==="P-521"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(l=s.toCryptoKey({name:"ECDH",namedCurve:d},n,r?[]:["deriveBits"]))}if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=l:Ot.set(s,{[e]:l}),l},Pl=async(s,e)=>{if(s instanceof Uint8Array||Un(s))return s;if(Wn(s)){if(s.type==="secret")return s.export();if("toCryptoKey"in s&&typeof s.toCryptoKey=="function")try{return El(s,e)}catch(r){if(r instanceof TypeError)throw r}let t=s.export({format:"jwk"});return Rr(s,t,e)}if(Ys(s))return s.k?Dn(s.k):Rr(s,s,e,!0);throw new Error("unreachable")},Pt=s=>s==null?void 0:s[Symbol.toStringTag],zs=(s,e,t)=>{var r,n;if(e.use!==void 0){let l;switch(t){case"sign":case"verify":l="sig";break;case"encrypt":case"decrypt":l="enc";break}if(e.use!==l)throw new TypeError(`Invalid key for this operation, its "use" must be "${l}" when present`)}if(e.alg!==void 0&&e.alg!==s)throw new TypeError(`Invalid key for this operation, its "alg" must be "${s}" when present`);if(Array.isArray(e.key_ops)){let l;switch(!0){case t==="sign":case s==="dir":case s.includes("CBC-HS"):l=t;break;case s.startsWith("PBES2"):l="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(s):!s.includes("GCM")&&s.endsWith("KW")?l="unwrapKey":l=t;break;case t==="encrypt":l="wrapKey";break;case t==="decrypt":l=s.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(l&&((n=(r=e.key_ops)==null?void 0:r.includes)==null?void 0:n.call(r,l))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${l}" when present`)}return!0},Tl=(s,e,t)=>{if(!(e instanceof Uint8Array)){if(Ys(e)){if(Al(e)&&zs(s,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Hn(e))throw new TypeError(Bn(s,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Pt(e)} instances for symmetric algorithms must be of type "secret"`)}},Il=(s,e,t)=>{if(Ys(e))switch(t){case"decrypt":case"sign":if(xl(e)&&zs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Ml(e)&&zs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Hn(e))throw new TypeError(Bn(s,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Pt(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},Rl=(s,e,t)=>{s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(s)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(s)?Tl(s,e,t):Il(s,e,t)},Ol=(s,e)=>{const t=`SHA-${s.slice(-3)}`;switch(s){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(s.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new qe(`alg ${s} is not supported either by JOSE or your javascript runtime`)}},Dl=async(s,e,t)=>{if(e instanceof Uint8Array){if(!s.startsWith("HS"))throw new TypeError(vl(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${s.slice(-3)}`,name:"HMAC"},!1,[t])}return yl(e,s,t),e},at=s=>Math.floor(s.getTime()/1e3),Fn=60,jn=Fn*60,$s=jn*24,Kl=$s*7,Nl=$s*365.25,Bl=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Ns=s=>{const e=Bl.exec(s);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let n;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*Fn);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*jn);break;case"day":case"days":case"d":n=Math.round(t*$s);break;case"week":case"weeks":case"w":n=Math.round(t*Kl);break;default:n=Math.round(t*Nl);break}return e[1]==="-"||e[4]==="ago"?-n:n};function ct(s,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${s} input`);return e}var he;class Ul{constructor(e){Xe(this,he);if(!Vs(e))throw new TypeError("JWT Claims Set MUST be an object");Qe(this,he,structuredClone(e))}data(){return It.encode(JSON.stringify(re(this,he)))}get iss(){return re(this,he).iss}set iss(e){re(this,he).iss=e}get sub(){return re(this,he).sub}set sub(e){re(this,he).sub=e}get aud(){return re(this,he).aud}set aud(e){re(this,he).aud=e}set jti(e){re(this,he).jti=e}set nbf(e){typeof e=="number"?re(this,he).nbf=ct("setNotBefore",e):e instanceof Date?re(this,he).nbf=ct("setNotBefore",at(e)):re(this,he).nbf=at(new Date)+Ns(e)}set exp(e){typeof e=="number"?re(this,he).exp=ct("setExpirationTime",e):e instanceof Date?re(this,he).exp=ct("setExpirationTime",at(e)):re(this,he).exp=at(new Date)+Ns(e)}set iat(e){typeof e>"u"?re(this,he).iat=at(new Date):e instanceof Date?re(this,he).iat=ct("setIssuedAt",at(e)):typeof e=="string"?re(this,he).iat=ct("setIssuedAt",at(new Date)+Ns(e)):re(this,he).iat=ct("setIssuedAt",e)}}he=new WeakMap;const Wl=async(s,e,t)=>{const r=await Dl(s,e,"sign");Sl(s,r);const n=await crypto.subtle.sign(Ol(s,r.algorithm),r,t);return new Uint8Array(n)};var qt,Te,je;class Hl{constructor(e){Xe(this,qt);Xe(this,Te);Xe(this,je);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Qe(this,qt,e)}setProtectedHeader(e){if(re(this,Te))throw new TypeError("setProtectedHeader can only be called once");return Qe(this,Te,e),this}setUnprotectedHeader(e){if(re(this,je))throw new TypeError("setUnprotectedHeader can only be called once");return Qe(this,je,e),this}async sign(e,t){if(!re(this,Te)&&!re(this,je))throw new Et("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!_l(re(this,Te),re(this,je)))throw new Et("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...re(this,Te),...re(this,je)},n=Cl(Et,new Map([["b64",!0]]),t==null?void 0:t.crit,re(this,Te),r);let l=!0;if(n.has("b64")&&(l=re(this,Te).b64,typeof l!="boolean"))throw new Et('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if(typeof o!="string"||!o)throw new Et('JWS "alg" (Algorithm) Header Parameter missing or invalid');Rl(o,e,"sign");let u=re(this,qt);l&&(u=It.encode(Ds(u)));let d;re(this,Te)?d=It.encode(Ds(JSON.stringify(re(this,Te)))):d=It.encode("");const c=ml(d,It.encode("."),u),m=await Pl(e,o),p=await Wl(o,m,c),b={signature:Ds(p),payload:""};return l&&(b.payload=Ss.decode(u)),re(this,je)&&(b.header=re(this,je)),re(this,Te)&&(b.protected=Ss.decode(d)),b}}qt=new WeakMap,Te=new WeakMap,je=new WeakMap;var Dt;class zl{constructor(e){Xe(this,Dt);Qe(this,Dt,new Hl(e))}setProtectedHeader(e){return re(this,Dt).setProtectedHeader(e),this}async sign(e,t){const r=await re(this,Dt).sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}Dt=new WeakMap;var et,Ke;class Fl{constructor(e={}){Xe(this,et);Xe(this,Ke);Qe(this,Ke,new Ul(e))}setIssuer(e){return re(this,Ke).iss=e,this}setSubject(e){return re(this,Ke).sub=e,this}setAudience(e){return re(this,Ke).aud=e,this}setJti(e){return re(this,Ke).jti=e,this}setNotBefore(e){return re(this,Ke).nbf=e,this}setExpirationTime(e){return re(this,Ke).exp=e,this}setIssuedAt(e){return re(this,Ke).iat=e,this}setProtectedHeader(e){return Qe(this,et,e),this}async sign(e,t){var n;const r=new zl(re(this,Ke).data());if(r.setProtectedHeader(re(this,et)),Array.isArray((n=re(this,et))==null?void 0:n.crit)&&re(this,et).crit.includes("b64")&&re(this,et).b64===!1)throw new Kn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}et=new WeakMap,Ke=new WeakMap;const Ft="bluesky_oauth_session",Jn="bluesky_code_verifier",qn="bluesky_oauth_state",Vn="bluesky_server_url";function Yn(s=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const r=new Uint8Array(s);crypto.getRandomValues(r);for(let n=0;n<s;n++)t+=e[r[n]%e.length];return t}async function $n(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t);return Gn(r)}function Gn(s){return btoa(String.fromCharCode(...new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jl(s,e,t,r,n){try{const l=await crypto.subtle.exportKey("jwk",s.publicKey),o={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};if(r&&(o.nonce=r),n){const m=new TextEncoder().encode(n),p=await crypto.subtle.digest("SHA-256",m);o.ath=Gn(p)}const u=await Ll(await crypto.subtle.exportKey("jwk",s.privateKey),"ES256");return await new Fl(o).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:l.kty,crv:l.crv,x:l.x,y:l.y}}).sign(u)}catch(l){throw console.error("Error creating DPoP JWT:",l),l}}async function Zn(s="https://bsky.social"){try{const e=Yn();localStorage.setItem(Jn,e);const t=await $n(e),r=crypto.randomUUID();localStorage.setItem(qn,r),localStorage.setItem(Vn,s);const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l=n?"http://localhost:5174/.well-known/oauth-client-metadata.json":"https://pixeline.be/bluesky-list-manager/.well-known/oauth-client-metadata.json",u=window.location.pathname.includes("/bluesky-list-manager")?"/bluesky-list-manager":"",d=n?`${window.location.origin}/oauth-callback.html`:`${window.location.origin}${u}/oauth-callback-standalone.html`,c=new URL(`${s}/oauth/authorize`);c.searchParams.append("client_id",l),c.searchParams.append("response_type","code"),c.searchParams.append("redirect_uri",d),c.searchParams.append("scope","atproto transition:generic repo:app.bsky.graph.list?action=create&action=update&action=delete repo:app.bsky.graph.listitem?action=create&action=delete"),c.searchParams.append("state",r),c.searchParams.append("code_challenge",t),c.searchParams.append("code_challenge_method","S256"),window.location.href=c.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}async function ut(){console.log("getStoredOAuthSession: Looking for key:",Ft);const s=localStorage.getItem(Ft);if(console.log("getStoredOAuthSession: Raw stored data:",s),s)try{const e=JSON.parse(s);if(console.log("Retrieved stored OAuth session:",{hasAccessToken:!!e.accessToken,hasSub:!!e.sub,hasDpopKeypair:!!e.dpopKeypair,timestamp:e.timestamp}),e.dpopKeypair&&e.dpopKeypair.privateKey&&e.dpopKeypair.publicKey)try{if(!e.dpopKeypair.privateKey.kty||!e.dpopKeypair.publicKey.kty)throw console.error("Invalid JWK structure in stored DPoP keypair"),new Error("Invalid JWK structure");const t=await crypto.subtle.importKey("jwk",e.dpopKeypair.privateKey,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]),r=await crypto.subtle.importKey("jwk",e.dpopKeypair.publicKey,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);e.dpopKeypair={privateKey:t,publicKey:r},console.log("Successfully imported DPoP keypair")}catch(t){return console.error("Failed to import DPoP keypair:",t),localStorage.removeItem(Ft),null}else console.warn("No DPoP keypair found in stored session");return e}catch(e){console.error("Failed to parse stored OAuth session:",e),localStorage.removeItem(Ft)}return null}function Fs(){localStorage.removeItem(Ft),localStorage.removeItem(Jn),localStorage.removeItem(qn),localStorage.removeItem(Vn)}const Jl=Object.freeze(Object.defineProperty({__proto__:null,clearOAuthSession:Fs,createDpopJwt:jl,generateCodeChallenge:$n,generateCodeVerifier:Yn,getStoredOAuthSession:ut,startOAuthFlow:Zn},Symbol.toStringTag,{value:"Module"})),Pe={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},Tt={OAUTH:"oauth",APP_PASSWORD:"app_password"};function ql(){const{subscribe:s,set:e,update:t}=qs({session:null,authType:null,isLoading:!1,error:null});return{subscribe:s,setSession:(r,n=Tt.APP_PASSWORD)=>{r?(localStorage.setItem(Pe.SESSION,JSON.stringify(r)),localStorage.setItem(Pe.AUTH_TYPE,n)):(localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE)),e({session:r,authType:n,isLoading:!1,error:null})},setLoading:r=>{t(n=>({...n,isLoading:r}))},setError:r=>{t(n=>({...n,error:r,isLoading:!1}))},getSession:()=>{const r=localStorage.getItem(Pe.SESSION),n=localStorage.getItem(Pe.AUTH_TYPE)||Tt.APP_PASSWORD;if(r)try{return{session:JSON.parse(r),authType:n}}catch{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE),Fs(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE),Fs(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:async()=>{console.log("Initializing session from storage...");const r=await ut();if(console.log("OAuth session found:",r),console.log("All localStorage keys:",Object.keys(localStorage)),console.log("bluesky_oauth_session:",localStorage.getItem("bluesky_oauth_session")),console.log("bluesky_session:",localStorage.getItem("bluesky_session")),console.log("bluesky_auth_type:",localStorage.getItem("bluesky_auth_type")),r&&r.accessToken){console.log("Converting OAuth session to compatible format...");let o=r.handle;if(!o||o.startsWith("did:")){console.log("OAuth session missing handle or has DID, attempting to resolve...");try{const d=`https://public.api.bsky.app/xrpc/app.bsky.actor.getProfile?actor=${r.sub}`;console.log("Fetching profile from public API:",d);const c=await fetch(d,{method:"GET"});if(c.ok){const m=await c.json();m!=null&&m.handle&&!m.handle.startsWith("did:")&&(o=m.handle,console.log("Successfully resolved handle from profile:",o),r.handle=o,console.log("Updated OAuth session handle in memory (not in localStorage to preserve DPoP keypair)"))}}catch(d){console.error("Failed to resolve handle from profile:",d)}}const u={accessJwt:r.accessToken,refreshJwt:r.refreshToken,handle:o||r.sub,did:r.sub,email:null};return console.log("Converted OAuth session:",u),e({session:u,authType:Tt.OAUTH,isLoading:!1,error:null}),{session:u,authType:Tt.OAUTH}}const{session:n,authType:l}=Ue.getSession();return n?(console.log("Using app password session:",n),e({session:n,authType:l,isLoading:!1,error:null}),{session:n,authType:l}):(console.log("No session found"),{session:null,authType:null})},isOAuthSession:()=>localStorage.getItem(Pe.AUTH_TYPE)===Tt.OAUTH}}const Ue=ql(),Vl="modulepreload",Yl=function(s,e){return new URL(s,e).href},Or={},$l=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=Yl(c,r),c in Or)return;Or[c]=!0;const m=c.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const v=o[_];if(v.href===c&&(!m||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${p}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":Vl,m||(g.as="script"),g.crossOrigin="",g.href=c,d&&g.setAttribute("nonce",d),document.head.appendChild(g),m)return new Promise((_,v)=>{g.addEventListener("load",_),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return n.then(o=>{for(const u of o||[])u.status==="rejected"&&l(u.reason);return e().catch(l)})},Bs="https://bsky.social/xrpc";class Gl{async signIn(e,t){const r=await fetch(`${Bs}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to sign in")}return await r.json()}async getAuthHeaders(e,t="app_password",r="GET",n="",l=null){if(t==="oauth"){const o=await ut();if(!(o!=null&&o.accessToken))throw new Error("No OAuth access token found");const u={Authorization:`Bearer ${o.accessToken}`};if(r!=="GET"||o.serverNonce)try{const{createDpopJwt:d}=await $l(async()=>{const{createDpopJwt:m}=await Promise.resolve().then(()=>Jl);return{createDpopJwt:m}},void 0,import.meta.url);let c=o.dpopKeypair;if(!(c&&typeof c=="object"&&c.privateKey)){if(c&&c.privateKey&&c.publicKey){const m=await crypto.subtle.importKey("jwk",c.privateKey,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]),p=await crypto.subtle.importKey("jwk",c.publicKey,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);c={privateKey:m,publicKey:p}}}if(c){const m=await d(c,r,n,o.serverNonce,o.accessToken);u.DPoP=m}}catch(d){console.warn("Failed to create DPoP JWT for OAuth request:",d)}return u}else return{Authorization:`Bearer ${e.accessJwt}`}}async makeBlueskyRequest(e,t,r="app_password",n="GET",l=null){let o;r==="oauth"?e.includes("app.bsky.actor.getProfile")||e.includes("app.bsky.actor.searchActors")||e.includes("com.atproto.identity.resolveHandle")||e.includes("app.bsky.graph.getLists")||e.includes("app.bsky.graph.getList")?(o="https://public.api.bsky.app/xrpc",console.log(`Using public API for endpoint: ${e}`)):(o=Bs,console.log(`Using PDS for authenticated endpoint: ${e}`)):o=Bs;const u=`${o}/${e}`;console.log(`makeBlueskyRequest: ${n} ${u} (authType: ${r})`);try{let d={};r==="oauth"&&o.includes("bsky.social")?d=await this.getAuthHeaders(t,r,n,u,l):r==="oauth"&&o.includes("public.api.bsky.app")?d=await this.getAuthHeaders(t,r,n,u,l):r==="app_password"&&(d=await this.getAuthHeaders(t,r,n,u,l)),console.log("Request headers:",d),l&&n!=="GET"&&(d["Content-Type"]="application/json");const c=await fetch(u,{method:n,headers:d,body:l?JSON.stringify(l):void 0});if(console.log(`Response status: ${c.status} ${c.statusText}`),!c.ok){const m=await c.json().catch(()=>({}));throw console.log("Response error:",m),new Error(m.message||`Request failed: ${c.status}`)}return await c.json()}catch(d){throw console.error(`Bluesky API request failed for ${e}:`,d),d}}async getUserLists(e,t="app_password"){if(console.log("getUserLists called with authType:",t),t==="oauth"){const r=await ut();if(console.log("OAuth session for getUserLists:",r),!(r!=null&&r.sub))throw console.error("OAuth session missing or invalid:",{hasSession:!!r,hasSub:!!(r!=null&&r.sub),sessionKeys:r?Object.keys(r):"null"}),new Error("No user DID found in OAuth session");const n=r.handle||r.sub;console.log("Using actor for getUserLists:",n);try{const l=await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${encodeURIComponent(n)}`,e,t);return console.log("getUserLists OAuth response:",l),l.lists||[]}catch(l){throw console.error("Failed to fetch user lists via OAuth:",l),l}}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${encodeURIComponent(e.handle)}`,e,t)).lists||[]}async getListInfo(e,t,r="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,r)).list}async getListMembers(e,t,r="app_password",n=25,l=null){var p;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r),d=u.items||[],c=d.map(b=>b.subject.did),m=d.map(b=>b.subject);return{members:c,profiles:m,cursor:u.cursor,totalCount:((p=u.list)==null?void 0:p.listItemCount)||0}}async getListMembersCount(e,t,r="app_password"){return(await this.getListInfo(e,t,r)).listItemCount||0}async getProfiles(e,t,r="app_password"){if(!t||t.length===0)return[];const n=[];for(const l of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(l)}`,e,r);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${l}:`,o),n.push({did:l,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,r="app_password",n=25,l=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r);return{actors:u.actors||[],cursor:u.cursor}}async addToList(e,t,r,n="app_password"){let l;return n==="oauth"?l=(await ut()).sub:l=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:r,createdAt:new Date().toISOString()}})}async createList(e,{name:t,description:r="",purpose:n="app.bsky.graph.defs#curatelist"},l="app_password"){if(!t||typeof t!="string"||t.trim().length===0)throw new Error("List name is required");let o;if(l==="oauth"){const c=await ut();o=c==null?void 0:c.sub}else o=e==null?void 0:e.did;if(!o)throw new Error("Unable to determine user DID for list creation");const u={$type:"app.bsky.graph.list",name:t.trim(),createdAt:new Date().toISOString()};return r&&typeof r=="string"&&(u.description=r.trim()),n&&typeof n=="string"&&(u.purpose=n),await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,l,"POST",{repo:o,collection:"app.bsky.graph.list",record:u})}async removeFromList(e,t,r,n="app_password"){var p;let l;n==="oauth"?l=(await ut()).sub:l=e.did,console.log("removeFromList: Searching for DID:",t,"in list:",r,"for user:",l);let o=null,u=null,d=0;do{const b=await this.makeBlueskyRequest(`com.atproto.repo.listRecords?repo=${l}&collection=app.bsky.graph.listitem&limit=100${o?`&cursor=${encodeURIComponent(o)}`:""}`,e,n);if(console.log("removeFromList: Found",((p=b.records)==null?void 0:p.length)||0,"records in this batch"),u=b.records.find(g=>{d++;const _=g.value.subject===t&&g.value.list===r;return _&&console.log("removeFromList: Found matching record:",g),_}),u){console.log("removeFromList: Found record with rkey:",u.rkey);break}o=b.cursor}while(o&&!u);if(console.log("removeFromList: Total records checked:",d),!u)throw new Error("List item not found");const c=u.uri.split("/").pop();if(!c)throw console.error("removeFromList: Could not extract rkey from URI:",u.uri),new Error("Could not extract rkey from URI");console.log("removeFromList: Deleting record with rkey:",c);const m=await this.makeBlueskyRequest("com.atproto.repo.deleteRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",rkey:c});return console.log("removeFromList: Delete successful"),m}async resolveHandle(e,t,r="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,r)).did}}const Le=new Gl,ke={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Zl(){const{subscribe:s,update:e}=qs({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1,r=new Map;return{subscribe:s,setSelectedList:n=>{n?localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)):localStorage.removeItem(ke.SELECTED_LIST),e(l=>({...l,selectedList:n,isLoadingList:!!n,listMembers:[],listMemberProfiles:[]})),r.clear()},setListLoading:n=>{e(l=>({...l,isLoadingList:n}))},setUserLists:n=>{localStorage.setItem(ke.LISTS,JSON.stringify(n)),e(l=>({...l,userLists:n}))},insertNewList:(n,l=!0)=>{!n||!n.uri||(e(o=>{const u=[n,...o.userLists];return localStorage.setItem(ke.LISTS,JSON.stringify(u)),l&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)),{...o,userLists:u,selectedList:l?n:o.selectedList,isLoadingList:!!l}}),r.clear())},setListMembers:n=>{e(l=>({...l,listMembers:n}))},isProfileInCurrentList:n=>{let l=!1;return e(o=>(l=o.listMembers.includes(n),o)),l},async isProfileInEntireList(n,l,o="app_password"){var c;let u;e(m=>(u=m,m));const d=`${(c=u.selectedList)==null?void 0:c.uri}-${l}`;if(r.has(d))return r.get(d);if(u.listMembers.includes(l))return r.set(d,!0),!0;try{let m=null;const p=100;do{const b=await Le.getListMembers(n,u.selectedList.uri,o,p,m);if(b.members.includes(l))return r.set(d,!0),!0;m=b.cursor}while(m);return r.set(d,!1),!1}catch(m){console.error("Error checking profile membership:",m);const p=u.listMembers.includes(l);return r.set(d,p),p}},setListMemberProfiles:n=>{e(l=>({...l,listMemberProfiles:n}))},addProfileToList:n=>{e(l=>{const o=l.listMembers.includes(n)?l.listMembers:[n,...l.listMembers];return{...l,listMembers:o}})},addProfileToDisplay:n=>{e(l=>{if(l.listMembers.indexOf(n.did)<25){const u=[n,...l.listMemberProfiles];return{...l,listMemberProfiles:u.slice(0,25)}}return l})},fetchAndAddProfile:(n,l,o="app_password")=>t?Promise.resolve():(t=!0,new Promise(async u=>{try{const d=await Le.getProfiles(n,[l],o);if(d.length>0){const c=d[0];e(m=>{const p=m.listMembers.includes(l)?m.listMembers:[l,...m.listMembers];if(p.indexOf(l)<25){const g=m.listMemberProfiles.filter(v=>v.did!==l),_=[c,...g];return{...m,listMembers:p,listMemberProfiles:_.slice(0,25)}}return{...m,listMembers:p}}),e(m=>{console.log("Updating member count for DID:",l),console.log("Current selectedList:",m.selectedList),console.log("Current userLists:",m.userLists),console.log("Incrementing member count for successfully added profile");const p=m.selectedList?{...m.selectedList,listItemCount:(m.selectedList.listItemCount||0)+1}:null,b=m.userLists.map(g=>{var _;return g.uri===((_=m.selectedList)==null?void 0:_.uri)?{...g,memberCount:(g.memberCount||0)+1}:g});return console.log("Updated selectedList:",p),console.log("Updated userLists:",b),p&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(p)),localStorage.setItem(ke.LISTS,JSON.stringify(b)),{...m,selectedList:p,userLists:b}})}}catch(d){console.error("Failed to fetch profile data:",d),e(c=>{const m=c.listMembers.includes(l)?c.listMembers:[l,...c.listMembers];return{...c,listMembers:m}}),e(c=>{console.log("Updating member count for DID (error case):",l),console.log("Incrementing member count for profile (error case)");const m=c.selectedList?{...c.selectedList,listItemCount:(c.selectedList.listItemCount||0)+1}:null,p=c.userLists.map(b=>{var g;return b.uri===((g=c.selectedList)==null?void 0:g.uri)?{...b,memberCount:(b.memberCount||0)+1}:b});return m&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(m)),localStorage.setItem(ke.LISTS,JSON.stringify(p)),{...c,selectedList:m,userLists:p}})}finally{t=!1}u()})),refreshListMembers:()=>{e(n=>({...n,refreshTrigger:Date.now()}))},setLoading:n=>{e(l=>({...l,isLoading:n}))},setError:n=>{e(l=>({...l,error:n,isLoading:!1}))},getSelectedList:()=>{const n=localStorage.getItem(ke.SELECTED_LIST);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.SELECTED_LIST)}return null},getUserLists:()=>{const n=localStorage.getItem(ke.LISTS);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(ke.SELECTED_LIST),e(n=>({...n,selectedList:null}))},async getAllListMemberDids(n,l="app_password"){let o;if(e(d=>(o=d,d)),!o.selectedList)return new Set;const u=`${o.selectedList.uri}-all-dids`;if(r.has(u))return r.get(u);try{let d=new Set,c=null;const m=100;do{const p=await Le.getListMembers(n,o.selectedList.uri,l,m,c);p.members.forEach(b=>d.add(b)),c=p.cursor}while(c);return r.set(u,d),d}catch(d){console.error("Error getting all list member DIDs:",d);const c=new Set(o.listMembers);return r.set(u,c),c}}}}const pe=Zl();function Xl(s){let e,t,r,n,l,o,u,d,c,m,p,b,g;return{c(){e=f("div"),t=f("label"),t.textContent="Handle",r=w(),n=f("input"),l=w(),o=f("div"),u=f("label"),u.textContent="App Password",d=w(),c=f("input"),m=w(),p=f("p"),p.textContent="Use an app password, not your main account password",a(t,"for","handle"),a(t,"class","block text-sm font-medium text-gray-700 mb-1"),a(n,"id","handle"),a(n,"type","text"),a(n,"placeholder","your-handle.bsky.social"),a(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,a(u,"for","password"),a(u,"class","block text-sm font-medium text-gray-700 mb-1"),a(c,"id","password"),a(c,"type","password"),a(c,"placeholder","Your app password"),a(c,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c.required=!0,a(p,"class","text-xs text-gray-500 mt-1")},m(_,v){E(_,e,v),i(e,t),i(e,r),i(e,n),be(n,s[0]),E(_,l,v),E(_,o,v),i(o,u),i(o,d),i(o,c),be(c,s[1]),i(o,m),i(o,p),b||(g=[ie(n,"input",s[11]),ie(c,"input",s[12])],b=!0)},p(_,v){v&1&&n.value!==_[0]&&be(n,_[0]),v&2&&c.value!==_[1]&&be(c,_[1])},d(_){_&&(A(e),A(l),A(o)),b=!1,Me(g)}}}function Ql(s){let e;return{c(){e=f("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,a(e,"class","bg-blue-50 border-2 border-blue-200 rounded-lg p-4")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function Dr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=L(s[3]),a(t,"class","text-red-700 text-sm"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,l){E(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&A(e)}}}function ei(s){let e;return{c(){e=L("Sign In")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function ti(s){let e;return{c(){e=L("Sign in with Bluesky")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function si(s){let e,t,r;function n(u,d){return u[4]==="oauth"?ni:ri}let l=n(s),o=l(s);return{c(){e=f("span"),t=w(),o.c(),r=st(),a(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(u,d){E(u,e,d),E(u,t,d),o.m(u,d),E(u,r,d)},p(u,d){l!==(l=n(u))&&(o.d(1),o=l(u),o&&(o.c(),o.m(r.parentNode,r)))},d(u){u&&(A(e),A(t),A(r)),o.d(u)}}}function ri(s){let e;return{c(){e=L("Signing in...")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function ni(s){let e;return{c(){e=L("Connecting...")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function li(s){let e,t,r,n,l,o,u,d,c,m,p,b,g,_,v,x,T,C,R,D,K,O,B,M,U,k,I,N,ee,P,W,j,Z,oe,se,y,h,z,S,F,V,te;function Y(J,ue){return J[4]==="oauth"?Ql:Xl}let $=Y(s),H=$(s),G=s[3]&&Dr(s);function ae(J,ue){return J[2]?si:J[4]==="oauth"?ti:ei}let le=ae(s),Q=le(s);return F=Tn(s[9][0]),{c(){e=f("div"),t=f("button"),r=w(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Sign in to Bluesky",u=w(),d=f("button"),d.textContent="Ã—",c=w(),m=f("form"),p=f("div"),b=f("div"),g=f("fieldset"),_=f("legend"),_.textContent="Sign in with:",v=w(),x=f("div"),T=f("div"),C=f("label"),R=f("input"),D=w(),K=f("span"),K.textContent="OAuth",O=w(),B=f("span"),B.textContent="Recommended",M=w(),U=f("p"),U.textContent="Secure OAuth login with Bluesky. No passwords stored on this site.",k=w(),I=f("label"),N=f("input"),ee=w(),P=f("span"),P.textContent="App Password",W=w(),j=f("p"),j.textContent="Traditional login using your Bluesky handle and app password.",Z=w(),H.c(),oe=w(),G&&G.c(),se=w(),y=f("div"),h=f("button"),h.textContent="Cancel",z=w(),S=f("button"),Q.c(),a(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),a(t,"aria-label","Close modal"),a(t,"type","button"),a(o,"class","text-xl font-semibold text-slate-800"),a(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),a(l,"class","flex items-center justify-between mb-4"),a(_,"class","block text-sm font-medium text-gray-700 mb-2"),a(R,"type","radio"),R.__value="oauth",be(R,R.__value),a(R,"class","mr-2"),a(K,"class","text-sm font-medium"),a(B,"class","ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),a(C,"class","flex items-center"),a(U,"class","text-xs text-gray-500 ml-6 mt-1"),a(T,"class","mb-4"),a(N,"type","radio"),N.__value="app_password",be(N,N.__value),a(N,"class","mr-2"),a(P,"class","text-sm"),a(j,"class","text-xs text-gray-500 ml-6 mt-1"),a(I,"class","flex items-center"),a(x,"class","space-y-2"),a(h,"type","button"),a(h,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),a(S,"type","submit"),S.disabled=s[2],a(S,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),a(y,"class","flex space-x-3 pt-2"),a(p,"class","space-y-4"),a(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),a(n,"role","document"),a(n,"id","sign-in-modal-content"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),a(e,"role","dialog"),a(e,"aria-modal","true"),a(e,"tabindex","-1"),a(e,"id","sign-in-modal"),F.p(R,N)},m(J,ue){E(J,e,ue),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,c),i(n,m),i(m,p),i(p,b),i(b,g),i(g,_),i(g,v),i(g,x),i(x,T),i(T,C),i(C,R),R.checked=R.__value===s[4],i(C,D),i(C,K),i(C,O),i(C,B),i(T,M),i(T,U),i(x,k),i(x,I),i(I,N),N.checked=N.__value===s[4],i(I,ee),i(I,P),i(I,W),i(I,j),i(p,Z),H.m(p,null),i(p,oe),G&&G.m(p,null),i(p,se),i(p,y),i(y,h),i(y,z),i(y,S),Q.m(S,null),V||(te=[ie(t,"click",s[7]),ie(d,"click",s[6]),ie(R,"change",s[8]),ie(N,"change",s[10]),ie(h,"click",s[6]),ie(m,"submit",js(s[5])),ie(e,"keydown",s[13])],V=!0)},p(J,[ue]){ue&16&&(R.checked=R.__value===J[4]),ue&16&&(N.checked=N.__value===J[4]),$===($=Y(J))&&H?H.p(J,ue):(H.d(1),H=$(J),H&&(H.c(),H.m(p,oe))),J[3]?G?G.p(J,ue):(G=Dr(J),G.c(),G.m(p,se)):G&&(G.d(1),G=null),le===(le=ae(J))&&Q?Q.p(J,ue):(Q.d(1),Q=le(J),Q&&(Q.c(),Q.m(S,null))),ue&4&&(S.disabled=J[2])},i:ne,o:ne,d(J){J&&A(e),H.d(),G&&G.d(),Q.d(),F.r(),V=!1,Me(te)}}}function ii(s,e,t){const r=Rn();let n="",l="",o=!1,u="",d="oauth";async function c(){t(2,o=!0),t(3,u="");try{await Zn()}catch(D){t(3,u=D.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function m(){if(!n||!l){t(3,u="Please enter both handle and password");return}t(2,o=!0),t(3,u="");try{const D=await Le.signIn(n,l);Ue.setSession(D,Tt.APP_PASSWORD),r("close")}catch(D){t(3,u=D.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function p(){d==="oauth"?await c():await m()}function b(){r("close")}function g(){b()}const _=[[]];function v(){d=this.__value,t(4,d)}function x(){d=this.__value,t(4,d)}function T(){n=this.value,t(0,n)}function C(){l=this.value,t(1,l)}return[n,l,o,u,d,p,b,g,v,_,x,T,C,D=>D.key==="Escape"&&b()]}class Xn extends De{constructor(e){super(),Oe(this,e,ii,li,Ae,{})}}function Kr(s){let e,t;return{c(){e=f("div"),t=L(s[4]),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700")},m(r,n){E(r,e,n),i(e,t)},p(r,n){n&16&&q(t,r[4])},d(r){r&&A(e)}}}function oi(s){let e;return{c(){e=L("Create")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function ai(s){let e;return{c(){e=L("Creating...")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function ci(s){let e,t,r,n,l,o,u,d,c,m,p,b,g,_,v,x,T,C,R,D,K,O,B,M,U,k,I,N,ee,P,W,j,Z,oe,se,y,h,z,S,F,V,te,Y,$,H=s[4]&&Kr(s);function G(Q,J){return Q[3]?ai:oi}let ae=G(s),le=ae(s);return te=Tn(s[10][0]),{c(){e=f("div"),t=f("button"),r=w(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Create New List",u=w(),d=f("button"),d.textContent="Ã—",c=w(),m=f("form"),p=f("div"),b=f("div"),g=f("label"),g.textContent="Name",_=w(),v=f("input"),x=w(),T=f("div"),C=f("label"),C.textContent="Description (optional)",R=w(),D=f("textarea"),K=w(),O=f("div"),B=f("fieldset"),M=f("legend"),M.textContent="Purpose",U=w(),k=f("div"),I=f("label"),N=f("input"),ee=w(),P=f("span"),P.textContent="Curated list",W=w(),j=f("label"),Z=f("input"),oe=w(),se=f("span"),se.textContent="Moderation list",y=w(),H&&H.c(),h=w(),z=f("div"),S=f("button"),S.textContent="Cancel",F=w(),V=f("button"),le.c(),a(t,"class","absolute inset-0 w-full h-full bg-transparent border-0"),a(t,"aria-label","Close"),a(o,"class","text-xl font-semibold text-slate-800"),a(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),a(l,"class","flex items-center justify-between mb-4"),a(g,"class","block text-sm font-medium text-gray-700 mb-1"),a(g,"for","list-name"),a(v,"id","list-name"),a(v,"type","text"),v.required=!0,a(v,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a(C,"class","block text-sm font-medium text-gray-700 mb-1"),a(C,"for","list-description"),a(D,"id","list-description"),a(D,"rows","3"),a(D,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a(M,"class","block text-sm font-medium text-gray-700 mb-2"),a(N,"type","radio"),a(N,"name","purpose"),N.__value="app.bsky.graph.defs#curatelist",be(N,N.__value),a(N,"class","mr-2"),a(P,"class","text-sm"),a(I,"class","flex items-center"),a(Z,"type","radio"),a(Z,"name","purpose"),Z.__value="app.bsky.graph.defs#modlist",be(Z,Z.__value),a(Z,"class","mr-2"),a(se,"class","text-sm"),a(j,"class","flex items-center"),a(k,"class","space-y-2"),a(S,"type","button"),a(S,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),a(V,"type","submit"),V.disabled=s[3],a(V,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),a(z,"class","flex space-x-3 pt-2"),a(p,"class","space-y-4"),a(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),a(e,"role","dialog"),a(e,"aria-modal","true"),te.p(N,Z)},m(Q,J){E(Q,e,J),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,c),i(n,m),i(m,p),i(p,b),i(b,g),i(b,_),i(b,v),be(v,s[0]),i(p,x),i(p,T),i(T,C),i(T,R),i(T,D),be(D,s[1]),i(p,K),i(p,O),i(O,B),i(B,M),i(B,U),i(B,k),i(k,I),i(I,N),N.checked=N.__value===s[2],i(I,ee),i(I,P),i(k,W),i(k,j),i(j,Z),Z.checked=Z.__value===s[2],i(j,oe),i(j,se),i(p,y),H&&H.m(p,null),i(p,h),i(p,z),i(z,S),i(z,F),i(z,V),le.m(V,null),Y||($=[ie(t,"click",s[5]),ie(d,"click",s[5]),ie(v,"input",s[7]),ie(D,"input",s[8]),ie(N,"change",s[9]),ie(Z,"change",s[11]),ie(S,"click",s[5]),ie(m,"submit",js(s[6]))],Y=!0)},p(Q,[J]){J&1&&v.value!==Q[0]&&be(v,Q[0]),J&2&&be(D,Q[1]),J&4&&(N.checked=N.__value===Q[2]),J&4&&(Z.checked=Z.__value===Q[2]),Q[4]?H?H.p(Q,J):(H=Kr(Q),H.c(),H.m(p,h)):H&&(H.d(1),H=null),ae!==(ae=G(Q))&&(le.d(1),le=ae(Q),le&&(le.c(),le.m(V,null))),J&8&&(V.disabled=Q[3])},i:ne,o:ne,d(Q){Q&&A(e),H&&H.d(),le.d(),te.r(),Y=!1,Me($)}}}function ui(s,e,t){let r;Ie(s,Ue,T=>t(12,r=T));const n=Rn();let l="",o="",u="app.bsky.graph.defs#curatelist",d=!1,c="";function m(){n("close")}async function p(){var T;if(t(4,c=""),!l||l.trim().length===0){t(4,c="Please enter a list name");return}t(3,d=!0);try{const C=await Le.createList(r.session,{name:l.trim(),description:o.trim(),purpose:u},r.authType),R=(C==null?void 0:C.uri)||((T=C==null?void 0:C.cid)==null?void 0:T.uri)||null,D=new Date().toISOString(),K={uri:R,name:l.trim(),description:o.trim()||"",purpose:u,createdAt:D,memberCount:0};n("success",K),n("close")}catch(C){t(4,c=(C==null?void 0:C.message)||"Failed to create list")}finally{t(3,d=!1)}}const b=[[]];function g(){l=this.value,t(0,l)}function _(){o=this.value,t(1,o)}function v(){u=this.__value,t(2,u)}function x(){u=this.__value,t(2,u)}return[l,o,u,d,c,m,p,g,_,v,b,x]}class di extends De{constructor(e){super(),Oe(this,e,ui,ci,Ae,{})}}const fi=!0,ks={staticBase:"static",isDevelopment:!1,isProduction:fi,buildTime:new Date().toISOString(),getAssetPath:s=>`./${s.replace("static/","")}`};function Nr(s,e,t){const r=s.slice();return r[15]=e[t],r}function mi(s){let e,t,r;return{c(){e=f("button"),e.textContent="ðŸ” Sign in with Bluesky",a(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200"),a(e,"id","sign-in-button")},m(n,l){E(n,e,l),t||(r=ie(e,"click",s[7]),t=!0)},p:ne,d(n){n&&A(e),t=!1,r()}}}function pi(s){let e,t,r,n,l,o,u,d,c,m,p,b,g,_=s[1].session.handle+"",v,x,T,C,R,D,K;function O(k,I){return k[4]?bi:k[5]?gi:hi}let B=O(s),M=B(s),U=s[5]&&Ur(s);return{c(){e=f("div"),t=f("label"),t.textContent="List:",r=w(),n=f("select"),l=f("option"),l.textContent="Select a list...",M.c(),u=w(),U&&U.c(),d=w(),c=f("button"),c.textContent="+ New List",m=w(),p=f("div"),b=f("div"),g=L("@"),v=L(_),x=w(),T=f("button"),T.textContent="Sign out",C=w(),R=f("button"),R.textContent="ðŸ”„ Refresh",a(t,"for","list-selector"),a(t,"class","block text-sm font-medium text-gray-700 mb-1"),l.__value="",be(l,l.__value),a(n,"id","list-selector"),a(n,"class","w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),n.disabled=s[4],a(e,"class","flex-1"),a(c,"class","bg-white hover:bg-gray-50 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),a(c,"id","new-list-button"),a(c,"title","Create a new list"),a(b,"class","text-sm text-slate-700"),a(T,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),a(T,"id","sign-out-button"),a(R,"class","bg-blue-100 hover:bg-blue-200 text-slate-700 border border-blue-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium ml-2"),a(R,"id","refresh-session-button"),a(p,"class","text-right"),a(p,"id","user-info")},m(k,I){var N;E(k,e,I),i(e,t),i(e,r),i(e,n),i(n,l),M.m(n,null),Tr(n,((N=s[0].selectedList)==null?void 0:N.uri)||""),i(e,u),U&&U.m(e,null),E(k,d,I),E(k,c,I),E(k,m,I),E(k,p,I),i(p,b),i(b,g),i(b,v),i(p,x),i(p,T),i(p,C),i(p,R),D||(K=[ie(n,"change",s[6]),ie(c,"click",s[8]),ie(T,"click",s[12]),ie(R,"click",s[13])],D=!0)},p(k,I){var N,ee;B===(B=O(k))&&M?M.p(k,I):(M.d(1),M=B(k),M&&(M.c(),M.m(n,null))),I&1&&o!==(o=((N=k[0].selectedList)==null?void 0:N.uri)||"")&&Tr(n,((ee=k[0].selectedList)==null?void 0:ee.uri)||""),I&16&&(n.disabled=k[4]),k[5]?U?U.p(k,I):(U=Ur(k),U.c(),U.m(e,null)):U&&(U.d(1),U=null),I&2&&_!==(_=k[1].session.handle+"")&&q(v,_)},d(k){k&&(A(e),A(d),A(c),A(m),A(p)),M.d(),U&&U.d(),D=!1,Me(K)}}}function hi(s){let e,t=ge(s[0].userLists),r=[];for(let n=0;n<t.length;n+=1)r[n]=Br(Nr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);E(n,e,l)},p(n,l){if(l&1){t=ge(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const u=Nr(n,t,o);r[o]?r[o].p(u,l):(r[o]=Br(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&A(e),Ve(r,n)}}}function gi(s){let e;return{c(){e=f("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",be(e,e.__value)},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function bi(s){let e;return{c(){e=f("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",be(e,e.__value)},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function Br(s){let e,t=s[15].name+"",r,n,l=s[15].memberCount.toLocaleString()+"",o,u,d;return{c(){e=f("option"),r=L(t),n=L(" ("),o=L(l),u=L(` members)
									`),e.__value=d=s[15].uri,be(e,e.__value)},m(c,m){E(c,e,m),i(e,r),i(e,n),i(e,o),i(e,u)},p(c,m){m&1&&t!==(t=c[15].name+"")&&q(r,t),m&1&&l!==(l=c[15].memberCount.toLocaleString()+"")&&q(o,l),m&1&&d!==(d=c[15].uri)&&(e.__value=d,be(e,e.__value))},d(c){c&&A(e)}}}function Ur(s){let e,t;return{c(){e=f("p"),t=L(s[5]),a(e,"class","text-sm text-red-600 mt-1")},m(r,n){E(r,e,n),i(e,t)},p(r,n){n&32&&q(t,r[5])},d(r){r&&A(e)}}}function Wr(s){let e,t;return e=new Xn({}),e.$on("close",s[11]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:ne,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Hr(s){let e,t;return e=new di({}),e.$on("close",s[9]),e.$on("success",s[10]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:ne,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function yi(s){let e,t,r,n,l,o,u,d,c,m;function p(x,T){return x[1].session?pi:mi}let b=p(s),g=b(s),_=s[2]&&Wr(s),v=s[3]&&Hr(s);return{c(){e=f("header"),t=f("div"),r=f("div"),n=f("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,l=w(),o=f("div"),g.c(),u=w(),_&&_.c(),d=w(),v&&v.c(),c=st(),a(o,"class","flex items-center space-x-4"),a(r,"class","flex items-center justify-between mb-4"),a(t,"class","max-w-6xl mx-auto px-6 py-4"),a(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50"),a(e,"id","app-header")},m(x,T){E(x,e,T),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),g.m(o,null),E(x,u,T),_&&_.m(x,T),E(x,d,T),v&&v.m(x,T),E(x,c,T),m=!0},p(x,[T]){b===(b=p(x))&&g?g.p(x,T):(g.d(1),g=b(x),g&&(g.c(),g.m(o,null))),x[2]?_?(_.p(x,T),T&4&&ce(_,1)):(_=Wr(x),_.c(),ce(_,1),_.m(d.parentNode,d)):_&&(ft(),de(_,1,1,()=>{_=null}),mt()),x[3]?v?(v.p(x,T),T&8&&ce(v,1)):(v=Hr(x),v.c(),ce(v,1),v.m(c.parentNode,c)):v&&(ft(),de(v,1,1,()=>{v=null}),mt())},i(x){m||(ce(_),ce(v),m=!0)},o(x){de(_),de(v),m=!1},d(x){x&&(A(e),A(u),A(d),A(c)),g.d(),_&&_.d(x),v&&v.d(x)}}}function vi(s,e,t){let r,n;Ie(s,pe,C=>t(0,r=C)),Ie(s,Ue,C=>t(1,n=C));let l=!1,o=!1,u=!1,d="";Cs(async()=>{n.session&&await c()});async function c(){if(n.session)try{t(4,u=!0),t(5,d="");const R=(await Le.getUserLists(n.session,n.authType)).map(D=>({uri:D.uri,name:D.name,description:D.description||"",purpose:D.purpose||"app.bsky.graph.defs#modlist",createdAt:D.createdAt,memberCount:D.listItemCount||0})).sort((D,K)=>new Date(K.createdAt)-new Date(D.createdAt));pe.setUserLists(R)}catch(C){console.error("Failed to load user lists:",C),t(5,d=C.message||"Failed to load lists")}finally{t(4,u=!1)}}function m(C){const R=C.target.value;if(R){const D=r.userLists.find(K=>K.uri===R);D&&pe.setSelectedList(D)}else pe.setSelectedList(null)}function p(){t(2,l=!0)}function b(){t(3,o=!0)}function g(){t(3,o=!1)}async function _(C){const R=C.detail;pe.insertNewList(R,!0)}function v(){t(2,l=!1)}function x(){Ue.signOut(),pe.setSelectedList(null)}async function T(){console.log("Manually refreshing session...");const{session:C,authType:R}=await Ue.initializeSession();console.log("Session refresh result:",{session:C,authType:R})}return s.$$.update=()=>{s.$$.dirty&3&&n.session&&r.userLists.length===0&&c(),s.$$.dirty&1&&r.userLists.length>0&&console.log("Header: userLists updated:",r.userLists)},[r,n,l,o,u,d,m,p,b,g,_,v,x,T]}class _i extends De{constructor(e){super(),Oe(this,e,vi,yi,Ae,{})}}function ys(s){s.preventDefault()}var wi=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]);function Si(s){if(wi.has(s.key))return ys(s),!1}var vs=new AbortController,hs=vs.signal;function ki(){window.addEventListener("DOMMouseScroll",ys,{signal:hs}),window.addEventListener("wheel",ys,{passive:!1,signal:hs}),window.addEventListener("touchmove",ys,{passive:!1,signal:hs}),window.addEventListener("keydown",Si,{signal:hs})}function Li(){vs==null||vs.abort()}function Ci(s){if(!s)throw new Error("Please specify a container for the zoom image");const e=s.querySelector("img");if(!e)throw new Error("Please place an image inside the container");return e}var xi=50,Mi=()=>({createZoomImage:(e,t,r)=>{if(e.src===t)return;e.src=t;let n=!1;e.onload=()=>{n=!0,r.setState({zoomedImgStatus:"loaded"})},e.onerror=()=>{n=!0,r.setState({zoomedImgStatus:"error"})},setTimeout(()=>{n||r.setState({zoomedImgStatus:"loading"})},xi)}}),Ai=Mi();function Ei(s){let e=new Set,t=!1,r=s,n,l=(u={})=>{n={...n,...u},o()},o=()=>{if(t)return;let u=!1;if(n){for(let d in n)if(r[d]!==n[d]){u=!0;break}}u&&(r={...r,...n},e.forEach(d=>d({state:r,updatedProperties:n})),n=void 0)};return{subscribe:u=>(e.add(u),()=>{e.delete(u)}),cleanup:()=>e.clear(),getState:()=>r,setState:l,batch:u=>{t=!0,u(),t=!1,o()}}}function Pi(s,e={}){var R,D;let t=null;const r=Ci(s),n={zoomFactor:e.zoomFactor??4,zoomImageSource:e.zoomImageSource??r.src,disabledContextMenu:e.disabledContextMenu??!1},{disabledContextMenu:l,zoomFactor:o,zoomImageSource:u}=n,d=Ei({zoomedImgStatus:"idle"}),c=document.createElement("img");(R=e.zoomImageProps)!=null&&R.alt&&(c.alt=e.zoomImageProps.alt),(D=e.zoomImageProps)!=null&&D.className&&(c.className=e.zoomImageProps.className),c.style.maxWidth="none",c.style.position="absolute",c.style.top="0",c.style.left="0",l&&(c.style["-webkit-user-select"]="none",c.style["-webkit-touch-callout"]="none",c.oncontextmenu=()=>!1);const m=K=>t&&K.pointerId===t;function p(K){if(t===null){t=K.pointerId,s.appendChild(c),c.style.display="block";const O=r.clientWidth*o,B=r.clientHeight*o;c.style.width=`${O}px`,c.style.height=`${B}px`,Ai.createZoomImage(c,u,d),x(K),K.pointerType!=="mouse"&&ki()}}function b(K){m(K)&&x(K)}function g(K){m(K)&&(s.contains(c)&&s.removeChild(c),c.style.display="none",c.style.transform="none",Li(),t=null)}const _=K=>{const O=s.clientWidth;return K>0?0:K+O*o<O?-O*(o-1):K},v=K=>{const O=s.clientHeight;return K>0?0:K+O*o<O?-O*(o-1):K};function x(K){c.style.display="block";const O=s.getBoundingClientRect(),B=K.clientX-O.left,M=K.clientY-O.top,U=_(-B*o+B),k=v(-M*o+M);c.style.transform=`translate(${U}px, ${k}px)`}const T=new AbortController,{signal:C}=T;return s.addEventListener("pointerenter",p,{signal:C}),s.addEventListener("pointermove",b,{signal:C}),s.addEventListener("pointerleave",g,{signal:C}),s.addEventListener("touchstart",K=>{l&&K.preventDefault()},{signal:C}),{cleanup:()=>{T.abort(),s.contains(c)&&s.removeChild(c),d.cleanup()},subscribe:d.subscribe,getState:d.getState}}function Ti(){let s;const{set:e,subscribe:t}=qs({zoomedImgStatus:"idle"}),r=(...n)=>{s==null||s.cleanup(),s=Pi(...n),e(s.getState()),s.subscribe(({state:l})=>{e(l)})};return In(()=>{s==null||s.cleanup()}),{createZoomImage:r,zoomImageState:{subscribe:t}}}function Ii(s){let e,t,r,n;return{c(){e=f("div"),t=f("img"),tt(t.src,r=s[0])||a(t,"src",r),a(t,"alt",s[1]),a(t,"class","base-image svelte-6dnnuj"),fe(t,"width","100%"),fe(t,"height","100%"),fe(t,"object-fit","cover"),a(e,"class",n="zoom-image-container "+s[4]+" svelte-6dnnuj"),fe(e,"width",s[2]),fe(e,"height",s[3]),fe(e,"overflow","hidden"),fe(e,"position","relative"),a(e,"id","zoomable-image-"+Math.random().toString(36).substr(2,9))},m(l,o){E(l,e,o),i(e,t),s[7](e)},p(l,[o]){o&1&&!tt(t.src,r=l[0])&&a(t,"src",r),o&2&&a(t,"alt",l[1]),o&16&&n!==(n="zoom-image-container "+l[4]+" svelte-6dnnuj")&&a(e,"class",n),o&4&&fe(e,"width",l[2]),o&8&&fe(e,"height",l[3])},i:ne,o:ne,d(l){l&&A(e),s[7](null)}}}function Ri(s,e,t){let{src:r=""}=e,{alt:n=""}=e,{width:l="auto"}=e,{height:o="auto"}=e,{className:u=""}=e,{zoomFactor:d=2}=e,c,m;const{createZoomImage:p}=Ti();Cs(()=>{c&&(m=p(c,{zoomFactor:d,zoomImageSource:r,zoomImageProps:{alt:n,className:"zoom-image"}}))}),In(()=>{m&&m.cleanup&&m.cleanup()});function b(g){ws[g?"unshift":"push"](()=>{c=g,t(5,c)})}return s.$$set=g=>{"src"in g&&t(0,r=g.src),"alt"in g&&t(1,n=g.alt),"width"in g&&t(2,l=g.width),"height"in g&&t(3,o=g.height),"className"in g&&t(4,u=g.className),"zoomFactor"in g&&t(6,d=g.zoomFactor)},[r,n,l,o,u,c,d,b]}class Oi extends De{constructor(e){super(),Oe(this,e,Ri,Ii,Ae,{src:0,alt:1,width:2,height:3,className:4,zoomFactor:6})}}function zr(s){let e,t;return e=new Xn({}),e.$on("close",s[2]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:ne,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Di(s){let e,t,r,n,l,o,u,d,c,m,p,b,g,_,v,x,T,C,R,D,K,O,B,M,U,k,I,N,ee,P,W,j,Z,oe;b=new Oi({props:{src:ks.getAssetPath("static/screencapture.png"),alt:"Bluesky List Manager Preview - Showing list statistics and member management interface",width:"100%",height:"auto",className:"screenshot-zoom-image",zoomFactor:3}});let se=s[0]&&zr(s);return{c(){e=f("div"),t=f("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-4xl font-bold text-slate-800 mb-4">Bluesky List Manager</h2> <p class="text-xl text-slate-600 mb-2">Manage your lists like a pro.</p> <p class="text-xl text-slate-600 mb-6"><strong class="text-blue-600">Get insights and powerful tools to grow your curated lists.</strong></p>`,r=w(),n=f("div"),l=f("button"),l.textContent="ðŸš€ Sign in with Bluesky to manage your lists",o=w(),u=f("p"),u.textContent="100% free â€¢ No registration required â€¢ Works instantly â€¢ Zero data stored on our servers",d=w(),c=f("div"),m=f("div"),p=f("div"),Re(b.$$.fragment),g=w(),_=f("div"),_.innerHTML='<div class="zoom-hint svelte-163esy5">ðŸ” Move mouse to zoom and explore the interface</div>',v=w(),x=f("p"),x.textContent="See your list insights and manage members with powerful analytics",T=w(),C=f("div"),C.innerHTML='<div class="bg-red-50 p-6 rounded-lg border border-red-200"><h3 class="text-lg font-semibold text-red-800 mb-3">ðŸ˜¤ The Manual Way (Slow &amp; Painful)</h3> <ul class="space-y-2 text-red-700"><li class="flex items-start"><span class="text-red-500 mr-2">â€¢</span> <span>Search one profile at a time</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">â€¢</span> <span>Forget who you&#39;ve already added</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">â€¢</span> <span>Hours of repetitive clicking</span></li></ul></div> <div class="bg-green-50 p-6 rounded-lg border border-green-200"><h3 class="text-lg font-semibold text-green-800 mb-3">âš¡ The Smart Way (Fast &amp; Easy)</h3> <ul class="space-y-2 text-green-700"><li class="flex items-start"><span class="text-green-500 mr-2">â€¢</span> <span><strong>Bulk search</strong> by keywords, bio, or handle</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">â€¢</span> <span><strong>Instant filtering</strong> - see who&#39;s already in your list</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">â€¢</span> <span><strong>Minutes instead of hours</strong></span></li></ul></div>',R=w(),D=f("div"),D.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-4">ðŸŽ¯ Perfect for:</h3> <div class="grid md:grid-cols-3 gap-4 text-blue-700"><div class="text-center"><div class="text-2xl mb-2">ðŸ‘¥</div> <div class="font-medium">Community Builders</div> <div class="text-sm">Grow your curated lists quickly</div></div> <div class="text-center"><div class="text-2xl mb-2">ðŸ”</div> <div class="font-medium">Content Creators</div> <div class="text-sm">Find your target audience</div></div> <div class="text-center"><div class="text-2xl mb-2">ðŸ“Š</div> <div class="font-medium">List Managers</div> <div class="text-sm">Maintain and expand your lists</div></div></div>',K=w(),O=f("div"),O.innerHTML='<h3 class="text-lg font-semibold text-purple-800 mb-3">âœ¨ Key Features</h3> <div class="grid md:grid-cols-2 gap-4 text-purple-700"><div><div class="font-medium mb-1">ðŸ” Smart Search</div> <div class="text-sm">Search across bios, display names, and handles with powerful filters</div></div> <div><div class="font-medium mb-1">ðŸ“Š Real-time Stats</div> <div class="text-sm">See engagement rates, verification status, and growth metrics</div></div> <div><div class="font-medium mb-1">ðŸ”’ Privacy First</div> <div class="text-sm">Client-side app - your data never leaves your browser</div></div></div>',B=w(),M=f("div"),M.innerHTML=`<h3 class="text-lg font-semibold text-gray-800 mb-3">ðŸ” Privacy &amp; Security</h3> <p class="text-gray-700 mb-3">This is a <strong>client-side application</strong>. Your Bluesky credentials are stored
			locally in your browser and are never sent to our servers. We only communicate directly with
			Bluesky&#39;s API using your authentication token.</p> <p class="text-sm text-gray-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code (and
			contribute!) on
			<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-gray-600 hover:text-gray-700 underline">GitHub</a>.</p>`,U=w(),k=f("div"),I=f("button"),I.textContent="ðŸš€ Start Building Better Lists - Sign in with Bluesky",N=w(),ee=f("p"),ee.textContent="100% free â€¢ No registration required â€¢ Works instantly â€¢ Zero data stored on our servers",P=w(),se&&se.c(),W=st(),a(t,"class","text-center mb-8"),a(l,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),a(l,"id","auth-sign-in-button"),a(u,"class","text-sm text-gray-500 mt-3"),a(n,"class","text-center mb-8"),a(n,"id","auth-cta"),a(_,"class","zoom-overlay svelte-163esy5"),a(p,"class","screenshot-container svelte-163esy5"),a(x,"class","text-sm text-gray-600 mt-4"),a(m,"class","bg-gray-50 p-6 rounded-lg border border-gray-200"),a(c,"class","mb-8 text-center"),a(C,"class","grid md:grid-cols-2 gap-8 mb-8"),a(D,"class","bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8"),a(O,"class","bg-purple-50 p-6 rounded-lg border border-purple-200 mb-8"),a(M,"class","bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8"),a(I,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),a(ee,"class","text-sm text-gray-500 mt-3"),a(k,"class","text-center"),a(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-4xl mx-auto relative z-100"),a(e,"id","auth-instructions")},m(y,h){E(y,e,h),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u),i(e,d),i(e,c),i(c,m),i(m,p),Ce(b,p,null),i(p,g),i(p,_),i(m,v),i(m,x),i(e,T),i(e,C),i(e,R),i(e,D),i(e,K),i(e,O),i(e,B),i(e,M),i(e,U),i(e,k),i(k,I),i(k,N),i(k,ee),E(y,P,h),se&&se.m(y,h),E(y,W,h),j=!0,Z||(oe=[ie(l,"click",s[1]),ie(I,"click",s[1])],Z=!0)},p(y,[h]){y[0]?se?(se.p(y,h),h&1&&ce(se,1)):(se=zr(y),se.c(),ce(se,1),se.m(W.parentNode,W)):se&&(ft(),de(se,1,1,()=>{se=null}),mt())},i(y){j||(ce(b.$$.fragment,y),ce(se),j=!0)},o(y){de(b.$$.fragment,y),de(se),j=!1},d(y){y&&(A(e),A(P),A(W)),xe(b),se&&se.d(y),Z=!1,Me(oe)}}}function Ki(s,e,t){let r=!1;function n(){t(0,r=!0)}function l(){t(0,r=!1)}return[r,n,l]}class Ni extends De{constructor(e){super(),Oe(this,e,Ki,Di,Ae,{})}}function Bi(s){let e,t,r;return{c(){e=f("h3"),e.textContent="Select a List",t=w(),r=f("p"),r.textContent="Choose a list from the dropdown above to get started.",a(e,"class","text-lg font-semibold text-slate-800 mb-2"),a(r,"class","text-slate-600")},m(n,l){E(n,e,l),E(n,t,l),E(n,r,l)},d(n){n&&(A(e),A(t),A(r))}}}function Ui(s){let e,t,r;return{c(){e=f("h3"),e.textContent="No Lists Found",t=w(),r=f("p"),r.textContent="You don't have any lists yet. Create a list on Bluesky first!",a(e,"class","text-lg font-semibold text-slate-800 mb-2"),a(r,"class","text-slate-600")},m(n,l){E(n,e,l),E(n,t,l),E(n,r,l)},d(n){n&&(A(e),A(t),A(r))}}}function Wi(s){let e,t,r,n,l,o,u;function d(p,b){return p[0].userLists.length===0?Ui:Bi}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=w(),l=f("div"),o=f("div"),o.innerHTML=`<img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,u=w(),m.c(),a(r,"class","text-center mb-8"),a(o,"class","text-4xl mb-4"),a(l,"class","text-center py-12"),a(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),a(t,"id","list-selector-content"),a(e,"class","max-w-4xl mx-auto"),a(e,"id","list-selector")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),m.m(l,null)},p(p,[b]){c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null)))},i:ne,o:ne,d(p){p&&A(e),m.d()}}}function Hi(s,e,t){let r;return Ie(s,pe,n=>t(0,r=n)),[r]}class zi extends De{constructor(e){super(),Oe(this,e,Hi,Wi,Ae,{})}}function Fi(s){let e,t,r,n,l,o,u,d,c,m,p,b=(s[0].displayName||s[0].handle)+"",g,_,v,x,T=s[0].handle+"",C,R,D,K,O=s[0].description&&Fr(s);function B(k,I){if(k[3]==="Already in list")return Yi;if(k[3]==="New candidate")return Vi;if(k[6])return qi;if(k[2])return Ji}let M=B(s),U=M&&M(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h3"),g=L(b),_=w(),v=f("span"),x=L("@"),C=L(T),R=w(),O&&O.c(),D=w(),U&&U.c(),tt(n.src,l=Ls(s[0]))||a(n,"src",l),a(n,"alt",o=s[0].displayName||s[0].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(p,"class","text-base font-semibold text-gray-900 truncate"),a(v,"class","text-sm text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(c,"class","flex-1 min-w-0"),a(t,"class","flex items-start space-x-3"),a(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200"),a(e,"id",K="profile-card-"+s[0].did)},m(k,I){E(k,e,I),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,g),i(m,_),i(m,v),i(v,x),i(v,C),i(c,R),O&&O.m(c,null),i(c,D),U&&U.m(c,null)},p(k,I){I&1&&!tt(n.src,l=Ls(k[0]))&&a(n,"src",l),I&1&&o!==(o=k[0].displayName||k[0].handle)&&a(n,"alt",o),I&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(k[0].displayName||k[0].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),I&1&&b!==(b=(k[0].displayName||k[0].handle)+"")&&q(g,b),I&1&&T!==(T=k[0].handle+"")&&q(C,T),k[0].description?O?O.p(k,I):(O=Fr(k),O.c(),O.m(c,D)):O&&(O.d(1),O=null),M===(M=B(k))&&U?U.p(k,I):(U&&U.d(1),U=M&&M(k),U&&(U.c(),U.m(c,null))),I&1&&K!==(K="profile-card-"+k[0].did)&&a(e,"id",K)},d(k){k&&A(e),O&&O.d(),U&&U.d()}}}function ji(s){let e,t,r,n,l,o,u,d,c,m,p,b=(s[0].displayName||s[0].handle)+"",g,_,v,x,T=s[0].handle+"",C,R,D,K,O,B,M,U,k,I=s[0].description&&jr(s);function N(W,j){if(W[3]==="Already in list")return eo;if(W[3]==="New candidate")return Qi;if(W[6])return Xi;if(W[2])return Zi}let ee=N(s),P=ee&&ee(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("div"),p=f("h3"),g=L(b),_=w(),v=f("span"),x=L("@"),C=L(T),R=w(),I&&I.c(),D=w(),P&&P.c(),K=w(),O=f("div"),O.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',tt(n.src,l=Ls(s[0]))||a(n,"src",l),a(n,"alt",o=s[0].displayName||s[0].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(p,"class","text-base font-semibold text-gray-900 truncate"),a(v,"class","text-sm text-gray-600 truncate"),a(m,"class","flex items-center space-x-2 mb-1"),a(c,"class","flex-1 min-w-0"),a(O,"class","flex-shrink-0"),a(t,"class","flex items-start space-x-3"),a(e,"href",B="https://bsky.app/profile/"+s[0].handle),a(e,"target","_blank"),a(e,"rel","noopener noreferrer"),a(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200"),a(e,"id",M="profile-card-"+s[0].did)},m(W,j){E(W,e,j),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,g),i(m,_),i(m,v),i(v,x),i(v,C),i(c,R),I&&I.m(c,null),i(c,D),P&&P.m(c,null),i(t,K),i(t,O),U||(k=ie(e,"click",s[9]),U=!0)},p(W,j){j&1&&!tt(n.src,l=Ls(W[0]))&&a(n,"src",l),j&1&&o!==(o=W[0].displayName||W[0].handle)&&a(n,"alt",o),j&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(W[0].displayName||W[0].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),j&1&&b!==(b=(W[0].displayName||W[0].handle)+"")&&q(g,b),j&1&&T!==(T=W[0].handle+"")&&q(C,T),W[0].description?I?I.p(W,j):(I=jr(W),I.c(),I.m(c,D)):I&&(I.d(1),I=null),ee===(ee=N(W))&&P?P.p(W,j):(P&&P.d(1),P=ee&&ee(W),P&&(P.c(),P.m(c,null))),j&1&&B!==(B="https://bsky.app/profile/"+W[0].handle)&&a(e,"href",B),j&1&&M!==(M="profile-card-"+W[0].did)&&a(e,"id",M)},d(W){W&&A(e),I&&I.d(),P&&P.d(),U=!1,k()}}}function Fr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=L(t),a(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){E(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&q(r,t)},d(n){n&&A(e)}}}function Ji(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",a(t,"type","checkbox"),t.checked=s[1],a(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),a(n,"class","text-sm text-gray-600"),a(e,"class","flex items-center space-x-2")},m(u,d){E(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=ie(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&A(e),l=!1,o()}}}function qi(s){let e;return{c(){e=f("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,a(e,"class","flex items-center space-x-2")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function Vi(s){let e,t,r,n,l,o,u;function d(p,b){return p[5]?Gi:$i}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("span"),r=L(s[3]),n=w(),l=f("button"),m.c(),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],a(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-2")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(u=ie(l,"click",s[8]),o=!0)},p(p,b){b&8&&q(r,p[3]),c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null))),b&32&&(l.disabled=p[5])},d(p){p&&A(e),m.d(),o=!1,u()}}}function Yi(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=L(s[3]),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),a(e,"class","flex items-center space-x-2")},m(n,l){E(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&A(e)}}}function $i(s){let e;return{c(){e=L("Add to list")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function Gi(s){let e,t;return{c(){e=f("span"),t=L(`
								Adding...`),a(e,"class","loading-spinner mr-1")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(A(e),A(t))}}}function jr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=L(t),a(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){E(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&q(r,t)},d(n){n&&A(e)}}}function Zi(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",a(t,"type","checkbox"),t.checked=s[1],a(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),a(n,"class","text-sm text-gray-600"),a(e,"class","flex items-center space-x-2")},m(u,d){E(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=ie(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&A(e),l=!1,o()}}}function Xi(s){let e;return{c(){e=f("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,a(e,"class","flex items-center space-x-2")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function Qi(s){let e,t,r,n,l,o,u;function d(p,b){return p[5]?so:to}let c=d(s),m=c(s);return{c(){e=f("div"),t=f("span"),r=L(s[3]),n=w(),l=f("button"),m.c(),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],a(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","flex items-center space-x-2")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(u=ie(l,"click",s[8]),o=!0)},p(p,b){b&8&&q(r,p[3]),c!==(c=d(p))&&(m.d(1),m=c(p),m&&(m.c(),m.m(l,null))),b&32&&(l.disabled=p[5])},d(p){p&&A(e),m.d(),o=!1,u()}}}function eo(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=L(s[3]),a(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),a(e,"class","flex items-center space-x-2")},m(n,l){E(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&A(e)}}}function to(s){let e;return{c(){e=L("Add to list")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function so(s){let e,t;return{c(){e=f("span"),t=L(`
								Adding...`),a(e,"class","loading-spinner mr-1")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(A(e),A(t))}}}function ro(s){let e;function t(l,o){return l[4]?ji:Fi}let r=t(s),n=r(s);return{c(){n.c(),e=st()},m(l,o){n.m(l,o),E(l,e,o)},p(l,[o]){r===(r=t(l))&&n?n.p(l,o):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:ne,o:ne,d(l){l&&A(e),n.d(l)}}}function Ls(s){return s.avatar?s.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName||s.handle)}&background=6366f1&color=fff&size=64`}function no(s,e,t){let{profile:r}=e,{isSelected:n=!1}=e,{onSelect:l=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:u=null}=e,{clickable:d=!1}=e,{onAddToList:c=()=>{}}=e,{isAddingToList:m=!1}=e,{isCheckingMembership:p=!1}=e;function b(){l(r)}function g(v){v.preventDefault(),v.stopPropagation(),c(r)}function _(v){d&&!o||d&&o&&(v.target.type==="checkbox"||v.target.closest('input[type="checkbox"]'))&&(v.preventDefault(),v.stopPropagation())}return s.$$set=v=>{"profile"in v&&t(0,r=v.profile),"isSelected"in v&&t(1,n=v.isSelected),"onSelect"in v&&t(10,l=v.onSelect),"showCheckbox"in v&&t(2,o=v.showCheckbox),"statusTag"in v&&t(3,u=v.statusTag),"clickable"in v&&t(4,d=v.clickable),"onAddToList"in v&&t(11,c=v.onAddToList),"isAddingToList"in v&&t(5,m=v.isAddingToList),"isCheckingMembership"in v&&t(6,p=v.isCheckingMembership)},[r,n,o,u,d,m,p,b,g,_,l,c]}class lo extends De{constructor(e){super(),Oe(this,e,no,ro,Ae,{profile:0,isSelected:1,onSelect:10,showCheckbox:2,statusTag:3,clickable:4,onAddToList:11,isAddingToList:5,isCheckingMembership:6})}}var Gs={};(function s(e,t,r,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!e.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),h=y.getContext("2d");h.fillRect(0,0,1,1);var z=y.transferToImageBitmap();try{h.createPattern(z,"no-repeat")}catch{return!1}return!0}();function d(){}function c(y){var h=t.exports.Promise,z=h!==void 0?h:e.Promise;return typeof z=="function"?new z(y):(y(d,d),null)}var m=function(y,h){return{transform:function(z){if(y)return z;if(h.has(z))return h.get(z);var S=new OffscreenCanvas(z.width,z.height),F=S.getContext("2d");return F.drawImage(z,0,0),h.set(z,S),S},clear:function(){h.clear()}}}(u,new Map),p=function(){var y=Math.floor(16.666666666666668),h,z,S={},F=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(V){var te=Math.random();return S[te]=requestAnimationFrame(function Y($){F===$||F+y-1<$?(F=$,delete S[te],V()):S[te]=requestAnimationFrame(Y)}),te},z=function(V){S[V]&&cancelAnimationFrame(S[V])}):(h=function(V){return setTimeout(V,y)},z=function(V){return clearTimeout(V)}),{frame:h,cancel:z}}(),b=function(){var y,h,z={};function S(F){function V(te,Y){F.postMessage({options:te||{},callback:Y})}F.init=function(Y){var $=Y.transferControlToOffscreen();F.postMessage({canvas:$},[$])},F.fire=function(Y,$,H){if(h)return V(Y,null),h;var G=Math.random().toString(36).slice(2);return h=c(function(ae){function le(Q){Q.data.callback===G&&(delete z[G],F.removeEventListener("message",le),h=null,m.clear(),H(),ae())}F.addEventListener("message",le),V(Y,G),z[G]=le.bind(null,{data:{callback:G}})}),h},F.reset=function(){F.postMessage({reset:!0});for(var Y in z)z[Y](),delete z[Y]}}return function(){if(y)return y;if(!r&&l){var F=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([F])))}catch(V){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",V),null}S(y)}return y}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(y,h){return h?h(y):y}function v(y){return y!=null}function x(y,h,z){return _(y&&v(y[h])?y[h]:g[h],z)}function T(y){return y<0?0:Math.floor(y)}function C(y,h){return Math.floor(Math.random()*(h-y))+y}function R(y){return parseInt(y,16)}function D(y){return y.map(K)}function K(y){var h=String(y).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:R(h.substring(0,2)),g:R(h.substring(2,4)),b:R(h.substring(4,6))}}function O(y){var h=x(y,"origin",Object);return h.x=x(h,"x",Number),h.y=x(h,"y",Number),h}function B(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function M(y){var h=y.getBoundingClientRect();y.width=h.width,y.height=h.height}function U(y){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=y,h}function k(y,h,z,S,F,V,te,Y,$){y.save(),y.translate(h,z),y.rotate(V),y.scale(S,F),y.arc(0,0,1,te,Y,$),y.restore()}function I(y){var h=y.angle*(Math.PI/180),z=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-h+(.5*z-Math.random()*z),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function N(y,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var z=h.tick++/h.totalTicks,S=h.x+h.random*h.tiltCos,F=h.y+h.random*h.tiltSin,V=h.wobbleX+h.random*h.tiltCos,te=h.wobbleY+h.random*h.tiltSin;if(y.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-z)+")",y.beginPath(),o&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))y.fill(Z(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(V-S)*.1,Math.abs(te-F)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var Y=Math.PI/10*h.wobble,$=Math.abs(V-S)*.1,H=Math.abs(te-F)*.1,G=h.shape.bitmap.width*h.scalar,ae=h.shape.bitmap.height*h.scalar,le=new DOMMatrix([Math.cos(Y)*$,Math.sin(Y)*$,-Math.sin(Y)*H,Math.cos(Y)*H,h.x,h.y]);le.multiplySelf(new DOMMatrix(h.shape.matrix));var Q=y.createPattern(m.transform(h.shape.bitmap),"no-repeat");Q.setTransform(le),y.globalAlpha=1-z,y.fillStyle=Q,y.fillRect(h.x-G/2,h.y-ae/2,G,ae),y.globalAlpha=1}else if(h.shape==="circle")y.ellipse?y.ellipse(h.x,h.y,Math.abs(V-S)*h.ovalScalar,Math.abs(te-F)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):k(y,h.x,h.y,Math.abs(V-S)*h.ovalScalar,Math.abs(te-F)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var J=Math.PI/2*3,ue=4*h.scalar,ve=8*h.scalar,ye=h.x,_e=h.y,Ne=5,Ee=Math.PI/Ne;Ne--;)ye=h.x+Math.cos(J)*ve,_e=h.y+Math.sin(J)*ve,y.lineTo(ye,_e),J+=Ee,ye=h.x+Math.cos(J)*ue,_e=h.y+Math.sin(J)*ue,y.lineTo(ye,_e),J+=Ee;else y.moveTo(Math.floor(h.x),Math.floor(h.y)),y.lineTo(Math.floor(h.wobbleX),Math.floor(F)),y.lineTo(Math.floor(V),Math.floor(te)),y.lineTo(Math.floor(S),Math.floor(h.wobbleY));return y.closePath(),y.fill(),h.tick<h.totalTicks}function ee(y,h,z,S,F){var V=h.slice(),te=y.getContext("2d"),Y,$,H=c(function(G){function ae(){Y=$=null,te.clearRect(0,0,S.width,S.height),m.clear(),F(),G()}function le(){r&&!(S.width===n.width&&S.height===n.height)&&(S.width=y.width=n.width,S.height=y.height=n.height),!S.width&&!S.height&&(z(y),S.width=y.width,S.height=y.height),te.clearRect(0,0,S.width,S.height),V=V.filter(function(Q){return N(te,Q)}),V.length?Y=p.frame(le):ae()}Y=p.frame(le),$=ae});return{addFettis:function(G){return V=V.concat(G),H},canvas:y,promise:H,reset:function(){Y&&p.cancel(Y),$&&$()}}}function P(y,h){var z=!y,S=!!x(h||{},"resize"),F=!1,V=x(h,"disableForReducedMotion",Boolean),te=l&&!!x(h||{},"useWorker"),Y=te?b():null,$=z?B:M,H=y&&Y?!!y.__confetti_initialized:!1,G=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ae;function le(J,ue,ve){for(var ye=x(J,"particleCount",T),_e=x(J,"angle",Number),Ne=x(J,"spread",Number),Ee=x(J,"startVelocity",Number),pt=x(J,"decay",Number),Vt=x(J,"gravity",Number),ht=x(J,"drift",Number),rt=x(J,"colors",D),Kt=x(J,"ticks",Number),Nt=x(J,"shapes"),Ye=x(J,"scalar"),$e=!!x(J,"flat"),Ge=O(J),nt=ye,gt=[],bt=y.width*Ge.x,yt=y.height*Ge.y;nt--;)gt.push(I({x:bt,y:yt,angle:_e,spread:Ne,startVelocity:Ee,color:rt[nt%rt.length],shape:Nt[C(0,Nt.length)],ticks:Kt,decay:pt,gravity:Vt,drift:ht,scalar:Ye,flat:$e}));return ae?ae.addFettis(gt):(ae=ee(y,gt,$,ue,ve),ae.promise)}function Q(J){var ue=V||x(J,"disableForReducedMotion",Boolean),ve=x(J,"zIndex",Number);if(ue&&G)return c(function(Ee){Ee()});z&&ae?y=ae.canvas:z&&!y&&(y=U(ve),document.body.appendChild(y)),S&&!H&&$(y);var ye={width:y.width,height:y.height};Y&&!H&&Y.init(y),H=!0,Y&&(y.__confetti_initialized=!0);function _e(){if(Y){var Ee={getBoundingClientRect:function(){if(!z)return y.getBoundingClientRect()}};$(Ee),Y.postMessage({resize:{width:Ee.width,height:Ee.height}});return}ye.width=ye.height=null}function Ne(){ae=null,S&&(F=!1,e.removeEventListener("resize",_e)),z&&y&&(document.body.contains(y)&&document.body.removeChild(y),y=null,H=!1)}return S&&!F&&(F=!0,e.addEventListener("resize",_e,!1)),Y?Y.fire(J,ye,Ne):le(J,ye,Ne)}return Q.reset=function(){Y&&Y.reset(),ae&&ae.reset()},Q}var W;function j(){return W||(W=P(null,{useWorker:!0,resize:!0})),W}function Z(y,h,z,S,F,V,te){var Y=new Path2D(y),$=new Path2D;$.addPath(Y,new DOMMatrix(h));var H=new Path2D;return H.addPath($,new DOMMatrix([Math.cos(te)*F,Math.sin(te)*F,-Math.sin(te)*V,Math.cos(te)*V,z,S])),H}function oe(y){if(!o)throw new Error("path confetti are not supported in this browser");var h,z;typeof y=="string"?h=y:(h=y.path,z=y.matrix);var S=new Path2D(h),F=document.createElement("canvas"),V=F.getContext("2d");if(!z){for(var te=1e3,Y=te,$=te,H=0,G=0,ae,le,Q=0;Q<te;Q+=2)for(var J=0;J<te;J+=2)V.isPointInPath(S,Q,J,"nonzero")&&(Y=Math.min(Y,Q),$=Math.min($,J),H=Math.max(H,Q),G=Math.max(G,J));ae=H-Y,le=G-$;var ue=10,ve=Math.min(ue/ae,ue/le);z=[ve,0,0,ve,-Math.round(ae/2+Y)*ve,-Math.round(le/2+$)*ve]}return{type:"path",path:h,matrix:z}}function se(y){var h,z=1,S="#000000",F='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?h=y:(h=y.text,z="scalar"in y?y.scalar:z,F="fontFamily"in y?y.fontFamily:F,S="color"in y?y.color:S);var V=10*z,te=""+V+"px "+F,Y=new OffscreenCanvas(V,V),$=Y.getContext("2d");$.font=te;var H=$.measureText(h),G=Math.ceil(H.actualBoundingBoxRight+H.actualBoundingBoxLeft),ae=Math.ceil(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent),le=2,Q=H.actualBoundingBoxLeft+le,J=H.actualBoundingBoxAscent+le;G+=le+le,ae+=le+le,Y=new OffscreenCanvas(G,ae),$=Y.getContext("2d"),$.font=te,$.fillStyle=S,$.fillText(h,Q,J);var ue=1/z;return{type:"bitmap",bitmap:Y.transferToImageBitmap(),matrix:[ue,0,0,ue,-G*ue/2,-ae*ue/2]}}t.exports=function(){return j().apply(this,arguments)},t.exports.reset=function(){j().reset()},t.exports.create=P,t.exports.shapeFromPath=oe,t.exports.shapeFromText=se})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Gs,!1);const Us=Gs.exports;Gs.exports.create;function Jr(s,e,t){const r=s.slice();return r[23]=e[t].profile,r[24]=e[t].status,r}function io(s){let e;return{c(){e=L("ðŸ” Search")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function oo(s){let e,t;return{c(){e=f("span"),t=L(`
						Checking membership...`),a(e,"class","loading-spinner svelte-165a6uh")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(A(e),A(t))}}}function ao(s){let e,t;return{c(){e=f("span"),t=L(`
						Searching...`),a(e,"class","loading-spinner svelte-165a6uh")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(A(e),A(t))}}}function qr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=L(s[5]),a(t,"class","text-red-700"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,l){E(n,e,l),i(e,t),i(t,r)},p(n,l){l&32&&q(r,n[5])},d(n){n&&A(e)}}}function co(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">ðŸ”</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',a(e,"class","text-center py-8")},m(t,r){E(t,e,r)},p:ne,i:ne,o:ne,d(t){t&&A(e)}}}function uo(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">ðŸ”</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',a(e,"class","text-center py-8")},m(t,r){E(t,e,r)},p:ne,i:ne,o:ne,d(t){t&&A(e)}}}function fo(s){let e,t,r,n=ge(s[8]),l=[];for(let d=0;d<n.length;d+=1)l[d]=Vr(Jr(s,n,d));const o=d=>de(l[d],1,1,()=>{l[d]=null});let u=s[6]&&Yr(s);return{c(){e=f("div");for(let d=0;d<l.length;d+=1)l[d].c();t=w(),u&&u.c(),a(e,"class","space-y-4")},m(d,c){E(d,e,c);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);i(e,t),u&&u.m(e,null),r=!0},p(d,c){if(c&6530){n=ge(d[8]);let m;for(m=0;m<n.length;m+=1){const p=Jr(d,n,m);l[m]?(l[m].p(p,c),ce(l[m],1)):(l[m]=Vr(p),l[m].c(),ce(l[m],1),l[m].m(e,t))}for(ft(),m=n.length;m<l.length;m+=1)o(m);mt()}d[6]?u?u.p(d,c):(u=Yr(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(d){if(!r){for(let c=0;c<n.length;c+=1)ce(l[c]);r=!0}},o(d){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)de(l[c]);r=!1},d(d){d&&A(e),Ve(l,d),u&&u.d()}}}function mo(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="loading-spinner mx-auto mb-4 svelte-165a6uh"></div> <p class="text-slate-600">Checking membership status...</p>',a(e,"class","text-center py-8")},m(t,r){E(t,e,r)},p:ne,i:ne,o:ne,d(t){t&&A(e)}}}function Vr(s){let e,t;return e=new lo({props:{profile:s[23],isSelected:s[1].has(s[23].did),onSelect:s[11],statusTag:s[24],clickable:!0,onAddToList:s[12],isAddingToList:s[7].has(s[23].did)}}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p(r,n){const l={};n&256&&(l.profile=r[23]),n&258&&(l.isSelected=r[1].has(r[23].did)),n&256&&(l.statusTag=r[24]),n&384&&(l.isAddingToList=r[7].has(r[23].did)),e.$set(l)},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Yr(s){let e,t,r,n;function l(d,c){return d[3]?ho:po}let o=l(s),u=o(s);return{c(){e=f("div"),t=f("button"),u.c(),t.disabled=s[3],a(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(e,"class","text-center pt-4 border-t border-gray-200")},m(d,c){E(d,e,c),i(e,t),u.m(t,null),r||(n=ie(t,"click",s[10]),r=!0)},p(d,c){o!==(o=l(d))&&(u.d(1),u=o(d),u&&(u.c(),u.m(t,null))),c&8&&(t.disabled=d[3])},d(d){d&&A(e),u.d(),r=!1,n()}}}function po(s){let e;return{c(){e=L("Load More Results")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function ho(s){let e,t;return{c(){e=f("span"),t=L(`
								Loading...`),a(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(A(e),A(t))}}}function go(s){let e,t,r,n,l,o,u,d,c,m,p,b,g,_,v,x,T,C;function R(k,I){return k[3]?ao:k[4]?oo:io}let D=R(s),K=D(s),O=s[5]&&qr(s);const B=[mo,fo,uo,co],M=[];function U(k,I){return k[4]?0:k[0].length>0?1:k[2]&&!k[3]?2:k[2]?-1:3}return~(_=U(s))&&(v=M[_]=B[_](s)),{c(){e=f("div"),t=f("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',r=w(),n=f("div"),l=f("form"),o=f("div"),u=f("label"),u.textContent="Search for:",d=w(),c=f("input"),m=w(),p=f("button"),K.c(),b=w(),O&&O.c(),g=w(),v&&v.c(),a(t,"class","p-6 border-b border-gray-200"),a(u,"for","search-input"),a(u,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),a(c,"id","search-input"),a(c,"type","text"),a(c,"placeholder","e.g., belge, artist, developer..."),a(c,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),c.required=!0,a(p,"type","submit"),p.disabled=s[3],a(p,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),a(o,"class","flex gap-4 items-center flex-wrap"),a(l,"class","mb-6"),a(n,"id","profile-search-container"),a(n,"class","p-6"),a(e,"class","bg-white rounded-lg shadow-sm border border-gray-200"),a(e,"id","profile-search")},m(k,I){E(k,e,I),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(o,u),i(o,d),i(o,c),be(c,s[2]),i(o,m),i(o,p),K.m(p,null),i(n,b),O&&O.m(n,null),i(n,g),~_&&M[_].m(n,null),x=!0,T||(C=[ie(c,"input",s[16]),ie(l,"submit",js(s[9]))],T=!0)},p(k,[I]){I&4&&c.value!==k[2]&&be(c,k[2]),D!==(D=R(k))&&(K.d(1),K=D(k),K&&(K.c(),K.m(p,null))),(!x||I&8)&&(p.disabled=k[3]),k[5]?O?O.p(k,I):(O=qr(k),O.c(),O.m(n,g)):O&&(O.d(1),O=null);let N=_;_=U(k),_===N?~_&&M[_].p(k,I):(v&&(ft(),de(M[N],1,1,()=>{M[N]=null}),mt()),~_?(v=M[_],v?v.p(k,I):(v=M[_]=B[_](k),v.c()),ce(v,1),v.m(n,null)):v=null)},i(k){x||(ce(v),x=!0)},o(k){de(v),x=!1},d(k){k&&A(e),K.d(),O&&O.d(),~_&&M[_].d(),T=!1,Me(C)}}}function bo(s,e,t){let r,n,l;Ie(s,Ue,M=>t(18,n=M)),Ie(s,pe,M=>t(15,l=M));let o="",u=[],d=!1,c=!1,m="",p=new Set,b=null,g=!1,_=new Set;async function v(){if(!(!o.trim()||!n.session)){t(3,d=!0),t(4,c=!1),t(5,m=""),t(0,u=[]),p.clear(),b=null,t(6,g=!1);try{const M=await Le.searchProfiles(n.session,o,n.authType);t(4,c=!0);const U=await O(M.actors||[]);t(0,u=U),b=M.cursor,t(6,g=!!M.cursor)}catch(M){t(5,m=M.message||"Failed to search profiles")}finally{t(3,d=!1),t(4,c=!1)}}}async function x(){if(!(!g||d||!n.session)){t(3,d=!0),t(4,c=!1),t(5,m="");try{const M=await Le.searchProfiles(n.session,o,n.authType,25,b);t(4,c=!0);const U=await O(M.actors||[]);t(0,u=[...u,...U]),b=M.cursor,t(6,g=!!M.cursor)}catch(M){t(5,m=M.message||"Failed to load more profiles")}finally{t(3,d=!1),t(4,c=!1)}}}function T(M){p.has(M.did)?p.delete(M.did):p.add(M.did),t(1,p)}let C=null,R=!0;async function D(M){if(!(!n.session||!l.selectedList||_.has(M.did))){_.add(M.did),t(7,_);try{console.log("Adding profile to list with authType:",n.authType),console.log("Current session:",n.session),await Le.addToList(n.session,M.did,l.selectedList.uri,n.authType),await pe.fetchAndAddProfile(n.session,M.did),K()}catch(U){console.error("Failed to add profile to list:",U)}finally{_.delete(M.did),t(7,_)}}}function K(){Us({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Us({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Us({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}async function O(M){if(!M.length||!l.selectedList)return M;const U=await pe.getAllListMemberDids(n.session,n.authType);return M.map(I=>({...I,_isInList:U.has(I.did)}))}function B(){o=this.value,t(2,o),t(15,l),t(14,R),t(13,C),t(1,p)}return s.$$.update=()=>{s.$$.dirty&57346&&l.selectedList&&(!R&&C&&C!==l.selectedList.uri&&(t(2,o=""),t(0,u=[]),p.clear(),b=null,t(6,g=!1),t(5,m="")),t(13,C=l.selectedList.uri),t(14,R=!1)),s.$$.dirty&32769&&t(8,r=u.map(M=>({profile:M,status:M._isInList||l.listMembers.includes(M.did)?"Already in list":"New candidate"})))},[u,p,o,d,c,m,g,_,r,v,x,T,D,C,R,l,B]}class yo extends De{constructor(e){super(),Oe(this,e,bo,go,Ae,{})}}function $r(s,e,t){const r=s.slice();return r[15]=e[t],r}function Gr(s,e,t){const r=s.slice();return r[18]=e[t],r}function Zr(s){let e,t=s[2].selectedList.description+"",r;return{c(){e=f("p"),r=L(t),a(e,"class","text-slate-600 mt-1")},m(n,l){E(n,e,l),i(e,r)},p(n,l){l&4&&t!==(t=n[2].selectedList.description+"")&&q(r,t)},d(n){n&&A(e)}}}function Xr(s){let e,t,r,n,l,o,u,d,c,m=s[4].length.toLocaleString()+"",p,b,g=s[0].totalMembers.toLocaleString()+"",_,v,x,T,C,R,D;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("div"),o=f("div"),o.textContent="Calculating comprehensive statistics...",u=w(),d=f("div"),c=L("Processing "),p=L(m),b=L(" of "),_=L(g),v=L(`
						members (`),x=L(s[3]),T=L("%)"),C=w(),R=f("div"),D=f("div"),a(r,"class","loading-spinner svelte-1myfg8v"),a(o,"class","text-blue-700 font-medium"),a(d,"class","text-blue-600 text-sm"),a(t,"class","flex items-center justify-center space-x-3"),a(D,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),fe(D,"width",s[3]+"%"),a(R,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(K,O){E(K,e,O),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),i(l,d),i(d,c),i(d,p),i(d,b),i(d,_),i(d,v),i(d,x),i(d,T),i(e,C),i(e,R),i(R,D)},p(K,O){O&16&&m!==(m=K[4].length.toLocaleString()+"")&&q(p,m),O&1&&g!==(g=K[0].totalMembers.toLocaleString()+"")&&q(_,g),O&8&&q(x,K[3]),O&8&&fe(D,"width",K[3]+"%")},d(K){K&&A(e)}}}function vo(s){let e,t,r,n,l,o=s[0].avgBioLength+"",u,d,c,m,p,b,g,_=s[0].accountsWithBios.toLocaleString()+"",v,x,T=s[0].totalMembers.toLocaleString()+"",C,R,D,K,O,B,M=s[0].accountsWithDisplayNames.toLocaleString()+"",U,k,I=s[0].totalMembers.toLocaleString()+"",N,ee,P=s[0].mostCommonWords.length>0&&Qr(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average bio length:",n=w(),l=f("span"),u=L(o),d=L(" characters"),c=w(),m=f("div"),p=f("span"),p.textContent="Bios with content:",b=w(),g=f("span"),v=L(_),x=L(" / "),C=L(T),R=w(),D=f("div"),K=f("span"),K.textContent="Display names:",O=w(),B=f("span"),U=L(M),k=L(" / "),N=L(I),ee=w(),P&&P.c(),a(r,"class","text-gray-600"),a(l,"class","font-medium"),a(t,"class","flex justify-between text-sm"),a(p,"class","text-gray-600"),a(g,"class","font-medium"),a(m,"class","flex justify-between text-sm"),a(K,"class","text-gray-600"),a(B,"class","font-medium"),a(D,"class","flex justify-between text-sm"),a(e,"class","space-y-2")},m(W,j){E(W,e,j),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,c),i(e,m),i(m,p),i(m,b),i(m,g),i(g,v),i(g,x),i(g,C),i(e,R),i(e,D),i(D,K),i(D,O),i(D,B),i(B,U),i(B,k),i(B,N),i(e,ee),P&&P.m(e,null)},p(W,j){j&1&&o!==(o=W[0].avgBioLength+"")&&q(u,o),j&1&&_!==(_=W[0].accountsWithBios.toLocaleString()+"")&&q(v,_),j&1&&T!==(T=W[0].totalMembers.toLocaleString()+"")&&q(C,T),j&1&&M!==(M=W[0].accountsWithDisplayNames.toLocaleString()+"")&&q(U,M),j&1&&I!==(I=W[0].totalMembers.toLocaleString()+"")&&q(N,I),W[0].mostCommonWords.length>0?P?P.p(W,j):(P=Qr(W),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(W){W&&A(e),P&&P.d()}}}function _o(s){let e;return{c(){e=f("div"),e.textContent="Calculating comprehensive bio statistics...",a(e,"class","text-gray-500 text-sm")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function Qr(s){let e,t,r,n,l=ge(s[0].mostCommonWords),o=[];for(let u=0;u<l.length;u+=1)o[u]=en(Gr(s,l,u));return{c(){e=f("div"),t=f("div"),t.textContent="Most common words:",r=w(),n=f("div");for(let u=0;u<o.length;u+=1)o[u].c();a(t,"class","text-xs text-gray-500 mb-2"),a(n,"class","flex flex-wrap gap-1"),a(e,"class","mt-3")},m(u,d){E(u,e,d),i(e,t),i(e,r),i(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(u,d){if(d&1){l=ge(u[0].mostCommonWords);let c;for(c=0;c<l.length;c+=1){const m=Gr(u,l,c);o[c]?o[c].p(m,d):(o[c]=en(m),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},d(u){u&&A(e),Ve(o,u)}}}function en(s){let e,t=s[18].word+"",r,n,l=s[18].count+"",o,u;return{c(){e=f("span"),r=L(t),n=L(" ("),o=L(l),u=L(`)
									`),a(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(d,c){E(d,e,c),i(e,r),i(e,n),i(e,o),i(e,u)},p(d,c){c&1&&t!==(t=d[18].word+"")&&q(r,t),c&1&&l!==(l=d[18].count+"")&&q(o,l)},d(d){d&&A(e)}}}function wo(s){let e,t,r,n,l,o=s[0].avgHandleLength+"",u,d,c,m=s[0].topDomains.length>0&&tn(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average handle length:",n=w(),l=f("span"),u=L(o),d=L(" characters"),c=w(),m&&m.c(),a(r,"class","text-gray-600"),a(l,"class","font-medium"),a(t,"class","flex justify-between text-sm"),a(e,"class","space-y-2")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,c),m&&m.m(e,null)},p(p,b){b&1&&o!==(o=p[0].avgHandleLength+"")&&q(u,o),p[0].topDomains.length>0?m?m.p(p,b):(m=tn(p),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(p){p&&A(e),m&&m.d()}}}function So(s){let e;return{c(){e=f("div"),e.textContent="Calculating handle statistics...",a(e,"class","text-gray-500 text-sm")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function tn(s){let e,t,r,n,l=ge(s[0].topDomains),o=[];for(let u=0;u<l.length;u+=1)o[u]=sn($r(s,l,u));return{c(){e=f("div"),t=f("div"),t.textContent="Top domains:",r=w(),n=f("div");for(let u=0;u<o.length;u+=1)o[u].c();a(t,"class","text-xs text-gray-500 mb-2"),a(n,"class","space-y-1"),a(e,"class","mt-3")},m(u,d){E(u,e,d),i(e,t),i(e,r),i(e,n);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(n,null)},p(u,d){if(d&1){l=ge(u[0].topDomains);let c;for(c=0;c<l.length;c+=1){const m=$r(u,l,c);o[c]?o[c].p(m,d):(o[c]=sn(m),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},d(u){u&&A(e),Ve(o,u)}}}function sn(s){let e,t,r,n=s[15].domain+"",l,o,u,d=s[15].count+"",c,m,p;return{c(){e=f("div"),t=f("span"),r=L("."),l=L(n),o=w(),u=f("span"),c=L(d),m=L(" users"),p=w(),a(t,"class","font-medium"),a(u,"class","text-gray-600"),a(e,"class","flex justify-between text-xs")},m(b,g){E(b,e,g),i(e,t),i(t,r),i(t,l),i(e,o),i(e,u),i(u,c),i(u,m),i(e,p)},p(b,g){g&1&&n!==(n=b[15].domain+"")&&q(l,n),g&1&&d!==(d=b[15].count+"")&&q(c,d)},d(b){b&&A(e)}}}function ko(s){let e;return{c(){e=L("Unknown")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function Lo(s){let e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=L(e)},m(r,n){E(r,t,n)},p(r,n){n&4&&e!==(e=new Date(r[2].selectedList.createdAt).toLocaleDateString()+"")&&q(t,e)},d(r){r&&A(t)}}}function Co(s){var vr,_r,wr,Sr,kr;let e,t,r,n,l=(((vr=s[2].selectedList)==null?void 0:vr.name)||"List")+"",o,u,d,c,m,p=s[0].totalMembers.toLocaleString()+"",b,g,_,v,x,T,C,R,D,K,O,B,M=s[1]?"...":Mt(s[0].accountsWithBios,s[0].totalMembers)+"%",U,k,I,N,ee,P=s[1]?"Calculating...":`${s[0].accountsWithBios.toLocaleString()} have bios`,W,j,Z,oe,se,y,h,z,S=s[1]?"...":Mt(s[0].verifiedAccounts,s[0].totalMembers)+"%",F,V,te,Y,$,H=s[1]?"Calculating...":`${s[0].verifiedAccounts.toLocaleString()} verified accounts`,G,ae,le,Q,J,ue,ve,ye,_e=s[1]?"...":Mt(s[0].accountsWithAvatars,s[0].totalMembers)+"%",Ne,Ee,pt,Vt,ht,rt=s[1]?"Calculating...":`${s[0].accountsWithAvatars.toLocaleString()} have avatars`,Kt,Nt,Ye,$e,Ge,nt,gt,bt,yt=(s[1]?"...":(_r=s[2].selectedList)!=null&&_r.createdAt?s[0].growthRate||0:"N/A")+"",Ms,Zs,Yt,Xs,$t,Gt=s[1]?"Calculating...":(wr=s[2].selectedList)!=null&&wr.createdAt?s[0].growthRate>0?`${s[0].growthRate} members/day`:"No growth data":"Creation date unavailable",As,Qs,Ze,lt,Zt,er,tr,it,Xt,sr,rr,vt,Qt,nr,We,_t,es,lr,ts,ss=((Sr=s[2].selectedList)==null?void 0:Sr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",Es,ir,wt,rs,or,Bt,ar,St,ns,cr,Ut,ls=s[0].growthRate+"",Ps,ur,dr,kt,is,fr,os,as=s[1]?"Calculating...":`${s[0].recentAdditions} in last batch`,Ts,mr,cs,Lt,Wt,pr,ot,us=s[1]?"Calculating...":"Refresh Stats",Is,Rs,hr,we=((kr=s[2].selectedList)==null?void 0:kr.description)&&Zr(s),Se=s[1]&&Xr(s);function gr(X,me){return X[1]?_o:vo}let ds=gr(s),He=ds(s);function br(X,me){return X[1]?So:wo}let fs=br(s),ze=fs(s);function yr(X,me){var Ht;return(Ht=X[2].selectedList)!=null&&Ht.createdAt?Lo:ko}let ms=yr(s),Fe=ms(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("h2"),o=L(l),u=w(),we&&we.c(),d=w(),c=f("div"),m=f("div"),b=L(p),g=w(),_=f("div"),_.textContent="Total Members",v=w(),Se&&Se.c(),x=w(),T=f("div"),C=f("div"),R=f("div"),D=f("div"),K=f("div"),K.textContent="ðŸ“Š Engagement",O=w(),B=f("div"),U=L(M),k=w(),I=f("div"),I.textContent="ðŸ’¬",N=w(),ee=f("div"),W=L(P),j=w(),Z=f("div"),oe=f("div"),se=f("div"),y=f("div"),y.textContent="âœ… Verified",h=w(),z=f("div"),F=L(S),V=w(),te=f("div"),te.textContent="âœ“",Y=w(),$=f("div"),G=L(H),ae=w(),le=f("div"),Q=f("div"),J=f("div"),ue=f("div"),ue.textContent="ðŸ–¼ï¸ Complete",ve=w(),ye=f("div"),Ne=L(_e),Ee=w(),pt=f("div"),pt.textContent="ðŸ‘¤",Vt=w(),ht=f("div"),Kt=L(rt),Nt=w(),Ye=f("div"),$e=f("div"),Ge=f("div"),nt=f("div"),nt.textContent="ï¿½ï¿½ Growth Rate",gt=w(),bt=f("div"),Ms=L(yt),Zs=w(),Yt=f("div"),Yt.textContent="ðŸš€",Xs=w(),$t=f("div"),As=L(Gt),Qs=w(),Ze=f("div"),lt=f("div"),Zt=f("h3"),Zt.textContent="ðŸ“ Bio Analysis",er=w(),He.c(),tr=w(),it=f("div"),Xt=f("h3"),Xt.textContent="ðŸ”— Handle Analysis",sr=w(),ze.c(),rr=w(),vt=f("div"),Qt=f("h3"),Qt.textContent="ðŸ“‹ List Details",nr=w(),We=f("div"),_t=f("div"),es=f("span"),es.textContent="Type:",lr=w(),ts=f("span"),Es=L(ss),ir=w(),wt=f("div"),rs=f("span"),rs.textContent="Created:",or=w(),Bt=f("span"),Fe.c(),ar=w(),St=f("div"),ns=f("span"),ns.textContent="Growth rate:",cr=w(),Ut=f("span"),Ps=L(ls),ur=L(" members/day"),dr=w(),kt=f("div"),is=f("span"),is.textContent="Recent activity:",fr=w(),os=f("span"),Ts=L(as),mr=w(),cs=f("div"),Lt=f("div"),Wt=f("button"),Wt.textContent="View on Bluesky",pr=w(),ot=f("button"),Is=L(us),a(n,"class","text-xl font-bold text-slate-800"),a(m,"class","text-3xl font-bold text-blue-600"),a(_,"class","text-sm text-slate-500"),a(c,"class","text-right"),a(t,"class","flex items-center justify-between mb-6"),a(K,"class","text-blue-600 font-semibold text-sm"),a(B,"class","text-2xl font-bold text-blue-700"),a(I,"class","text-blue-400 text-3xl"),a(R,"class","flex items-center justify-between"),a(ee,"class","text-xs text-blue-600 mt-1"),a(C,"class","bg-blue-50 p-4 rounded-lg"),a(y,"class","text-green-600 font-semibold text-sm"),a(z,"class","text-2xl font-bold text-green-700"),a(te,"class","text-green-400 text-3xl"),a(oe,"class","flex items-center justify-between"),a($,"class","text-xs text-green-600 mt-1"),a(Z,"class","bg-green-50 p-4 rounded-lg"),a(ue,"class","text-purple-600 font-semibold text-sm"),a(ye,"class","text-2xl font-bold text-purple-700"),a(pt,"class","text-purple-400 text-3xl"),a(Q,"class","flex items-center justify-between"),a(ht,"class","text-xs text-purple-600 mt-1"),a(le,"class","bg-purple-50 p-4 rounded-lg"),a(nt,"class","text-orange-600 font-semibold text-sm"),a(bt,"class","text-2xl font-bold text-orange-700"),a(Yt,"class","text-orange-400 text-3xl"),a($e,"class","flex items-center justify-between"),a($t,"class","text-xs text-orange-600 mt-1"),a(Ye,"class","bg-orange-50 p-4 rounded-lg"),a(T,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),a(Zt,"class","text-sm font-semibold text-gray-700 mb-3"),a(lt,"class","bg-gray-50 p-4 rounded-lg"),a(Xt,"class","text-sm font-semibold text-gray-700 mb-3"),a(it,"class","bg-gray-50 p-4 rounded-lg"),a(Qt,"class","text-sm font-semibold text-gray-700 mb-3"),a(es,"class","text-gray-600"),a(ts,"class","font-medium"),a(_t,"class","flex justify-between text-sm"),a(rs,"class","text-gray-600"),a(Bt,"class","font-medium"),a(wt,"class","flex justify-between text-sm"),a(ns,"class","text-gray-600"),a(Ut,"class","font-medium"),a(St,"class","flex justify-between text-sm"),a(is,"class","text-gray-600"),a(os,"class","font-medium"),a(kt,"class","flex justify-between text-sm"),a(We,"class","space-y-2"),a(vt,"class","bg-gray-50 p-4 rounded-lg"),a(Ze,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),a(Wt,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),a(ot,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),ot.disabled=s[1],a(Lt,"class","flex flex-wrap gap-2"),a(cs,"class","mt-6 pt-4 border-t border-gray-200"),a(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),a(e,"id","list-statistics")},m(X,me){E(X,e,me),i(e,t),i(t,r),i(r,n),i(n,o),i(r,u),we&&we.m(r,null),i(t,d),i(t,c),i(c,m),i(m,b),i(c,g),i(c,_),i(e,v),Se&&Se.m(e,null),i(e,x),i(e,T),i(T,C),i(C,R),i(R,D),i(D,K),i(D,O),i(D,B),i(B,U),i(R,k),i(R,I),i(C,N),i(C,ee),i(ee,W),i(T,j),i(T,Z),i(Z,oe),i(oe,se),i(se,y),i(se,h),i(se,z),i(z,F),i(oe,V),i(oe,te),i(Z,Y),i(Z,$),i($,G),i(T,ae),i(T,le),i(le,Q),i(Q,J),i(J,ue),i(J,ve),i(J,ye),i(ye,Ne),i(Q,Ee),i(Q,pt),i(le,Vt),i(le,ht),i(ht,Kt),i(T,Nt),i(T,Ye),i(Ye,$e),i($e,Ge),i(Ge,nt),i(Ge,gt),i(Ge,bt),i(bt,Ms),i($e,Zs),i($e,Yt),i(Ye,Xs),i(Ye,$t),i($t,As),i(e,Qs),i(e,Ze),i(Ze,lt),i(lt,Zt),i(lt,er),He.m(lt,null),i(Ze,tr),i(Ze,it),i(it,Xt),i(it,sr),ze.m(it,null),i(Ze,rr),i(Ze,vt),i(vt,Qt),i(vt,nr),i(vt,We),i(We,_t),i(_t,es),i(_t,lr),i(_t,ts),i(ts,Es),i(We,ir),i(We,wt),i(wt,rs),i(wt,or),i(wt,Bt),Fe.m(Bt,null),i(We,ar),i(We,St),i(St,ns),i(St,cr),i(St,Ut),i(Ut,Ps),i(Ut,ur),i(We,dr),i(We,kt),i(kt,is),i(kt,fr),i(kt,os),i(os,Ts),i(e,mr),i(e,cs),i(cs,Lt),i(Lt,Wt),i(Lt,pr),i(Lt,ot),i(ot,Is),Rs||(hr=[ie(Wt,"click",s[8]),ie(ot,"click",s[6])],Rs=!0)},p(X,[me]){var Ht,Lr,Cr,xr,Mr;me&4&&l!==(l=(((Ht=X[2].selectedList)==null?void 0:Ht.name)||"List")+"")&&q(o,l),(Lr=X[2].selectedList)!=null&&Lr.description?we?we.p(X,me):(we=Zr(X),we.c(),we.m(r,null)):we&&(we.d(1),we=null),me&1&&p!==(p=X[0].totalMembers.toLocaleString()+"")&&q(b,p),X[1]?Se?Se.p(X,me):(Se=Xr(X),Se.c(),Se.m(e,x)):Se&&(Se.d(1),Se=null),me&3&&M!==(M=X[1]?"...":Mt(X[0].accountsWithBios,X[0].totalMembers)+"%")&&q(U,M),me&3&&P!==(P=X[1]?"Calculating...":`${X[0].accountsWithBios.toLocaleString()} have bios`)&&q(W,P),me&3&&S!==(S=X[1]?"...":Mt(X[0].verifiedAccounts,X[0].totalMembers)+"%")&&q(F,S),me&3&&H!==(H=X[1]?"Calculating...":`${X[0].verifiedAccounts.toLocaleString()} verified accounts`)&&q(G,H),me&3&&_e!==(_e=X[1]?"...":Mt(X[0].accountsWithAvatars,X[0].totalMembers)+"%")&&q(Ne,_e),me&3&&rt!==(rt=X[1]?"Calculating...":`${X[0].accountsWithAvatars.toLocaleString()} have avatars`)&&q(Kt,rt),me&7&&yt!==(yt=(X[1]?"...":(Cr=X[2].selectedList)!=null&&Cr.createdAt?X[0].growthRate||0:"N/A")+"")&&q(Ms,yt),me&7&&Gt!==(Gt=X[1]?"Calculating...":(xr=X[2].selectedList)!=null&&xr.createdAt?X[0].growthRate>0?`${X[0].growthRate} members/day`:"No growth data":"Creation date unavailable")&&q(As,Gt),ds===(ds=gr(X))&&He?He.p(X,me):(He.d(1),He=ds(X),He&&(He.c(),He.m(lt,null))),fs===(fs=br(X))&&ze?ze.p(X,me):(ze.d(1),ze=fs(X),ze&&(ze.c(),ze.m(it,null))),me&4&&ss!==(ss=((Mr=X[2].selectedList)==null?void 0:Mr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&q(Es,ss),ms===(ms=yr(X))&&Fe?Fe.p(X,me):(Fe.d(1),Fe=ms(X),Fe&&(Fe.c(),Fe.m(Bt,null))),me&1&&ls!==(ls=X[0].growthRate+"")&&q(Ps,ls),me&3&&as!==(as=X[1]?"Calculating...":`${X[0].recentAdditions} in last batch`)&&q(Ts,as),me&2&&us!==(us=X[1]?"Calculating...":"Refresh Stats")&&q(Is,us),me&2&&(ot.disabled=X[1])},i:ne,o:ne,d(X){X&&A(e),we&&we.d(),Se&&Se.d(),He.d(),ze.d(),Fe.d(),Rs=!1,Me(hr)}}}function Mt(s,e){return e===0?0:Math.round(s/e*100)}function xo(s,e,t){let r,n;Ie(s,pe,C=>t(2,r=C)),Ie(s,Ue,C=>t(5,n=C));let l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,u=0,d=[],c=null,m=!1,p=null;function b(){t(0,l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,u=0),t(4,d=[])}function g(){var O,B;r.listMemberProfiles;const C=((O=r.selectedList)==null?void 0:O.listItemCount)||0,R=(B=r.selectedList)==null?void 0:B.createdAt,D=R?Math.floor((Date.now()-new Date(R).getTime())/(1e3*60*60*24)):0,K=D>0?Math.round(C/D):0;t(0,l={...l,totalMembers:C,listAge:D,growthRate:K})}async function _(){if(!n.session||!r.selectedList||o)return;const C=Date.now();c=C,t(1,o=!0),t(3,u=0),t(4,d=[]);try{const R=r.selectedList.listItemCount||0;if(R===0){v([]),m=!0;return}let D=null,K=0;const O=100;do{K++,t(3,u=Math.round(d.length/R*100));const B=await Le.getListMembers(n.session,r.selectedList.uri,n.authType,O,D);if(c!==C)return;t(4,d=[...d,...B.profiles]),D=B.cursor,t(3,u=Math.round(d.length/R*100))}while(D&&d.length<R);if(c!==C)return;v(d),m=!0}catch(R){console.error("Error loading all members for statistics:",R),g(),m=!0}finally{c===C&&(t(1,o=!1),t(3,u=0))}}function v(C){var z;const R=C.length,D=C.filter(S=>S.verified).length,K=C.filter(S=>S.avatar).length,O=C.filter(S=>S.description&&S.description.trim().length>0).length,B=C.filter(S=>S.displayName&&S.displayName.trim().length>0).length,M=C.map(S=>S.description||"").filter(S=>S.trim().length>0),U=M.length>0?Math.round(M.reduce((S,F)=>S+F.length,0)/M.length):0,k=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],I=M.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(S=>S.length>2&&!k.includes(S)),N={};I.forEach(S=>{N[S]=(N[S]||0)+1});const ee=Object.entries(N).sort(([,S],[,F])=>F-S).slice(0,5).map(([S,F])=>({word:S,count:F})),P=C.map(S=>S.handle||"").filter(S=>S.length>0),W=P.length>0?Math.round(P.reduce((S,F)=>S+F.length,0)/P.length):0,j=P.map(S=>{const F=S.split(".");return F.length>1?F[F.length-1]:null}).filter(S=>S&&S.length>0),Z={};j.forEach(S=>{Z[S]=(Z[S]||0)+1});const oe=Object.entries(Z).sort(([,S],[,F])=>F-S).slice(0,3).map(([S,F])=>({domain:S,count:F})),se=(z=r.selectedList)==null?void 0:z.createdAt,y=se?Math.floor((Date.now()-new Date(se).getTime())/(1e3*60*60*24)):0,h=y>0?Math.round(R/y):0;Math.min(25,C.length),t(0,l={totalMembers:R,recentAdditions:h,verifiedAccounts:D,accountsWithAvatars:K,accountsWithBios:O,avgBioLength:U,mostCommonWords:ee,listAge:y,accountsWithDisplayNames:B,avgHandleLength:W,topDomains:oe,growthRate:h})}function x(){o||(m=!1,_())}const T=()=>{var R,D,K;const C=(R=r.selectedList)==null?void 0:R.uri;if(C){const O=C.split("/"),B=O[O.length-1],M=`https://bsky.app/profile/${(D=n.session)==null?void 0:D.handle}/lists/${B}`;window.open(M,"_blank")}else window.open(`https://bsky.app/profile/${(K=n.session)==null?void 0:K.handle}/lists`,"_blank")};return s.$$.update=()=>{var C,R;s.$$.dirty&4&&r.selectedList&&g(),s.$$.dirty&7&&((C=r.selectedList)==null?void 0:C.listItemCount)!==l.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(R=r.selectedList)==null?void 0:R.listItemCount),console.log("Current stats.totalMembers:",l.totalMembers),g()),s.$$.dirty&132&&!r.selectedList&&p!==null&&(t(7,p=null),m=!1,b()),s.$$.dirty&134&&r.selectedList&&r.selectedList.uri!==p&&!o&&(t(7,p=r.selectedList.uri),m=!1,b(),_())},[l,o,r,u,d,n,x,p,T]}class Mo extends De{constructor(e){super(),Oe(this,e,xo,Co,Ae,{})}}function rn(s,e,t){const r=s.slice();return r[29]=e[t],r}function nn(s,e,t){const r=s.slice();return r[35]=e[t],r}function ln(s,e,t){const r=s.slice();return r[32]=e[t],r}function on(s,e,t){const r=s.slice();return r[38]=e[t],r}function an(s,e,t){const r=s.slice();return r[38]=e[t],r}function cn(s){let e,t,r,n,l,o,u=s[4].size+"",d,c,m,p;function b(v,x){return v[5]?Eo:Ao}let g=b(s),_=g(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("button"),_.c(),l=w(),o=f("div"),d=L(u),c=L(" profiles selected"),n.disabled=s[5],a(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),a(r,"class","flex items-center gap-3"),a(o,"class","text-sm text-slate-600"),a(t,"class","flex items-center justify-between"),a(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm"),a(e,"id","action-bar")},m(v,x){E(v,e,x),i(e,t),i(t,r),i(r,n),_.m(n,null),i(t,l),i(t,o),i(o,d),i(o,c),m||(p=ie(n,"click",s[14]),m=!0)},p(v,x){g===(g=b(v))&&_?_.p(v,x):(_.d(1),_=g(v),_&&(_.c(),_.m(n,null))),x[0]&32&&(n.disabled=v[5]),x[0]&16&&u!==(u=v[4].size+"")&&q(d,u)},d(v){v&&A(e),_.d(),m=!1,p()}}}function Ao(s){let e,t=s[4].size+"",r,n;return{c(){e=L("Add "),r=L(t),n=L(" to List")},m(l,o){E(l,e,o),E(l,r,o),E(l,n,o)},p(l,o){o[0]&16&&t!==(t=l[4].size+"")&&q(r,t)},d(l){l&&(A(e),A(r),A(n))}}}function Eo(s){let e,t;return{c(){e=f("span"),t=L(`
							Adding...`),a(e,"class","loading-spinner mr-2 svelte-qhxb3n")},m(r,n){E(r,e,n),E(r,t,n)},p:ne,d(r){r&&(A(e),A(t))}}}function un(s){let e,t,r,n=s[6].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=L("âœ… Successfully added "),l=L(n),o=L(" profiles to your list!"),a(t,"class","text-green-700 font-medium"),a(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(u,d){E(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&64&&n!==(n=u[6].success.length+"")&&q(l,n)},d(u){u&&A(e)}}}function dn(s){let e,t,r,n=s[6].errors.length+"",l,o,u,d,c=ge(s[6].errors),m=[];for(let p=0;p<c.length;p+=1)m[p]=fn(an(s,c,p));return{c(){e=f("div"),t=f("p"),r=L("âŒ Failed to add "),l=L(n),o=L(" profiles:"),u=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();a(t,"class","text-red-700 font-medium mb-2"),a(d,"class","text-red-600 text-sm space-y-1"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(d,null)},p(p,b){if(b[0]&64&&n!==(n=p[6].errors.length+"")&&q(l,n),b[0]&64){c=ge(p[6].errors);let g;for(g=0;g<c.length;g+=1){const _=an(p,c,g);m[g]?m[g].p(_,b):(m[g]=fn(_),m[g].c(),m[g].m(d,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=c.length}},d(p){p&&A(e),Ve(m,p)}}}function fn(s){let e,t,r=s[38].error+"",n;return{c(){e=f("li"),t=L("â€¢ "),n=L(r)},m(l,o){E(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&64&&r!==(r=l[38].error+"")&&q(n,r)},d(l){l&&A(e)}}}function mn(s){let e,t,r,n=s[7].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=L("ðŸ—‘ï¸ Successfully removed "),l=L(n),o=L(" profiles from your list!"),a(t,"class","text-blue-700 font-medium"),a(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(u,d){E(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&128&&n!==(n=u[7].success.length+"")&&q(l,n)},d(u){u&&A(e)}}}function pn(s){let e,t,r,n=s[7].errors.length+"",l,o,u,d,c=ge(s[7].errors),m=[];for(let p=0;p<c.length;p+=1)m[p]=hn(on(s,c,p));return{c(){e=f("div"),t=f("p"),r=L("âŒ Failed to remove "),l=L(n),o=L(" profiles:"),u=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();a(t,"class","text-red-700 font-medium mb-2"),a(d,"class","text-red-600 text-sm space-y-1"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(d,null)},p(p,b){if(b[0]&128&&n!==(n=p[7].errors.length+"")&&q(l,n),b[0]&128){c=ge(p[7].errors);let g;for(g=0;g<c.length;g+=1){const _=on(p,c,g);m[g]?m[g].p(_,b):(m[g]=hn(_),m[g].c(),m[g].m(d,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=c.length}},d(p){p&&A(e),Ve(m,p)}}}function hn(s){let e,t,r=s[38].error+"",n;return{c(){e=f("li"),t=L("â€¢ "),n=L(r)},m(l,o){E(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&128&&r!==(r=l[38].error+"")&&q(n,r)},d(l){l&&A(e)}}}function Po(s){let e,t,r;function n(d,c){return d[9]?Ko:d[1].listMemberProfiles.length>0?Do:Oo}let l=n(s),o=l(s),u=s[10]>1&&_n(s);return{c(){e=f("div"),t=f("div"),o.c(),r=w(),u&&u.c(),a(t,"class","space-y-4 flex-1 overflow-y-auto"),a(e,"class","flex flex-col flex-1")},m(d,c){E(d,e,c),i(e,t),o.m(t,null),i(e,r),u&&u.m(e,null)},p(d,c){l===(l=n(d))&&o?o.p(d,c):(o.d(1),o=l(d),o&&(o.c(),o.m(t,null))),d[10]>1?u?u.p(d,c):(u=_n(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&A(e),o.d(),u&&u.d()}}}function To(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">ðŸ¦‹</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">This list is brand new</h3> <p class="text-slate-600">Use the search on the right to find profiles and start building your list.</p></div>',a(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function Io(s){let e,t,r,n,l,o,u,d;return{c(){e=f("div"),t=f("div"),r=f("p"),n=L(s[3]),l=w(),o=f("button"),o.textContent="Try again",a(r,"class","text-red-700 mb-4"),a(o,"class","text-red-600 hover:text-red-800 underline"),a(t,"class","text-center"),a(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(c,m){E(c,e,m),i(e,t),i(t,r),i(r,n),i(t,l),i(t,o),u||(d=ie(o,"click",s[12]),u=!0)},p(c,m){m[0]&8&&q(n,c[3])},d(c){c&&A(e),u=!1,d()}}}function Ro(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-qhxb3n"></div> <p class="text-slate-600">Loading list members...</p></div>',a(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){E(t,e,r)},p:ne,d(t){t&&A(e)}}}function Oo(s){let e,t,r=s[3]&&gn(s),n=ge(s[1].listMembers.slice(0,100)),l=[];for(let o=0;o<n.length;o+=1)l[o]=bn(nn(s,n,o));return{c(){r&&r.c(),e=w();for(let o=0;o<l.length;o+=1)l[o].c();t=st()},m(o,u){r&&r.m(o,u),E(o,e,u);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(o,u);E(o,t,u)},p(o,u){if(o[3]?r?r.p(o,u):(r=gn(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0]&2){n=ge(o[1].listMembers.slice(0,100));let d;for(d=0;d<n.length;d+=1){const c=nn(o,n,d);l[d]?l[d].p(c,u):(l[d]=bn(c),l[d].c(),l[d].m(t.parentNode,t))}for(;d<l.length;d+=1)l[d].d(1);l.length=n.length}},d(o){o&&(A(e),A(t)),r&&r.d(o),Ve(l,o)}}}function Do(s){let e,t=ge(s[1].listMemberProfiles),r=[];for(let n=0;n<t.length;n+=1)r[n]=vn(ln(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);E(n,e,l)},p(n,l){if(l[0]&34818){t=ge(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const u=ln(n,t,o);r[o]?r[o].p(u,l):(r[o]=vn(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&A(e),Ve(r,n)}}}function Ko(s){let e,t,r,n,l,o,u;return{c(){e=f("div"),t=f("div"),r=w(),n=f("p"),l=L("Loading page "),o=L(s[8]),u=L("..."),a(t,"class","loading-spinner mx-auto mb-4 svelte-qhxb3n"),a(n,"class","text-slate-600"),a(e,"class","text-center py-8")},m(d,c){E(d,e,c),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u)},p(d,c){c[0]&256&&q(o,d[8])},d(d){d&&A(e)}}}function gn(s){let e,t,r,n,l,o,u,d,c,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("p"),n.textContent="âš ï¸ Profile loading issue",l=w(),o=f("p"),u=L(s[3]),d=w(),c=f("button"),c.textContent="Retry",a(n,"class","text-yellow-800 font-medium"),a(o,"class","text-yellow-700 text-sm mt-1"),a(c,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),a(t,"class","flex items-center justify-between"),a(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(b,g){E(b,e,g),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(o,u),i(t,d),i(t,c),m||(p=ie(c,"click",s[23]),m=!0)},p(b,g){g[0]&8&&q(u,b[3])},d(b){b&&A(e),m=!1,p()}}}function bn(s){let e,t,r,n,l,o,u=s[35]+"",d,c,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=w(),l=f("div"),o=f("div"),d=L(u),c=w(),m=f("div"),m.textContent="Member of list",p=w(),a(r,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),a(o,"class","text-sm text-gray-600 font-mono break-all"),a(m,"class","text-xs text-gray-500"),a(l,"class","flex-1"),a(t,"class","flex items-center space-x-3"),a(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(b,g){E(b,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(o,d),i(l,c),i(l,m),i(e,p)},p(b,g){g[0]&2&&u!==(u=b[35]+"")&&q(d,u)},d(b){b&&A(e)}}}function yn(s){let e,t=s[32].description+"",r;return{c(){e=f("p"),r=L(t),a(e,"class","text-xs text-gray-600 line-clamp-2 svelte-qhxb3n")},m(n,l){E(n,e,l),i(e,r)},p(n,l){l[0]&2&&t!==(t=n[32].description+"")&&q(r,t)},d(n){n&&A(e)}}}function No(s){let e;return{c(){e=L("ðŸ—‘ï¸ Remove")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function Bo(s){let e,t;return{c(){e=f("span"),t=L(`
														Removing...`),a(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(A(e),A(t))}}}function vn(s){let e,t,r,n,l,o,u,d,c,m,p,b,g=(s[32].displayName||s[32].handle)+"",_,v,x,T,C=s[32].handle+"",R,D,K,O,B,M,U,k,I,N,ee,P,W,j,Z=s[32].description&&yn(s);function oe(z,S){return S[0]&2&&(N=null),N==null&&(N=!!z[11].has(z[32].did)),N?Bo:No}let se=oe(s,[-1,-1]),y=se(s);function h(){return s[22](s[32])}return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),d=w(),c=f("div"),m=f("a"),p=f("div"),b=f("h4"),_=L(g),v=w(),x=f("span"),T=L("@"),R=L(C),D=w(),K=_s("svg"),O=_s("path"),B=w(),Z&&Z.c(),U=w(),k=f("div"),I=f("button"),y.c(),P=w(),tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)||a(n,"src",l),a(n,"alt",o=s[32].displayName||s[32].handle),a(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),a(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'"),a(r,"class","flex-shrink-0"),a(b,"class","text-sm font-semibold text-gray-900 truncate"),a(x,"class","text-xs text-gray-600 truncate"),a(O,"stroke-linecap","round"),a(O,"stroke-linejoin","round"),a(O,"stroke-width","2"),a(O,"d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"),a(K,"class","w-3 h-3 text-gray-400"),a(K,"fill","none"),a(K,"stroke","currentColor"),a(K,"viewBox","0 0 24 24"),a(p,"class","flex items-center space-x-2 mb-1"),a(m,"href",M="https://bsky.app/profile/"+s[32].handle),a(m,"target","_blank"),a(m,"rel","noopener noreferrer"),a(m,"class","block hover:underline"),a(c,"class","flex-1 min-w-0"),I.disabled=ee=s[11].has(s[32].did),a(I,"class","bg-red-100 hover:bg-red-200 text-red-700 border border-red-300 px-3 py-1.5 rounded text-xs font-medium cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"),a(I,"title","Remove from list"),a(k,"class","flex-shrink-0"),a(t,"class","flex items-center space-x-3"),a(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200")},m(z,S){E(z,e,S),i(e,t),i(t,r),i(r,n),i(t,d),i(t,c),i(c,m),i(m,p),i(p,b),i(b,_),i(p,v),i(p,x),i(x,T),i(x,R),i(p,D),i(p,K),i(K,O),i(m,B),Z&&Z.m(m,null),i(t,U),i(t,k),i(k,I),y.m(I,null),i(e,P),W||(j=ie(I,"click",h),W=!0)},p(z,S){s=z,S[0]&2&&!tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)&&a(n,"src",l),S[0]&2&&o!==(o=s[32].displayName||s[32].handle)&&a(n,"alt",o),S[0]&2&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'")&&a(n,"onerror",u),S[0]&2&&g!==(g=(s[32].displayName||s[32].handle)+"")&&q(_,g),S[0]&2&&C!==(C=s[32].handle+"")&&q(R,C),s[32].description?Z?Z.p(s,S):(Z=yn(s),Z.c(),Z.m(m,null)):Z&&(Z.d(1),Z=null),S[0]&2&&M!==(M="https://bsky.app/profile/"+s[32].handle)&&a(m,"href",M),se!==(se=oe(s,S))&&(y.d(1),y=se(s),y&&(y.c(),y.m(I,null))),S[0]&2&&ee!==(ee=s[11].has(s[32].did))&&(I.disabled=ee)},d(z){z&&A(e),Z&&Z.d(),y.d(),W=!1,j()}}}function _n(s){let e,t,r,n,l,o,u,d,c,m,p,b,g,_,v,x,T,C,R,D,K,O,B,M=s[9]&&s[8]>1&&wn(),U=ge(Array.from({length:Math.min(5,s[10])},s[24])),k=[];for(let N=0;N<U.length;N+=1)k[N]=Sn(rn(s,U,N));let I=s[9]&&s[8]<s[10]&&kn();return{c(){e=f("div"),t=f("div"),r=f("div"),n=L("Page "),l=L(s[8]),o=L(" of "),u=L(s[10]),d=L(" ("),c=L(s[0]),m=L(" total members)"),p=w(),b=f("div"),g=f("button"),M&&M.c(),_=L(`
											Previous`),x=w(),T=f("div");for(let N=0;N<k.length;N+=1)k[N].c();C=w(),R=f("button"),D=L(`Next
											`),I&&I.c(),a(r,"class","text-sm text-gray-600"),g.disabled=v=s[8]===1||s[9],a(g,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),a(T,"class","flex items-center space-x-1"),R.disabled=K=s[8]===s[10]||s[9],a(R,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),a(b,"class","flex items-center space-x-2"),a(t,"class","flex items-center justify-between"),a(e,"class","mt-6 pt-4 border-t border-gray-200")},m(N,ee){E(N,e,ee),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(r,u),i(r,d),i(r,c),i(r,m),i(t,p),i(t,b),i(b,g),M&&M.m(g,null),i(g,_),i(b,x),i(b,T);for(let P=0;P<k.length;P+=1)k[P]&&k[P].m(T,null);i(b,C),i(b,R),i(R,D),I&&I.m(R,null),O||(B=[ie(g,"click",s[18]),ie(R,"click",s[17])],O=!0)},p(N,ee){if(ee[0]&256&&q(l,N[8]),ee[0]&1024&&q(u,N[10]),ee[0]&1&&q(c,N[0]),N[9]&&N[8]>1?M||(M=wn(),M.c(),M.m(g,_)):M&&(M.d(1),M=null),ee[0]&768&&v!==(v=N[8]===1||N[9])&&(g.disabled=v),ee[0]&67328){U=ge(Array.from({length:Math.min(5,N[10])},N[24]));let P;for(P=0;P<U.length;P+=1){const W=rn(N,U,P);k[P]?k[P].p(W,ee):(k[P]=Sn(W),k[P].c(),k[P].m(T,null))}for(;P<k.length;P+=1)k[P].d(1);k.length=U.length}N[9]&&N[8]<N[10]?I||(I=kn(),I.c(),I.m(R,null)):I&&(I.d(1),I=null),ee[0]&1792&&K!==(K=N[8]===N[10]||N[9])&&(R.disabled=K)},d(N){N&&A(e),M&&M.d(),Ve(k,N),I&&I.d(),O=!1,Me(B)}}}function wn(s){let e;return{c(){e=f("span"),a(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function Sn(s){let e,t=s[29]+"",r,n,l,o,u;function d(){return s[25](s[29])}return{c(){e=f("button"),r=L(t),n=w(),e.disabled=s[9],a(e,"class",l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(c,m){E(c,e,m),i(e,r),i(e,n),o||(u=ie(e,"click",d),o=!0)},p(c,m){s=c,m[0]&1280&&t!==(t=s[29]+"")&&q(r,t),m[0]&512&&(e.disabled=s[9]),m[0]&1280&&l!==(l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&a(e,"class",l)},d(c){c&&A(e),o=!1,u()}}}function kn(s){let e;return{c(){e=f("span"),a(e,"class","loading-spinner ml-1 svelte-qhxb3n")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function Uo(s){let e,t,r,n,l,o,u,d,c,m,p,b,g,_,v,x=(s[9]?"...":s[1].listMemberProfiles.length)+"",T,C,R,D,K,O,B,M,U,k,I=s[1].listMemberProfiles.length+"",N,ee,P=s[1].listMembers.length+"",W,j,Z,oe,se,y;t=new Mo({});let h=s[4].size>0&&cn(s),z=s[6].success.length>0&&un(s),S=s[6].errors.length>0&&dn(s),F=s[7].success.length>0&&mn(s),V=s[7].errors.length>0&&pn(s);function te(H,G){return H[2]?Ro:H[3]?Io:H[1].listMembers.length===0?To:Po}let Y=te(s),$=Y(s);return se=new yo({}),{c(){e=f("div"),Re(t.$$.fragment),r=w(),h&&h.c(),n=w(),z&&z.c(),l=w(),S&&S.c(),o=w(),F&&F.c(),u=w(),V&&V.c(),d=w(),c=f("div"),m=f("div"),p=f("div"),b=f("h3"),b.textContent="Latest list members",g=w(),_=f("p"),v=L("Showing "),T=L(x),C=L(" of "),R=L(s[0]),D=L(`
					total members`),K=w(),O=f("div"),B=f("div"),M=L("Debug: isLoadingMembers="),U=L(s[2]),k=L(", profiles="),N=L(I),ee=L(", members="),W=L(P),j=w(),$.c(),Z=w(),oe=f("div"),Re(se.$$.fragment),a(b,"class","text-lg font-semibold text-slate-800 mb-2"),a(_,"class","text-sm text-slate-600"),a(p,"class","p-6 border-b border-gray-200"),a(B,"class","text-xs text-gray-500 mb-2 hidden"),a(O,"class","p-6 flex flex-col flex-1"),a(m,"id","list-members-container"),a(m,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),a(c,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),a(c,"id","list-manager-layout"),a(e,"class","space-y-6 relative z-100"),a(e,"id","list-manager")},m(H,G){E(H,e,G),Ce(t,e,null),i(e,r),h&&h.m(e,null),i(e,n),z&&z.m(e,null),i(e,l),S&&S.m(e,null),i(e,o),F&&F.m(e,null),i(e,u),V&&V.m(e,null),i(e,d),i(e,c),i(c,m),i(m,p),i(p,b),i(p,g),i(p,_),i(_,v),i(_,T),i(_,C),i(_,R),i(_,D),i(m,K),i(m,O),i(O,B),i(B,M),i(B,U),i(B,k),i(B,N),i(B,ee),i(B,W),i(O,j),$.m(O,null),i(c,Z),i(c,oe),Ce(se,oe,null),y=!0},p(H,G){H[4].size>0?h?h.p(H,G):(h=cn(H),h.c(),h.m(e,n)):h&&(h.d(1),h=null),H[6].success.length>0?z?z.p(H,G):(z=un(H),z.c(),z.m(e,l)):z&&(z.d(1),z=null),H[6].errors.length>0?S?S.p(H,G):(S=dn(H),S.c(),S.m(e,o)):S&&(S.d(1),S=null),H[7].success.length>0?F?F.p(H,G):(F=mn(H),F.c(),F.m(e,u)):F&&(F.d(1),F=null),H[7].errors.length>0?V?V.p(H,G):(V=pn(H),V.c(),V.m(e,d)):V&&(V.d(1),V=null),(!y||G[0]&514)&&x!==(x=(H[9]?"...":H[1].listMemberProfiles.length)+"")&&q(T,x),(!y||G[0]&1)&&q(R,H[0]),(!y||G[0]&4)&&q(U,H[2]),(!y||G[0]&2)&&I!==(I=H[1].listMemberProfiles.length+"")&&q(N,I),(!y||G[0]&2)&&P!==(P=H[1].listMembers.length+"")&&q(W,P),Y===(Y=te(H))&&$?$.p(H,G):($.d(1),$=Y(H),$&&($.c(),$.m(O,null)))},i(H){y||(ce(t.$$.fragment,H),ce(se.$$.fragment,H),y=!0)},o(H){de(t.$$.fragment,H),de(se.$$.fragment,H),y=!1},d(H){H&&A(e),xe(t),h&&h.d(),z&&z.d(),S&&S.d(),F&&F.d(),V&&V.d(),$.d(),xe(se)}}}const gs=25;function Wo(s,e,t){let r,n;Ie(s,pe,P=>t(1,r=P)),Ie(s,Ue,P=>t(21,n=P));let l=!1,o="",u=new Set,d=!1,c={success:[],errors:[]},m=new Set,p={success:[],errors:[]},b=1,g=!1,_=!1,v=0,x=new Map,T=0,C=null;async function R(){if(!(!r.selectedList||!n.session||_)){t(19,_=!0),t(2,l=!0),t(3,o=""),t(8,b=1),x.clear();try{const P=await Le.getListInfo(n.session,r.selectedList.uri,n.authType),W={...r.selectedList,name:P.name,description:P.description,createdAt:P.createdAt,listItemCount:P.listItemCount};pe.setSelectedList(W),t(0,T=P.listItemCount||0),t(10,v=Math.ceil(T/gs)),console.log("Total pages:",v,"Total count:",T),await D(1),pe.setListLoading(!1)}catch(P){console.error("Error loading list members:",P),t(3,o=P.message||"Failed to load list members"),pe.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,l=!1),t(19,_=!1),console.log("Final state - isLoadingMembers:",l,"isCurrentlyLoadingMembers:",_)}}}async function D(P){if(!(!n.session||!r.selectedList)){t(9,g=!0),t(8,b=P);try{let W=x.get(P-1);const j=await Le.getListMembers(n.session,r.selectedList.uri,n.authType,gs,W);console.log(`Fetched ${j.members.length} members for page ${P}`),console.log("Members received:",j.members),j.cursor&&x.set(P,j.cursor),j.members.length===0?T===0?t(3,o=""):(console.warn("No members returned from API for page",P),t(3,o="We couldnâ€™t load members right now.")):t(3,o="");const Z=j.profiles||[];console.log(`Using ${Z.length} profiles from API response for page ${P}`),console.log("Setting profiles in store:",Z.length),pe.setListMembers(j.members),pe.setListMemberProfiles(Z),console.log("Profiles set in store, current count:",r.listMemberProfiles.length)}catch(W){console.error("Error loading members page:",W),t(3,o=W.message||"Failed to load page"),pe.setListMemberProfiles([])}finally{t(9,g=!1)}}}async function K(){if(u.size===0)return;t(5,d=!0),t(6,c={success:[],errors:[]});const P=Array.from(u);for(const W of P)try{await Le.addToList(n.session,W,r.selectedList.uri,n.authType),c.success.push(W),await pe.fetchAndAddProfile(n.session,W,n.authType)}catch(j){c.errors.push({did:W,error:j.message})}u.clear(),t(4,u),t(5,d=!1)}async function O(P){if(!(!P||!r.selectedList||!n.session)){m.add(P);try{await Le.removeFromList(n.session,P,r.selectedList.uri,n.authType),p.success.push(P);const W=r.listMemberProfiles.filter(oe=>oe.did!==P);pe.setListMemberProfiles(W);const j=r.listMembers.filter(oe=>oe!==P);pe.setListMembers(j),t(0,T=Math.max(0,T-1)),t(10,v=Math.ceil(T/gs));const Z=r.userLists.map(oe=>oe.uri===r.selectedList.uri?{...oe,memberCount:Math.max(0,(oe.memberCount||0)-1)}:oe);pe.setUserLists(Z)}catch(W){console.error("Failed to remove profile from list:",W),p.errors.push({profileDid:P,error:W.message})}finally{m.delete(P),setTimeout(()=>{t(7,p={success:[],errors:[]})},5e3)}}}async function B(P){P>=1&&P<=v&&await D(P)}async function M(){b<v&&await D(b+1)}async function U(){b>1&&await D(b-1)}const k=P=>O(P.did),I=()=>D(b),N=(P,W)=>{let j;return v<=5||b<=3?j=W+1:b>=v-2?j=v-4+W:j=b-2+W,j},ee=P=>B(P);return s.$$.update=()=>{var P,W,j;s.$$.dirty[0]&2&&r.refreshTrigger&&R(),s.$$.dirty[0]&2&&console.log("Profile count changed:",r.listMemberProfiles.length),s.$$.dirty[0]&3&&((P=r.selectedList)==null?void 0:P.listItemCount)!==T&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(W=r.selectedList)==null?void 0:W.listItemCount),console.log("Current totalMemberCount:",T),t(0,T=((j=r.selectedList)==null?void 0:j.listItemCount)||0),t(10,v=Math.ceil(T/gs))),s.$$.dirty[0]&3670018&&r.selectedList&&n.session&&!_&&C!==r.selectedList.uri&&(console.log("List changed, loading members for:",r.selectedList.name),t(20,C=r.selectedList.uri),R())},[T,r,l,o,u,d,c,p,b,g,v,m,R,D,K,O,B,M,U,_,C,n,k,I,N,ee]}class Ho extends De{constructor(e){super(),Oe(this,e,Wo,Uo,Ae,{},null,[-1,-1])}}function Ln(s){let e,t,r,n,l,o,u,d;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("h3"),l.textContent="Getting Ready",o=w(),u=f("p"),d=L(s[1]),a(r,"class","loading-spinner mx-auto mb-4 svelte-847qwb"),a(l,"class","text-lg font-semibold text-slate-800 mb-2"),a(u,"class","text-slate-600"),a(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),a(t,"id","loading-overlay-content"),a(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"),a(e,"id","loading-overlay")},m(c,m){E(c,e,m),i(e,t),i(t,r),i(t,n),i(t,l),i(t,o),i(t,u),i(u,d)},p(c,m){m&2&&q(d,c[1])},d(c){c&&A(e)}}}function zo(s){let e,t=s[0]&&Ln(s);return{c(){t&&t.c(),e=st()},m(r,n){t&&t.m(r,n),E(r,e,n)},p(r,[n]){r[0]?t?t.p(r,n):(t=Ln(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(r){r&&A(e),t&&t.d(r)}}}function Fo(s,e,t){let{isLoading:r=!1}=e,{message:n="Loading list data..."}=e;return s.$$set=l=>{"isLoading"in l&&t(0,r=l.isLoading),"message"in l&&t(1,n=l.message)},[r,n]}class jo extends De{constructor(e){super(),Oe(this,e,Fo,zo,Ae,{isLoading:0,message:1})}}function Cn(s,e,t){const r=s.slice();return r[8]=e[t],r}function xn(s,e){let t,r,n;return{key:s,first:null,c(){t=f("div"),r=_s("svg"),n=_s("path"),a(n,"d","m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"),a(n,"fill","#1185fe"),a(n,"opacity","0.4"),a(r,"width","100%"),a(r,"height","100%"),a(r,"viewBox","0 0 600 530"),a(r,"xmlns","http://www.w3.org/2000/svg"),a(r,"class","butterfly-svg svelte-1l7ozht"),a(t,"class","butterfly svelte-1l7ozht"),fe(t,"left",e[8].x+"%"),fe(t,"top",e[8].y+"%"),fe(t,"width",e[8].size+"px"),fe(t,"height",e[8].size+"px"),fe(t,"animation-duration",e[8].speed+"s"),fe(t,"animation-delay",e[8].delay+"s"),fe(t,"transform","rotate("+e[8].rotation+"deg)"),fe(t,"opacity",.6+Math.random()*.4),this.first=t},m(l,o){E(l,t,o),i(t,r),i(r,n)},p(l,o){e=l,o&1&&fe(t,"left",e[8].x+"%"),o&1&&fe(t,"top",e[8].y+"%"),o&1&&fe(t,"width",e[8].size+"px"),o&1&&fe(t,"height",e[8].size+"px"),o&1&&fe(t,"animation-duration",e[8].speed+"s"),o&1&&fe(t,"animation-delay",e[8].delay+"s"),o&1&&fe(t,"transform","rotate("+e[8].rotation+"deg)")},d(l){l&&A(t)}}}function Mn(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="message-content svelte-1l7ozht" id="empty-list-content"><svg width="60" height="53" viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg" class="svelte-1l7ozht"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe" opacity="0.3"></path></svg> <p class="svelte-1l7ozht">Add members to your list to see butterflies flutter by!</p></div>',a(e,"class","empty-list-message svelte-1l7ozht"),a(e,"id","empty-list-message")},m(t,r){E(t,e,r)},d(t){t&&A(e)}}}function Jo(s){let e,t=[],r=new Map,n,l=ge(s[0]);const o=d=>d[8].id;for(let d=0;d<l.length;d+=1){let c=Cn(s,l,d),m=o(c);r.set(m,t[d]=xn(m,c))}let u=s[2].selectedList&&s[1]===0&&Mn();return{c(){e=f("div");for(let d=0;d<t.length;d+=1)t[d].c();n=w(),u&&u.c(),a(e,"class","butterfly-background svelte-1l7ozht"),a(e,"id","butterfly-background")},m(d,c){E(d,e,c);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i(e,n),u&&u.m(e,null),s[5](e)},p(d,[c]){c&1&&(l=ge(d[0]),t=ul(t,c,o,1,d,l,r,e,cl,xn,n,Cn)),d[2].selectedList&&d[1]===0?u||(u=Mn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:ne,o:ne,d(d){d&&A(e);for(let c=0;c<t.length;c+=1)t[c].d();u&&u.d(),s[5](null)}}}function qo(s,e,t){let r,n,l;Ie(s,pe,p=>t(2,l=p));let o,u=[];const d={baseCount:12,maxCount:50,minSize:20,maxSize:45,minSpeed:15,maxSpeed:45,minDelay:0,maxDelay:15};Cs(()=>{c()});function c(){t(0,u=[]);for(let p=0;p<n;p++)u.push({id:p,x:Math.random()*100,y:Math.random()*100,size:Math.random()*(d.maxSize-d.minSize)+d.minSize,speed:Math.random()*(d.maxSpeed-d.minSpeed)+d.minSpeed,delay:Math.random()*(d.maxDelay-d.minDelay)+d.minDelay,rotation:Math.random()*60-30,rotationSpeed:(Math.random()-.5)*2,floatingDirection:Math.random()*360,floatingSpeed:Math.random()*.5+.1})}function m(p){ws[p?"unshift":"push"](()=>{o=p,t(3,o)})}return s.$$.update=()=>{var p;s.$$.dirty&4&&t(1,r=((p=l.selectedList)==null?void 0:p.listItemCount)||0),s.$$.dirty&6&&t(4,n=l.selectedList?Math.min(d.maxCount,Math.max(d.baseCount,Math.floor(r/2))):d.baseCount),s.$$.dirty&17&&n!==u.length&&c()},[u,r,l,o,n,m]}class Vo extends De{constructor(e){super(),Oe(this,e,qo,Jo,Ae,{})}}function An(s){let e,t;return e=new _i({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Yo(s){let e,t;return e=new Ho({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function $o(s){let e,t;return e=new zi({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Go(s){let e,t;return e=new Ni({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Zo(s){let e,t,r,n,l,o,u,d,c,m;t=new Vo({});let p=s[1]!=="auth"&&An();const b=[Go,$o,Yo],g=[];function _(v,x){return v[1]==="auth"?0:v[1]==="list-selector"?1:v[1]==="manager"?2:-1}return~(o=_(s))&&(u=g[o]=b[o](s)),c=new jo({props:{isLoading:s[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=f("main"),Re(t.$$.fragment),r=w(),p&&p.c(),n=w(),l=f("div"),u&&u.c(),d=w(),Re(c.$$.fragment),a(l,"class","max-w-6xl mx-auto p-6"),a(l,"id","app-content"),a(e,"class","min-h-screen bg-gray-50"),a(e,"id","app-main")},m(v,x){E(v,e,x),Ce(t,e,null),i(e,r),p&&p.m(e,null),i(e,n),i(e,l),~o&&g[o].m(l,null),i(e,d),Ce(c,e,null),m=!0},p(v,[x]){v[1]!=="auth"?p?x&2&&ce(p,1):(p=An(),p.c(),ce(p,1),p.m(e,n)):p&&(ft(),de(p,1,1,()=>{p=null}),mt());let T=o;o=_(v),o!==T&&(u&&(ft(),de(g[T],1,1,()=>{g[T]=null}),mt()),~o?(u=g[o],u||(u=g[o]=b[o](v),u.c()),ce(u,1),u.m(l,null)):u=null);const C={};x&1&&(C.isLoading=v[0].isLoadingList),c.$set(C)},i(v){m||(ce(t.$$.fragment,v),ce(p),ce(u),ce(c.$$.fragment,v),m=!0)},o(v){de(t.$$.fragment,v),de(p),de(u),de(c.$$.fragment,v),m=!1},d(v){v&&A(e),xe(t),p&&p.d(),~o&&g[o].d(),xe(c)}}}function Xo(s,e,t){let r,n;Ie(s,pe,o=>t(0,r=o)),Ie(s,Ue,o=>t(2,n=o));let l="auth";return Cs(async()=>{const{session:o,authType:u}=await Ue.initializeSession();o&&(console.log("Session restored:",{authType:u,handle:o.handle||o.did}),t(1,l="list-selector"))}),s.$$.update=()=>{s.$$.dirty&5&&(n.session?r.selectedList?t(1,l="manager"):t(1,l="list-selector"):t(1,l="auth"))},[r,l,n]}class Qo extends De{constructor(e){super(),Oe(this,e,Xo,Zo,Ae,{})}}new Qo({target:document.getElementById("app")});
