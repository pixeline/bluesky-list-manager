var Mn=Object.defineProperty;var dr=s=>{throw TypeError(s)};var xn=(s,e,t)=>e in s?Mn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Pn=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Me=(s,e,t)=>xn(s,typeof e!="symbol"?e+"":e,t),fr=(s,e,t)=>e.has(s)||dr("Cannot "+t);var Y=(s,e,t)=>(fr(s,e,"read from private field"),t?t.call(s):e.get(s)),Ge=(s,e,t)=>e.has(s)?dr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Ze=(s,e,t,r)=>(fr(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);var eo=Pn((so,$t)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function Q(){}function on(s){return s()}function mr(){return Object.create(null)}function Ie(s){s.forEach(on)}function an(s){return typeof s=="function"}function Re(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let fs;function Tt(s,e){return s===e?!0:(fs||(fs=document.createElement("a")),fs.href=e,s===fs.href)}function Tn(s){return Object.keys(s).length===0}function In(s,...e){if(s==null){for(const r of e)r(void 0);return Q}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function xe(s,e,t){s.$$.on_destroy.push(In(e,t))}function i(s,e){s.appendChild(e)}function E(s,e,t){s.insertBefore(e,t||null)}function C(s){s.parentNode&&s.parentNode.removeChild(s)}function Xe(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function f(s){return document.createElement(s)}function k(s){return document.createTextNode(s)}function v(){return k(" ")}function et(){return k("")}function se(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function cn(s){return function(e){return e.preventDefault(),s.call(this,e)}}function u(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Rn(s){let e;return{p(...t){e=t,e.forEach(r=>s.push(r))},r(){e.forEach(t=>s.splice(s.indexOf(t),1))}}}function On(s){return Array.from(s.childNodes)}function $(s,e){e=""+e,s.data!==e&&(s.data=e)}function Le(s,e){s.value=e??""}function pr(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function hr(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}s.selectedIndex=-1}function Nn(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}let Ft;function Jt(s){Ft=s}function un(){if(!Ft)throw new Error("Function called outside component initialization");return Ft}function dn(s){un().$$.on_mount.push(s)}function Kn(){const s=un();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const l=Nn(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,l)}),!l.defaultPrevented}return!0}}const kt=[],gr=[];let Mt=[];const br=[],Dn=Promise.resolve();let Ps=!1;function Bn(){Ps||(Ps=!0,Dn.then(fn))}function Ts(s){Mt.push(s)}const Ls=new Set;let vt=0;function fn(){if(vt!==0)return;const s=Ft;do{try{for(;vt<kt.length;){const e=kt[vt];vt++,Jt(e),Un(e.$$)}}catch(e){throw kt.length=0,vt=0,e}for(Jt(null),kt.length=0,vt=0;gr.length;)gr.pop()();for(let e=0;e<Mt.length;e+=1){const t=Mt[e];Ls.has(t)||(Ls.add(t),t())}Mt.length=0}while(kt.length);for(;br.length;)br.pop()();Ps=!1,Ls.clear(),Jt(s)}function Un(s){if(s.fragment!==null){s.update(),Ie(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Ts)}}function Wn(s){const e=[],t=[];Mt.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Mt=e}const ps=new Set;let at;function It(){at={r:0,c:[],p:at}}function Rt(){at.r||Ie(at.c),at=at.p}function le(s,e){s&&s.i&&(ps.delete(s),s.i(e))}function fe(s,e,t,r){if(s&&s.o){if(ps.has(s))return;ps.add(s),at.c.push(()=>{ps.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}function ge(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function We(s){s&&s.c()}function Pe(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Ts(()=>{const l=s.$$.on_mount.map(on).filter(an);s.$$.on_destroy?s.$$.on_destroy.push(...l):Ie(l),s.$$.on_mount=[]}),n.forEach(Ts)}function Te(s,e){const t=s.$$;t.fragment!==null&&(Wn(t.after_update),Ie(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Hn(s,e){s.$$.dirty[0]===-1&&(kt.push(s),Bn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function He(s,e,t,r,n,l,o=null,c=[-1]){const d=Ft;Jt(s);const a=s.$$={fragment:null,ctx:[],props:l,update:Q,not_equal:n,bound:mr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:mr(),dirty:c,skip_bound:!1,root:e.target||d.$$.root};o&&o(a.root);let m=!1;if(a.ctx=t?t(s,e.props||{},(p,b,...g)=>{const _=g.length?g[0]:b;return a.ctx&&n(a.ctx[p],a.ctx[p]=_)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](_),m&&Hn(s,p)),b}):[],a.update(),m=!0,Ie(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const p=On(e.target);a.fragment&&a.fragment.l(p),p.forEach(C)}else a.fragment&&a.fragment.c();e.intro&&le(s.$$.fragment),Pe(s,e.target,e.anchor),fn()}Jt(d)}class Je{constructor(){Me(this,"$$");Me(this,"$$set")}$destroy(){Te(this,1),this.$destroy=Q}$on(e,t){if(!an(t))return Q;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!Tn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Jn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Jn);const wt=[];function mn(s,e=Q){let t;const r=new Set;function n(c){if(Re(s,c)&&(s=c,t)){const d=!wt.length;for(const a of r)a[1](),wt.push(a,s);if(d){for(let a=0;a<wt.length;a+=2)wt[a][0](wt[a+1]);wt.length=0}}}function l(c){n(c(s))}function o(c,d=Q){const a=[c,d];return r.add(a),r.size===1&&(t=e(n,l)||Q),c(s),()=>{r.delete(a),r.size===0&&t&&(t(),t=null)}}return{set:n,update:l,subscribe:o}}const Et=new TextEncoder,hs=new TextDecoder;function Fn(...s){const e=s.reduce((n,{length:l})=>n+l,0),t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function jn(s){if(Uint8Array.prototype.toBase64)return s.toBase64();const e=32768,t=[];for(let r=0;r<s.length;r+=e)t.push(String.fromCharCode.apply(null,s.subarray(r,r+e)));return btoa(t.join(""))}function $n(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(s);const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function pn(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof s=="string"?s:hs.decode(s),{alphabet:"base64url"});let e=s;e instanceof Uint8Array&&(e=hs.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return $n(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Cs(s){let e=s;return typeof e=="string"&&(e=Et.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):jn(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class bs extends Error{constructor(t,r){var n;super(t,r);Me(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Me(bs,"code","ERR_JOSE_GENERIC");class je extends bs{constructor(){super(...arguments);Me(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Me(je,"code","ERR_JOSE_NOT_SUPPORTED");class Lt extends bs{constructor(){super(...arguments);Me(this,"code","ERR_JWS_INVALID")}}Me(Lt,"code","ERR_JWS_INVALID");class hn extends bs{constructor(){super(...arguments);Me(this,"code","ERR_JWT_INVALID")}}Me(hn,"code","ERR_JWT_INVALID");function Fe(s,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${s}`)}function Wt(s,e){return s.name===e}function As(s){return parseInt(s.name.slice(4),10)}function zn(s){switch(s){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function qn(s,e){if(!s.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function Vn(s,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!Wt(s.algorithm,"HMAC"))throw Fe("HMAC");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Fe(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Wt(s.algorithm,"RSASSA-PKCS1-v1_5"))throw Fe("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Fe(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Wt(s.algorithm,"RSA-PSS"))throw Fe("RSA-PSS");const r=parseInt(e.slice(2),10);if(As(s.algorithm.hash)!==r)throw Fe(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!Wt(s.algorithm,"Ed25519"))throw Fe("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!Wt(s.algorithm,"ECDSA"))throw Fe("ECDSA");const r=zn(e);if(s.algorithm.namedCurve!==r)throw Fe(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}qn(s,t)}function gn(s,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const n=t.pop();s+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?s+=`one of type ${t[0]} or ${t[1]}.`:s+=`of type ${t[0]}.`;return e==null?s+=` Received ${e}`:typeof e=="function"&&e.name?s+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(s+=` Received an instance of ${e.constructor.name}`),s}const Yn=(s,...e)=>gn("Key must be ",s,...e);function bn(s,e,...t){return gn(`Key for the ${s} algorithm must be `,e,...t)}function yn(s){return(s==null?void 0:s[Symbol.toStringTag])==="CryptoKey"}function _n(s){return(s==null?void 0:s[Symbol.toStringTag])==="KeyObject"}const vn=s=>yn(s)||_n(s),Gn=(...s)=>{const e=s.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const n=Object.keys(r);if(!t||t.size===0){t=new Set(n);continue}for(const l of n){if(t.has(l))return!1;t.add(l)}}return!0};function Zn(s){return typeof s=="object"&&s!==null}const Os=s=>{if(!Zn(s)||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e},Qn=(s,e)=>{if(s.startsWith("RS")||s.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${s} requires key modulusLength to be 2048 bits or larger`)}};function Xn(s){let e,t;switch(s.kty){case"RSA":{switch(s.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.slice(-3),10)||1}`},t=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(s.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=s.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=s.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(s.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new je('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const wn=async s=>{if(!s.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=Xn(s),r={...s};return delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,s.ext??!s.d,s.key_ops??t)};async function el(s,e,t){if(!Os(s))throw new TypeError("JWK must be an object");let r;switch(e??(e=s.alg),r??(r=s.ext),s.kty){case"oct":if(typeof s.k!="string"||!s.k)throw new TypeError('missing "k" (Key Value) Parameter value');return pn(s.k);case"RSA":if("oth"in s&&s.oth!==void 0)throw new je('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return wn({...s,alg:e,ext:r});default:throw new je('Unsupported "kty" (Key Type) Parameter value')}}const tl=(s,e,t,r,n)=>{if(n.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new s('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new s('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;t!==void 0?l=new Map([...Object.entries(t),...e.entries()]):l=e;for(const o of r.crit){if(!l.has(o))throw new je(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new s(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&r[o]===void 0)throw new s(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)};function Ns(s){return Os(s)&&typeof s.kty=="string"}function sl(s){return s.kty!=="oct"&&typeof s.d=="string"}function rl(s){return s.kty!=="oct"&&typeof s.d>"u"}function nl(s){return s.kty==="oct"&&typeof s.k=="string"}let xt;const yr=async(s,e,t,r=!1)=>{xt||(xt=new WeakMap);let n=xt.get(s);if(n!=null&&n[t])return n[t];const l=await wn({...e,alg:t});return r&&Object.freeze(s),n?n[t]=l:xt.set(s,{[t]:l}),l},ll=(s,e)=>{var o;xt||(xt=new WeakMap);let t=xt.get(s);if(t!=null&&t[e])return t[e];const r=s.type==="public",n=!!r;let l;if(s.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}l=s.toCryptoKey(s.asymmetricKeyType,n,r?[]:["deriveBits"])}if(s.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");l=s.toCryptoKey(s.asymmetricKeyType,n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="rsa"){let c;switch(e){case"RSA-OAEP":c="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":c="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":c="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":c="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return s.toCryptoKey({name:"RSA-OAEP",hash:c},n,r?["encrypt"]:["decrypt"]);l=s.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:c},n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="ec"){const d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=s.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!d)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&d==="P-256"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES384"&&d==="P-384"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES512"&&d==="P-521"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(l=s.toCryptoKey({name:"ECDH",namedCurve:d},n,r?[]:["deriveBits"]))}if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=l:xt.set(s,{[e]:l}),l},il=async(s,e)=>{if(s instanceof Uint8Array||yn(s))return s;if(_n(s)){if(s.type==="secret")return s.export();if("toCryptoKey"in s&&typeof s.toCryptoKey=="function")try{return ll(s,e)}catch(r){if(r instanceof TypeError)throw r}let t=s.export({format:"jwk"});return yr(s,t,e)}if(Ns(s))return s.k?pn(s.k):yr(s,s,e,!0);throw new Error("unreachable")},Ct=s=>s==null?void 0:s[Symbol.toStringTag],Is=(s,e,t)=>{var r,n;if(e.use!==void 0){let l;switch(t){case"sign":case"verify":l="sig";break;case"encrypt":case"decrypt":l="enc";break}if(e.use!==l)throw new TypeError(`Invalid key for this operation, its "use" must be "${l}" when present`)}if(e.alg!==void 0&&e.alg!==s)throw new TypeError(`Invalid key for this operation, its "alg" must be "${s}" when present`);if(Array.isArray(e.key_ops)){let l;switch(!0){case t==="sign":case s==="dir":case s.includes("CBC-HS"):l=t;break;case s.startsWith("PBES2"):l="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(s):!s.includes("GCM")&&s.endsWith("KW")?l="unwrapKey":l=t;break;case t==="encrypt":l="wrapKey";break;case t==="decrypt":l=s.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(l&&((n=(r=e.key_ops)==null?void 0:r.includes)==null?void 0:n.call(r,l))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${l}" when present`)}return!0},ol=(s,e,t)=>{if(!(e instanceof Uint8Array)){if(Ns(e)){if(nl(e)&&Is(s,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!vn(e))throw new TypeError(bn(s,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Ct(e)} instances for symmetric algorithms must be of type "secret"`)}},al=(s,e,t)=>{if(Ns(e))switch(t){case"decrypt":case"sign":if(sl(e)&&Is(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(rl(e)&&Is(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!vn(e))throw new TypeError(bn(s,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Ct(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${Ct(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Ct(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${Ct(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Ct(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},cl=(s,e,t)=>{s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(s)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(s)?ol(s,e,t):al(s,e,t)},ul=(s,e)=>{const t=`SHA-${s.slice(-3)}`;switch(s){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(s.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new je(`alg ${s} is not supported either by JOSE or your javascript runtime`)}},dl=async(s,e,t)=>{if(e instanceof Uint8Array){if(!s.startsWith("HS"))throw new TypeError(Yn(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${s.slice(-3)}`,name:"HMAC"},!1,[t])}return Vn(e,s,t),e},it=s=>Math.floor(s.getTime()/1e3),Sn=60,kn=Sn*60,Ks=kn*24,fl=Ks*7,ml=Ks*365.25,pl=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Es=s=>{const e=pl.exec(s);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let n;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*Sn);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*kn);break;case"day":case"days":case"d":n=Math.round(t*Ks);break;case"week":case"weeks":case"w":n=Math.round(t*fl);break;default:n=Math.round(t*ml);break}return e[1]==="-"||e[4]==="ago"?-n:n};function ot(s,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${s} input`);return e}var de;class hl{constructor(e){Ge(this,de);if(!Os(e))throw new TypeError("JWT Claims Set MUST be an object");Ze(this,de,structuredClone(e))}data(){return Et.encode(JSON.stringify(Y(this,de)))}get iss(){return Y(this,de).iss}set iss(e){Y(this,de).iss=e}get sub(){return Y(this,de).sub}set sub(e){Y(this,de).sub=e}get aud(){return Y(this,de).aud}set aud(e){Y(this,de).aud=e}set jti(e){Y(this,de).jti=e}set nbf(e){typeof e=="number"?Y(this,de).nbf=ot("setNotBefore",e):e instanceof Date?Y(this,de).nbf=ot("setNotBefore",it(e)):Y(this,de).nbf=it(new Date)+Es(e)}set exp(e){typeof e=="number"?Y(this,de).exp=ot("setExpirationTime",e):e instanceof Date?Y(this,de).exp=ot("setExpirationTime",it(e)):Y(this,de).exp=it(new Date)+Es(e)}set iat(e){typeof e>"u"?Y(this,de).iat=it(new Date):e instanceof Date?Y(this,de).iat=ot("setIssuedAt",it(e)):typeof e=="string"?Y(this,de).iat=ot("setIssuedAt",it(new Date)+Es(e)):Y(this,de).iat=ot("setIssuedAt",e)}}de=new WeakMap;const gl=async(s,e,t)=>{const r=await dl(s,e,"sign");Qn(s,r);const n=await crypto.subtle.sign(ul(s,r.algorithm),r,t);return new Uint8Array(n)};var jt,ke,Be;class bl{constructor(e){Ge(this,jt);Ge(this,ke);Ge(this,Be);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Ze(this,jt,e)}setProtectedHeader(e){if(Y(this,ke))throw new TypeError("setProtectedHeader can only be called once");return Ze(this,ke,e),this}setUnprotectedHeader(e){if(Y(this,Be))throw new TypeError("setUnprotectedHeader can only be called once");return Ze(this,Be,e),this}async sign(e,t){if(!Y(this,ke)&&!Y(this,Be))throw new Lt("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Gn(Y(this,ke),Y(this,Be)))throw new Lt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...Y(this,ke),...Y(this,Be)},n=tl(Lt,new Map([["b64",!0]]),t==null?void 0:t.crit,Y(this,ke),r);let l=!0;if(n.has("b64")&&(l=Y(this,ke).b64,typeof l!="boolean"))throw new Lt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if(typeof o!="string"||!o)throw new Lt('JWS "alg" (Algorithm) Header Parameter missing or invalid');cl(o,e,"sign");let c=Y(this,jt);l&&(c=Et.encode(Cs(c)));let d;Y(this,ke)?d=Et.encode(Cs(JSON.stringify(Y(this,ke)))):d=Et.encode("");const a=Fn(d,Et.encode("."),c),m=await il(e,o),p=await gl(o,m,a),b={signature:Cs(p),payload:""};return l&&(b.payload=hs.decode(c)),Y(this,Be)&&(b.header=Y(this,Be)),Y(this,ke)&&(b.protected=hs.decode(d)),b}}jt=new WeakMap,ke=new WeakMap,Be=new WeakMap;var Pt;class yl{constructor(e){Ge(this,Pt);Ze(this,Pt,new bl(e))}setProtectedHeader(e){return Y(this,Pt).setProtectedHeader(e),this}async sign(e,t){const r=await Y(this,Pt).sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}Pt=new WeakMap;var Qe,Ae;class _l{constructor(e={}){Ge(this,Qe);Ge(this,Ae);Ze(this,Ae,new hl(e))}setIssuer(e){return Y(this,Ae).iss=e,this}setSubject(e){return Y(this,Ae).sub=e,this}setAudience(e){return Y(this,Ae).aud=e,this}setJti(e){return Y(this,Ae).jti=e,this}setNotBefore(e){return Y(this,Ae).nbf=e,this}setExpirationTime(e){return Y(this,Ae).exp=e,this}setIssuedAt(e){return Y(this,Ae).iat=e,this}setProtectedHeader(e){return Ze(this,Qe,e),this}async sign(e,t){var n;const r=new yl(Y(this,Ae).data());if(r.setProtectedHeader(Y(this,Qe)),Array.isArray((n=Y(this,Qe))==null?void 0:n.crit)&&Y(this,Qe).crit.includes("b64")&&Y(this,Qe).b64===!1)throw new hn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}Qe=new WeakMap,Ae=new WeakMap;const Rs="bluesky_oauth_session",Ln="bluesky_code_verifier",Cn="bluesky_oauth_state",An="bluesky_server_url";function vl(s=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const r=new Uint8Array(s);crypto.getRandomValues(r);for(let n=0;n<s;n++)t+=e[r[n]%e.length];return t}async function wl(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t);return Sl(r)}function Sl(s){return btoa(String.fromCharCode(...new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _r(){return await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"])}async function vr(s,e,t,r,n){try{const l=await crypto.subtle.exportKey("jwk",s.publicKey),o={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};r&&(o.nonce=r);const c=await el(await crypto.subtle.exportKey("jwk",s.privateKey),"ES256");return await new _l(o).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:l.kty,crv:l.crv,x:l.x,y:l.y}}).sign(c)}catch(l){throw console.error("Error creating DPoP JWT:",l),l}}async function kl(s="https://bsky.social"){try{const e=vl();localStorage.setItem(Ln,e);const t=await wl(e),r=crypto.randomUUID();localStorage.setItem(Cn,r),localStorage.setItem(An,s);const l=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5173/client-metadata.json":"https://bluesky-list-manager.vercel.app/client-metadata.json",o=`${window.location.origin}/oauth-callback.html`,c=new URL(`${s}/oauth/authorize`);c.searchParams.append("client_id",l),c.searchParams.append("response_type","code"),c.searchParams.append("redirect_uri",o),c.searchParams.append("scope","atproto transition:generic"),c.searchParams.append("state",r),c.searchParams.append("code_challenge",t),c.searchParams.append("code_challenge_method","S256"),window.location.href=c.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}function Ht(){const s=localStorage.getItem(Rs);if(s)try{return JSON.parse(s)}catch{localStorage.removeItem(Rs)}return null}function wr(){localStorage.removeItem(Rs),localStorage.removeItem(Ln),localStorage.removeItem(Cn),localStorage.removeItem(An)}const Se={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},At={OAUTH:"oauth",APP_PASSWORD:"app_password"};function Ll(){const{subscribe:s,set:e,update:t}=mn({session:null,authType:null,isLoading:!1,error:null});return{subscribe:s,setSession:(r,n=At.APP_PASSWORD)=>{r?(localStorage.setItem(Se.SESSION,JSON.stringify(r)),localStorage.setItem(Se.AUTH_TYPE,n)):(localStorage.removeItem(Se.SESSION),localStorage.removeItem(Se.AUTH_TYPE)),e({session:r,authType:n,isLoading:!1,error:null})},setLoading:r=>{t(n=>({...n,isLoading:r}))},setError:r=>{t(n=>({...n,error:r,isLoading:!1}))},getSession:()=>{const r=localStorage.getItem(Se.SESSION),n=localStorage.getItem(Se.AUTH_TYPE)||At.APP_PASSWORD;if(r)try{return{session:JSON.parse(r),authType:n}}catch{localStorage.removeItem(Se.SESSION),localStorage.removeItem(Se.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(Se.SESSION),localStorage.removeItem(Se.AUTH_TYPE),wr(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(Se.SESSION),localStorage.removeItem(Se.AUTH_TYPE),wr(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:()=>{const r=Ht();if(r&&r.accessToken){const o={accessJwt:r.accessToken,refreshJwt:r.refreshToken,handle:r.sub,did:r.sub,email:null};return e({session:o,authType:At.OAUTH,isLoading:!1,error:null}),{session:o,authType:At.OAUTH}}const{session:n,authType:l}=$e.getSession();return n?(e({session:n,authType:l,isLoading:!1,error:null}),{session:n,authType:l}):{session:null,authType:null}},isOAuthSession:()=>localStorage.getItem(Se.AUTH_TYPE)===At.OAUTH}}const $e=Ll(),ms="https://bsky.social/xrpc";class Cl{async signIn(e,t){const r=await fetch(`${ms}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to sign in")}return await r.json()}async getAuthHeaders(e,t="app_password"){if(t==="oauth"){const r=Ht();if(!r||!r.accessToken)throw new Error("No OAuth session found");const n=await _r(),l=await vr(n,"GET",`${ms}/app.bsky.graph.getLists`,r.serverNonce);return{Authorization:`Bearer ${r.accessToken}`,DPoP:l,"Content-Type":"application/json"}}else return{Authorization:`Bearer ${e.accessJwt}`,"Content-Type":"application/json"}}async makeBlueskyRequest(e,t,r="app_password",n="GET",l=null){const o=await this.getAuthHeaders(t,r);if(r==="oauth"&&o.DPoP){const a=Ht(),m=await _r(),p=await vr(m,n,`${ms}/${e}`,a.serverNonce);o.DPoP=p}const c={method:n,headers:o};l&&n!=="GET"&&(c.body=JSON.stringify(l));const d=await fetch(`${ms}/${e}`,c);if(!d.ok){const a=await d.json();throw new Error(a.message||`Failed to fetch from ${e}`)}return await d.json()}async getUserLists(e,t="app_password"){if(t==="oauth"){const r=Ht();if(!r.sub)throw new Error("No user DID found in OAuth session");const l=(await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${r.sub}`,e,t)).handle;return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${l}`,e,t)).lists||[]}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${e.handle}`,e,t)).lists||[]}async getListInfo(e,t,r="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,r)).list}async getListMembers(e,t,r="app_password",n=25,l=null){var p;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const c=await this.makeBlueskyRequest(o,e,r),d=c.items||[],a=d.map(b=>b.subject.did),m=d.map(b=>b.subject);return{members:a,profiles:m,cursor:c.cursor,totalCount:((p=c.list)==null?void 0:p.listItemCount)||0}}async getListMembersCount(e,t,r="app_password"){return(await this.getListInfo(e,t,r)).listItemCount||0}async getProfiles(e,t,r="app_password"){if(!t||t.length===0)return[];const n=[];for(const l of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(l)}`,e,r);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${l}:`,o),n.push({did:l,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,r="app_password",n=25,l=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const c=await this.makeBlueskyRequest(o,e,r);return{actors:c.actors||[],cursor:c.cursor}}async addToList(e,t,r,n="app_password"){let l;return n==="oauth"?l=Ht().sub:l=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:r,createdAt:new Date().toISOString()}})}async resolveHandle(e,t,r="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,r)).did}}const Ue=new Cl,Ce={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Al(){const{subscribe:s,update:e}=mn({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1;return{subscribe:s,setSelectedList:r=>{r?localStorage.setItem(Ce.SELECTED_LIST,JSON.stringify(r)):localStorage.removeItem(Ce.SELECTED_LIST),e(n=>({...n,selectedList:r,isLoadingList:!!r,listMembers:[],listMemberProfiles:[]}))},setListLoading:r=>{e(n=>({...n,isLoadingList:r}))},setUserLists:r=>{localStorage.setItem(Ce.LISTS,JSON.stringify(r)),e(n=>({...n,userLists:r}))},setListMembers:r=>{e(n=>({...n,listMembers:r}))},isProfileInCurrentList:r=>{let n=!1;return e(l=>(n=l.listMembers.includes(r),l)),n},setListMemberProfiles:r=>{e(n=>({...n,listMemberProfiles:r}))},addProfileToList:r=>{e(n=>{const l=n.listMembers.includes(r)?n.listMembers:[r,...n.listMembers];return{...n,listMembers:l}})},addProfileToDisplay:r=>{e(n=>{if(n.listMembers.indexOf(r.did)<25){const o=[r,...n.listMemberProfiles];return{...n,listMemberProfiles:o.slice(0,25)}}return n})},fetchAndAddProfile:(r,n,l="app_password")=>t?Promise.resolve():(t=!0,new Promise(async o=>{try{const c=await Ue.getProfiles(r,[n],l);if(c.length>0){const d=c[0];e(a=>{const m=a.listMembers.includes(n)?a.listMembers:[n,...a.listMembers];if(m.indexOf(n)<25){const b=a.listMemberProfiles.filter(_=>_.did!==n),g=[d,...b];return{...a,listMembers:m,listMemberProfiles:g.slice(0,25)}}return{...a,listMembers:m}}),e(a=>{console.log("Updating member count for DID:",n),console.log("Current selectedList:",a.selectedList),console.log("Current userLists:",a.userLists),console.log("Incrementing member count for successfully added profile");const m=a.selectedList?{...a.selectedList,listItemCount:(a.selectedList.listItemCount||0)+1}:null,p=a.userLists.map(b=>{var g;return b.uri===((g=a.selectedList)==null?void 0:g.uri)?{...b,memberCount:(b.memberCount||0)+1}:b});return console.log("Updated selectedList:",m),console.log("Updated userLists:",p),m&&localStorage.setItem(Ce.SELECTED_LIST,JSON.stringify(m)),localStorage.setItem(Ce.LISTS,JSON.stringify(p)),{...a,selectedList:m,userLists:p}})}}catch(c){console.error("Failed to fetch profile data:",c),e(d=>{const a=d.listMembers.includes(n)?d.listMembers:[n,...d.listMembers];return{...d,listMembers:a}}),e(d=>{console.log("Updating member count for DID (error case):",n),console.log("Incrementing member count for profile (error case)");const a=d.selectedList?{...d.selectedList,listItemCount:(d.selectedList.listItemCount||0)+1}:null,m=d.userLists.map(p=>{var b;return p.uri===((b=d.selectedList)==null?void 0:b.uri)?{...p,memberCount:(p.memberCount||0)+1}:p});return a&&localStorage.setItem(Ce.SELECTED_LIST,JSON.stringify(a)),localStorage.setItem(Ce.LISTS,JSON.stringify(m)),{...d,selectedList:a,userLists:m}})}finally{t=!1}o()})),refreshListMembers:()=>{e(r=>({...r,refreshTrigger:Date.now()}))},setLoading:r=>{e(n=>({...n,isLoading:r}))},setError:r=>{e(n=>({...n,error:r,isLoading:!1}))},getSelectedList:()=>{const r=localStorage.getItem(Ce.SELECTED_LIST);if(r)try{return JSON.parse(r)}catch{localStorage.removeItem(Ce.SELECTED_LIST)}return null},getUserLists:()=>{const r=localStorage.getItem(Ce.LISTS);if(r)try{return JSON.parse(r)}catch{localStorage.removeItem(Ce.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(Ce.SELECTED_LIST),e(r=>({...r,selectedList:null}))}}}const pe=Al();function El(s){let e,t,r,n,l,o,c,d,a,m,p,b,g;return{c(){e=f("div"),t=f("label"),t.textContent="Handle",r=v(),n=f("input"),l=v(),o=f("div"),c=f("label"),c.textContent="App Password",d=v(),a=f("input"),m=v(),p=f("p"),p.textContent="Use an app password, not your main account password",u(t,"for","handle"),u(t,"class","block text-sm font-medium text-gray-700 mb-1"),u(n,"id","handle"),u(n,"type","text"),u(n,"placeholder","your-handle.bsky.social"),u(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,u(c,"for","password"),u(c,"class","block text-sm font-medium text-gray-700 mb-1"),u(a,"id","password"),u(a,"type","password"),u(a,"placeholder","Your app password"),u(a,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a.required=!0,u(p,"class","text-xs text-gray-500 mt-1")},m(_,w){E(_,e,w),i(e,t),i(e,r),i(e,n),Le(n,s[0]),E(_,l,w),E(_,o,w),i(o,c),i(o,d),i(o,a),Le(a,s[1]),i(o,m),i(o,p),b||(g=[se(n,"input",s[11]),se(a,"input",s[12])],b=!0)},p(_,w){w&1&&n.value!==_[0]&&Le(n,_[0]),w&2&&a.value!==_[1]&&Le(a,_[1])},d(_){_&&(C(e),C(l),C(o)),b=!1,Ie(g)}}}function Ml(s){let e;return{c(){e=f("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,u(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Sr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=k(s[3]),u(t,"class","text-red-700 text-sm"),u(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,l){E(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&$(r,n[3])},d(n){n&&C(e)}}}function xl(s){let e;return{c(){e=k("Sign In")},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Pl(s){let e;return{c(){e=k("Sign in with Bluesky")},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Tl(s){let e,t,r;function n(c,d){return c[4]==="oauth"?Rl:Il}let l=n(s),o=l(s);return{c(){e=f("span"),t=v(),o.c(),r=et(),u(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(c,d){E(c,e,d),E(c,t,d),o.m(c,d),E(c,r,d)},p(c,d){l!==(l=n(c))&&(o.d(1),o=l(c),o&&(o.c(),o.m(r.parentNode,r)))},d(c){c&&(C(e),C(t),C(r)),o.d(c)}}}function Il(s){let e;return{c(){e=k("Signing in...")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function Rl(s){let e;return{c(){e=k("Connecting...")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function Ol(s){let e,t,r,n,l,o,c,d,a,m,p,b,g,_,w,A,O,M,U,I,P,L,B,R,K,S,F,N,q,D,G,ee,ue,oe,re;function y(J,z){return J[4]==="oauth"?Ml:El}let h=y(s),W=h(s),H=s[3]&&Sr(s);function x(J,z){return J[2]?Tl:J[4]==="oauth"?Pl:xl}let T=x(s),j=T(s);return ue=Rn(s[9][0]),{c(){e=f("div"),t=f("button"),r=v(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Sign in to Bluesky",c=v(),d=f("button"),d.textContent="√ó",a=v(),m=f("form"),p=f("div"),b=f("div"),g=f("fieldset"),_=f("legend"),_.textContent="Sign in with:",w=v(),A=f("div"),O=f("label"),M=f("input"),U=v(),I=f("span"),I.textContent="OAuth (Coming Soon)",P=v(),L=f("label"),B=f("input"),R=v(),K=f("span"),K.textContent="App Password (Recommended)",S=v(),W.c(),F=v(),H&&H.c(),N=v(),q=f("div"),D=f("button"),D.textContent="Cancel",G=v(),ee=f("button"),j.c(),u(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),u(t,"aria-label","Close modal"),u(t,"type","button"),u(o,"class","text-xl font-semibold text-slate-800"),u(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),u(l,"class","flex items-center justify-between mb-4"),u(_,"class","block text-sm font-medium text-gray-700 mb-2"),u(M,"type","radio"),M.__value="oauth",Le(M,M.__value),u(M,"class","mr-2"),M.disabled=!0,u(I,"class","text-sm"),u(O,"class","flex items-center opacity-50 cursor-not-allowed"),u(B,"type","radio"),B.__value="app_password",Le(B,B.__value),u(B,"class","mr-2"),u(K,"class","text-sm"),u(L,"class","flex items-center"),u(A,"class","space-y-2"),u(D,"type","button"),u(D,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),u(ee,"type","submit"),ee.disabled=s[2],u(ee,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),u(q,"class","flex space-x-3 pt-2"),u(p,"class","space-y-4"),u(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),u(n,"role","document"),u(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),u(e,"role","dialog"),u(e,"aria-modal","true"),u(e,"tabindex","-1"),ue.p(M,B)},m(J,z){E(J,e,z),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,c),i(l,d),i(n,a),i(n,m),i(m,p),i(p,b),i(b,g),i(g,_),i(g,w),i(g,A),i(A,O),i(O,M),M.checked=M.__value===s[4],i(O,U),i(O,I),i(A,P),i(A,L),i(L,B),B.checked=B.__value===s[4],i(L,R),i(L,K),i(p,S),W.m(p,null),i(p,F),H&&H.m(p,null),i(p,N),i(p,q),i(q,D),i(q,G),i(q,ee),j.m(ee,null),oe||(re=[se(t,"click",s[7]),se(d,"click",s[6]),se(M,"change",s[8]),se(B,"change",s[10]),se(D,"click",s[6]),se(m,"submit",cn(s[5])),se(e,"keydown",s[13])],oe=!0)},p(J,[z]){z&16&&(M.checked=M.__value===J[4]),z&16&&(B.checked=B.__value===J[4]),h===(h=y(J))&&W?W.p(J,z):(W.d(1),W=h(J),W&&(W.c(),W.m(p,F))),J[3]?H?H.p(J,z):(H=Sr(J),H.c(),H.m(p,N)):H&&(H.d(1),H=null),T===(T=x(J))&&j?j.p(J,z):(j.d(1),j=T(J),j&&(j.c(),j.m(ee,null))),z&4&&(ee.disabled=J[2])},i:Q,o:Q,d(J){J&&C(e),W.d(),H&&H.d(),j.d(),ue.r(),oe=!1,Ie(re)}}}function Nl(s,e,t){const r=Kn();let n="",l="",o=!1,c="",d="app_password";async function a(){t(2,o=!0),t(3,c="");try{await kl()}catch(I){t(3,c=I.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function m(){if(!n||!l){t(3,c="Please enter both handle and password");return}t(2,o=!0),t(3,c="");try{const I=await Ue.signIn(n,l);$e.setSession(I,At.APP_PASSWORD),r("close")}catch(I){t(3,c=I.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function p(){d==="oauth"?await a():await m()}function b(){r("close")}function g(){b()}const _=[[]];function w(){d=this.__value,t(4,d)}function A(){d=this.__value,t(4,d)}function O(){n=this.value,t(0,n)}function M(){l=this.value,t(1,l)}return[n,l,o,c,d,p,b,g,w,_,A,O,M,I=>I.key==="Escape"&&b()]}class En extends Je{constructor(e){super(),He(this,e,Nl,Ol,Re,{})}}const Kl=!0,Ds={staticBase:"static",isDevelopment:!1,isProduction:Kl,buildTime:new Date().toISOString(),getAssetPath:s=>`./${s.replace("static/","")}`};function kr(s,e,t){const r=s.slice();return r[10]=e[t],r}function Dl(s){let e,t,r;return{c(){e=f("button"),e.textContent="üîê Sign in with Bluesky",u(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200")},m(n,l){E(n,e,l),t||(r=se(e,"click",s[6]),t=!0)},p:Q,d(n){n&&C(e),t=!1,r()}}}function Bl(s){let e,t,r,n,l,o,c,d,a,m,p,b=s[1].session.handle+"",g,_,w,A,O;function M(L,B){return L[3]?Hl:L[4]?Wl:Ul}let U=M(s),I=U(s),P=s[3]&&Cr();return{c(){e=f("div"),t=f("label"),t.textContent="List:",r=v(),n=f("select"),l=f("option"),l.textContent="Select a list...",I.c(),c=v(),P&&P.c(),d=v(),a=f("div"),m=f("div"),p=k("@"),g=k(b),_=v(),w=f("button"),w.textContent="Sign out",u(t,"for","list-selector"),u(t,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),l.__value="",Le(l,l.__value),u(n,"id","list-selector"),n.disabled=s[3],u(n,"class","bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm w-64 text-slate-800 focus:border-slate-500 focus:ring-1 focus:ring-slate-500 disabled:opacity-50 disabled:cursor-not-allowed"),u(e,"class","flex items-center space-x-3"),u(m,"class","text-sm text-slate-700"),u(w,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),u(a,"class","text-right")},m(L,B){var R;E(L,e,B),i(e,t),i(e,r),i(e,n),i(n,l),I.m(n,null),hr(n,((R=s[0].selectedList)==null?void 0:R.uri)||""),i(e,c),P&&P.m(e,null),E(L,d,B),E(L,a,B),i(a,m),i(m,p),i(m,g),i(a,_),i(a,w),A||(O=[se(n,"change",s[5]),se(w,"click",s[8])],A=!0)},p(L,B){var R,K;U===(U=M(L))&&I?I.p(L,B):(I.d(1),I=U(L),I&&(I.c(),I.m(n,null))),B&1&&o!==(o=((R=L[0].selectedList)==null?void 0:R.uri)||"")&&hr(n,((K=L[0].selectedList)==null?void 0:K.uri)||""),B&8&&(n.disabled=L[3]),L[3]?P||(P=Cr(),P.c(),P.m(e,null)):P&&(P.d(1),P=null),B&2&&b!==(b=L[1].session.handle+"")&&$(g,b)},d(L){L&&(C(e),C(d),C(a)),I.d(),P&&P.d(),A=!1,Ie(O)}}}function Ul(s){let e,t=ge(s[0].userLists),r=[];for(let n=0;n<t.length;n+=1)r[n]=Lr(kr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=et()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);E(n,e,l)},p(n,l){if(l&1){t=ge(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const c=kr(n,t,o);r[o]?r[o].p(c,l):(r[o]=Lr(c),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&C(e),Xe(r,n)}}}function Wl(s){let e;return{c(){e=f("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",Le(e,e.__value)},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Hl(s){let e;return{c(){e=f("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",Le(e,e.__value)},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Lr(s){let e,t=s[10].name+"",r,n,l=s[10].memberCount.toLocaleString()+"",o,c,d;return{c(){e=f("option"),r=k(t),n=k(" ("),o=k(l),c=k(` members)
									`),e.__value=d=s[10].uri,Le(e,e.__value)},m(a,m){E(a,e,m),i(e,r),i(e,n),i(e,o),i(e,c)},p(a,m){m&1&&t!==(t=a[10].name+"")&&$(r,t),m&1&&l!==(l=a[10].memberCount.toLocaleString()+"")&&$(o,l),m&1&&d!==(d=a[10].uri)&&(e.__value=d,Le(e,e.__value))},d(a){a&&C(e)}}}function Cr(s){let e;return{c(){e=f("div"),u(e,"class","loading-spinner svelte-1myfg8v")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function Ar(s){let e,t;return e=new En({}),e.$on("close",s[7]),{c(){We(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p:Q,i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Jl(s){let e,t,r,n,l,o,c,d,a;function m(_,w){return _[1].session?Bl:Dl}let p=m(s),b=p(s),g=s[2]&&Ar(s);return{c(){e=f("header"),t=f("div"),r=f("div"),n=f("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${Ds.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,l=v(),o=f("div"),b.c(),c=v(),g&&g.c(),d=et(),u(o,"class","flex items-center space-x-4"),u(r,"class","flex items-center justify-between mb-4"),u(t,"class","max-w-6xl mx-auto px-6 py-4"),u(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50")},m(_,w){E(_,e,w),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),b.m(o,null),E(_,c,w),g&&g.m(_,w),E(_,d,w),a=!0},p(_,[w]){p===(p=m(_))&&b?b.p(_,w):(b.d(1),b=p(_),b&&(b.c(),b.m(o,null))),_[2]?g?(g.p(_,w),w&4&&le(g,1)):(g=Ar(_),g.c(),le(g,1),g.m(d.parentNode,d)):g&&(It(),fe(g,1,1,()=>{g=null}),Rt())},i(_){a||(le(g),a=!0)},o(_){fe(g),a=!1},d(_){_&&(C(e),C(c),C(d)),b.d(),g&&g.d(_)}}}function Fl(s,e,t){let r,n;xe(s,pe,g=>t(0,r=g)),xe(s,$e,g=>t(1,n=g));let l=!1,o=!1,c="";dn(async()=>{n.session&&await d()});async function d(){if(n.session){t(3,o=!0),t(4,c="");try{const _=(await Ue.getUserLists(n.session,n.authType)).map(w=>({uri:w.uri,name:w.name,description:w.description||"",purpose:w.purpose||"app.bsky.graph.defs#modlist",createdAt:w.createdAt,memberCount:w.listItemCount||0})).sort((w,A)=>new Date(A.createdAt)-new Date(w.createdAt));pe.setUserLists(_)}catch(g){t(4,c=g.message||"Failed to load your lists")}finally{t(3,o=!1)}}}function a(g){const _=g.target.value;if(_){const w=r.userLists.find(A=>A.uri===_);w&&pe.setSelectedList(w)}else pe.setSelectedList(null)}function m(){t(2,l=!0)}function p(){t(2,l=!1)}function b(){$e.signOut(),pe.setSelectedList(null)}return s.$$.update=()=>{s.$$.dirty&3&&n.session&&r.userLists.length===0&&d(),s.$$.dirty&1&&r.userLists.length>0&&console.log("Header: userLists updated:",r.userLists)},[r,n,l,o,c,a,m,p,b]}class jl extends Je{constructor(e){super(),He(this,e,Fl,Jl,Re,{})}}function Er(s){let e,t;return e=new En({}),e.$on("close",s[2]),{c(){We(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p:Q,i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function $l(s){let e,t,r,n,l,o,c,d,a,m,p,b,g,_,w,A=s[0]&&Er(s);return{c(){e=f("div"),t=f("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${Ds.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-3xl font-bold text-slate-800 mb-4">Welcome to Bluesky List Manager</h2> <p class="text-lg text-slate-600 mb-6">Find and manage profiles in your Bluesky lists with ease.</p>`,r=v(),n=f("div"),l=f("div"),l.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-3">üîç What you can do:</h3> <ul class="space-y-2 text-blue-700"><li class="flex items-start"><span class="text-blue-500 mr-2">‚Ä¢</span> <span><strong>Search profiles</strong> by keywords in their bio, display name, or handle</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">‚Ä¢</span> <span><strong>Check if profiles</strong> are already in your selected list</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">‚Ä¢</span> <span><strong>Add multiple profiles</strong> to your lists with one click</span></li> <li class="flex items-start"><span class="text-blue-500 mr-2">‚Ä¢</span> <span><strong>View and manage</strong> your existing list members</span></li></ul>',o=v(),c=f("div"),c.innerHTML=`<h3 class="text-lg font-semibold text-green-800 mb-3">üîê Privacy &amp; Security</h3> <p class="text-green-700 mb-3">This app is a client-side application. Your Bluesky credentials are stored locally in your
				browser and are never sent to our servers. We only communicate directly with Bluesky&#39;s API
				using your authentication token.</p> <p class="text-sm text-green-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code
				(and contribute!) on
				<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-green-600 hover:text-green-700 underline">GitHub</a>.</p>`,d=v(),a=f("div"),m=f("button"),m.textContent="üîê Get Started - Sign in with Bluesky",p=v(),A&&A.c(),b=et(),u(t,"class","text-center mb-8"),u(l,"class","bg-blue-50 p-6 rounded-lg border border-blue-200"),u(c,"class","bg-green-50 p-6 rounded-lg border border-green-200"),u(m,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-8 py-3 rounded-lg text-lg font-medium cursor-pointer transition-colors duration-200"),u(a,"class","text-center"),u(n,"class","space-y-6"),u(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-2xl mx-auto")},m(O,M){E(O,e,M),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,c),i(n,d),i(n,a),i(a,m),E(O,p,M),A&&A.m(O,M),E(O,b,M),g=!0,_||(w=se(m,"click",s[1]),_=!0)},p(O,[M]){O[0]?A?(A.p(O,M),M&1&&le(A,1)):(A=Er(O),A.c(),le(A,1),A.m(b.parentNode,b)):A&&(It(),fe(A,1,1,()=>{A=null}),Rt())},i(O){g||(le(A),g=!0)},o(O){fe(A),g=!1},d(O){O&&(C(e),C(p),C(b)),A&&A.d(O),_=!1,w()}}}function zl(s,e,t){let r=!1;function n(){t(0,r=!0)}function l(){t(0,r=!1)}return[r,n,l]}class ql extends Je{constructor(e){super(),He(this,e,zl,$l,Re,{})}}function Vl(s){let e,t,r;return{c(){e=f("h3"),e.textContent="Select a List",t=v(),r=f("p"),r.textContent="Choose a list from the dropdown above to get started.",u(e,"class","text-lg font-semibold text-slate-800 mb-2"),u(r,"class","text-slate-600")},m(n,l){E(n,e,l),E(n,t,l),E(n,r,l)},d(n){n&&(C(e),C(t),C(r))}}}function Yl(s){let e,t,r;return{c(){e=f("h3"),e.textContent="No Lists Found",t=v(),r=f("p"),r.textContent="You don't have any lists yet. Create a list on Bluesky first!",u(e,"class","text-lg font-semibold text-slate-800 mb-2"),u(r,"class","text-slate-600")},m(n,l){E(n,e,l),E(n,t,l),E(n,r,l)},d(n){n&&(C(e),C(t),C(r))}}}function Gl(s){let e,t,r,n,l,o,c;function d(p,b){return p[0].userLists.length===0?Yl:Vl}let a=d(s),m=a(s);return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=v(),l=f("div"),o=f("div"),o.innerHTML=`<img src="${Ds.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,c=v(),m.c(),u(r,"class","text-center mb-8"),u(o,"class","text-4xl mb-4"),u(l,"class","text-center py-12"),u(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),u(e,"class","max-w-4xl mx-auto")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,c),m.m(l,null)},p(p,[b]){a!==(a=d(p))&&(m.d(1),m=a(p),m&&(m.c(),m.m(l,null)))},i:Q,o:Q,d(p){p&&C(e),m.d()}}}function Zl(s,e,t){let r;return xe(s,pe,n=>t(0,r=n)),[r]}class Ql extends Je{constructor(e){super(),He(this,e,Zl,Gl,Re,{})}}function Xl(s){let e,t,r,n,l,o,c,d,a,m,p,b=(s[0].displayName||s[0].handle)+"",g,_,w,A,O=s[0].handle+"",M,U,I,P=s[0].description&&Mr(s);function L(K,S){if(K[3]==="Already in list")return ri;if(K[3]==="New candidate")return si;if(K[2])return ti}let B=L(s),R=B&&B(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),d=v(),a=f("div"),m=f("div"),p=f("h3"),g=k(b),_=v(),w=f("span"),A=k("@"),M=k(O),U=v(),P&&P.c(),I=v(),R&&R.c(),Tt(n.src,l=gs(s[0]))||u(n,"src",l),u(n,"alt",o=s[0].displayName||s[0].handle),u(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),u(n,"onerror",c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),u(r,"class","flex-shrink-0"),u(p,"class","text-base font-semibold text-gray-900 truncate"),u(w,"class","text-sm text-gray-600 truncate"),u(m,"class","flex items-center space-x-2 mb-1"),u(a,"class","flex-1 min-w-0"),u(t,"class","flex items-start space-x-3"),u(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200")},m(K,S){E(K,e,S),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,m),i(m,p),i(p,g),i(m,_),i(m,w),i(w,A),i(w,M),i(a,U),P&&P.m(a,null),i(a,I),R&&R.m(a,null)},p(K,S){S&1&&!Tt(n.src,l=gs(K[0]))&&u(n,"src",l),S&1&&o!==(o=K[0].displayName||K[0].handle)&&u(n,"alt",o),S&1&&c!==(c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(K[0].displayName||K[0].handle)+"&background=6366f1&color=fff&size=64'")&&u(n,"onerror",c),S&1&&b!==(b=(K[0].displayName||K[0].handle)+"")&&$(g,b),S&1&&O!==(O=K[0].handle+"")&&$(M,O),K[0].description?P?P.p(K,S):(P=Mr(K),P.c(),P.m(a,I)):P&&(P.d(1),P=null),B===(B=L(K))&&R?R.p(K,S):(R&&R.d(1),R=B&&B(K),R&&(R.c(),R.m(a,null)))},d(K){K&&C(e),P&&P.d(),R&&R.d()}}}function ei(s){let e,t,r,n,l,o,c,d,a,m,p,b=(s[0].displayName||s[0].handle)+"",g,_,w,A,O=s[0].handle+"",M,U,I,P,L,B,R,K,S=s[0].description&&xr(s);function F(D,G){if(D[3]==="Already in list")return ai;if(D[3]==="New candidate")return oi;if(D[2])return ii}let N=F(s),q=N&&N(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),d=v(),a=f("div"),m=f("div"),p=f("h3"),g=k(b),_=v(),w=f("span"),A=k("@"),M=k(O),U=v(),S&&S.c(),I=v(),q&&q.c(),P=v(),L=f("div"),L.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',Tt(n.src,l=gs(s[0]))||u(n,"src",l),u(n,"alt",o=s[0].displayName||s[0].handle),u(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),u(n,"onerror",c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),u(r,"class","flex-shrink-0"),u(p,"class","text-base font-semibold text-gray-900 truncate"),u(w,"class","text-sm text-gray-600 truncate"),u(m,"class","flex items-center space-x-2 mb-1"),u(a,"class","flex-1 min-w-0"),u(L,"class","flex-shrink-0"),u(t,"class","flex items-start space-x-3"),u(e,"href",B="https://bsky.app/profile/"+s[0].handle),u(e,"target","_blank"),u(e,"rel","noopener noreferrer"),u(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200")},m(D,G){E(D,e,G),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,m),i(m,p),i(p,g),i(m,_),i(m,w),i(w,A),i(w,M),i(a,U),S&&S.m(a,null),i(a,I),q&&q.m(a,null),i(t,P),i(t,L),R||(K=se(e,"click",s[8]),R=!0)},p(D,G){G&1&&!Tt(n.src,l=gs(D[0]))&&u(n,"src",l),G&1&&o!==(o=D[0].displayName||D[0].handle)&&u(n,"alt",o),G&1&&c!==(c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(D[0].displayName||D[0].handle)+"&background=6366f1&color=fff&size=64'")&&u(n,"onerror",c),G&1&&b!==(b=(D[0].displayName||D[0].handle)+"")&&$(g,b),G&1&&O!==(O=D[0].handle+"")&&$(M,O),D[0].description?S?S.p(D,G):(S=xr(D),S.c(),S.m(a,I)):S&&(S.d(1),S=null),N===(N=F(D))&&q?q.p(D,G):(q&&q.d(1),q=N&&N(D),q&&(q.c(),q.m(a,null))),G&1&&B!==(B="https://bsky.app/profile/"+D[0].handle)&&u(e,"href",B)},d(D){D&&C(e),S&&S.d(),q&&q.d(),R=!1,K()}}}function Mr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=k(t),u(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){E(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&$(r,t)},d(n){n&&C(e)}}}function ti(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=v(),n=f("span"),n.textContent="Select to add to list",u(t,"type","checkbox"),t.checked=s[1],u(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),u(n,"class","text-sm text-gray-600"),u(e,"class","flex items-center space-x-2")},m(c,d){E(c,e,d),i(e,t),i(e,r),i(e,n),l||(o=se(t,"change",s[6]),l=!0)},p(c,d){d&2&&(t.checked=c[1])},d(c){c&&C(e),l=!1,o()}}}function si(s){let e,t,r,n,l,o,c;function d(p,b){return p[5]?li:ni}let a=d(s),m=a(s);return{c(){e=f("div"),t=f("span"),r=k(s[3]),n=v(),l=f("button"),m.c(),u(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],u(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),u(e,"class","flex items-center space-x-2")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(c=se(l,"click",s[7]),o=!0)},p(p,b){b&8&&$(r,p[3]),a!==(a=d(p))&&(m.d(1),m=a(p),m&&(m.c(),m.m(l,null))),b&32&&(l.disabled=p[5])},d(p){p&&C(e),m.d(),o=!1,c()}}}function ri(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=k(s[3]),u(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),u(e,"class","flex items-center space-x-2")},m(n,l){E(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&$(r,n[3])},d(n){n&&C(e)}}}function ni(s){let e;return{c(){e=k("Add to list")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function li(s){let e,t;return{c(){e=f("span"),t=k(`
                Adding...`),u(e,"class","loading-spinner mr-1")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(C(e),C(t))}}}function xr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=k(t),u(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){E(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&$(r,t)},d(n){n&&C(e)}}}function ii(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=v(),n=f("span"),n.textContent="Select to add to list",u(t,"type","checkbox"),t.checked=s[1],u(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),u(n,"class","text-sm text-gray-600"),u(e,"class","flex items-center space-x-2")},m(c,d){E(c,e,d),i(e,t),i(e,r),i(e,n),l||(o=se(t,"change",s[6]),l=!0)},p(c,d){d&2&&(t.checked=c[1])},d(c){c&&C(e),l=!1,o()}}}function oi(s){let e,t,r,n,l,o,c;function d(p,b){return p[5]?ui:ci}let a=d(s),m=a(s);return{c(){e=f("div"),t=f("span"),r=k(s[3]),n=v(),l=f("button"),m.c(),u(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],u(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),u(e,"class","flex items-center space-x-2")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(c=se(l,"click",s[7]),o=!0)},p(p,b){b&8&&$(r,p[3]),a!==(a=d(p))&&(m.d(1),m=a(p),m&&(m.c(),m.m(l,null))),b&32&&(l.disabled=p[5])},d(p){p&&C(e),m.d(),o=!1,c()}}}function ai(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=k(s[3]),u(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),u(e,"class","flex items-center space-x-2")},m(n,l){E(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&$(r,n[3])},d(n){n&&C(e)}}}function ci(s){let e;return{c(){e=k("Add to list")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function ui(s){let e,t;return{c(){e=f("span"),t=k(`
                Adding...`),u(e,"class","loading-spinner mr-1")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(C(e),C(t))}}}function di(s){let e;function t(l,o){return l[4]?ei:Xl}let r=t(s),n=r(s);return{c(){n.c(),e=et()},m(l,o){n.m(l,o),E(l,e,o)},p(l,[o]){r===(r=t(l))&&n?n.p(l,o):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(l){l&&C(e),n.d(l)}}}function gs(s){return s.avatar?s.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName||s.handle)}&background=6366f1&color=fff&size=64`}function fi(s,e,t){let{profile:r}=e,{isSelected:n=!1}=e,{onSelect:l=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:c=null}=e,{clickable:d=!1}=e,{onAddToList:a=()=>{}}=e,{isAddingToList:m=!1}=e;function p(){l(r)}function b(_){_.preventDefault(),_.stopPropagation(),a(r)}function g(_){d&&!o||d&&o&&(_.target.type==="checkbox"||_.target.closest('input[type="checkbox"]'))&&(_.preventDefault(),_.stopPropagation())}return s.$$set=_=>{"profile"in _&&t(0,r=_.profile),"isSelected"in _&&t(1,n=_.isSelected),"onSelect"in _&&t(9,l=_.onSelect),"showCheckbox"in _&&t(2,o=_.showCheckbox),"statusTag"in _&&t(3,c=_.statusTag),"clickable"in _&&t(4,d=_.clickable),"onAddToList"in _&&t(10,a=_.onAddToList),"isAddingToList"in _&&t(5,m=_.isAddingToList)},[r,n,o,c,d,m,p,b,g,l,a]}class mi extends Je{constructor(e){super(),He(this,e,fi,di,Re,{profile:0,isSelected:1,onSelect:9,showCheckbox:2,statusTag:3,clickable:4,onAddToList:10,isAddingToList:5})}}var $t={};(function s(e,t,r,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!e.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),h=y.getContext("2d");h.fillRect(0,0,1,1);var W=y.transferToImageBitmap();try{h.createPattern(W,"no-repeat")}catch{return!1}return!0}();function d(){}function a(y){var h=t.exports.Promise,W=h!==void 0?h:e.Promise;return typeof W=="function"?new W(y):(y(d,d),null)}var m=function(y,h){return{transform:function(W){if(y)return W;if(h.has(W))return h.get(W);var H=new OffscreenCanvas(W.width,W.height),x=H.getContext("2d");return x.drawImage(W,0,0),h.set(W,H),H},clear:function(){h.clear()}}}(c,new Map),p=function(){var y=Math.floor(16.666666666666668),h,W,H={},x=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(T){var j=Math.random();return H[j]=requestAnimationFrame(function J(z){x===z||x+y-1<z?(x=z,delete H[j],T()):H[j]=requestAnimationFrame(J)}),j},W=function(T){H[T]&&cancelAnimationFrame(H[T])}):(h=function(T){return setTimeout(T,y)},W=function(T){return clearTimeout(T)}),{frame:h,cancel:W}}(),b=function(){var y,h,W={};function H(x){function T(j,J){x.postMessage({options:j||{},callback:J})}x.init=function(J){var z=J.transferControlToOffscreen();x.postMessage({canvas:z},[z])},x.fire=function(J,z,X){if(h)return T(J,null),h;var ie=Math.random().toString(36).slice(2);return h=a(function(ne){function te(ae){ae.data.callback===ie&&(delete W[ie],x.removeEventListener("message",te),h=null,m.clear(),X(),ne())}x.addEventListener("message",te),T(J,ie),W[ie]=te.bind(null,{data:{callback:ie}})}),h},x.reset=function(){x.postMessage({reset:!0});for(var J in W)W[J](),delete W[J]}}return function(){if(y)return y;if(!r&&l){var x=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([x])))}catch(T){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",T),null}H(y)}return y}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(y,h){return h?h(y):y}function w(y){return y!=null}function A(y,h,W){return _(y&&w(y[h])?y[h]:g[h],W)}function O(y){return y<0?0:Math.floor(y)}function M(y,h){return Math.floor(Math.random()*(h-y))+y}function U(y){return parseInt(y,16)}function I(y){return y.map(P)}function P(y){var h=String(y).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:U(h.substring(0,2)),g:U(h.substring(2,4)),b:U(h.substring(4,6))}}function L(y){var h=A(y,"origin",Object);return h.x=A(h,"x",Number),h.y=A(h,"y",Number),h}function B(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function R(y){var h=y.getBoundingClientRect();y.width=h.width,y.height=h.height}function K(y){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=y,h}function S(y,h,W,H,x,T,j,J,z){y.save(),y.translate(h,W),y.rotate(T),y.scale(H,x),y.arc(0,0,1,j,J,z),y.restore()}function F(y){var h=y.angle*(Math.PI/180),W=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-h+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function N(y,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var W=h.tick++/h.totalTicks,H=h.x+h.random*h.tiltCos,x=h.y+h.random*h.tiltSin,T=h.wobbleX+h.random*h.tiltCos,j=h.wobbleY+h.random*h.tiltSin;if(y.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-W)+")",y.beginPath(),o&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))y.fill(ue(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(T-H)*.1,Math.abs(j-x)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var J=Math.PI/10*h.wobble,z=Math.abs(T-H)*.1,X=Math.abs(j-x)*.1,ie=h.shape.bitmap.width*h.scalar,ne=h.shape.bitmap.height*h.scalar,te=new DOMMatrix([Math.cos(J)*z,Math.sin(J)*z,-Math.sin(J)*X,Math.cos(J)*X,h.x,h.y]);te.multiplySelf(new DOMMatrix(h.shape.matrix));var ae=y.createPattern(m.transform(h.shape.bitmap),"no-repeat");ae.setTransform(te),y.globalAlpha=1-W,y.fillStyle=ae,y.fillRect(h.x-ie/2,h.y-ne/2,ie,ne),y.globalAlpha=1}else if(h.shape==="circle")y.ellipse?y.ellipse(h.x,h.y,Math.abs(T-H)*h.ovalScalar,Math.abs(j-x)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):S(y,h.x,h.y,Math.abs(T-H)*h.ovalScalar,Math.abs(j-x)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var Z=Math.PI/2*3,me=4*h.scalar,be=8*h.scalar,he=h.x,ye=h.y,Ee=5,we=Math.PI/Ee;Ee--;)he=h.x+Math.cos(Z)*be,ye=h.y+Math.sin(Z)*be,y.lineTo(he,ye),Z+=we,he=h.x+Math.cos(Z)*me,ye=h.y+Math.sin(Z)*me,y.lineTo(he,ye),Z+=we;else y.moveTo(Math.floor(h.x),Math.floor(h.y)),y.lineTo(Math.floor(h.wobbleX),Math.floor(x)),y.lineTo(Math.floor(T),Math.floor(j)),y.lineTo(Math.floor(H),Math.floor(h.wobbleY));return y.closePath(),y.fill(),h.tick<h.totalTicks}function q(y,h,W,H,x){var T=h.slice(),j=y.getContext("2d"),J,z,X=a(function(ie){function ne(){J=z=null,j.clearRect(0,0,H.width,H.height),m.clear(),x(),ie()}function te(){r&&!(H.width===n.width&&H.height===n.height)&&(H.width=y.width=n.width,H.height=y.height=n.height),!H.width&&!H.height&&(W(y),H.width=y.width,H.height=y.height),j.clearRect(0,0,H.width,H.height),T=T.filter(function(ae){return N(j,ae)}),T.length?J=p.frame(te):ne()}J=p.frame(te),z=ne});return{addFettis:function(ie){return T=T.concat(ie),X},canvas:y,promise:X,reset:function(){J&&p.cancel(J),z&&z()}}}function D(y,h){var W=!y,H=!!A(h||{},"resize"),x=!1,T=A(h,"disableForReducedMotion",Boolean),j=l&&!!A(h||{},"useWorker"),J=j?b():null,z=W?B:R,X=y&&J?!!y.__confetti_initialized:!1,ie=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ne;function te(Z,me,be){for(var he=A(Z,"particleCount",O),ye=A(Z,"angle",Number),Ee=A(Z,"spread",Number),we=A(Z,"startVelocity",Number),ct=A(Z,"decay",Number),zt=A(Z,"gravity",Number),ut=A(Z,"drift",Number),tt=A(Z,"colors",I),Ot=A(Z,"ticks",Number),Nt=A(Z,"shapes"),ze=A(Z,"scalar"),qe=!!A(Z,"flat"),Ve=L(Z),st=he,dt=[],ft=y.width*Ve.x,mt=y.height*Ve.y;st--;)dt.push(F({x:ft,y:mt,angle:ye,spread:Ee,startVelocity:we,color:tt[st%tt.length],shape:Nt[M(0,Nt.length)],ticks:Ot,decay:ct,gravity:zt,drift:ut,scalar:ze,flat:qe}));return ne?ne.addFettis(dt):(ne=q(y,dt,z,me,be),ne.promise)}function ae(Z){var me=T||A(Z,"disableForReducedMotion",Boolean),be=A(Z,"zIndex",Number);if(me&&ie)return a(function(we){we()});W&&ne?y=ne.canvas:W&&!y&&(y=K(be),document.body.appendChild(y)),H&&!X&&z(y);var he={width:y.width,height:y.height};J&&!X&&J.init(y),X=!0,J&&(y.__confetti_initialized=!0);function ye(){if(J){var we={getBoundingClientRect:function(){if(!W)return y.getBoundingClientRect()}};z(we),J.postMessage({resize:{width:we.width,height:we.height}});return}he.width=he.height=null}function Ee(){ne=null,H&&(x=!1,e.removeEventListener("resize",ye)),W&&y&&(document.body.contains(y)&&document.body.removeChild(y),y=null,X=!1)}return H&&!x&&(x=!0,e.addEventListener("resize",ye,!1)),J?J.fire(Z,he,Ee):te(Z,he,Ee)}return ae.reset=function(){J&&J.reset(),ne&&ne.reset()},ae}var G;function ee(){return G||(G=D(null,{useWorker:!0,resize:!0})),G}function ue(y,h,W,H,x,T,j){var J=new Path2D(y),z=new Path2D;z.addPath(J,new DOMMatrix(h));var X=new Path2D;return X.addPath(z,new DOMMatrix([Math.cos(j)*x,Math.sin(j)*x,-Math.sin(j)*T,Math.cos(j)*T,W,H])),X}function oe(y){if(!o)throw new Error("path confetti are not supported in this browser");var h,W;typeof y=="string"?h=y:(h=y.path,W=y.matrix);var H=new Path2D(h),x=document.createElement("canvas"),T=x.getContext("2d");if(!W){for(var j=1e3,J=j,z=j,X=0,ie=0,ne,te,ae=0;ae<j;ae+=2)for(var Z=0;Z<j;Z+=2)T.isPointInPath(H,ae,Z,"nonzero")&&(J=Math.min(J,ae),z=Math.min(z,Z),X=Math.max(X,ae),ie=Math.max(ie,Z));ne=X-J,te=ie-z;var me=10,be=Math.min(me/ne,me/te);W=[be,0,0,be,-Math.round(ne/2+J)*be,-Math.round(te/2+z)*be]}return{type:"path",path:h,matrix:W}}function re(y){var h,W=1,H="#000000",x='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?h=y:(h=y.text,W="scalar"in y?y.scalar:W,x="fontFamily"in y?y.fontFamily:x,H="color"in y?y.color:H);var T=10*W,j=""+T+"px "+x,J=new OffscreenCanvas(T,T),z=J.getContext("2d");z.font=j;var X=z.measureText(h),ie=Math.ceil(X.actualBoundingBoxRight+X.actualBoundingBoxLeft),ne=Math.ceil(X.actualBoundingBoxAscent+X.actualBoundingBoxDescent),te=2,ae=X.actualBoundingBoxLeft+te,Z=X.actualBoundingBoxAscent+te;ie+=te+te,ne+=te+te,J=new OffscreenCanvas(ie,ne),z=J.getContext("2d"),z.font=j,z.fillStyle=H,z.fillText(h,ae,Z);var me=1/W;return{type:"bitmap",bitmap:J.transferToImageBitmap(),matrix:[me,0,0,me,-ie*me/2,-ne*me/2]}}t.exports=function(){return ee().apply(this,arguments)},t.exports.reset=function(){ee().reset()},t.exports.create=D,t.exports.shapeFromPath=oe,t.exports.shapeFromText=re})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),$t,!1);const Ms=$t.exports;$t.exports.create;function Pr(s,e,t){const r=s.slice();return r[21]=e[t].profile,r[22]=e[t].status,r}function pi(s){let e;return{c(){e=k("üîç Search")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function hi(s){let e,t;return{c(){e=f("span"),t=k(`
						Searching...`),u(e,"class","loading-spinner svelte-165a6uh")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(C(e),C(t))}}}function Tr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=k(s[4]),u(t,"class","text-red-700"),u(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,l){E(n,e,l),i(e,t),i(t,r)},p(n,l){l&16&&$(r,n[4])},d(n){n&&C(e)}}}function gi(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">üîç</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',u(e,"class","text-center py-8")},m(t,r){E(t,e,r)},p:Q,i:Q,o:Q,d(t){t&&C(e)}}}function bi(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">üîç</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',u(e,"class","text-center py-8")},m(t,r){E(t,e,r)},p:Q,i:Q,o:Q,d(t){t&&C(e)}}}function yi(s){let e,t,r,n=ge(s[7]),l=[];for(let d=0;d<n.length;d+=1)l[d]=Ir(Pr(s,n,d));const o=d=>fe(l[d],1,1,()=>{l[d]=null});let c=s[5]&&Rr(s);return{c(){e=f("div");for(let d=0;d<l.length;d+=1)l[d].c();t=v(),c&&c.c(),u(e,"class","space-y-4")},m(d,a){E(d,e,a);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);i(e,t),c&&c.m(e,null),r=!0},p(d,a){if(a&3266){n=ge(d[7]);let m;for(m=0;m<n.length;m+=1){const p=Pr(d,n,m);l[m]?(l[m].p(p,a),le(l[m],1)):(l[m]=Ir(p),l[m].c(),le(l[m],1),l[m].m(e,t))}for(It(),m=n.length;m<l.length;m+=1)o(m);Rt()}d[5]?c?c.p(d,a):(c=Rr(d),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(d){if(!r){for(let a=0;a<n.length;a+=1)le(l[a]);r=!0}},o(d){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)fe(l[a]);r=!1},d(d){d&&C(e),Xe(l,d),c&&c.d()}}}function Ir(s){let e,t;return e=new mi({props:{profile:s[21],isSelected:s[1].has(s[21].did),onSelect:s[10],statusTag:s[22],clickable:!0,onAddToList:s[11],isAddingToList:s[6].has(s[21].did)}}),{c(){We(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},p(r,n){const l={};n&128&&(l.profile=r[21]),n&130&&(l.isSelected=r[1].has(r[21].did)),n&128&&(l.statusTag=r[22]),n&192&&(l.isAddingToList=r[6].has(r[21].did)),e.$set(l)},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Rr(s){let e,t,r,n;function l(d,a){return d[3]?vi:_i}let o=l(s),c=o(s);return{c(){e=f("div"),t=f("button"),c.c(),t.disabled=s[3],u(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),u(e,"class","text-center pt-4 border-t border-gray-200")},m(d,a){E(d,e,a),i(e,t),c.m(t,null),r||(n=se(t,"click",s[9]),r=!0)},p(d,a){o!==(o=l(d))&&(c.d(1),c=o(d),c&&(c.c(),c.m(t,null))),a&8&&(t.disabled=d[3])},d(d){d&&C(e),c.d(),r=!1,n()}}}function _i(s){let e;return{c(){e=k("Load More Results")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function vi(s){let e,t;return{c(){e=f("span"),t=k(`
								Loading...`),u(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(r,n){E(r,e,n),E(r,t,n)},d(r){r&&(C(e),C(t))}}}function wi(s){let e,t,r,n,l,o,c,d,a,m,p,b,g,_,w,A,O,M;function U(S,F){return S[3]?hi:pi}let I=U(s),P=I(s),L=s[4]&&Tr(s);const B=[yi,bi,gi],R=[];function K(S,F){return S[0].length>0?0:S[2]&&!S[3]?1:S[2]?-1:2}return~(_=K(s))&&(w=R[_]=B[_](s)),{c(){e=f("div"),t=f("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',r=v(),n=f("div"),l=f("form"),o=f("div"),c=f("label"),c.textContent="Search for:",d=v(),a=f("input"),m=v(),p=f("button"),P.c(),b=v(),L&&L.c(),g=v(),w&&w.c(),u(t,"class","p-6 border-b border-gray-200"),u(c,"for","search-input"),u(c,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),u(a,"id","search-input"),u(a,"type","text"),u(a,"placeholder","e.g., belge, artist, developer..."),u(a,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),a.required=!0,u(p,"type","submit"),p.disabled=s[3],u(p,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),u(o,"class","flex gap-4 items-center flex-wrap"),u(l,"class","mb-6"),u(n,"id","profile-search-container"),u(n,"class","p-6"),u(e,"class","bg-white rounded-lg shadow-sm border border-gray-200")},m(S,F){E(S,e,F),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(o,c),i(o,d),i(o,a),Le(a,s[2]),i(o,m),i(o,p),P.m(p,null),i(n,b),L&&L.m(n,null),i(n,g),~_&&R[_].m(n,null),A=!0,O||(M=[se(a,"input",s[15]),se(l,"submit",cn(s[8]))],O=!0)},p(S,[F]){F&4&&a.value!==S[2]&&Le(a,S[2]),I!==(I=U(S))&&(P.d(1),P=I(S),P&&(P.c(),P.m(p,null))),(!A||F&8)&&(p.disabled=S[3]),S[4]?L?L.p(S,F):(L=Tr(S),L.c(),L.m(n,g)):L&&(L.d(1),L=null);let N=_;_=K(S),_===N?~_&&R[_].p(S,F):(w&&(It(),fe(R[N],1,1,()=>{R[N]=null}),Rt()),~_?(w=R[_],w?w.p(S,F):(w=R[_]=B[_](S),w.c()),le(w,1),w.m(n,null)):w=null)},i(S){A||(le(w),A=!0)},o(S){fe(w),A=!1},d(S){S&&C(e),P.d(),L&&L.d(),~_&&R[_].d(),O=!1,Ie(M)}}}function Si(s,e,t){let r,n,l;xe(s,$e,L=>t(17,n=L)),xe(s,pe,L=>t(14,l=L));let o="",c=[],d=!1,a="",m=new Set,p=null,b=!1,g=new Set;async function _(){if(!(!o.trim()||!n.session)){t(3,d=!0),t(4,a=""),t(0,c=[]),m.clear(),p=null,t(5,b=!1);try{const L=await Ue.searchProfiles(n.session,o,n.authType);t(0,c=L.actors||[]),p=L.cursor,t(5,b=!!L.cursor)}catch(L){t(4,a=L.message||"Failed to search profiles")}finally{t(3,d=!1)}}}async function w(){if(!(!b||d||!n.session)){t(3,d=!0),t(4,a="");try{const L=await Ue.searchProfiles(n.session,o,n.authType,25,p);t(0,c=[...c,...L.actors||[]]),p=L.cursor,t(5,b=!!L.cursor)}catch(L){t(4,a=L.message||"Failed to load more profiles")}finally{t(3,d=!1)}}}function A(L){m.has(L.did)?m.delete(L.did):m.add(L.did),t(1,m)}let O=null,M=!0;async function U(L){if(!(!n.session||!l.selectedList||g.has(L.did))){g.add(L.did),t(6,g);try{await Ue.addToList(n.session,L.did,l.selectedList.uri),await pe.fetchAndAddProfile(n.session,L.did),I()}catch(B){console.error("Failed to add profile to list:",B)}finally{g.delete(L.did),t(6,g)}}}function I(){Ms({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Ms({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Ms({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}function P(){o=this.value,t(2,o),t(14,l),t(13,M),t(12,O),t(1,m)}return s.$$.update=()=>{s.$$.dirty&28674&&l.selectedList&&(!M&&O&&O!==l.selectedList.uri&&(t(2,o=""),t(0,c=[]),m.clear(),p=null,t(5,b=!1),t(4,a="")),t(12,O=l.selectedList.uri),t(13,M=!1)),s.$$.dirty&16385&&t(7,r=c.map(L=>({profile:L,status:l.listMembers.includes(L.did)?"Already in list":"New candidate"})))},[c,m,o,d,a,b,g,r,_,w,A,U,O,M,l,P]}class ki extends Je{constructor(e){super(),He(this,e,Si,wi,Re,{})}}function Or(s,e,t){const r=s.slice();return r[15]=e[t],r}function Nr(s,e,t){const r=s.slice();return r[18]=e[t],r}function Kr(s){let e,t=s[2].selectedList.description+"",r;return{c(){e=f("p"),r=k(t),u(e,"class","text-slate-600 mt-1")},m(n,l){E(n,e,l),i(e,r)},p(n,l){l&4&&t!==(t=n[2].selectedList.description+"")&&$(r,t)},d(n){n&&C(e)}}}function Dr(s){let e,t,r,n,l,o,c,d,a,m=s[4].length.toLocaleString()+"",p,b,g=s[0].totalMembers.toLocaleString()+"",_,w,A,O,M,U,I;return{c(){e=f("div"),t=f("div"),r=f("div"),n=v(),l=f("div"),o=f("div"),o.textContent="Calculating comprehensive statistics...",c=v(),d=f("div"),a=k("Processing "),p=k(m),b=k(" of "),_=k(g),w=k(`
						members (`),A=k(s[3]),O=k("%)"),M=v(),U=f("div"),I=f("div"),u(r,"class","loading-spinner svelte-1myfg8v"),u(o,"class","text-blue-700 font-medium"),u(d,"class","text-blue-600 text-sm"),u(t,"class","flex items-center justify-center space-x-3"),u(I,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),pr(I,"width",s[3]+"%"),u(U,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),u(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(P,L){E(P,e,L),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,c),i(l,d),i(d,a),i(d,p),i(d,b),i(d,_),i(d,w),i(d,A),i(d,O),i(e,M),i(e,U),i(U,I)},p(P,L){L&16&&m!==(m=P[4].length.toLocaleString()+"")&&$(p,m),L&1&&g!==(g=P[0].totalMembers.toLocaleString()+"")&&$(_,g),L&8&&$(A,P[3]),L&8&&pr(I,"width",P[3]+"%")},d(P){P&&C(e)}}}function Li(s){let e,t,r,n,l,o=s[0].avgBioLength+"",c,d,a,m,p,b,g,_=s[0].accountsWithBios.toLocaleString()+"",w,A,O=s[0].totalMembers.toLocaleString()+"",M,U,I,P,L,B,R=s[0].accountsWithDisplayNames.toLocaleString()+"",K,S,F=s[0].totalMembers.toLocaleString()+"",N,q,D=s[0].mostCommonWords.length>0&&Br(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average bio length:",n=v(),l=f("span"),c=k(o),d=k(" characters"),a=v(),m=f("div"),p=f("span"),p.textContent="Bios with content:",b=v(),g=f("span"),w=k(_),A=k(" / "),M=k(O),U=v(),I=f("div"),P=f("span"),P.textContent="Display names:",L=v(),B=f("span"),K=k(R),S=k(" / "),N=k(F),q=v(),D&&D.c(),u(r,"class","text-gray-600"),u(l,"class","font-medium"),u(t,"class","flex justify-between text-sm"),u(p,"class","text-gray-600"),u(g,"class","font-medium"),u(m,"class","flex justify-between text-sm"),u(P,"class","text-gray-600"),u(B,"class","font-medium"),u(I,"class","flex justify-between text-sm"),u(e,"class","space-y-2")},m(G,ee){E(G,e,ee),i(e,t),i(t,r),i(t,n),i(t,l),i(l,c),i(l,d),i(e,a),i(e,m),i(m,p),i(m,b),i(m,g),i(g,w),i(g,A),i(g,M),i(e,U),i(e,I),i(I,P),i(I,L),i(I,B),i(B,K),i(B,S),i(B,N),i(e,q),D&&D.m(e,null)},p(G,ee){ee&1&&o!==(o=G[0].avgBioLength+"")&&$(c,o),ee&1&&_!==(_=G[0].accountsWithBios.toLocaleString()+"")&&$(w,_),ee&1&&O!==(O=G[0].totalMembers.toLocaleString()+"")&&$(M,O),ee&1&&R!==(R=G[0].accountsWithDisplayNames.toLocaleString()+"")&&$(K,R),ee&1&&F!==(F=G[0].totalMembers.toLocaleString()+"")&&$(N,F),G[0].mostCommonWords.length>0?D?D.p(G,ee):(D=Br(G),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(G){G&&C(e),D&&D.d()}}}function Ci(s){let e;return{c(){e=f("div"),e.textContent="Calculating comprehensive bio statistics...",u(e,"class","text-gray-500 text-sm")},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Br(s){let e,t,r,n,l=ge(s[0].mostCommonWords),o=[];for(let c=0;c<l.length;c+=1)o[c]=Ur(Nr(s,l,c));return{c(){e=f("div"),t=f("div"),t.textContent="Most common words:",r=v(),n=f("div");for(let c=0;c<o.length;c+=1)o[c].c();u(t,"class","text-xs text-gray-500 mb-2"),u(n,"class","flex flex-wrap gap-1"),u(e,"class","mt-3")},m(c,d){E(c,e,d),i(e,t),i(e,r),i(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(c,d){if(d&1){l=ge(c[0].mostCommonWords);let a;for(a=0;a<l.length;a+=1){const m=Nr(c,l,a);o[a]?o[a].p(m,d):(o[a]=Ur(m),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(c){c&&C(e),Xe(o,c)}}}function Ur(s){let e,t=s[18].word+"",r,n,l=s[18].count+"",o,c;return{c(){e=f("span"),r=k(t),n=k(" ("),o=k(l),c=k(`)
									`),u(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(d,a){E(d,e,a),i(e,r),i(e,n),i(e,o),i(e,c)},p(d,a){a&1&&t!==(t=d[18].word+"")&&$(r,t),a&1&&l!==(l=d[18].count+"")&&$(o,l)},d(d){d&&C(e)}}}function Ai(s){let e,t,r,n,l,o=s[0].avgHandleLength+"",c,d,a,m=s[0].topDomains.length>0&&Wr(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average handle length:",n=v(),l=f("span"),c=k(o),d=k(" characters"),a=v(),m&&m.c(),u(r,"class","text-gray-600"),u(l,"class","font-medium"),u(t,"class","flex justify-between text-sm"),u(e,"class","space-y-2")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,c),i(l,d),i(e,a),m&&m.m(e,null)},p(p,b){b&1&&o!==(o=p[0].avgHandleLength+"")&&$(c,o),p[0].topDomains.length>0?m?m.p(p,b):(m=Wr(p),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(p){p&&C(e),m&&m.d()}}}function Ei(s){let e;return{c(){e=f("div"),e.textContent="Calculating handle statistics...",u(e,"class","text-gray-500 text-sm")},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Wr(s){let e,t,r,n,l=ge(s[0].topDomains),o=[];for(let c=0;c<l.length;c+=1)o[c]=Hr(Or(s,l,c));return{c(){e=f("div"),t=f("div"),t.textContent="Top domains:",r=v(),n=f("div");for(let c=0;c<o.length;c+=1)o[c].c();u(t,"class","text-xs text-gray-500 mb-2"),u(n,"class","space-y-1"),u(e,"class","mt-3")},m(c,d){E(c,e,d),i(e,t),i(e,r),i(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(c,d){if(d&1){l=ge(c[0].topDomains);let a;for(a=0;a<l.length;a+=1){const m=Or(c,l,a);o[a]?o[a].p(m,d):(o[a]=Hr(m),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(c){c&&C(e),Xe(o,c)}}}function Hr(s){let e,t,r,n=s[15].domain+"",l,o,c,d=s[15].count+"",a,m,p;return{c(){e=f("div"),t=f("span"),r=k("."),l=k(n),o=v(),c=f("span"),a=k(d),m=k(" users"),p=v(),u(t,"class","font-medium"),u(c,"class","text-gray-600"),u(e,"class","flex justify-between text-xs")},m(b,g){E(b,e,g),i(e,t),i(t,r),i(t,l),i(e,o),i(e,c),i(c,a),i(c,m),i(e,p)},p(b,g){g&1&&n!==(n=b[15].domain+"")&&$(l,n),g&1&&d!==(d=b[15].count+"")&&$(a,d)},d(b){b&&C(e)}}}function Mi(s){let e;return{c(){e=k("Unknown")},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function xi(s){let e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=k(e)},m(r,n){E(r,t,n)},p(r,n){n&4&&e!==(e=new Date(r[2].selectedList.createdAt).toLocaleDateString()+"")&&$(t,e)},d(r){r&&C(t)}}}function Pi(s){var ir,or,ar;let e,t,r,n,l=(((ir=s[2].selectedList)==null?void 0:ir.name)||"List")+"",o,c,d,a,m,p=s[0].totalMembers.toLocaleString()+"",b,g,_,w,A,O,M,U,I,P,L,B,R=s[1]?"...":St(s[0].accountsWithBios,s[0].totalMembers)+"%",K,S,F,N,q,D=s[1]?"Calculating...":`${s[0].accountsWithBios.toLocaleString()} have bios`,G,ee,ue,oe,re,y,h,W,H=s[1]?"...":St(s[0].verifiedAccounts,s[0].totalMembers)+"%",x,T,j,J,z,X=s[1]?"Calculating...":`${s[0].verifiedAccounts.toLocaleString()} verified accounts`,ie,ne,te,ae,Z,me,be,he,ye=s[1]?"...":St(s[0].accountsWithAvatars,s[0].totalMembers)+"%",Ee,we,ct,zt,ut,tt=s[1]?"Calculating...":`${s[0].accountsWithAvatars.toLocaleString()} have avatars`,Ot,Nt,ze,qe,Ve,st,dt,ft,mt=s[0].listAge+"",ys,Bs,qt,Us,Vt,Ws,Ye,rt,Yt,Hs,Js,nt,Gt,Fs,js,pt,Zt,$s,Oe,ht,Qt,zs,Xt,es=((or=s[2].selectedList)==null?void 0:or.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",_s,qs,gt,ts,Vs,Kt,Ys,bt,ss,Gs,Dt,rs=s[0].growthRate+"",vs,Zs,Qs,yt,ns,Xs,ls,is=s[1]?"Calculating...":`${s[0].recentAdditions} in last batch`,ws,er,os,_t,Bt,tr,lt,as=s[1]?"Calculating...":"Refresh Stats",Ss,ks,sr,_e=((ar=s[2].selectedList)==null?void 0:ar.description)&&Kr(s),ve=s[1]&&Dr(s);function rr(V,ce){return V[1]?Ci:Li}let cs=rr(s),Ne=cs(s);function nr(V,ce){return V[1]?Ei:Ai}let us=nr(s),Ke=us(s);function lr(V,ce){var Ut;return(Ut=V[2].selectedList)!=null&&Ut.createdAt?xi:Mi}let ds=lr(s),De=ds(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("h2"),o=k(l),c=v(),_e&&_e.c(),d=v(),a=f("div"),m=f("div"),b=k(p),g=v(),_=f("div"),_.textContent="Total Members",w=v(),ve&&ve.c(),A=v(),O=f("div"),M=f("div"),U=f("div"),I=f("div"),P=f("div"),P.textContent="üìä Engagement",L=v(),B=f("div"),K=k(R),S=v(),F=f("div"),F.textContent="üí¨",N=v(),q=f("div"),G=k(D),ee=v(),ue=f("div"),oe=f("div"),re=f("div"),y=f("div"),y.textContent="‚úÖ Verified",h=v(),W=f("div"),x=k(H),T=v(),j=f("div"),j.textContent="‚úì",J=v(),z=f("div"),ie=k(X),ne=v(),te=f("div"),ae=f("div"),Z=f("div"),me=f("div"),me.textContent="üñºÔ∏è Complete",be=v(),he=f("div"),Ee=k(ye),we=v(),ct=f("div"),ct.textContent="üë§",zt=v(),ut=f("div"),Ot=k(tt),Nt=v(),ze=f("div"),qe=f("div"),Ve=f("div"),st=f("div"),st.textContent="üìÖ Age",dt=v(),ft=f("div"),ys=k(mt),Bs=v(),qt=f("div"),qt.textContent="üìÜ",Us=v(),Vt=f("div"),Vt.textContent="days old",Ws=v(),Ye=f("div"),rt=f("div"),Yt=f("h3"),Yt.textContent="üìù Bio Analysis",Hs=v(),Ne.c(),Js=v(),nt=f("div"),Gt=f("h3"),Gt.textContent="üîó Handle Analysis",Fs=v(),Ke.c(),js=v(),pt=f("div"),Zt=f("h3"),Zt.textContent="üìã List Details",$s=v(),Oe=f("div"),ht=f("div"),Qt=f("span"),Qt.textContent="Type:",zs=v(),Xt=f("span"),_s=k(es),qs=v(),gt=f("div"),ts=f("span"),ts.textContent="Created:",Vs=v(),Kt=f("span"),De.c(),Ys=v(),bt=f("div"),ss=f("span"),ss.textContent="Growth rate:",Gs=v(),Dt=f("span"),vs=k(rs),Zs=k(" members/day"),Qs=v(),yt=f("div"),ns=f("span"),ns.textContent="Recent activity:",Xs=v(),ls=f("span"),ws=k(is),er=v(),os=f("div"),_t=f("div"),Bt=f("button"),Bt.textContent="View on Bluesky",tr=v(),lt=f("button"),Ss=k(as),u(n,"class","text-xl font-bold text-slate-800"),u(m,"class","text-3xl font-bold text-blue-600"),u(_,"class","text-sm text-slate-500"),u(a,"class","text-right"),u(t,"class","flex items-center justify-between mb-6"),u(P,"class","text-blue-600 font-semibold text-sm"),u(B,"class","text-2xl font-bold text-blue-700"),u(F,"class","text-blue-400 text-3xl"),u(U,"class","flex items-center justify-between"),u(q,"class","text-xs text-blue-600 mt-1"),u(M,"class","bg-blue-50 p-4 rounded-lg"),u(y,"class","text-green-600 font-semibold text-sm"),u(W,"class","text-2xl font-bold text-green-700"),u(j,"class","text-green-400 text-3xl"),u(oe,"class","flex items-center justify-between"),u(z,"class","text-xs text-green-600 mt-1"),u(ue,"class","bg-green-50 p-4 rounded-lg"),u(me,"class","text-purple-600 font-semibold text-sm"),u(he,"class","text-2xl font-bold text-purple-700"),u(ct,"class","text-purple-400 text-3xl"),u(ae,"class","flex items-center justify-between"),u(ut,"class","text-xs text-purple-600 mt-1"),u(te,"class","bg-purple-50 p-4 rounded-lg"),u(st,"class","text-yellow-600 font-semibold text-sm"),u(ft,"class","text-2xl font-bold text-yellow-700"),u(qt,"class","text-yellow-400 text-3xl"),u(qe,"class","flex items-center justify-between"),u(Vt,"class","text-xs text-yellow-600 mt-1"),u(ze,"class","bg-yellow-50 p-4 rounded-lg"),u(O,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),u(Yt,"class","text-sm font-semibold text-gray-700 mb-3"),u(rt,"class","bg-gray-50 p-4 rounded-lg"),u(Gt,"class","text-sm font-semibold text-gray-700 mb-3"),u(nt,"class","bg-gray-50 p-4 rounded-lg"),u(Zt,"class","text-sm font-semibold text-gray-700 mb-3"),u(Qt,"class","text-gray-600"),u(Xt,"class","font-medium"),u(ht,"class","flex justify-between text-sm"),u(ts,"class","text-gray-600"),u(Kt,"class","font-medium"),u(gt,"class","flex justify-between text-sm"),u(ss,"class","text-gray-600"),u(Dt,"class","font-medium"),u(bt,"class","flex justify-between text-sm"),u(ns,"class","text-gray-600"),u(ls,"class","font-medium"),u(yt,"class","flex justify-between text-sm"),u(Oe,"class","space-y-2"),u(pt,"class","bg-gray-50 p-4 rounded-lg"),u(Ye,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),u(Bt,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),u(lt,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),lt.disabled=s[1],u(_t,"class","flex flex-wrap gap-2"),u(os,"class","mt-6 pt-4 border-t border-gray-200"),u(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6")},m(V,ce){E(V,e,ce),i(e,t),i(t,r),i(r,n),i(n,o),i(r,c),_e&&_e.m(r,null),i(t,d),i(t,a),i(a,m),i(m,b),i(a,g),i(a,_),i(e,w),ve&&ve.m(e,null),i(e,A),i(e,O),i(O,M),i(M,U),i(U,I),i(I,P),i(I,L),i(I,B),i(B,K),i(U,S),i(U,F),i(M,N),i(M,q),i(q,G),i(O,ee),i(O,ue),i(ue,oe),i(oe,re),i(re,y),i(re,h),i(re,W),i(W,x),i(oe,T),i(oe,j),i(ue,J),i(ue,z),i(z,ie),i(O,ne),i(O,te),i(te,ae),i(ae,Z),i(Z,me),i(Z,be),i(Z,he),i(he,Ee),i(ae,we),i(ae,ct),i(te,zt),i(te,ut),i(ut,Ot),i(O,Nt),i(O,ze),i(ze,qe),i(qe,Ve),i(Ve,st),i(Ve,dt),i(Ve,ft),i(ft,ys),i(qe,Bs),i(qe,qt),i(ze,Us),i(ze,Vt),i(e,Ws),i(e,Ye),i(Ye,rt),i(rt,Yt),i(rt,Hs),Ne.m(rt,null),i(Ye,Js),i(Ye,nt),i(nt,Gt),i(nt,Fs),Ke.m(nt,null),i(Ye,js),i(Ye,pt),i(pt,Zt),i(pt,$s),i(pt,Oe),i(Oe,ht),i(ht,Qt),i(ht,zs),i(ht,Xt),i(Xt,_s),i(Oe,qs),i(Oe,gt),i(gt,ts),i(gt,Vs),i(gt,Kt),De.m(Kt,null),i(Oe,Ys),i(Oe,bt),i(bt,ss),i(bt,Gs),i(bt,Dt),i(Dt,vs),i(Dt,Zs),i(Oe,Qs),i(Oe,yt),i(yt,ns),i(yt,Xs),i(yt,ls),i(ls,ws),i(e,er),i(e,os),i(os,_t),i(_t,Bt),i(_t,tr),i(_t,lt),i(lt,Ss),ks||(sr=[se(Bt,"click",s[8]),se(lt,"click",s[6])],ks=!0)},p(V,[ce]){var Ut,cr,ur;ce&4&&l!==(l=(((Ut=V[2].selectedList)==null?void 0:Ut.name)||"List")+"")&&$(o,l),(cr=V[2].selectedList)!=null&&cr.description?_e?_e.p(V,ce):(_e=Kr(V),_e.c(),_e.m(r,null)):_e&&(_e.d(1),_e=null),ce&1&&p!==(p=V[0].totalMembers.toLocaleString()+"")&&$(b,p),V[1]?ve?ve.p(V,ce):(ve=Dr(V),ve.c(),ve.m(e,A)):ve&&(ve.d(1),ve=null),ce&3&&R!==(R=V[1]?"...":St(V[0].accountsWithBios,V[0].totalMembers)+"%")&&$(K,R),ce&3&&D!==(D=V[1]?"Calculating...":`${V[0].accountsWithBios.toLocaleString()} have bios`)&&$(G,D),ce&3&&H!==(H=V[1]?"...":St(V[0].verifiedAccounts,V[0].totalMembers)+"%")&&$(x,H),ce&3&&X!==(X=V[1]?"Calculating...":`${V[0].verifiedAccounts.toLocaleString()} verified accounts`)&&$(ie,X),ce&3&&ye!==(ye=V[1]?"...":St(V[0].accountsWithAvatars,V[0].totalMembers)+"%")&&$(Ee,ye),ce&3&&tt!==(tt=V[1]?"Calculating...":`${V[0].accountsWithAvatars.toLocaleString()} have avatars`)&&$(Ot,tt),ce&1&&mt!==(mt=V[0].listAge+"")&&$(ys,mt),cs===(cs=rr(V))&&Ne?Ne.p(V,ce):(Ne.d(1),Ne=cs(V),Ne&&(Ne.c(),Ne.m(rt,null))),us===(us=nr(V))&&Ke?Ke.p(V,ce):(Ke.d(1),Ke=us(V),Ke&&(Ke.c(),Ke.m(nt,null))),ce&4&&es!==(es=((ur=V[2].selectedList)==null?void 0:ur.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&$(_s,es),ds===(ds=lr(V))&&De?De.p(V,ce):(De.d(1),De=ds(V),De&&(De.c(),De.m(Kt,null))),ce&1&&rs!==(rs=V[0].growthRate+"")&&$(vs,rs),ce&3&&is!==(is=V[1]?"Calculating...":`${V[0].recentAdditions} in last batch`)&&$(ws,is),ce&2&&as!==(as=V[1]?"Calculating...":"Refresh Stats")&&$(Ss,as),ce&2&&(lt.disabled=V[1])},i:Q,o:Q,d(V){V&&C(e),_e&&_e.d(),ve&&ve.d(),Ne.d(),Ke.d(),De.d(),ks=!1,Ie(sr)}}}function St(s,e){return e===0?0:Math.round(s/e*100)}function Ti(s,e,t){let r,n;xe(s,pe,M=>t(2,r=M)),xe(s,$e,M=>t(5,n=M));let l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,c=0,d=[],a=null,m=!1,p=null;function b(){t(0,l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,c=0),t(4,d=[])}function g(){var L,B;r.listMemberProfiles;const M=((L=r.selectedList)==null?void 0:L.listItemCount)||0,U=(B=r.selectedList)==null?void 0:B.createdAt,I=U?Math.floor((Date.now()-new Date(U).getTime())/(1e3*60*60*24)):0,P=I>0?Math.round(M/I):0;t(0,l={...l,totalMembers:M,listAge:I,growthRate:P})}async function _(){if(!n.session||!r.selectedList||o)return;const M=Date.now();a=M,t(1,o=!0),t(3,c=0),t(4,d=[]);try{const U=r.selectedList.listItemCount||0;if(U===0){w([]),m=!0;return}let I=null,P=0;const L=100;do{P++,t(3,c=Math.round(d.length/U*100));const B=await Ue.getListMembers(n.session,r.selectedList.uri,n.authType,L,I);if(a!==M)return;t(4,d=[...d,...B.profiles]),I=B.cursor,t(3,c=Math.round(d.length/U*100))}while(I&&d.length<U);if(a!==M)return;w(d),m=!0}catch(U){console.error("Error loading all members for statistics:",U),g(),m=!0}finally{a===M&&(t(1,o=!1),t(3,c=0))}}function w(M){var H;const U=M.length,I=M.filter(x=>x.verified).length,P=M.filter(x=>x.avatar).length,L=M.filter(x=>x.description&&x.description.trim().length>0).length,B=M.filter(x=>x.displayName&&x.displayName.trim().length>0).length,R=M.map(x=>x.description||"").filter(x=>x.trim().length>0),K=R.length>0?Math.round(R.reduce((x,T)=>x+T.length,0)/R.length):0,S=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],F=R.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(x=>x.length>2&&!S.includes(x)),N={};F.forEach(x=>{N[x]=(N[x]||0)+1});const q=Object.entries(N).sort(([,x],[,T])=>T-x).slice(0,5).map(([x,T])=>({word:x,count:T})),D=M.map(x=>x.handle||"").filter(x=>x.length>0),G=D.length>0?Math.round(D.reduce((x,T)=>x+T.length,0)/D.length):0,ee=D.map(x=>{const T=x.split(".");return T.length>1?T[T.length-1]:null}).filter(x=>x&&x.length>0),ue={};ee.forEach(x=>{ue[x]=(ue[x]||0)+1});const oe=Object.entries(ue).sort(([,x],[,T])=>T-x).slice(0,3).map(([x,T])=>({domain:x,count:T})),re=(H=r.selectedList)==null?void 0:H.createdAt,y=re?Math.floor((Date.now()-new Date(re).getTime())/(1e3*60*60*24)):0,h=y>0?Math.round(U/y):0,W=Math.min(25,M.length);t(0,l={totalMembers:U,recentAdditions:W,verifiedAccounts:I,accountsWithAvatars:P,accountsWithBios:L,avgBioLength:K,mostCommonWords:q,listAge:y,accountsWithDisplayNames:B,avgHandleLength:G,topDomains:oe,growthRate:h})}function A(){o||(m=!1,_())}const O=()=>{var U,I,P;const M=(U=r.selectedList)==null?void 0:U.uri;if(M){const L=M.split("/"),B=L[L.length-1],R=`https://bsky.app/profile/${(I=n.session)==null?void 0:I.handle}/lists/${B}`;window.open(R,"_blank")}else window.open(`https://bsky.app/profile/${(P=n.session)==null?void 0:P.handle}/lists`,"_blank")};return s.$$.update=()=>{var M,U;s.$$.dirty&4&&r.selectedList&&g(),s.$$.dirty&7&&((M=r.selectedList)==null?void 0:M.listItemCount)!==l.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(U=r.selectedList)==null?void 0:U.listItemCount),console.log("Current stats.totalMembers:",l.totalMembers),g()),s.$$.dirty&132&&!r.selectedList&&p!==null&&(t(7,p=null),m=!1,b()),s.$$.dirty&134&&r.selectedList&&r.selectedList.uri!==p&&!o&&(t(7,p=r.selectedList.uri),m=!1,b(),_())},[l,o,r,c,d,n,A,p,O]}class Ii extends Je{constructor(e){super(),He(this,e,Ti,Pi,Re,{})}}function Jr(s,e,t){const r=s.slice();return r[25]=e[t],r}function Fr(s,e,t){const r=s.slice();return r[31]=e[t],r}function jr(s,e,t){const r=s.slice();return r[28]=e[t],r}function $r(s,e,t){const r=s.slice();return r[34]=e[t],r}function zr(s){let e,t,r,n,l,o,c=s[4].size+"",d,a,m,p;function b(w,A){return w[5]?Oi:Ri}let g=b(s),_=g(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("button"),_.c(),l=v(),o=f("div"),d=k(c),a=k(" profiles selected"),n.disabled=s[5],u(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),u(r,"class","flex items-center gap-3"),u(o,"class","text-sm text-slate-600"),u(t,"class","flex items-center justify-between"),u(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm")},m(w,A){E(w,e,A),i(e,t),i(t,r),i(r,n),_.m(n,null),i(t,l),i(t,o),i(o,d),i(o,a),m||(p=se(n,"click",s[12]),m=!0)},p(w,A){g===(g=b(w))&&_?_.p(w,A):(_.d(1),_=g(w),_&&(_.c(),_.m(n,null))),A[0]&32&&(n.disabled=w[5]),A[0]&16&&c!==(c=w[4].size+"")&&$(d,c)},d(w){w&&C(e),_.d(),m=!1,p()}}}function Ri(s){let e,t=s[4].size+"",r,n;return{c(){e=k("Add "),r=k(t),n=k(" to List")},m(l,o){E(l,e,o),E(l,r,o),E(l,n,o)},p(l,o){o[0]&16&&t!==(t=l[4].size+"")&&$(r,t)},d(l){l&&(C(e),C(r),C(n))}}}function Oi(s){let e,t;return{c(){e=f("span"),t=k(`
							Adding...`),u(e,"class","loading-spinner mr-2 svelte-srpbru")},m(r,n){E(r,e,n),E(r,t,n)},p:Q,d(r){r&&(C(e),C(t))}}}function qr(s){let e,t,r,n=s[6].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=k("‚úÖ Successfully added "),l=k(n),o=k(" profiles to your list!"),u(t,"class","text-green-700 font-medium"),u(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(c,d){E(c,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(c,d){d[0]&64&&n!==(n=c[6].success.length+"")&&$(l,n)},d(c){c&&C(e)}}}function Vr(s){let e,t,r,n=s[6].errors.length+"",l,o,c,d,a=ge(s[6].errors),m=[];for(let p=0;p<a.length;p+=1)m[p]=Yr($r(s,a,p));return{c(){e=f("div"),t=f("p"),r=k("‚ùå Failed to add "),l=k(n),o=k(" profiles:"),c=v(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();u(t,"class","text-red-700 font-medium mb-2"),u(d,"class","text-red-600 text-sm space-y-1"),u(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){E(p,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,c),i(e,d);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(d,null)},p(p,b){if(b[0]&64&&n!==(n=p[6].errors.length+"")&&$(l,n),b[0]&64){a=ge(p[6].errors);let g;for(g=0;g<a.length;g+=1){const _=$r(p,a,g);m[g]?m[g].p(_,b):(m[g]=Yr(_),m[g].c(),m[g].m(d,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=a.length}},d(p){p&&C(e),Xe(m,p)}}}function Yr(s){let e,t,r=s[34].error+"",n;return{c(){e=f("li"),t=k("‚Ä¢ "),n=k(r)},m(l,o){E(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&64&&r!==(r=l[34].error+"")&&$(n,r)},d(l){l&&C(e)}}}function Ni(s){let e,t,r;function n(d,a){return d[8]?Hi:d[1].listMemberProfiles.length>0?Wi:Ui}let l=n(s),o=l(s),c=s[9]>1&&en(s);return{c(){e=f("div"),t=f("div"),o.c(),r=v(),c&&c.c(),u(t,"class","space-y-4 flex-1 overflow-y-auto"),u(e,"class","flex flex-col flex-1")},m(d,a){E(d,e,a),i(e,t),o.m(t,null),i(e,r),c&&c.m(e,null)},p(d,a){l===(l=n(d))&&o?o.p(d,a):(o.d(1),o=l(d),o&&(o.c(),o.m(t,null))),d[9]>1?c?c.p(d,a):(c=en(d),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(d){d&&C(e),o.d(),c&&c.d()}}}function Ki(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">üìù</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Members Yet</h3> <p class="text-slate-600">Your list is empty. Use the search to find and add profiles!</p></div>',u(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Di(s){let e,t,r,n,l,o,c,d;return{c(){e=f("div"),t=f("div"),r=f("p"),n=k(s[3]),l=v(),o=f("button"),o.textContent="Try again",u(r,"class","text-red-700 mb-4"),u(o,"class","text-red-600 hover:text-red-800 underline"),u(t,"class","text-center"),u(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(a,m){E(a,e,m),i(e,t),i(t,r),i(r,n),i(t,l),i(t,o),c||(d=se(o,"click",s[10]),c=!0)},p(a,m){m[0]&8&&$(n,a[3])},d(a){a&&C(e),c=!1,d()}}}function Bi(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-srpbru"></div> <p class="text-slate-600">Loading list members...</p></div>',u(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){E(t,e,r)},p:Q,d(t){t&&C(e)}}}function Ui(s){let e,t,r=s[3]&&Gr(s),n=ge(s[1].listMembers.slice(0,100)),l=[];for(let o=0;o<n.length;o+=1)l[o]=Zr(Fr(s,n,o));return{c(){r&&r.c(),e=v();for(let o=0;o<l.length;o+=1)l[o].c();t=et()},m(o,c){r&&r.m(o,c),E(o,e,c);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(o,c);E(o,t,c)},p(o,c){if(o[3]?r?r.p(o,c):(r=Gr(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),c[0]&2){n=ge(o[1].listMembers.slice(0,100));let d;for(d=0;d<n.length;d+=1){const a=Fr(o,n,d);l[d]?l[d].p(a,c):(l[d]=Zr(a),l[d].c(),l[d].m(t.parentNode,t))}for(;d<l.length;d+=1)l[d].d(1);l.length=n.length}},d(o){o&&(C(e),C(t)),r&&r.d(o),Xe(l,o)}}}function Wi(s){let e,t=ge(s[1].listMemberProfiles),r=[];for(let n=0;n<t.length;n+=1)r[n]=Xr(jr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=et()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);E(n,e,l)},p(n,l){if(l[0]&2){t=ge(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const c=jr(n,t,o);r[o]?r[o].p(c,l):(r[o]=Xr(c),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&C(e),Xe(r,n)}}}function Hi(s){let e,t,r,n,l,o,c;return{c(){e=f("div"),t=f("div"),r=v(),n=f("p"),l=k("Loading page "),o=k(s[7]),c=k("..."),u(t,"class","loading-spinner mx-auto mb-4 svelte-srpbru"),u(n,"class","text-slate-600"),u(e,"class","text-center py-8")},m(d,a){E(d,e,a),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,c)},p(d,a){a[0]&128&&$(o,d[7])},d(d){d&&C(e)}}}function Gr(s){let e,t,r,n,l,o,c,d,a,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("p"),n.textContent="‚ö†Ô∏è Profile loading issue",l=v(),o=f("p"),c=k(s[3]),d=v(),a=f("button"),a.textContent="Retry",u(n,"class","text-yellow-800 font-medium"),u(o,"class","text-yellow-700 text-sm mt-1"),u(a,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),u(t,"class","flex items-center justify-between"),u(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(b,g){E(b,e,g),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(o,c),i(t,d),i(t,a),m||(p=se(a,"click",s[19]),m=!0)},p(b,g){g[0]&8&&$(c,b[3])},d(b){b&&C(e),m=!1,p()}}}function Zr(s){let e,t,r,n,l,o,c=s[31]+"",d,a,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=v(),l=f("div"),o=f("div"),d=k(c),a=v(),m=f("div"),m.textContent="Member of list",p=v(),u(r,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),u(o,"class","text-sm text-gray-600 font-mono text-xs break-all"),u(m,"class","text-xs text-gray-500"),u(l,"class","flex-1"),u(t,"class","flex items-center space-x-3"),u(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(b,g){E(b,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(o,d),i(l,a),i(l,m),i(e,p)},p(b,g){g[0]&2&&c!==(c=b[31]+"")&&$(d,c)},d(b){b&&C(e)}}}function Qr(s){let e,t=s[28].description+"",r;return{c(){e=f("p"),r=k(t),u(e,"class","text-xs text-gray-600 line-clamp-2 svelte-srpbru")},m(n,l){E(n,e,l),i(e,r)},p(n,l){l[0]&2&&t!==(t=n[28].description+"")&&$(r,t)},d(n){n&&C(e)}}}function Xr(s){let e,t,r,n,l,o,c,d,a,m,p,b=(s[28].displayName||s[28].handle)+"",g,_,w,A,O=s[28].handle+"",M,U,I,P,L,B,R=s[28].description&&Qr(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),d=v(),a=f("div"),m=f("div"),p=f("h4"),g=k(b),_=v(),w=f("span"),A=k("@"),M=k(O),U=v(),R&&R.c(),I=v(),P=f("div"),P.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',L=v(),Tt(n.src,l=s[28].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[28].displayName||s[28].handle)}&background=6366f1&color=fff&size=64`)||u(n,"src",l),u(n,"alt",o=s[28].displayName||s[28].handle),u(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),u(n,"onerror",c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[28].displayName||s[28].handle)+"&background=6366f1&color=fff&size=64'"),u(r,"class","flex-shrink-0"),u(p,"class","text-sm font-semibold text-gray-900 truncate"),u(w,"class","text-xs text-gray-600 truncate"),u(m,"class","flex items-center space-x-2 mb-1"),u(a,"class","flex-1 min-w-0"),u(P,"class","flex-shrink-0"),u(t,"class","flex items-center space-x-3"),u(e,"href",B="https://bsky.app/profile/"+s[28].handle),u(e,"target","_blank"),u(e,"rel","noopener noreferrer"),u(e,"class","block bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200 cursor-pointer")},m(K,S){E(K,e,S),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,m),i(m,p),i(p,g),i(m,_),i(m,w),i(w,A),i(w,M),i(a,U),R&&R.m(a,null),i(t,I),i(t,P),i(e,L)},p(K,S){S[0]&2&&!Tt(n.src,l=K[28].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(K[28].displayName||K[28].handle)}&background=6366f1&color=fff&size=64`)&&u(n,"src",l),S[0]&2&&o!==(o=K[28].displayName||K[28].handle)&&u(n,"alt",o),S[0]&2&&c!==(c="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(K[28].displayName||K[28].handle)+"&background=6366f1&color=fff&size=64'")&&u(n,"onerror",c),S[0]&2&&b!==(b=(K[28].displayName||K[28].handle)+"")&&$(g,b),S[0]&2&&O!==(O=K[28].handle+"")&&$(M,O),K[28].description?R?R.p(K,S):(R=Qr(K),R.c(),R.m(a,null)):R&&(R.d(1),R=null),S[0]&2&&B!==(B="https://bsky.app/profile/"+K[28].handle)&&u(e,"href",B)},d(K){K&&C(e),R&&R.d()}}}function en(s){let e,t,r,n,l,o,c,d,a,m,p,b,g,_,w,A,O,M,U,I,P,L,B,R=s[8]&&s[7]>1&&tn(),K=ge(Array.from({length:Math.min(5,s[9])},s[20])),S=[];for(let N=0;N<K.length;N+=1)S[N]=sn(Jr(s,K,N));let F=s[8]&&s[7]<s[9]&&rn();return{c(){e=f("div"),t=f("div"),r=f("div"),n=k("Page "),l=k(s[7]),o=k(" of "),c=k(s[9]),d=k(" ("),a=k(s[0]),m=k(" total members)"),p=v(),b=f("div"),g=f("button"),R&&R.c(),_=k(`
											Previous`),A=v(),O=f("div");for(let N=0;N<S.length;N+=1)S[N].c();M=v(),U=f("button"),I=k(`Next
											`),F&&F.c(),u(r,"class","text-sm text-gray-600"),g.disabled=w=s[7]===1||s[8],u(g,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),u(O,"class","flex items-center space-x-1"),U.disabled=P=s[7]===s[9]||s[8],u(U,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),u(b,"class","flex items-center space-x-2"),u(t,"class","flex items-center justify-between"),u(e,"class","mt-6 pt-4 border-t border-gray-200")},m(N,q){E(N,e,q),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(r,c),i(r,d),i(r,a),i(r,m),i(t,p),i(t,b),i(b,g),R&&R.m(g,null),i(g,_),i(b,A),i(b,O);for(let D=0;D<S.length;D+=1)S[D]&&S[D].m(O,null);i(b,M),i(b,U),i(U,I),F&&F.m(U,null),L||(B=[se(g,"click",s[15]),se(U,"click",s[14])],L=!0)},p(N,q){if(q[0]&128&&$(l,N[7]),q[0]&512&&$(c,N[9]),q[0]&1&&$(a,N[0]),N[8]&&N[7]>1?R||(R=tn(),R.c(),R.m(g,_)):R&&(R.d(1),R=null),q[0]&384&&w!==(w=N[7]===1||N[8])&&(g.disabled=w),q[0]&9088){K=ge(Array.from({length:Math.min(5,N[9])},N[20]));let D;for(D=0;D<K.length;D+=1){const G=Jr(N,K,D);S[D]?S[D].p(G,q):(S[D]=sn(G),S[D].c(),S[D].m(O,null))}for(;D<S.length;D+=1)S[D].d(1);S.length=K.length}N[8]&&N[7]<N[9]?F||(F=rn(),F.c(),F.m(U,null)):F&&(F.d(1),F=null),q[0]&896&&P!==(P=N[7]===N[9]||N[8])&&(U.disabled=P)},d(N){N&&C(e),R&&R.d(),Xe(S,N),F&&F.d(),L=!1,Ie(B)}}}function tn(s){let e;return{c(){e=f("span"),u(e,"class","loading-spinner mr-1 svelte-srpbru")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function sn(s){let e,t=s[25]+"",r,n,l,o,c;function d(){return s[21](s[25])}return{c(){e=f("button"),r=k(t),n=v(),e.disabled=s[8],u(e,"class",l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[7]===s[25]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(a,m){E(a,e,m),i(e,r),i(e,n),o||(c=se(e,"click",d),o=!0)},p(a,m){s=a,m[0]&640&&t!==(t=s[25]+"")&&$(r,t),m[0]&256&&(e.disabled=s[8]),m[0]&640&&l!==(l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[7]===s[25]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&u(e,"class",l)},d(a){a&&C(e),o=!1,c()}}}function rn(s){let e;return{c(){e=f("span"),u(e,"class","loading-spinner ml-1 svelte-srpbru")},m(t,r){E(t,e,r)},d(t){t&&C(e)}}}function Ji(s){let e,t,r,n,l,o,c,d,a,m,p,b,g,_=(s[8]?"...":s[1].listMemberProfiles.length)+"",w,A,O,M,U,I,P,L,B,R,K=s[1].listMemberProfiles.length+"",S,F,N=s[1].listMembers.length+"",q,D,G,ee,ue,oe;t=new Ii({});let re=s[4].size>0&&zr(s),y=s[6].success.length>0&&qr(s),h=s[6].errors.length>0&&Vr(s);function W(T,j){return T[2]?Bi:T[3]?Di:T[1].listMembers.length===0?Ki:Ni}let H=W(s),x=H(s);return ue=new ki({}),{c(){e=f("div"),We(t.$$.fragment),r=v(),re&&re.c(),n=v(),y&&y.c(),l=v(),h&&h.c(),o=v(),c=f("div"),d=f("div"),a=f("div"),m=f("h3"),m.textContent="Latest list members",p=v(),b=f("p"),g=k("Showing "),w=k(_),A=k(" of "),O=k(s[0]),M=k(`
					total members`),U=v(),I=f("div"),P=f("div"),L=k("Debug: isLoadingMembers="),B=k(s[2]),R=k(", profiles="),S=k(K),F=k(", members="),q=k(N),D=v(),x.c(),G=v(),ee=f("div"),We(ue.$$.fragment),u(m,"class","text-lg font-semibold text-slate-800 mb-2"),u(b,"class","text-sm text-slate-600"),u(a,"class","p-6 border-b border-gray-200"),u(P,"class","text-xs text-gray-500 mb-2"),u(I,"class","p-6 flex flex-col flex-1"),u(d,"id","list-members-container"),u(d,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),u(c,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),u(e,"class","space-y-6")},m(T,j){E(T,e,j),Pe(t,e,null),i(e,r),re&&re.m(e,null),i(e,n),y&&y.m(e,null),i(e,l),h&&h.m(e,null),i(e,o),i(e,c),i(c,d),i(d,a),i(a,m),i(a,p),i(a,b),i(b,g),i(b,w),i(b,A),i(b,O),i(b,M),i(d,U),i(d,I),i(I,P),i(P,L),i(P,B),i(P,R),i(P,S),i(P,F),i(P,q),i(I,D),x.m(I,null),i(c,G),i(c,ee),Pe(ue,ee,null),oe=!0},p(T,j){T[4].size>0?re?re.p(T,j):(re=zr(T),re.c(),re.m(e,n)):re&&(re.d(1),re=null),T[6].success.length>0?y?y.p(T,j):(y=qr(T),y.c(),y.m(e,l)):y&&(y.d(1),y=null),T[6].errors.length>0?h?h.p(T,j):(h=Vr(T),h.c(),h.m(e,o)):h&&(h.d(1),h=null),(!oe||j[0]&258)&&_!==(_=(T[8]?"...":T[1].listMemberProfiles.length)+"")&&$(w,_),(!oe||j[0]&1)&&$(O,T[0]),(!oe||j[0]&4)&&$(B,T[2]),(!oe||j[0]&2)&&K!==(K=T[1].listMemberProfiles.length+"")&&$(S,K),(!oe||j[0]&2)&&N!==(N=T[1].listMembers.length+"")&&$(q,N),H===(H=W(T))&&x?x.p(T,j):(x.d(1),x=H(T),x&&(x.c(),x.m(I,null)))},i(T){oe||(le(t.$$.fragment,T),le(ue.$$.fragment,T),oe=!0)},o(T){fe(t.$$.fragment,T),fe(ue.$$.fragment,T),oe=!1},d(T){T&&C(e),Te(t),re&&re.d(),y&&y.d(),h&&h.d(),x.d(),Te(ue)}}}const xs=25;function Fi(s,e,t){let r,n;xe(s,pe,S=>t(1,r=S)),xe(s,$e,S=>t(18,n=S));let l=!1,o="",c=new Set,d=!1,a={success:[],errors:[]},m=1,p=!1,b=!1,g=0,_=new Map,w=0,A=null;async function O(){if(!(!r.selectedList||!n.session||b)){t(16,b=!0),t(2,l=!0),t(3,o=""),t(7,m=1),_.clear();try{const S=await Ue.getListInfo(n.session,r.selectedList.uri,n.authType),F={...r.selectedList,name:S.name,description:S.description,createdAt:S.createdAt,listItemCount:S.listItemCount};pe.setSelectedList(F),t(0,w=S.listItemCount||0),t(9,g=Math.ceil(w/xs)),console.log("Total pages:",g,"Total count:",w),await M(1),pe.setListLoading(!1)}catch(S){console.error("Error loading list members:",S),t(3,o=S.message||"Failed to load list members"),pe.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,l=!1),t(16,b=!1),console.log("Final state - isLoadingMembers:",l,"isCurrentlyLoadingMembers:",b)}}}async function M(S){if(!(!n.session||!r.selectedList)){t(8,p=!0),t(7,m=S);try{let F=_.get(S-1);const N=await Ue.getListMembers(n.session,r.selectedList.uri,n.authType,xs,F);console.log(`Fetched ${N.members.length} members for page ${S}`),console.log("Members received:",N.members),N.cursor&&_.set(S,N.cursor),N.members.length===0?(console.warn("No members returned from API for page",S),t(3,o="No member data received from API")):t(3,o="");const q=N.profiles||[];console.log(`Using ${q.length} profiles from API response for page ${S}`),console.log("Setting profiles in store:",q.length),pe.setListMembers(N.members),pe.setListMemberProfiles(q),console.log("Profiles set in store, current count:",r.listMemberProfiles.length)}catch(F){console.error("Error loading members page:",F),t(3,o=F.message||"Failed to load page"),pe.setListMemberProfiles([])}finally{t(8,p=!1)}}}async function U(){if(c.size===0)return;t(5,d=!0),t(6,a={success:[],errors:[]});const S=Array.from(c);for(const F of S)try{await Ue.addToList(n.session,F,r.selectedList.uri,n.authType),a.success.push(F),await pe.fetchAndAddProfile(n.session,F,n.authType)}catch(N){a.errors.push({did:F,error:N.message})}c.clear(),t(4,c),t(5,d=!1)}async function I(S){S>=1&&S<=g&&await M(S)}async function P(){m<g&&await M(m+1)}async function L(){m>1&&await M(m-1)}const B=()=>M(m),R=(S,F)=>{let N;return g<=5||m<=3?N=F+1:m>=g-2?N=g-4+F:N=m-2+F,N},K=S=>I(S);return s.$$.update=()=>{var S,F,N;s.$$.dirty[0]&2&&r.refreshTrigger&&O(),s.$$.dirty[0]&2&&console.log("Profile count changed:",r.listMemberProfiles.length),s.$$.dirty[0]&3&&((S=r.selectedList)==null?void 0:S.listItemCount)!==w&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(F=r.selectedList)==null?void 0:F.listItemCount),console.log("Current totalMemberCount:",w),t(0,w=((N=r.selectedList)==null?void 0:N.listItemCount)||0),t(9,g=Math.ceil(w/xs))),s.$$.dirty[0]&458754&&r.selectedList&&n.session&&!b&&A!==r.selectedList.uri&&(console.log("List changed, loading members for:",r.selectedList.name),t(17,A=r.selectedList.uri),O())},[w,r,l,o,c,d,a,m,p,g,O,M,U,I,P,L,b,A,n,B,R,K]}class ji extends Je{constructor(e){super(),He(this,e,Fi,Ji,Re,{},null,[-1,-1])}}function nn(s){let e,t,r,n,l,o,c,d;return{c(){e=f("div"),t=f("div"),r=f("div"),n=v(),l=f("h3"),l.textContent="Getting Ready",o=v(),c=f("p"),d=k(s[1]),u(r,"class","loading-spinner mx-auto mb-4 svelte-3t5r6s"),u(l,"class","text-lg font-semibold text-slate-800 mb-2"),u(c,"class","text-slate-600"),u(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),u(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]")},m(a,m){E(a,e,m),i(e,t),i(t,r),i(t,n),i(t,l),i(t,o),i(t,c),i(c,d)},p(a,m){m&2&&$(d,a[1])},d(a){a&&C(e)}}}function $i(s){let e,t=s[0]&&nn(s);return{c(){t&&t.c(),e=et()},m(r,n){t&&t.m(r,n),E(r,e,n)},p(r,[n]){r[0]?t?t.p(r,n):(t=nn(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Q,o:Q,d(r){r&&C(e),t&&t.d(r)}}}function zi(s,e,t){let{isLoading:r=!1}=e,{message:n="Loading list data..."}=e;return s.$$set=l=>{"isLoading"in l&&t(0,r=l.isLoading),"message"in l&&t(1,n=l.message)},[r,n]}class qi extends Je{constructor(e){super(),He(this,e,zi,$i,Re,{isLoading:0,message:1})}}function ln(s){let e,t;return e=new jl({}),{c(){We(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Vi(s){let e,t;return e=new ji({}),{c(){We(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Yi(s){let e,t;return e=new Ql({}),{c(){We(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Gi(s){let e,t;return e=new ql({}),{c(){We(e.$$.fragment)},m(r,n){Pe(e,r,n),t=!0},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){fe(e.$$.fragment,r),t=!1},d(r){Te(e,r)}}}function Zi(s){let e,t,r,n,l,o,c,d,a=s[1]!=="auth"&&ln();const m=[Gi,Yi,Vi],p=[];function b(g,_){return g[1]==="auth"?0:g[1]==="list-selector"?1:g[1]==="manager"?2:-1}return~(n=b(s))&&(l=p[n]=m[n](s)),c=new qi({props:{isLoading:s[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=f("main"),a&&a.c(),t=v(),r=f("div"),l&&l.c(),o=v(),We(c.$$.fragment),u(r,"class","max-w-6xl mx-auto p-6"),u(e,"class","min-h-screen bg-gray-50")},m(g,_){E(g,e,_),a&&a.m(e,null),i(e,t),i(e,r),~n&&p[n].m(r,null),i(e,o),Pe(c,e,null),d=!0},p(g,[_]){g[1]!=="auth"?a?_&2&&le(a,1):(a=ln(),a.c(),le(a,1),a.m(e,t)):a&&(It(),fe(a,1,1,()=>{a=null}),Rt());let w=n;n=b(g),n!==w&&(l&&(It(),fe(p[w],1,1,()=>{p[w]=null}),Rt()),~n?(l=p[n],l||(l=p[n]=m[n](g),l.c()),le(l,1),l.m(r,null)):l=null);const A={};_&1&&(A.isLoading=g[0].isLoadingList),c.$set(A)},i(g){d||(le(a),le(l),le(c.$$.fragment,g),d=!0)},o(g){fe(a),fe(l),fe(c.$$.fragment,g),d=!1},d(g){g&&C(e),a&&a.d(),~n&&p[n].d(),Te(c)}}}function Qi(s,e,t){let r,n;xe(s,pe,o=>t(0,r=o)),xe(s,$e,o=>t(2,n=o));let l="auth";return dn(()=>{const{session:o,authType:c}=$e.initializeSession();o&&(console.log("Session restored:",{authType:c,handle:o.handle||o.did}),t(1,l="list-selector"))}),s.$$.update=()=>{s.$$.dirty&5&&(n.session?r.selectedList?t(1,l="manager"):t(1,l="list-selector"):t(1,l="auth"))},[r,l,n]}class Xi extends Je{constructor(e){super(),He(this,e,Qi,Zi,Re,{})}}new Xi({target:document.getElementById("app")})});export default eo();
