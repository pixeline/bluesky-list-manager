var Qn=Object.defineProperty;var Er=s=>{throw TypeError(s)};var el=(s,e,t)=>e in s?Qn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Be=(s,e,t)=>el(s,typeof e!="symbol"?e+"":e,t),Ar=(s,e,t)=>e.has(s)||Er("Cannot "+t);var re=(s,e,t)=>(Ar(s,e,"read from private field"),t?t.call(s):e.get(s)),Xe=(s,e,t)=>e.has(s)?Er("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Qe=(s,e,t,r)=>(Ar(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();function ne(){}function An(s){return s()}function Pr(){return Object.create(null)}function Me(s){s.forEach(An)}function Pn(s){return typeof s=="function"}function Ee(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let ms;function tt(s,e){return s===e?!0:(ms||(ms=document.createElement("a")),ms.href=e,s===ms.href)}function tl(s){return Object.keys(s).length===0}function sl(s,...e){if(s==null){for(const r of e)r(void 0);return ne}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ie(s,e,t){s.$$.on_destroy.push(sl(e,t))}function i(s,e){s.appendChild(e)}function A(s,e,t){s.insertBefore(e,t||null)}function E(s){s.parentNode&&s.parentNode.removeChild(s)}function Ve(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function f(s){return document.createElement(s)}function _s(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function L(s){return document.createTextNode(s)}function w(){return L(" ")}function st(){return L("")}function ie(s,e,t,r){return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}function js(s){return function(e){return e.preventDefault(),s.call(this,e)}}function c(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Tn(s){let e;return{p(...t){e=t,e.forEach(r=>s.push(r))},r(){e.forEach(t=>s.splice(s.indexOf(t),1))}}}function rl(s){return Array.from(s.childNodes)}function q(s,e){e=""+e,s.data!==e&&(s.data=e)}function be(s,e){s.value=e??""}function fe(s,e,t,r){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,"")}function Tr(s,e,t){for(let r=0;r<s.options.length;r+=1){const n=s.options[r];if(n.__value===e){n.selected=!0;return}}s.selectedIndex=-1}function nl(s,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(s,{detail:e,bubbles:t,cancelable:r})}let jt;function Ft(s){jt=s}function Js(){if(!jt)throw new Error("Function called outside component initialization");return jt}function Cs(s){Js().$$.on_mount.push(s)}function In(s){Js().$$.on_destroy.push(s)}function Rn(){const s=Js();return(e,t,{cancelable:r=!1}={})=>{const n=s.$$.callbacks[e];if(n){const l=nl(e,t,{cancelable:r});return n.slice().forEach(o=>{o.call(s,l)}),!l.defaultPrevented}return!0}}const Et=[],ws=[];let Rt=[];const Ir=[],ll=Promise.resolve();let Ws=!1;function il(){Ws||(Ws=!0,ll.then(On))}function Hs(s){Rt.push(s)}const Os=new Set;let Ct=0;function On(){if(Ct!==0)return;const s=jt;do{try{for(;Ct<Et.length;){const e=Et[Ct];Ct++,Ft(e),ol(e.$$)}}catch(e){throw Et.length=0,Ct=0,e}for(Ft(null),Et.length=0,Ct=0;ws.length;)ws.pop()();for(let e=0;e<Rt.length;e+=1){const t=Rt[e];Os.has(t)||(Os.add(t),t())}Rt.length=0}while(Et.length);for(;Ir.length;)Ir.pop()();Ws=!1,Os.clear(),Ft(s)}function ol(s){if(s.fragment!==null){s.update(),Me(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(Hs)}}function al(s){const e=[],t=[];Rt.forEach(r=>s.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Rt=e}const gs=new Set;let dt;function ft(){dt={r:0,c:[],p:dt}}function mt(){dt.r||Me(dt.c),dt=dt.p}function ce(s,e){s&&s.i&&(gs.delete(s),s.i(e))}function de(s,e,t,r){if(s&&s.o){if(gs.has(s))return;gs.add(s),dt.c.push(()=>{gs.delete(s),r&&(t&&s.d(1),r())}),s.o(e)}else r&&r()}function ge(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function cl(s,e){s.d(1),e.delete(s.key)}function ul(s,e,t,r,n,l,o,u,d,a,m,p){let b=s.length,g=l.length,_=b;const v={};for(;_--;)v[s[_].key]=_;const C=[],x=new Map,M=new Map,R=[];for(_=g;_--;){const K=p(n,l,_),S=t(K);let W=o.get(S);W?R.push(()=>W.p(K,e)):(W=a(S,K),W.c()),x.set(S,C[_]=W),S in v&&M.set(S,Math.abs(_-v[S]))}const N=new Set,O=new Set;function T(K){ce(K,1),K.m(u,m),o.set(K.key,K),m=K.first,g--}for(;b&&g;){const K=C[g-1],S=s[b-1],W=K.key,I=S.key;K===S?(m=K.first,b--,g--):x.has(I)?!o.has(W)||N.has(W)?T(K):O.has(I)?b--:M.get(W)>M.get(I)?(O.add(W),T(K)):(N.add(I),b--):(d(S,o),b--)}for(;b--;){const K=s[b];x.has(K.key)||d(K,o)}for(;g;)T(C[g-1]);return Me(R),C}function Re(s){s&&s.c()}function Ce(s,e,t){const{fragment:r,after_update:n}=s.$$;r&&r.m(e,t),Hs(()=>{const l=s.$$.on_mount.map(An).filter(Pn);s.$$.on_destroy?s.$$.on_destroy.push(...l):Me(l),s.$$.on_mount=[]}),n.forEach(Hs)}function xe(s,e){const t=s.$$;t.fragment!==null&&(al(t.after_update),Me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function dl(s,e){s.$$.dirty[0]===-1&&(Et.push(s),il(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function Oe(s,e,t,r,n,l,o=null,u=[-1]){const d=jt;Ft(s);const a=s.$$={fragment:null,ctx:[],props:l,update:ne,not_equal:n,bound:Pr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Pr(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};o&&o(a.root);let m=!1;if(a.ctx=t?t(s,e.props||{},(p,b,...g)=>{const _=g.length?g[0]:b;return a.ctx&&n(a.ctx[p],a.ctx[p]=_)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](_),m&&dl(s,p)),b}):[],a.update(),m=!0,Me(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const p=rl(e.target);a.fragment&&a.fragment.l(p),p.forEach(E)}else a.fragment&&a.fragment.c();e.intro&&ce(s.$$.fragment),Ce(s,e.target,e.anchor),On()}Ft(d)}class De{constructor(){Be(this,"$$");Be(this,"$$set")}$destroy(){xe(this,1),this.$destroy=ne}$on(e,t){if(!Pn(t))return ne;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!tl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fl);const xt=[];function qs(s,e=ne){let t;const r=new Set;function n(u){if(Ee(s,u)&&(s=u,t)){const d=!xt.length;for(const a of r)a[1](),xt.push(a,s);if(d){for(let a=0;a<xt.length;a+=2)xt[a][0](xt[a+1]);xt.length=0}}}function l(u){n(u(s))}function o(u,d=ne){const a=[u,d];return r.add(a),r.size===1&&(t=e(n,l)||ne),u(s),()=>{r.delete(a),r.size===0&&t&&(t(),t=null)}}return{set:n,update:l,subscribe:o}}const It=new TextEncoder,Ss=new TextDecoder;function ml(...s){const e=s.reduce((n,{length:l})=>n+l,0),t=new Uint8Array(e);let r=0;for(const n of s)t.set(n,r),r+=n.length;return t}function pl(s){if(Uint8Array.prototype.toBase64)return s.toBase64();const e=32768,t=[];for(let r=0;r<s.length;r+=e)t.push(String.fromCharCode.apply(null,s.subarray(r,r+e)));return btoa(t.join(""))}function hl(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(s);const e=atob(s),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Dn(s){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof s=="string"?s:Ss.decode(s),{alphabet:"base64url"});let e=s;e instanceof Uint8Array&&(e=Ss.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return hl(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Ds(s){let e=s;return typeof e=="string"&&(e=It.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):pl(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class xs extends Error{constructor(t,r){var n;super(t,r);Be(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(n=Error.captureStackTrace)==null||n.call(Error,this,this.constructor)}}Be(xs,"code","ERR_JOSE_GENERIC");class qe extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Be(qe,"code","ERR_JOSE_NOT_SUPPORTED");class At extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JWS_INVALID")}}Be(At,"code","ERR_JWS_INVALID");class Kn extends xs{constructor(){super(...arguments);Be(this,"code","ERR_JWT_INVALID")}}Be(Kn,"code","ERR_JWT_INVALID");function Je(s,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${s}`)}function zt(s,e){return s.name===e}function Ks(s){return parseInt(s.name.slice(4),10)}function gl(s){switch(s){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function bl(s,e){if(!s.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function yl(s,e,t){switch(e){case"HS256":case"HS384":case"HS512":{if(!zt(s.algorithm,"HMAC"))throw Je("HMAC");const r=parseInt(e.slice(2),10);if(Ks(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!zt(s.algorithm,"RSASSA-PKCS1-v1_5"))throw Je("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(Ks(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!zt(s.algorithm,"RSA-PSS"))throw Je("RSA-PSS");const r=parseInt(e.slice(2),10);if(Ks(s.algorithm.hash)!==r)throw Je(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!zt(s.algorithm,"Ed25519"))throw Je("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!zt(s.algorithm,"ECDSA"))throw Je("ECDSA");const r=gl(e);if(s.algorithm.namedCurve!==r)throw Je(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}bl(s,t)}function Nn(s,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const n=t.pop();s+=`one of type ${t.join(", ")}, or ${n}.`}else t.length===2?s+=`one of type ${t[0]} or ${t[1]}.`:s+=`of type ${t[0]}.`;return e==null?s+=` Received ${e}`:typeof e=="function"&&e.name?s+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(s+=` Received an instance of ${e.constructor.name}`),s}const vl=(s,...e)=>Nn("Key must be ",s,...e);function Bn(s,e,...t){return Nn(`Key for the ${s} algorithm must be `,e,...t)}function Un(s){return(s==null?void 0:s[Symbol.toStringTag])==="CryptoKey"}function Wn(s){return(s==null?void 0:s[Symbol.toStringTag])==="KeyObject"}const Hn=s=>Un(s)||Wn(s),_l=(...s)=>{const e=s.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const n=Object.keys(r);if(!t||t.size===0){t=new Set(n);continue}for(const l of n){if(t.has(l))return!1;t.add(l)}}return!0};function wl(s){return typeof s=="object"&&s!==null}const Vs=s=>{if(!wl(s)||Object.prototype.toString.call(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e},Sl=(s,e)=>{if(s.startsWith("RS")||s.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${s} requires key modulusLength to be 2048 bits or larger`)}};function kl(s){let e,t;switch(s.kty){case"RSA":{switch(s.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.alg.slice(-3)}`},t=s.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(s.alg.slice(-3),10)||1}`},t=s.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(s.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=s.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=s.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(s.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},t=s.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:s.crv},t=s.d?["deriveBits"]:[];break;default:throw new qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new qe('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const zn=async s=>{if(!s.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=kl(s),r={...s};return delete r.alg,delete r.use,crypto.subtle.importKey("jwk",r,e,s.ext??!s.d,s.key_ops??t)};async function Ll(s,e,t){if(!Vs(s))throw new TypeError("JWK must be an object");let r;switch(e??(e=s.alg),r??(r=s.ext),s.kty){case"oct":if(typeof s.k!="string"||!s.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Dn(s.k);case"RSA":if("oth"in s&&s.oth!==void 0)throw new qe('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return zn({...s,alg:e,ext:r});default:throw new qe('Unsupported "kty" (Key Type) Parameter value')}}const Cl=(s,e,t,r,n)=>{if(n.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new s('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new s('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;t!==void 0?l=new Map([...Object.entries(t),...e.entries()]):l=e;for(const o of r.crit){if(!l.has(o))throw new qe(`Extension Header Parameter "${o}" is not recognized`);if(n[o]===void 0)throw new s(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&r[o]===void 0)throw new s(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)};function Ys(s){return Vs(s)&&typeof s.kty=="string"}function xl(s){return s.kty!=="oct"&&typeof s.d=="string"}function Ml(s){return s.kty!=="oct"&&typeof s.d>"u"}function El(s){return s.kty==="oct"&&typeof s.k=="string"}let Ot;const Rr=async(s,e,t,r=!1)=>{Ot||(Ot=new WeakMap);let n=Ot.get(s);if(n!=null&&n[t])return n[t];const l=await zn({...e,alg:t});return r&&Object.freeze(s),n?n[t]=l:Ot.set(s,{[t]:l}),l},Al=(s,e)=>{var o;Ot||(Ot=new WeakMap);let t=Ot.get(s);if(t!=null&&t[e])return t[e];const r=s.type==="public",n=!!r;let l;if(s.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}l=s.toCryptoKey(s.asymmetricKeyType,n,r?[]:["deriveBits"])}if(s.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");l=s.toCryptoKey(s.asymmetricKeyType,n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="rsa"){let u;switch(e){case"RSA-OAEP":u="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":u="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":u="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":u="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return s.toCryptoKey({name:"RSA-OAEP",hash:u},n,r?["encrypt"]:["decrypt"]);l=s.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:u},n,[r?"verify":"sign"])}if(s.asymmetricKeyType==="ec"){const d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((o=s.asymmetricKeyDetails)==null?void 0:o.namedCurve);if(!d)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&d==="P-256"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES384"&&d==="P-384"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e==="ES512"&&d==="P-521"&&(l=s.toCryptoKey({name:"ECDSA",namedCurve:d},n,[r?"verify":"sign"])),e.startsWith("ECDH-ES")&&(l=s.toCryptoKey({name:"ECDH",namedCurve:d},n,r?[]:["deriveBits"]))}if(!l)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return t?t[e]=l:Ot.set(s,{[e]:l}),l},Pl=async(s,e)=>{if(s instanceof Uint8Array||Un(s))return s;if(Wn(s)){if(s.type==="secret")return s.export();if("toCryptoKey"in s&&typeof s.toCryptoKey=="function")try{return Al(s,e)}catch(r){if(r instanceof TypeError)throw r}let t=s.export({format:"jwk"});return Rr(s,t,e)}if(Ys(s))return s.k?Dn(s.k):Rr(s,s,e,!0);throw new Error("unreachable")},Pt=s=>s==null?void 0:s[Symbol.toStringTag],zs=(s,e,t)=>{var r,n;if(e.use!==void 0){let l;switch(t){case"sign":case"verify":l="sig";break;case"encrypt":case"decrypt":l="enc";break}if(e.use!==l)throw new TypeError(`Invalid key for this operation, its "use" must be "${l}" when present`)}if(e.alg!==void 0&&e.alg!==s)throw new TypeError(`Invalid key for this operation, its "alg" must be "${s}" when present`);if(Array.isArray(e.key_ops)){let l;switch(!0){case t==="sign":case s==="dir":case s.includes("CBC-HS"):l=t;break;case s.startsWith("PBES2"):l="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(s):!s.includes("GCM")&&s.endsWith("KW")?l="unwrapKey":l=t;break;case t==="encrypt":l="wrapKey";break;case t==="decrypt":l=s.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(l&&((n=(r=e.key_ops)==null?void 0:r.includes)==null?void 0:n.call(r,l))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${l}" when present`)}return!0},Tl=(s,e,t)=>{if(!(e instanceof Uint8Array)){if(Ys(e)){if(El(e)&&zs(s,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Hn(e))throw new TypeError(Bn(s,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Pt(e)} instances for symmetric algorithms must be of type "secret"`)}},Il=(s,e,t)=>{if(Ys(e))switch(t){case"decrypt":case"sign":if(xl(e)&&zs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Ml(e)&&zs(s,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Hn(e))throw new TypeError(Bn(s,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Pt(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(t){case"sign":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(t){case"verify":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Pt(e)} instances for asymmetric algorithm encryption must be of type "public"`)}},Rl=(s,e,t)=>{s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(s)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(s)?Tl(s,e,t):Il(s,e,t)},Ol=(s,e)=>{const t=`SHA-${s.slice(-3)}`;switch(s){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:parseInt(s.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};default:throw new qe(`alg ${s} is not supported either by JOSE or your javascript runtime`)}},Dl=async(s,e,t)=>{if(e instanceof Uint8Array){if(!s.startsWith("HS"))throw new TypeError(vl(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${s.slice(-3)}`,name:"HMAC"},!1,[t])}return yl(e,s,t),e},at=s=>Math.floor(s.getTime()/1e3),Fn=60,jn=Fn*60,$s=jn*24,Kl=$s*7,Nl=$s*365.25,Bl=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Ns=s=>{const e=Bl.exec(s);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let n;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(t*Fn);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(t*jn);break;case"day":case"days":case"d":n=Math.round(t*$s);break;case"week":case"weeks":case"w":n=Math.round(t*Kl);break;default:n=Math.round(t*Nl);break}return e[1]==="-"||e[4]==="ago"?-n:n};function ct(s,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${s} input`);return e}var he;class Ul{constructor(e){Xe(this,he);if(!Vs(e))throw new TypeError("JWT Claims Set MUST be an object");Qe(this,he,structuredClone(e))}data(){return It.encode(JSON.stringify(re(this,he)))}get iss(){return re(this,he).iss}set iss(e){re(this,he).iss=e}get sub(){return re(this,he).sub}set sub(e){re(this,he).sub=e}get aud(){return re(this,he).aud}set aud(e){re(this,he).aud=e}set jti(e){re(this,he).jti=e}set nbf(e){typeof e=="number"?re(this,he).nbf=ct("setNotBefore",e):e instanceof Date?re(this,he).nbf=ct("setNotBefore",at(e)):re(this,he).nbf=at(new Date)+Ns(e)}set exp(e){typeof e=="number"?re(this,he).exp=ct("setExpirationTime",e):e instanceof Date?re(this,he).exp=ct("setExpirationTime",at(e)):re(this,he).exp=at(new Date)+Ns(e)}set iat(e){typeof e>"u"?re(this,he).iat=at(new Date):e instanceof Date?re(this,he).iat=ct("setIssuedAt",at(e)):typeof e=="string"?re(this,he).iat=ct("setIssuedAt",at(new Date)+Ns(e)):re(this,he).iat=ct("setIssuedAt",e)}}he=new WeakMap;const Wl=async(s,e,t)=>{const r=await Dl(s,e,"sign");Sl(s,r);const n=await crypto.subtle.sign(Ol(s,r.algorithm),r,t);return new Uint8Array(n)};var Jt,Te,Fe;class Hl{constructor(e){Xe(this,Jt);Xe(this,Te);Xe(this,Fe);if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");Qe(this,Jt,e)}setProtectedHeader(e){if(re(this,Te))throw new TypeError("setProtectedHeader can only be called once");return Qe(this,Te,e),this}setUnprotectedHeader(e){if(re(this,Fe))throw new TypeError("setUnprotectedHeader can only be called once");return Qe(this,Fe,e),this}async sign(e,t){if(!re(this,Te)&&!re(this,Fe))throw new At("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!_l(re(this,Te),re(this,Fe)))throw new At("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...re(this,Te),...re(this,Fe)},n=Cl(At,new Map([["b64",!0]]),t==null?void 0:t.crit,re(this,Te),r);let l=!0;if(n.has("b64")&&(l=re(this,Te).b64,typeof l!="boolean"))throw new At('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if(typeof o!="string"||!o)throw new At('JWS "alg" (Algorithm) Header Parameter missing or invalid');Rl(o,e,"sign");let u=re(this,Jt);l&&(u=It.encode(Ds(u)));let d;re(this,Te)?d=It.encode(Ds(JSON.stringify(re(this,Te)))):d=It.encode("");const a=ml(d,It.encode("."),u),m=await Pl(e,o),p=await Wl(o,m,a),b={signature:Ds(p),payload:""};return l&&(b.payload=Ss.decode(u)),re(this,Fe)&&(b.header=re(this,Fe)),re(this,Te)&&(b.protected=Ss.decode(d)),b}}Jt=new WeakMap,Te=new WeakMap,Fe=new WeakMap;var Dt;class zl{constructor(e){Xe(this,Dt);Qe(this,Dt,new Hl(e))}setProtectedHeader(e){return re(this,Dt).setProtectedHeader(e),this}async sign(e,t){const r=await re(this,Dt).sign(e,t);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}Dt=new WeakMap;var et,Ke;class Fl{constructor(e={}){Xe(this,et);Xe(this,Ke);Qe(this,Ke,new Ul(e))}setIssuer(e){return re(this,Ke).iss=e,this}setSubject(e){return re(this,Ke).sub=e,this}setAudience(e){return re(this,Ke).aud=e,this}setJti(e){return re(this,Ke).jti=e,this}setNotBefore(e){return re(this,Ke).nbf=e,this}setExpirationTime(e){return re(this,Ke).exp=e,this}setIssuedAt(e){return re(this,Ke).iat=e,this}setProtectedHeader(e){return Qe(this,et,e),this}async sign(e,t){var n;const r=new zl(re(this,Ke).data());if(r.setProtectedHeader(re(this,et)),Array.isArray((n=re(this,et))==null?void 0:n.crit)&&re(this,et).crit.includes("b64")&&re(this,et).b64===!1)throw new Kn("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}et=new WeakMap,Ke=new WeakMap;const bs="bluesky_oauth_session",Jn="bluesky_code_verifier",qn="bluesky_oauth_state",Vn="bluesky_server_url";function Yn(s=128){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let t="";const r=new Uint8Array(s);crypto.getRandomValues(r);for(let n=0;n<s;n++)t+=e[r[n]%e.length];return t}async function $n(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t);return Gn(r)}function Gn(s){return btoa(String.fromCharCode(...new Uint8Array(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jl(s,e,t,r,n){try{const l=await crypto.subtle.exportKey("jwk",s.publicKey),o={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3),exp:Math.floor(Date.now()/1e3)+120};if(r&&(o.nonce=r),n){const m=new TextEncoder().encode(n),p=await crypto.subtle.digest("SHA-256",m);o.ath=Gn(p)}const u=await Ll(await crypto.subtle.exportKey("jwk",s.privateKey),"ES256");return await new Fl(o).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:{kty:l.kty,crv:l.crv,x:l.x,y:l.y}}).sign(u)}catch(l){throw console.error("Error creating DPoP JWT:",l),l}}async function Zn(s="https://bsky.social"){try{const e=Yn();localStorage.setItem(Jn,e);const t=await $n(e),r=crypto.randomUUID();localStorage.setItem(qn,r),localStorage.setItem(Vn,s);const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l=n?"http://localhost:5174/.well-known/oauth-client-metadata.json":"https://pixeline.be/bluesky-list-manager/.well-known/oauth-client-metadata.json",u=window.location.pathname.includes("/bluesky-list-manager")?"/bluesky-list-manager":"",d=n?`${window.location.origin}/oauth-callback.html`:`${window.location.origin}${u}/oauth-callback-standalone.html`,a=new URL(`${s}/oauth/authorize`);a.searchParams.append("client_id",l),a.searchParams.append("response_type","code"),a.searchParams.append("redirect_uri",d),a.searchParams.append("scope","atproto transition:generic"),a.searchParams.append("state",r),a.searchParams.append("code_challenge",t),a.searchParams.append("code_challenge_method","S256"),window.location.href=a.toString()}catch(e){throw console.error("Failed to start OAuth flow:",e),e}}async function ut(){const s=localStorage.getItem(bs);if(s)try{const e=JSON.parse(s);if(console.log("Retrieved stored OAuth session:",{hasAccessToken:!!e.accessToken,hasSub:!!e.sub,hasDpopKeypair:!!e.dpopKeypair,timestamp:e.timestamp}),e.dpopKeypair&&e.dpopKeypair.privateKey&&e.dpopKeypair.publicKey)try{if(!e.dpopKeypair.privateKey.kty||!e.dpopKeypair.publicKey.kty)throw console.error("Invalid JWK structure in stored DPoP keypair"),new Error("Invalid JWK structure");const t=await crypto.subtle.importKey("jwk",e.dpopKeypair.privateKey,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]),r=await crypto.subtle.importKey("jwk",e.dpopKeypair.publicKey,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);e.dpopKeypair={privateKey:t,publicKey:r},console.log("Successfully imported DPoP keypair")}catch(t){return console.error("Failed to import DPoP keypair:",t),localStorage.removeItem(bs),null}else console.warn("No DPoP keypair found in stored session");return e}catch(e){console.error("Failed to parse stored OAuth session:",e),localStorage.removeItem(bs)}return null}function Fs(){localStorage.removeItem(bs),localStorage.removeItem(Jn),localStorage.removeItem(qn),localStorage.removeItem(Vn)}const Jl=Object.freeze(Object.defineProperty({__proto__:null,clearOAuthSession:Fs,createDpopJwt:jl,generateCodeChallenge:$n,generateCodeVerifier:Yn,getStoredOAuthSession:ut,startOAuthFlow:Zn},Symbol.toStringTag,{value:"Module"})),Pe={SESSION:"bluesky_session",AUTH_TYPE:"bluesky_auth_type"},Tt={OAUTH:"oauth",APP_PASSWORD:"app_password"};function ql(){const{subscribe:s,set:e,update:t}=qs({session:null,authType:null,isLoading:!1,error:null});return{subscribe:s,setSession:(r,n=Tt.APP_PASSWORD)=>{r?(localStorage.setItem(Pe.SESSION,JSON.stringify(r)),localStorage.setItem(Pe.AUTH_TYPE,n)):(localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE)),e({session:r,authType:n,isLoading:!1,error:null})},setLoading:r=>{t(n=>({...n,isLoading:r}))},setError:r=>{t(n=>({...n,error:r,isLoading:!1}))},getSession:()=>{const r=localStorage.getItem(Pe.SESSION),n=localStorage.getItem(Pe.AUTH_TYPE)||Tt.APP_PASSWORD;if(r)try{return{session:JSON.parse(r),authType:n}}catch{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE)}return{session:null,authType:null}},clearSession:()=>{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE),Fs(),e({session:null,authType:null,isLoading:!1,error:null})},signOut:()=>{localStorage.removeItem(Pe.SESSION),localStorage.removeItem(Pe.AUTH_TYPE),Fs(),e({session:null,authType:null,isLoading:!1,error:null})},initializeSession:async()=>{console.log("Initializing session from storage...");const r=await ut();if(console.log("OAuth session found:",r),r&&r.accessToken){console.log("Converting OAuth session to compatible format...");let o=r.handle;if(!o||o.startsWith("did:")){console.log("OAuth session missing handle or has DID, attempting to resolve...");try{const d=`https://public.api.bsky.app/xrpc/app.bsky.actor.getProfile?actor=${r.sub}`;console.log("Fetching profile from public API:",d);const a=await fetch(d,{method:"GET"});if(a.ok){const m=await a.json();m!=null&&m.handle&&!m.handle.startsWith("did:")&&(o=m.handle,console.log("Successfully resolved handle from profile:",o),r.handle=o,console.log("Updated OAuth session handle in memory (not in localStorage to preserve DPoP keypair)"))}}catch(d){console.error("Failed to resolve handle from profile:",d)}}const u={accessJwt:r.accessToken,refreshJwt:r.refreshToken,handle:o||r.sub,did:r.sub,email:null};return console.log("Converted OAuth session:",u),e({session:u,authType:Tt.OAUTH,isLoading:!1,error:null}),{session:u,authType:Tt.OAUTH}}const{session:n,authType:l}=je.getSession();return n?(console.log("Using app password session:",n),e({session:n,authType:l,isLoading:!1,error:null}),{session:n,authType:l}):(console.log("No session found"),{session:null,authType:null})},isOAuthSession:()=>localStorage.getItem(Pe.AUTH_TYPE)===Tt.OAUTH}}const je=ql(),Vl="modulepreload",Yl=function(s,e){return new URL(s,e).href},Or={},$l=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=Promise.allSettled(t.map(a=>{if(a=Yl(a,r),a in Or)return;Or[a]=!0;const m=a.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const v=o[_];if(v.href===a&&(!m||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${p}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":Vl,m||(g.as="script"),g.crossOrigin="",g.href=a,d&&g.setAttribute("nonce",d),document.head.appendChild(g),m)return new Promise((_,v)=>{g.addEventListener("load",_),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${a}`)))})}))}function l(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return n.then(o=>{for(const u of o||[])u.status==="rejected"&&l(u.reason);return e().catch(l)})},Bs="https://bsky.social/xrpc";class Gl{async signIn(e,t){const r=await fetch(`${Bs}/com.atproto.server.createSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:e,password:t})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to sign in")}return await r.json()}async getAuthHeaders(e,t="app_password",r="GET",n="",l=null){if(t==="oauth"){const o=await ut();if(!(o!=null&&o.accessToken))throw new Error("No OAuth access token found");const u={Authorization:`Bearer ${o.accessToken}`};if(r!=="GET"||o.serverNonce)try{const{createDpopJwt:d}=await $l(async()=>{const{createDpopJwt:m}=await Promise.resolve().then(()=>Jl);return{createDpopJwt:m}},void 0,import.meta.url);let a=o.dpopKeypair;if(!(a&&typeof a=="object"&&a.privateKey)){if(a&&a.privateKey&&a.publicKey){const m=await crypto.subtle.importKey("jwk",a.privateKey,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]),p=await crypto.subtle.importKey("jwk",a.publicKey,{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);a={privateKey:m,publicKey:p}}}if(a){const m=await d(a,r,n,o.serverNonce);u.DPoP=m}}catch(d){console.warn("Failed to create DPoP JWT for OAuth request:",d)}return u}else return{Authorization:`Bearer ${e.accessJwt}`}}async makeBlueskyRequest(e,t,r="app_password",n="GET",l=null){let o;r==="oauth"?e.includes("app.bsky.actor.getProfile")||e.includes("app.bsky.actor.searchActors")||e.includes("com.atproto.identity.resolveHandle")||e.includes("app.bsky.graph.getLists")||e.includes("app.bsky.graph.getList")?(o="https://public.api.bsky.app/xrpc",console.log(`Using public API for endpoint: ${e}`)):(o=Bs,console.log(`Using PDS for authenticated endpoint: ${e}`)):o=Bs;const u=`${o}/${e}`;console.log(`makeBlueskyRequest: ${n} ${u} (authType: ${r})`);try{let d={};r==="oauth"&&o.includes("bsky.social")?d=await this.getAuthHeaders(t,r,n,u,l):r==="oauth"&&o.includes("public.api.bsky.app")?d=await this.getAuthHeaders(t,r,n,u,l):r==="app_password"&&(d=await this.getAuthHeaders(t,r,n,u,l)),console.log("Request headers:",d),l&&n!=="GET"&&(d["Content-Type"]="application/json");const a=await fetch(u,{method:n,headers:d,body:l?JSON.stringify(l):void 0});if(console.log(`Response status: ${a.status} ${a.statusText}`),!a.ok){const m=await a.json().catch(()=>({}));throw console.log("Response error:",m),new Error(m.message||`Request failed: ${a.status}`)}return await a.json()}catch(d){throw console.error(`Bluesky API request failed for ${e}:`,d),d}}async getUserLists(e,t="app_password"){if(console.log("getUserLists called with authType:",t),t==="oauth"){const r=await ut();if(console.log("OAuth session for getUserLists:",r),!(r!=null&&r.sub))throw console.error("OAuth session missing or invalid:",{hasSession:!!r,hasSub:!!(r!=null&&r.sub),sessionKeys:r?Object.keys(r):"null"}),new Error("No user DID found in OAuth session");const n=r.handle||r.sub;console.log("Using actor for getUserLists:",n);try{const l=await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${encodeURIComponent(n)}`,e,t);return console.log("getUserLists OAuth response:",l),l.lists||[]}catch(l){throw console.error("Failed to fetch user lists via OAuth:",l),l}}else return(await this.makeBlueskyRequest(`app.bsky.graph.getLists?actor=${encodeURIComponent(e.handle)}`,e,t)).lists||[]}async getListInfo(e,t,r="app_password"){return(await this.makeBlueskyRequest(`app.bsky.graph.getList?list=${encodeURIComponent(t)}`,e,r)).list}async getListMembers(e,t,r="app_password",n=25,l=null){var p;let o=`app.bsky.graph.getList?list=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r),d=u.items||[],a=d.map(b=>b.subject.did),m=d.map(b=>b.subject);return{members:a,profiles:m,cursor:u.cursor,totalCount:((p=u.list)==null?void 0:p.listItemCount)||0}}async getListMembersCount(e,t,r="app_password"){return(await this.getListInfo(e,t,r)).listItemCount||0}async getProfiles(e,t,r="app_password"){if(!t||t.length===0)return[];const n=[];for(const l of t)try{const o=await this.makeBlueskyRequest(`app.bsky.actor.getProfile?actor=${encodeURIComponent(l)}`,e,r);n.push(o)}catch(o){console.error(`Failed to fetch profile for ${l}:`,o),n.push({did:l,handle:"unknown",displayName:"Unknown User",avatar:null,description:null})}return n}async searchProfiles(e,t,r="app_password",n=25,l=null){let o=`app.bsky.actor.searchActors?term=${encodeURIComponent(t)}&limit=${n}`;l&&(o+=`&cursor=${encodeURIComponent(l)}`);const u=await this.makeBlueskyRequest(o,e,r);return{actors:u.actors||[],cursor:u.cursor}}async addToList(e,t,r,n="app_password"){let l;return n==="oauth"?l=(await ut()).sub:l=e.did,await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",record:{$type:"app.bsky.graph.listitem",subject:t,list:r,createdAt:new Date().toISOString()}})}async createList(e,{name:t,description:r="",purpose:n="app.bsky.graph.defs#curatelist"},l="app_password"){if(!t||typeof t!="string"||t.trim().length===0)throw new Error("List name is required");let o;if(l==="oauth"){const a=await ut();o=a==null?void 0:a.sub}else o=e==null?void 0:e.did;if(!o)throw new Error("Unable to determine user DID for list creation");const u={$type:"app.bsky.graph.list",name:t.trim(),createdAt:new Date().toISOString()};return r&&typeof r=="string"&&(u.description=r.trim()),n&&typeof n=="string"&&(u.purpose=n),await this.makeBlueskyRequest("com.atproto.repo.createRecord",e,l,"POST",{repo:o,collection:"app.bsky.graph.list",record:u})}async removeFromList(e,t,r,n="app_password"){var p;let l;n==="oauth"?l=(await ut()).sub:l=e.did,console.log("removeFromList: Searching for DID:",t,"in list:",r,"for user:",l);let o=null,u=null,d=0;do{const b=await this.makeBlueskyRequest(`com.atproto.repo.listRecords?repo=${l}&collection=app.bsky.graph.listitem&limit=100${o?`&cursor=${encodeURIComponent(o)}`:""}`,e,n);if(console.log("removeFromList: Found",((p=b.records)==null?void 0:p.length)||0,"records in this batch"),u=b.records.find(g=>{d++;const _=g.value.subject===t&&g.value.list===r;return _&&console.log("removeFromList: Found matching record:",g),_}),u){console.log("removeFromList: Found record with rkey:",u.rkey);break}o=b.cursor}while(o&&!u);if(console.log("removeFromList: Total records checked:",d),!u)throw new Error("List item not found");const a=u.uri.split("/").pop();if(!a)throw console.error("removeFromList: Could not extract rkey from URI:",u.uri),new Error("Could not extract rkey from URI");console.log("removeFromList: Deleting record with rkey:",a);const m=await this.makeBlueskyRequest("com.atproto.repo.deleteRecord",e,n,"POST",{repo:l,collection:"app.bsky.graph.listitem",rkey:a});return console.log("removeFromList: Delete successful"),m}async resolveHandle(e,t,r="app_password"){return(await this.makeBlueskyRequest(`com.atproto.identity.resolveHandle?handle=${encodeURIComponent(t)}`,e,r)).did}}const Le=new Gl,ke={SELECTED_LIST:"bluesky_selected_list",LISTS:"bluesky_lists"};function Zl(){const{subscribe:s,update:e}=qs({selectedList:null,userLists:[],listMembers:[],listMemberProfiles:[],isLoading:!1,error:null});let t=!1,r=new Map;return{subscribe:s,setSelectedList:n=>{n?localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)):localStorage.removeItem(ke.SELECTED_LIST),e(l=>({...l,selectedList:n,isLoadingList:!!n,listMembers:[],listMemberProfiles:[]})),r.clear()},setListLoading:n=>{e(l=>({...l,isLoadingList:n}))},setUserLists:n=>{localStorage.setItem(ke.LISTS,JSON.stringify(n)),e(l=>({...l,userLists:n}))},insertNewList:(n,l=!0)=>{!n||!n.uri||(e(o=>{const u=[n,...o.userLists];return localStorage.setItem(ke.LISTS,JSON.stringify(u)),l&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(n)),{...o,userLists:u,selectedList:l?n:o.selectedList,isLoadingList:!!l}}),r.clear())},setListMembers:n=>{e(l=>({...l,listMembers:n}))},isProfileInCurrentList:n=>{let l=!1;return e(o=>(l=o.listMembers.includes(n),o)),l},async isProfileInEntireList(n,l,o="app_password"){var a;let u;e(m=>(u=m,m));const d=`${(a=u.selectedList)==null?void 0:a.uri}-${l}`;if(r.has(d))return r.get(d);if(u.listMembers.includes(l))return r.set(d,!0),!0;try{let m=null;const p=100;do{const b=await Le.getListMembers(n,u.selectedList.uri,o,p,m);if(b.members.includes(l))return r.set(d,!0),!0;m=b.cursor}while(m);return r.set(d,!1),!1}catch(m){console.error("Error checking profile membership:",m);const p=u.listMembers.includes(l);return r.set(d,p),p}},setListMemberProfiles:n=>{e(l=>({...l,listMemberProfiles:n}))},addProfileToList:n=>{e(l=>{const o=l.listMembers.includes(n)?l.listMembers:[n,...l.listMembers];return{...l,listMembers:o}})},addProfileToDisplay:n=>{e(l=>{if(l.listMembers.indexOf(n.did)<25){const u=[n,...l.listMemberProfiles];return{...l,listMemberProfiles:u.slice(0,25)}}return l})},fetchAndAddProfile:(n,l,o="app_password")=>t?Promise.resolve():(t=!0,new Promise(async u=>{try{const d=await Le.getProfiles(n,[l],o);if(d.length>0){const a=d[0];e(m=>{const p=m.listMembers.includes(l)?m.listMembers:[l,...m.listMembers];if(p.indexOf(l)<25){const g=m.listMemberProfiles.filter(v=>v.did!==l),_=[a,...g];return{...m,listMembers:p,listMemberProfiles:_.slice(0,25)}}return{...m,listMembers:p}}),e(m=>{console.log("Updating member count for DID:",l),console.log("Current selectedList:",m.selectedList),console.log("Current userLists:",m.userLists),console.log("Incrementing member count for successfully added profile");const p=m.selectedList?{...m.selectedList,listItemCount:(m.selectedList.listItemCount||0)+1}:null,b=m.userLists.map(g=>{var _;return g.uri===((_=m.selectedList)==null?void 0:_.uri)?{...g,memberCount:(g.memberCount||0)+1}:g});return console.log("Updated selectedList:",p),console.log("Updated userLists:",b),p&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(p)),localStorage.setItem(ke.LISTS,JSON.stringify(b)),{...m,selectedList:p,userLists:b}})}}catch(d){console.error("Failed to fetch profile data:",d),e(a=>{const m=a.listMembers.includes(l)?a.listMembers:[l,...a.listMembers];return{...a,listMembers:m}}),e(a=>{console.log("Updating member count for DID (error case):",l),console.log("Incrementing member count for profile (error case)");const m=a.selectedList?{...a.selectedList,listItemCount:(a.selectedList.listItemCount||0)+1}:null,p=a.userLists.map(b=>{var g;return b.uri===((g=a.selectedList)==null?void 0:g.uri)?{...b,memberCount:(b.memberCount||0)+1}:b});return m&&localStorage.setItem(ke.SELECTED_LIST,JSON.stringify(m)),localStorage.setItem(ke.LISTS,JSON.stringify(p)),{...a,selectedList:m,userLists:p}})}finally{t=!1}u()})),refreshListMembers:()=>{e(n=>({...n,refreshTrigger:Date.now()}))},setLoading:n=>{e(l=>({...l,isLoading:n}))},setError:n=>{e(l=>({...l,error:n,isLoading:!1}))},getSelectedList:()=>{const n=localStorage.getItem(ke.SELECTED_LIST);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.SELECTED_LIST)}return null},getUserLists:()=>{const n=localStorage.getItem(ke.LISTS);if(n)try{return JSON.parse(n)}catch{localStorage.removeItem(ke.LISTS)}return[]},clearSelectedList:()=>{localStorage.removeItem(ke.SELECTED_LIST),e(n=>({...n,selectedList:null}))},async getAllListMemberDids(n,l="app_password"){let o;if(e(d=>(o=d,d)),!o.selectedList)return new Set;const u=`${o.selectedList.uri}-all-dids`;if(r.has(u))return r.get(u);try{let d=new Set,a=null;const m=100;do{const p=await Le.getListMembers(n,o.selectedList.uri,l,m,a);p.members.forEach(b=>d.add(b)),a=p.cursor}while(a);return r.set(u,d),d}catch(d){console.error("Error getting all list member DIDs:",d);const a=new Set(o.listMembers);return r.set(u,a),a}}}}const pe=Zl();function Xl(s){let e,t,r,n,l,o,u,d,a,m,p,b,g;return{c(){e=f("div"),t=f("label"),t.textContent="Handle",r=w(),n=f("input"),l=w(),o=f("div"),u=f("label"),u.textContent="App Password",d=w(),a=f("input"),m=w(),p=f("p"),p.textContent="Use an app password, not your main account password",c(t,"for","handle"),c(t,"class","block text-sm font-medium text-gray-700 mb-1"),c(n,"id","handle"),c(n,"type","text"),c(n,"placeholder","your-handle.bsky.social"),c(n,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),n.required=!0,c(u,"for","password"),c(u,"class","block text-sm font-medium text-gray-700 mb-1"),c(a,"id","password"),c(a,"type","password"),c(a,"placeholder","Your app password"),c(a,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),a.required=!0,c(p,"class","text-xs text-gray-500 mt-1")},m(_,v){A(_,e,v),i(e,t),i(e,r),i(e,n),be(n,s[0]),A(_,l,v),A(_,o,v),i(o,u),i(o,d),i(o,a),be(a,s[1]),i(o,m),i(o,p),b||(g=[ie(n,"input",s[11]),ie(a,"input",s[12])],b=!0)},p(_,v){v&1&&n.value!==_[0]&&be(n,_[0]),v&2&&a.value!==_[1]&&be(a,_[1])},d(_){_&&(E(e),E(l),E(o)),b=!1,Me(g)}}}function Ql(s){let e;return{c(){e=f("div"),e.innerHTML=`<div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800">Secure OAuth Login</h3> <div class="mt-2 text-sm text-blue-700"><p>You&#39;ll be redirected to Bluesky to sign in securely. No passwords are stored on
										this site.</p></div></div></div>`,c(e,"class","bg-blue-50 border-2 border-blue-200 rounded-lg p-4")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function Dr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=L(s[3]),c(t,"class","text-red-700 text-sm"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-3")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&E(e)}}}function ei(s){let e;return{c(){e=L("Sign In")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function ti(s){let e;return{c(){e=L("Sign in with Bluesky")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function si(s){let e,t,r;function n(u,d){return u[4]==="oauth"?ni:ri}let l=n(s),o=l(s);return{c(){e=f("span"),t=w(),o.c(),r=st(),c(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(u,d){A(u,e,d),A(u,t,d),o.m(u,d),A(u,r,d)},p(u,d){l!==(l=n(u))&&(o.d(1),o=l(u),o&&(o.c(),o.m(r.parentNode,r)))},d(u){u&&(E(e),E(t),E(r)),o.d(u)}}}function ri(s){let e;return{c(){e=L("Signing in...")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function ni(s){let e;return{c(){e=L("Connecting...")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function li(s){let e,t,r,n,l,o,u,d,a,m,p,b,g,_,v,C,x,M,R,N,O,T,K,S,W,I,D,z,se,P,B,j,Z,oe,te,y,h,H,k,F,V,ee;function Y(J,ue){return J[4]==="oauth"?Ql:Xl}let $=Y(s),U=$(s),G=s[3]&&Dr(s);function ae(J,ue){return J[2]?si:J[4]==="oauth"?ti:ei}let le=ae(s),Q=le(s);return F=Tn(s[9][0]),{c(){e=f("div"),t=f("button"),r=w(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Sign in to Bluesky",u=w(),d=f("button"),d.textContent="Ã—",a=w(),m=f("form"),p=f("div"),b=f("div"),g=f("fieldset"),_=f("legend"),_.textContent="Sign in with:",v=w(),C=f("div"),x=f("div"),M=f("label"),R=f("input"),N=w(),O=f("span"),O.textContent="OAuth",T=w(),K=f("span"),K.textContent="Recommended",S=w(),W=f("p"),W.textContent="Secure OAuth login with Bluesky. No passwords stored on this site.",I=w(),D=f("label"),z=f("input"),se=w(),P=f("span"),P.textContent="App Password",B=w(),j=f("p"),j.textContent="Traditional login using your Bluesky handle and app password.",Z=w(),U.c(),oe=w(),G&&G.c(),te=w(),y=f("div"),h=f("button"),h.textContent="Cancel",H=w(),k=f("button"),Q.c(),c(t,"class","absolute inset-0 w-full h-full bg-transparent border-0 cursor-default"),c(t,"aria-label","Close modal"),c(t,"type","button"),c(o,"class","text-xl font-semibold text-slate-800"),c(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),c(l,"class","flex items-center justify-between mb-4"),c(_,"class","block text-sm font-medium text-gray-700 mb-2"),c(R,"type","radio"),R.__value="oauth",be(R,R.__value),c(R,"class","mr-2"),c(O,"class","text-sm font-medium"),c(K,"class","ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),c(M,"class","flex items-center"),c(W,"class","text-xs text-gray-500 ml-6 mt-1"),c(x,"class","mb-4"),c(z,"type","radio"),z.__value="app_password",be(z,z.__value),c(z,"class","mr-2"),c(P,"class","text-sm"),c(j,"class","text-xs text-gray-500 ml-6 mt-1"),c(D,"class","flex items-center"),c(C,"class","space-y-2"),c(h,"type","button"),c(h,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),c(k,"type","submit"),k.disabled=s[2],c(k,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),c(y,"class","flex space-x-3 pt-2"),c(p,"class","space-y-4"),c(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),c(n,"role","document"),c(n,"id","sign-in-modal-content"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),c(e,"role","dialog"),c(e,"aria-modal","true"),c(e,"tabindex","-1"),c(e,"id","sign-in-modal"),F.p(R,z)},m(J,ue){A(J,e,ue),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,a),i(n,m),i(m,p),i(p,b),i(b,g),i(g,_),i(g,v),i(g,C),i(C,x),i(x,M),i(M,R),R.checked=R.__value===s[4],i(M,N),i(M,O),i(M,T),i(M,K),i(x,S),i(x,W),i(C,I),i(C,D),i(D,z),z.checked=z.__value===s[4],i(D,se),i(D,P),i(D,B),i(D,j),i(p,Z),U.m(p,null),i(p,oe),G&&G.m(p,null),i(p,te),i(p,y),i(y,h),i(y,H),i(y,k),Q.m(k,null),V||(ee=[ie(t,"click",s[7]),ie(d,"click",s[6]),ie(R,"change",s[8]),ie(z,"change",s[10]),ie(h,"click",s[6]),ie(m,"submit",js(s[5])),ie(e,"keydown",s[13])],V=!0)},p(J,[ue]){ue&16&&(R.checked=R.__value===J[4]),ue&16&&(z.checked=z.__value===J[4]),$===($=Y(J))&&U?U.p(J,ue):(U.d(1),U=$(J),U&&(U.c(),U.m(p,oe))),J[3]?G?G.p(J,ue):(G=Dr(J),G.c(),G.m(p,te)):G&&(G.d(1),G=null),le===(le=ae(J))&&Q?Q.p(J,ue):(Q.d(1),Q=le(J),Q&&(Q.c(),Q.m(k,null))),ue&4&&(k.disabled=J[2])},i:ne,o:ne,d(J){J&&E(e),U.d(),G&&G.d(),Q.d(),F.r(),V=!1,Me(ee)}}}function ii(s,e,t){const r=Rn();let n="",l="",o=!1,u="",d="oauth";async function a(){t(2,o=!0),t(3,u="");try{await Zn()}catch(N){t(3,u=N.message||"Failed to start OAuth flow"),t(2,o=!1)}}async function m(){if(!n||!l){t(3,u="Please enter both handle and password");return}t(2,o=!0),t(3,u="");try{const N=await Le.signIn(n,l);je.setSession(N,Tt.APP_PASSWORD),r("close")}catch(N){t(3,u=N.message||"Failed to sign in. Please check your credentials.")}finally{t(2,o=!1)}}async function p(){d==="oauth"?await a():await m()}function b(){r("close")}function g(){b()}const _=[[]];function v(){d=this.__value,t(4,d)}function C(){d=this.__value,t(4,d)}function x(){n=this.value,t(0,n)}function M(){l=this.value,t(1,l)}return[n,l,o,u,d,p,b,g,v,_,C,x,M,N=>N.key==="Escape"&&b()]}class Xn extends De{constructor(e){super(),Oe(this,e,ii,li,Ee,{})}}function Kr(s){let e,t;return{c(){e=f("div"),t=L(s[4]),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700")},m(r,n){A(r,e,n),i(e,t)},p(r,n){n&16&&q(t,r[4])},d(r){r&&E(e)}}}function oi(s){let e;return{c(){e=L("Create")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function ai(s){let e;return{c(){e=L("Creating...")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function ci(s){let e,t,r,n,l,o,u,d,a,m,p,b,g,_,v,C,x,M,R,N,O,T,K,S,W,I,D,z,se,P,B,j,Z,oe,te,y,h,H,k,F,V,ee,Y,$,U=s[4]&&Kr(s);function G(Q,J){return Q[3]?ai:oi}let ae=G(s),le=ae(s);return ee=Tn(s[10][0]),{c(){e=f("div"),t=f("button"),r=w(),n=f("div"),l=f("div"),o=f("h2"),o.textContent="Create New List",u=w(),d=f("button"),d.textContent="Ã—",a=w(),m=f("form"),p=f("div"),b=f("div"),g=f("label"),g.textContent="Name",_=w(),v=f("input"),C=w(),x=f("div"),M=f("label"),M.textContent="Description (optional)",R=w(),N=f("textarea"),O=w(),T=f("div"),K=f("fieldset"),S=f("legend"),S.textContent="Purpose",W=w(),I=f("div"),D=f("label"),z=f("input"),se=w(),P=f("span"),P.textContent="Curated list",B=w(),j=f("label"),Z=f("input"),oe=w(),te=f("span"),te.textContent="Moderation list",y=w(),U&&U.c(),h=w(),H=f("div"),k=f("button"),k.textContent="Cancel",F=w(),V=f("button"),le.c(),c(t,"class","absolute inset-0 w-full h-full bg-transparent border-0"),c(t,"aria-label","Close"),c(o,"class","text-xl font-semibold text-slate-800"),c(d,"class","text-gray-400 hover:text-gray-600 text-2xl font-bold"),c(l,"class","flex items-center justify-between mb-4"),c(g,"class","block text-sm font-medium text-gray-700 mb-1"),c(g,"for","list-name"),c(v,"id","list-name"),c(v,"type","text"),v.required=!0,c(v,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c(M,"class","block text-sm font-medium text-gray-700 mb-1"),c(M,"for","list-description"),c(N,"id","list-description"),c(N,"rows","3"),c(N,"class","w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"),c(S,"class","block text-sm font-medium text-gray-700 mb-2"),c(z,"type","radio"),c(z,"name","purpose"),z.__value="app.bsky.graph.defs#curatelist",be(z,z.__value),c(z,"class","mr-2"),c(P,"class","text-sm"),c(D,"class","flex items-center"),c(Z,"type","radio"),c(Z,"name","purpose"),Z.__value="app.bsky.graph.defs#modlist",be(Z,Z.__value),c(Z,"class","mr-2"),c(te,"class","text-sm"),c(j,"class","flex items-center"),c(I,"class","space-y-2"),c(k,"type","button"),c(k,"class","flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"),c(V,"type","submit"),V.disabled=s[3],c(V,"class","flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"),c(H,"class","flex space-x-3 pt-2"),c(p,"class","space-y-4"),c(n,"class","bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative z-10"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"),c(e,"role","dialog"),c(e,"aria-modal","true"),ee.p(z,Z)},m(Q,J){A(Q,e,J),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(l,u),i(l,d),i(n,a),i(n,m),i(m,p),i(p,b),i(b,g),i(b,_),i(b,v),be(v,s[0]),i(p,C),i(p,x),i(x,M),i(x,R),i(x,N),be(N,s[1]),i(p,O),i(p,T),i(T,K),i(K,S),i(K,W),i(K,I),i(I,D),i(D,z),z.checked=z.__value===s[2],i(D,se),i(D,P),i(I,B),i(I,j),i(j,Z),Z.checked=Z.__value===s[2],i(j,oe),i(j,te),i(p,y),U&&U.m(p,null),i(p,h),i(p,H),i(H,k),i(H,F),i(H,V),le.m(V,null),Y||($=[ie(t,"click",s[5]),ie(d,"click",s[5]),ie(v,"input",s[7]),ie(N,"input",s[8]),ie(z,"change",s[9]),ie(Z,"change",s[11]),ie(k,"click",s[5]),ie(m,"submit",js(s[6]))],Y=!0)},p(Q,[J]){J&1&&v.value!==Q[0]&&be(v,Q[0]),J&2&&be(N,Q[1]),J&4&&(z.checked=z.__value===Q[2]),J&4&&(Z.checked=Z.__value===Q[2]),Q[4]?U?U.p(Q,J):(U=Kr(Q),U.c(),U.m(p,h)):U&&(U.d(1),U=null),ae!==(ae=G(Q))&&(le.d(1),le=ae(Q),le&&(le.c(),le.m(V,null))),J&8&&(V.disabled=Q[3])},i:ne,o:ne,d(Q){Q&&E(e),U&&U.d(),le.d(),ee.r(),Y=!1,Me($)}}}function ui(s,e,t){let r;Ie(s,je,x=>t(12,r=x));const n=Rn();let l="",o="",u="app.bsky.graph.defs#curatelist",d=!1,a="";function m(){n("close")}async function p(){var x;if(t(4,a=""),!l||l.trim().length===0){t(4,a="Please enter a list name");return}t(3,d=!0);try{const M=await Le.createList(r.session,{name:l.trim(),description:o.trim(),purpose:u},r.authType),R=(M==null?void 0:M.uri)||((x=M==null?void 0:M.cid)==null?void 0:x.uri)||null,N=new Date().toISOString(),O={uri:R,name:l.trim(),description:o.trim()||"",purpose:u,createdAt:N,memberCount:0};n("success",O),n("close")}catch(M){t(4,a=(M==null?void 0:M.message)||"Failed to create list")}finally{t(3,d=!1)}}const b=[[]];function g(){l=this.value,t(0,l)}function _(){o=this.value,t(1,o)}function v(){u=this.__value,t(2,u)}function C(){u=this.__value,t(2,u)}return[l,o,u,d,a,m,p,g,_,v,b,C]}class di extends De{constructor(e){super(),Oe(this,e,ui,ci,Ee,{})}}const fi=!0,ks={staticBase:"static",isDevelopment:!1,isProduction:fi,buildTime:new Date().toISOString(),getAssetPath:s=>`./${s.replace("static/","")}`};function Nr(s,e,t){const r=s.slice();return r[14]=e[t],r}function mi(s){let e,t,r;return{c(){e=f("button"),e.textContent="ðŸ” Sign in with Bluesky",c(e,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-5 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-colors duration-200"),c(e,"id","sign-in-button")},m(n,l){A(n,e,l),t||(r=ie(e,"click",s[7]),t=!0)},p:ne,d(n){n&&E(e),t=!1,r()}}}function pi(s){let e,t,r,n,l,o,u,d,a,m,p,b,g,_=s[1].session.handle+"",v,C,x,M,R;function N(S,W){return S[4]?bi:S[5]?gi:hi}let O=N(s),T=O(s),K=s[5]&&Ur(s);return{c(){e=f("div"),t=f("label"),t.textContent="List:",r=w(),n=f("select"),l=f("option"),l.textContent="Select a list...",T.c(),u=w(),K&&K.c(),d=w(),a=f("button"),a.textContent="+ New List",m=w(),p=f("div"),b=f("div"),g=L("@"),v=L(_),C=w(),x=f("button"),x.textContent="Sign out",c(t,"for","list-selector"),c(t,"class","block text-sm font-medium text-gray-700 mb-1"),l.__value="",be(l,l.__value),c(n,"id","list-selector"),c(n,"class","w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"),n.disabled=s[4],c(e,"class","flex-1"),c(a,"class","bg-white hover:bg-gray-50 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),c(a,"id","new-list-button"),c(a,"title","Create a new list"),c(b,"class","text-sm text-slate-700"),c(x,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-3 py-1.5 rounded-lg text-xs cursor-pointer transition-colors duration-200 font-medium"),c(x,"id","sign-out-button"),c(p,"class","text-right"),c(p,"id","user-info")},m(S,W){var I;A(S,e,W),i(e,t),i(e,r),i(e,n),i(n,l),T.m(n,null),Tr(n,((I=s[0].selectedList)==null?void 0:I.uri)||""),i(e,u),K&&K.m(e,null),A(S,d,W),A(S,a,W),A(S,m,W),A(S,p,W),i(p,b),i(b,g),i(b,v),i(p,C),i(p,x),M||(R=[ie(n,"change",s[6]),ie(a,"click",s[8]),ie(x,"click",s[12])],M=!0)},p(S,W){var I,D;O===(O=N(S))&&T?T.p(S,W):(T.d(1),T=O(S),T&&(T.c(),T.m(n,null))),W&1&&o!==(o=((I=S[0].selectedList)==null?void 0:I.uri)||"")&&Tr(n,((D=S[0].selectedList)==null?void 0:D.uri)||""),W&16&&(n.disabled=S[4]),S[5]?K?K.p(S,W):(K=Ur(S),K.c(),K.m(e,null)):K&&(K.d(1),K=null),W&2&&_!==(_=S[1].session.handle+"")&&q(v,_)},d(S){S&&(E(e),E(d),E(a),E(m),E(p)),T.d(),K&&K.d(),M=!1,Me(R)}}}function hi(s){let e,t=ge(s[0].userLists),r=[];for(let n=0;n<t.length;n+=1)r[n]=Br(Nr(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);A(n,e,l)},p(n,l){if(l&1){t=ge(n[0].userLists);let o;for(o=0;o<t.length;o+=1){const u=Nr(n,t,o);r[o]?r[o].p(u,l):(r[o]=Br(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&E(e),Ve(r,n)}}}function gi(s){let e;return{c(){e=f("option"),e.textContent="Error loading lists",e.disabled=!0,e.__value="Error loading lists",be(e,e.__value)},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function bi(s){let e;return{c(){e=f("option"),e.textContent="Loading lists...",e.disabled=!0,e.__value="Loading lists...",be(e,e.__value)},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function Br(s){let e,t=s[14].name+"",r,n,l=s[14].memberCount.toLocaleString()+"",o,u,d;return{c(){e=f("option"),r=L(t),n=L(" ("),o=L(l),u=L(` members)
									`),e.__value=d=s[14].uri,be(e,e.__value)},m(a,m){A(a,e,m),i(e,r),i(e,n),i(e,o),i(e,u)},p(a,m){m&1&&t!==(t=a[14].name+"")&&q(r,t),m&1&&l!==(l=a[14].memberCount.toLocaleString()+"")&&q(o,l),m&1&&d!==(d=a[14].uri)&&(e.__value=d,be(e,e.__value))},d(a){a&&E(e)}}}function Ur(s){let e,t;return{c(){e=f("p"),t=L(s[5]),c(e,"class","text-sm text-red-600 mt-1")},m(r,n){A(r,e,n),i(e,t)},p(r,n){n&32&&q(t,r[5])},d(r){r&&E(e)}}}function Wr(s){let e,t;return e=new Xn({}),e.$on("close",s[11]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:ne,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Hr(s){let e,t;return e=new di({}),e.$on("close",s[9]),e.$on("success",s[10]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:ne,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function yi(s){let e,t,r,n,l,o,u,d,a,m;function p(C,x){return C[1].session?pi:mi}let b=p(s),g=b(s),_=s[2]&&Wr(s),v=s[3]&&Hr(s);return{c(){e=f("header"),t=f("div"),r=f("div"),n=f("div"),n.innerHTML=`<h1 class="text-2xl font-bold m-0 text-slate-800 flex items-center gap-2"><img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-6 h-6" alt="Bluesky Logo"/>
					Bluesky List Manager</h1> <p class="text-sm text-slate-600 m-0 mt-1">Manage members in your Bluesky lists</p>`,l=w(),o=f("div"),g.c(),u=w(),_&&_.c(),d=w(),v&&v.c(),a=st(),c(o,"class","flex items-center space-x-4"),c(r,"class","flex items-center justify-between mb-4"),c(t,"class","max-w-6xl mx-auto px-6 py-4"),c(e,"class","bg-white border-b border-gray-200 sticky top-0 z-50"),c(e,"id","app-header")},m(C,x){A(C,e,x),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),g.m(o,null),A(C,u,x),_&&_.m(C,x),A(C,d,x),v&&v.m(C,x),A(C,a,x),m=!0},p(C,[x]){b===(b=p(C))&&g?g.p(C,x):(g.d(1),g=b(C),g&&(g.c(),g.m(o,null))),C[2]?_?(_.p(C,x),x&4&&ce(_,1)):(_=Wr(C),_.c(),ce(_,1),_.m(d.parentNode,d)):_&&(ft(),de(_,1,1,()=>{_=null}),mt()),C[3]?v?(v.p(C,x),x&8&&ce(v,1)):(v=Hr(C),v.c(),ce(v,1),v.m(a.parentNode,a)):v&&(ft(),de(v,1,1,()=>{v=null}),mt())},i(C){m||(ce(_),ce(v),m=!0)},o(C){de(_),de(v),m=!1},d(C){C&&(E(e),E(u),E(d),E(a)),g.d(),_&&_.d(C),v&&v.d(C)}}}function vi(s,e,t){let r,n;Ie(s,pe,x=>t(0,r=x)),Ie(s,je,x=>t(1,n=x));let l=!1,o=!1,u=!1,d="";Cs(async()=>{n.session&&await a()});async function a(){if(n.session)try{t(4,u=!0),t(5,d="");const M=(await Le.getUserLists(n.session,n.authType)).map(R=>({uri:R.uri,name:R.name,description:R.description||"",purpose:R.purpose||"app.bsky.graph.defs#modlist",createdAt:R.createdAt,memberCount:R.listItemCount||0})).sort((R,N)=>new Date(N.createdAt)-new Date(R.createdAt));pe.setUserLists(M)}catch(x){console.error("Failed to load user lists:",x),t(5,d=x.message||"Failed to load lists")}finally{t(4,u=!1)}}function m(x){const M=x.target.value;if(M){const R=r.userLists.find(N=>N.uri===M);R&&pe.setSelectedList(R)}else pe.setSelectedList(null)}function p(){t(2,l=!0)}function b(){t(3,o=!0)}function g(){t(3,o=!1)}async function _(x){const M=x.detail;pe.insertNewList(M,!0)}function v(){t(2,l=!1)}function C(){je.signOut(),pe.setSelectedList(null)}return s.$$.update=()=>{s.$$.dirty&3&&n.session&&r.userLists.length===0&&a(),s.$$.dirty&1&&r.userLists.length>0&&console.log("Header: userLists updated:",r.userLists)},[r,n,l,o,u,d,m,p,b,g,_,v,C]}class _i extends De{constructor(e){super(),Oe(this,e,vi,yi,Ee,{})}}function ys(s){s.preventDefault()}var wi=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]);function Si(s){if(wi.has(s.key))return ys(s),!1}var vs=new AbortController,ps=vs.signal;function ki(){window.addEventListener("DOMMouseScroll",ys,{signal:ps}),window.addEventListener("wheel",ys,{passive:!1,signal:ps}),window.addEventListener("touchmove",ys,{passive:!1,signal:ps}),window.addEventListener("keydown",Si,{signal:ps})}function Li(){vs==null||vs.abort()}function Ci(s){if(!s)throw new Error("Please specify a container for the zoom image");const e=s.querySelector("img");if(!e)throw new Error("Please place an image inside the container");return e}var xi=50,Mi=()=>({createZoomImage:(e,t,r)=>{if(e.src===t)return;e.src=t;let n=!1;e.onload=()=>{n=!0,r.setState({zoomedImgStatus:"loaded"})},e.onerror=()=>{n=!0,r.setState({zoomedImgStatus:"error"})},setTimeout(()=>{n||r.setState({zoomedImgStatus:"loading"})},xi)}}),Ei=Mi();function Ai(s){let e=new Set,t=!1,r=s,n,l=(u={})=>{n={...n,...u},o()},o=()=>{if(t)return;let u=!1;if(n){for(let d in n)if(r[d]!==n[d]){u=!0;break}}u&&(r={...r,...n},e.forEach(d=>d({state:r,updatedProperties:n})),n=void 0)};return{subscribe:u=>(e.add(u),()=>{e.delete(u)}),cleanup:()=>e.clear(),getState:()=>r,setState:l,batch:u=>{t=!0,u(),t=!1,o()}}}function Pi(s,e={}){var R,N;let t=null;const r=Ci(s),n={zoomFactor:e.zoomFactor??4,zoomImageSource:e.zoomImageSource??r.src,disabledContextMenu:e.disabledContextMenu??!1},{disabledContextMenu:l,zoomFactor:o,zoomImageSource:u}=n,d=Ai({zoomedImgStatus:"idle"}),a=document.createElement("img");(R=e.zoomImageProps)!=null&&R.alt&&(a.alt=e.zoomImageProps.alt),(N=e.zoomImageProps)!=null&&N.className&&(a.className=e.zoomImageProps.className),a.style.maxWidth="none",a.style.position="absolute",a.style.top="0",a.style.left="0",l&&(a.style["-webkit-user-select"]="none",a.style["-webkit-touch-callout"]="none",a.oncontextmenu=()=>!1);const m=O=>t&&O.pointerId===t;function p(O){if(t===null){t=O.pointerId,s.appendChild(a),a.style.display="block";const T=r.clientWidth*o,K=r.clientHeight*o;a.style.width=`${T}px`,a.style.height=`${K}px`,Ei.createZoomImage(a,u,d),C(O),O.pointerType!=="mouse"&&ki()}}function b(O){m(O)&&C(O)}function g(O){m(O)&&(s.contains(a)&&s.removeChild(a),a.style.display="none",a.style.transform="none",Li(),t=null)}const _=O=>{const T=s.clientWidth;return O>0?0:O+T*o<T?-T*(o-1):O},v=O=>{const T=s.clientHeight;return O>0?0:O+T*o<T?-T*(o-1):O};function C(O){a.style.display="block";const T=s.getBoundingClientRect(),K=O.clientX-T.left,S=O.clientY-T.top,W=_(-K*o+K),I=v(-S*o+S);a.style.transform=`translate(${W}px, ${I}px)`}const x=new AbortController,{signal:M}=x;return s.addEventListener("pointerenter",p,{signal:M}),s.addEventListener("pointermove",b,{signal:M}),s.addEventListener("pointerleave",g,{signal:M}),s.addEventListener("touchstart",O=>{l&&O.preventDefault()},{signal:M}),{cleanup:()=>{x.abort(),s.contains(a)&&s.removeChild(a),d.cleanup()},subscribe:d.subscribe,getState:d.getState}}function Ti(){let s;const{set:e,subscribe:t}=qs({zoomedImgStatus:"idle"}),r=(...n)=>{s==null||s.cleanup(),s=Pi(...n),e(s.getState()),s.subscribe(({state:l})=>{e(l)})};return In(()=>{s==null||s.cleanup()}),{createZoomImage:r,zoomImageState:{subscribe:t}}}function Ii(s){let e,t,r,n;return{c(){e=f("div"),t=f("img"),tt(t.src,r=s[0])||c(t,"src",r),c(t,"alt",s[1]),c(t,"class","base-image svelte-6dnnuj"),fe(t,"width","100%"),fe(t,"height","100%"),fe(t,"object-fit","cover"),c(e,"class",n="zoom-image-container "+s[4]+" svelte-6dnnuj"),fe(e,"width",s[2]),fe(e,"height",s[3]),fe(e,"overflow","hidden"),fe(e,"position","relative"),c(e,"id","zoomable-image-"+Math.random().toString(36).substr(2,9))},m(l,o){A(l,e,o),i(e,t),s[7](e)},p(l,[o]){o&1&&!tt(t.src,r=l[0])&&c(t,"src",r),o&2&&c(t,"alt",l[1]),o&16&&n!==(n="zoom-image-container "+l[4]+" svelte-6dnnuj")&&c(e,"class",n),o&4&&fe(e,"width",l[2]),o&8&&fe(e,"height",l[3])},i:ne,o:ne,d(l){l&&E(e),s[7](null)}}}function Ri(s,e,t){let{src:r=""}=e,{alt:n=""}=e,{width:l="auto"}=e,{height:o="auto"}=e,{className:u=""}=e,{zoomFactor:d=2}=e,a,m;const{createZoomImage:p}=Ti();Cs(()=>{a&&(m=p(a,{zoomFactor:d,zoomImageSource:r,zoomImageProps:{alt:n,className:"zoom-image"}}))}),In(()=>{m&&m.cleanup&&m.cleanup()});function b(g){ws[g?"unshift":"push"](()=>{a=g,t(5,a)})}return s.$$set=g=>{"src"in g&&t(0,r=g.src),"alt"in g&&t(1,n=g.alt),"width"in g&&t(2,l=g.width),"height"in g&&t(3,o=g.height),"className"in g&&t(4,u=g.className),"zoomFactor"in g&&t(6,d=g.zoomFactor)},[r,n,l,o,u,a,d,b]}class Oi extends De{constructor(e){super(),Oe(this,e,Ri,Ii,Ee,{src:0,alt:1,width:2,height:3,className:4,zoomFactor:6})}}function zr(s){let e,t;return e=new Xn({}),e.$on("close",s[2]),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p:ne,i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Di(s){let e,t,r,n,l,o,u,d,a,m,p,b,g,_,v,C,x,M,R,N,O,T,K,S,W,I,D,z,se,P,B,j,Z,oe;b=new Oi({props:{src:ks.getAssetPath("static/screencapture.png"),alt:"Bluesky List Manager Preview - Showing list statistics and member management interface",width:"100%",height:"auto",className:"screenshot-zoom-image",zoomFactor:3}});let te=s[0]&&zr(s);return{c(){e=f("div"),t=f("div"),t.innerHTML=`<div class="text-6xl mb-4"><img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto" alt="Bluesky Logo"/></div> <h2 class="text-4xl font-bold text-slate-800 mb-4">Bluesky List Manager</h2> <p class="text-xl text-slate-600 mb-2">Manage your lists like a pro.</p> <p class="text-xl text-slate-600 mb-6"><strong class="text-blue-600">Get insights and powerful tools to grow your curated lists.</strong></p>`,r=w(),n=f("div"),l=f("button"),l.textContent="ðŸš€ Sign in with Bluesky to manage your lists",o=w(),u=f("p"),u.textContent="100% free â€¢ No registration required â€¢ Works instantly â€¢ Zero data stored on our servers",d=w(),a=f("div"),m=f("div"),p=f("div"),Re(b.$$.fragment),g=w(),_=f("div"),_.innerHTML='<div class="zoom-hint svelte-163esy5">ðŸ” Move mouse to zoom and explore the interface</div>',v=w(),C=f("p"),C.textContent="See your list insights and manage members with powerful analytics",x=w(),M=f("div"),M.innerHTML='<div class="bg-red-50 p-6 rounded-lg border border-red-200"><h3 class="text-lg font-semibold text-red-800 mb-3">ðŸ˜¤ The Manual Way (Slow &amp; Painful)</h3> <ul class="space-y-2 text-red-700"><li class="flex items-start"><span class="text-red-500 mr-2">â€¢</span> <span>Search one profile at a time</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">â€¢</span> <span>Forget who you&#39;ve already added</span></li> <li class="flex items-start"><span class="text-red-500 mr-2">â€¢</span> <span>Hours of repetitive clicking</span></li></ul></div> <div class="bg-green-50 p-6 rounded-lg border border-green-200"><h3 class="text-lg font-semibold text-green-800 mb-3">âš¡ The Smart Way (Fast &amp; Easy)</h3> <ul class="space-y-2 text-green-700"><li class="flex items-start"><span class="text-green-500 mr-2">â€¢</span> <span><strong>Bulk search</strong> by keywords, bio, or handle</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">â€¢</span> <span><strong>Instant filtering</strong> - see who&#39;s already in your list</span></li> <li class="flex items-start"><span class="text-green-500 mr-2">â€¢</span> <span><strong>Minutes instead of hours</strong></span></li></ul></div>',R=w(),N=f("div"),N.innerHTML='<h3 class="text-lg font-semibold text-blue-800 mb-4">ðŸŽ¯ Perfect for:</h3> <div class="grid md:grid-cols-3 gap-4 text-blue-700"><div class="text-center"><div class="text-2xl mb-2">ðŸ‘¥</div> <div class="font-medium">Community Builders</div> <div class="text-sm">Grow your curated lists quickly</div></div> <div class="text-center"><div class="text-2xl mb-2">ðŸ”</div> <div class="font-medium">Content Creators</div> <div class="text-sm">Find your target audience</div></div> <div class="text-center"><div class="text-2xl mb-2">ðŸ“Š</div> <div class="font-medium">List Managers</div> <div class="text-sm">Maintain and expand your lists</div></div></div>',O=w(),T=f("div"),T.innerHTML='<h3 class="text-lg font-semibold text-purple-800 mb-3">âœ¨ Key Features</h3> <div class="grid md:grid-cols-2 gap-4 text-purple-700"><div><div class="font-medium mb-1">ðŸ” Smart Search</div> <div class="text-sm">Search across bios, display names, and handles with powerful filters</div></div> <div><div class="font-medium mb-1">ðŸ“Š Real-time Stats</div> <div class="text-sm">See engagement rates, verification status, and growth metrics</div></div> <div><div class="font-medium mb-1">ðŸ”’ Privacy First</div> <div class="text-sm">Client-side app - your data never leaves your browser</div></div></div>',K=w(),S=f("div"),S.innerHTML=`<h3 class="text-lg font-semibold text-gray-800 mb-3">ðŸ” Privacy &amp; Security</h3> <p class="text-gray-700 mb-3">This is a <strong>client-side application</strong>. Your Bluesky credentials are stored
			locally in your browser and are never sent to our servers. We only communicate directly with
			Bluesky&#39;s API using your authentication token.</p> <p class="text-sm text-gray-600"><strong>Your data stays private and secure.</strong> Feel free to inspect the source code (and
			contribute!) on
			<a href="https://github.com/pixeline/bluesky-profile-catcher" class="text-gray-600 hover:text-gray-700 underline">GitHub</a>.</p>`,W=w(),I=f("div"),D=f("button"),D.textContent="ðŸš€ Start Building Better Lists - Sign in with Bluesky",z=w(),se=f("p"),se.textContent="100% free â€¢ No registration required â€¢ Works instantly â€¢ Zero data stored on our servers",P=w(),te&&te.c(),B=st(),c(t,"class","text-center mb-8"),c(l,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),c(l,"id","auth-sign-in-button"),c(u,"class","text-sm text-gray-500 mt-3"),c(n,"class","text-center mb-8"),c(n,"id","auth-cta"),c(_,"class","zoom-overlay svelte-163esy5"),c(p,"class","screenshot-container svelte-163esy5"),c(C,"class","text-sm text-gray-600 mt-4"),c(m,"class","bg-gray-50 p-6 rounded-lg border border-gray-200"),c(a,"class","mb-8 text-center"),c(M,"class","grid md:grid-cols-2 gap-8 mb-8"),c(N,"class","bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8"),c(T,"class","bg-purple-50 p-6 rounded-lg border border-purple-200 mb-8"),c(S,"class","bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8"),c(D,"class","bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 px-8 py-4 rounded-lg text-xl font-medium cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"),c(se,"class","text-sm text-gray-500 mt-3"),c(I,"class","text-center"),c(e,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200 max-w-4xl mx-auto relative z-100"),c(e,"id","auth-instructions")},m(y,h){A(y,e,h),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u),i(e,d),i(e,a),i(a,m),i(m,p),Ce(b,p,null),i(p,g),i(p,_),i(m,v),i(m,C),i(e,x),i(e,M),i(e,R),i(e,N),i(e,O),i(e,T),i(e,K),i(e,S),i(e,W),i(e,I),i(I,D),i(I,z),i(I,se),A(y,P,h),te&&te.m(y,h),A(y,B,h),j=!0,Z||(oe=[ie(l,"click",s[1]),ie(D,"click",s[1])],Z=!0)},p(y,[h]){y[0]?te?(te.p(y,h),h&1&&ce(te,1)):(te=zr(y),te.c(),ce(te,1),te.m(B.parentNode,B)):te&&(ft(),de(te,1,1,()=>{te=null}),mt())},i(y){j||(ce(b.$$.fragment,y),ce(te),j=!0)},o(y){de(b.$$.fragment,y),de(te),j=!1},d(y){y&&(E(e),E(P),E(B)),xe(b),te&&te.d(y),Z=!1,Me(oe)}}}function Ki(s,e,t){let r=!1;function n(){t(0,r=!0)}function l(){t(0,r=!1)}return[r,n,l]}class Ni extends De{constructor(e){super(),Oe(this,e,Ki,Di,Ee,{})}}function Bi(s){let e,t,r;return{c(){e=f("h3"),e.textContent="Select a List",t=w(),r=f("p"),r.textContent="Choose a list from the dropdown above to get started.",c(e,"class","text-lg font-semibold text-slate-800 mb-2"),c(r,"class","text-slate-600")},m(n,l){A(n,e,l),A(n,t,l),A(n,r,l)},d(n){n&&(E(e),E(t),E(r))}}}function Ui(s){let e,t,r;return{c(){e=f("h3"),e.textContent="No Lists Found",t=w(),r=f("p"),r.textContent="You don't have any lists yet. Create a list on Bluesky first!",c(e,"class","text-lg font-semibold text-slate-800 mb-2"),c(r,"class","text-slate-600")},m(n,l){A(n,e,l),A(n,t,l),A(n,r,l)},d(n){n&&(E(e),E(t),E(r))}}}function Wi(s){let e,t,r,n,l,o,u;function d(p,b){return p[0].userLists.length===0?Ui:Bi}let a=d(s),m=a(s);return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Bluesky List Manager</h2> <p class="text-slate-600">Select a list from the dropdown in the header above to start managing your Bluesky lists.</p>',n=w(),l=f("div"),o=f("div"),o.innerHTML=`<img src="${ks.getAssetPath("static/Bluesky_Logo.svg")}" class="w-16 h-16 mx-auto grayscale opacity-10" alt="Bluesky Logo"/>`,u=w(),m.c(),c(r,"class","text-center mb-8"),c(o,"class","text-4xl mb-4"),c(l,"class","text-center py-12"),c(t,"class","bg-white p-8 rounded-lg shadow-sm border border-gray-200"),c(t,"id","list-selector-content"),c(e,"class","max-w-4xl mx-auto"),c(e,"id","list-selector")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),m.m(l,null)},p(p,[b]){a!==(a=d(p))&&(m.d(1),m=a(p),m&&(m.c(),m.m(l,null)))},i:ne,o:ne,d(p){p&&E(e),m.d()}}}function Hi(s,e,t){let r;return Ie(s,pe,n=>t(0,r=n)),[r]}class zi extends De{constructor(e){super(),Oe(this,e,Hi,Wi,Ee,{})}}function Fi(s){let e,t,r,n,l,o,u,d,a,m,p,b=(s[0].displayName||s[0].handle)+"",g,_,v,C,x=s[0].handle+"",M,R,N,O,T=s[0].description&&Fr(s);function K(I,D){if(I[3]==="Already in list")return Yi;if(I[3]==="New candidate")return Vi;if(I[6])return qi;if(I[2])return Ji}let S=K(s),W=S&&S(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),d=w(),a=f("div"),m=f("div"),p=f("h3"),g=L(b),_=w(),v=f("span"),C=L("@"),M=L(x),R=w(),T&&T.c(),N=w(),W&&W.c(),tt(n.src,l=Ls(s[0]))||c(n,"src",l),c(n,"alt",o=s[0].displayName||s[0].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(p,"class","text-base font-semibold text-gray-900 truncate"),c(v,"class","text-sm text-gray-600 truncate"),c(m,"class","flex items-center space-x-2 mb-1"),c(a,"class","flex-1 min-w-0"),c(t,"class","flex items-start space-x-3"),c(e,"class","profile-card bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200"),c(e,"id",O="profile-card-"+s[0].did)},m(I,D){A(I,e,D),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,m),i(m,p),i(p,g),i(m,_),i(m,v),i(v,C),i(v,M),i(a,R),T&&T.m(a,null),i(a,N),W&&W.m(a,null)},p(I,D){D&1&&!tt(n.src,l=Ls(I[0]))&&c(n,"src",l),D&1&&o!==(o=I[0].displayName||I[0].handle)&&c(n,"alt",o),D&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(I[0].displayName||I[0].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),D&1&&b!==(b=(I[0].displayName||I[0].handle)+"")&&q(g,b),D&1&&x!==(x=I[0].handle+"")&&q(M,x),I[0].description?T?T.p(I,D):(T=Fr(I),T.c(),T.m(a,N)):T&&(T.d(1),T=null),S===(S=K(I))&&W?W.p(I,D):(W&&W.d(1),W=S&&S(I),W&&(W.c(),W.m(a,null))),D&1&&O!==(O="profile-card-"+I[0].did)&&c(e,"id",O)},d(I){I&&E(e),T&&T.d(),W&&W.d()}}}function ji(s){let e,t,r,n,l,o,u,d,a,m,p,b=(s[0].displayName||s[0].handle)+"",g,_,v,C,x=s[0].handle+"",M,R,N,O,T,K,S,W,I,D=s[0].description&&jr(s);function z(B,j){if(B[3]==="Already in list")return eo;if(B[3]==="New candidate")return Qi;if(B[6])return Xi;if(B[2])return Zi}let se=z(s),P=se&&se(s);return{c(){e=f("a"),t=f("div"),r=f("div"),n=f("img"),d=w(),a=f("div"),m=f("div"),p=f("h3"),g=L(b),_=w(),v=f("span"),C=L("@"),M=L(x),R=w(),D&&D.c(),N=w(),P&&P.c(),O=w(),T=f("div"),T.innerHTML='<svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>',tt(n.src,l=Ls(s[0]))||c(n,"src",l),c(n,"alt",o=s[0].displayName||s[0].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[0].displayName||s[0].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(p,"class","text-base font-semibold text-gray-900 truncate"),c(v,"class","text-sm text-gray-600 truncate"),c(m,"class","flex items-center space-x-2 mb-1"),c(a,"class","flex-1 min-w-0"),c(T,"class","flex-shrink-0"),c(t,"class","flex items-start space-x-3"),c(e,"href",K="https://bsky.app/profile/"+s[0].handle),c(e,"target","_blank"),c(e,"rel","noopener noreferrer"),c(e,"class","profile-card block bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md hover:border-gray-300 transition-all duration-200"),c(e,"id",S="profile-card-"+s[0].did)},m(B,j){A(B,e,j),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,m),i(m,p),i(p,g),i(m,_),i(m,v),i(v,C),i(v,M),i(a,R),D&&D.m(a,null),i(a,N),P&&P.m(a,null),i(t,O),i(t,T),W||(I=ie(e,"click",s[9]),W=!0)},p(B,j){j&1&&!tt(n.src,l=Ls(B[0]))&&c(n,"src",l),j&1&&o!==(o=B[0].displayName||B[0].handle)&&c(n,"alt",o),j&1&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(B[0].displayName||B[0].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),j&1&&b!==(b=(B[0].displayName||B[0].handle)+"")&&q(g,b),j&1&&x!==(x=B[0].handle+"")&&q(M,x),B[0].description?D?D.p(B,j):(D=jr(B),D.c(),D.m(a,N)):D&&(D.d(1),D=null),se===(se=z(B))&&P?P.p(B,j):(P&&P.d(1),P=se&&se(B),P&&(P.c(),P.m(a,null))),j&1&&K!==(K="https://bsky.app/profile/"+B[0].handle)&&c(e,"href",K),j&1&&S!==(S="profile-card-"+B[0].did)&&c(e,"id",S)},d(B){B&&E(e),D&&D.d(),P&&P.d(),W=!1,I()}}}function Fr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=L(t),c(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&q(r,t)},d(n){n&&E(e)}}}function Ji(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",c(t,"type","checkbox"),t.checked=s[1],c(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),c(n,"class","text-sm text-gray-600"),c(e,"class","flex items-center space-x-2")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=ie(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&E(e),l=!1,o()}}}function qi(s){let e;return{c(){e=f("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,c(e,"class","flex items-center space-x-2")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function Vi(s){let e,t,r,n,l,o,u;function d(p,b){return p[5]?Gi:$i}let a=d(s),m=a(s);return{c(){e=f("div"),t=f("span"),r=L(s[3]),n=w(),l=f("button"),m.c(),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],c(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","flex items-center space-x-2")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(u=ie(l,"click",s[8]),o=!0)},p(p,b){b&8&&q(r,p[3]),a!==(a=d(p))&&(m.d(1),m=a(p),m&&(m.c(),m.m(l,null))),b&32&&(l.disabled=p[5])},d(p){p&&E(e),m.d(),o=!1,u()}}}function Yi(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=L(s[3]),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),c(e,"class","flex items-center space-x-2")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&E(e)}}}function $i(s){let e;return{c(){e=L("Add to list")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function Gi(s){let e,t;return{c(){e=f("span"),t=L(`
								Adding...`),c(e,"class","loading-spinner mr-1")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(E(e),E(t))}}}function jr(s){let e,t=s[0].description+"",r;return{c(){e=f("p"),r=L(t),c(e,"class","text-sm text-gray-700 mb-3 whitespace-pre-wrap")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&1&&t!==(t=n[0].description+"")&&q(r,t)},d(n){n&&E(e)}}}function Zi(s){let e,t,r,n,l,o;return{c(){e=f("div"),t=f("input"),r=w(),n=f("span"),n.textContent="Select to add to list",c(t,"type","checkbox"),t.checked=s[1],c(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"),c(n,"class","text-sm text-gray-600"),c(e,"class","flex items-center space-x-2")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n),l||(o=ie(t,"change",s[7]),l=!0)},p(u,d){d&2&&(t.checked=u[1])},d(u){u&&E(e),l=!1,o()}}}function Xi(s){let e;return{c(){e=f("div"),e.innerHTML=`<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><span class="loading-spinner mr-1"></span>
							Checking...</span>`,c(e,"class","flex items-center space-x-2")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function Qi(s){let e,t,r,n,l,o,u;function d(p,b){return p[5]?so:to}let a=d(s),m=a(s);return{c(){e=f("div"),t=f("span"),r=L(s[3]),n=w(),l=f("button"),m.c(),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"),l.disabled=s[5],c(l,"class","inline-flex items-center px-3 py-1 rounded text-xs font-medium bg-slate-800 hover:bg-slate-700 text-white border-0 cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","flex items-center space-x-2")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(e,n),i(e,l),m.m(l,null),o||(u=ie(l,"click",s[8]),o=!0)},p(p,b){b&8&&q(r,p[3]),a!==(a=d(p))&&(m.d(1),m=a(p),m&&(m.c(),m.m(l,null))),b&32&&(l.disabled=p[5])},d(p){p&&E(e),m.d(),o=!1,u()}}}function eo(s){let e,t,r;return{c(){e=f("div"),t=f("span"),r=L(s[3]),c(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"),c(e,"class","flex items-center space-x-2")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&8&&q(r,n[3])},d(n){n&&E(e)}}}function to(s){let e;return{c(){e=L("Add to list")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function so(s){let e,t;return{c(){e=f("span"),t=L(`
								Adding...`),c(e,"class","loading-spinner mr-1")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(E(e),E(t))}}}function ro(s){let e;function t(l,o){return l[4]?ji:Fi}let r=t(s),n=r(s);return{c(){n.c(),e=st()},m(l,o){n.m(l,o),A(l,e,o)},p(l,[o]){r===(r=t(l))&&n?n.p(l,o):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:ne,o:ne,d(l){l&&E(e),n.d(l)}}}function Ls(s){return s.avatar?s.avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName||s.handle)}&background=6366f1&color=fff&size=64`}function no(s,e,t){let{profile:r}=e,{isSelected:n=!1}=e,{onSelect:l=()=>{}}=e,{showCheckbox:o=!0}=e,{statusTag:u=null}=e,{clickable:d=!1}=e,{onAddToList:a=()=>{}}=e,{isAddingToList:m=!1}=e,{isCheckingMembership:p=!1}=e;function b(){l(r)}function g(v){v.preventDefault(),v.stopPropagation(),a(r)}function _(v){d&&!o||d&&o&&(v.target.type==="checkbox"||v.target.closest('input[type="checkbox"]'))&&(v.preventDefault(),v.stopPropagation())}return s.$$set=v=>{"profile"in v&&t(0,r=v.profile),"isSelected"in v&&t(1,n=v.isSelected),"onSelect"in v&&t(10,l=v.onSelect),"showCheckbox"in v&&t(2,o=v.showCheckbox),"statusTag"in v&&t(3,u=v.statusTag),"clickable"in v&&t(4,d=v.clickable),"onAddToList"in v&&t(11,a=v.onAddToList),"isAddingToList"in v&&t(5,m=v.isAddingToList),"isCheckingMembership"in v&&t(6,p=v.isCheckingMembership)},[r,n,o,u,d,m,p,b,g,_,l,a]}class lo extends De{constructor(e){super(),Oe(this,e,no,ro,Ee,{profile:0,isSelected:1,onSelect:10,showCheckbox:2,statusTag:3,clickable:4,onAddToList:11,isAddingToList:5,isCheckingMembership:6})}}var Gs={};(function s(e,t,r,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!e.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),h=y.getContext("2d");h.fillRect(0,0,1,1);var H=y.transferToImageBitmap();try{h.createPattern(H,"no-repeat")}catch{return!1}return!0}();function d(){}function a(y){var h=t.exports.Promise,H=h!==void 0?h:e.Promise;return typeof H=="function"?new H(y):(y(d,d),null)}var m=function(y,h){return{transform:function(H){if(y)return H;if(h.has(H))return h.get(H);var k=new OffscreenCanvas(H.width,H.height),F=k.getContext("2d");return F.drawImage(H,0,0),h.set(H,k),k},clear:function(){h.clear()}}}(u,new Map),p=function(){var y=Math.floor(16.666666666666668),h,H,k={},F=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(V){var ee=Math.random();return k[ee]=requestAnimationFrame(function Y($){F===$||F+y-1<$?(F=$,delete k[ee],V()):k[ee]=requestAnimationFrame(Y)}),ee},H=function(V){k[V]&&cancelAnimationFrame(k[V])}):(h=function(V){return setTimeout(V,y)},H=function(V){return clearTimeout(V)}),{frame:h,cancel:H}}(),b=function(){var y,h,H={};function k(F){function V(ee,Y){F.postMessage({options:ee||{},callback:Y})}F.init=function(Y){var $=Y.transferControlToOffscreen();F.postMessage({canvas:$},[$])},F.fire=function(Y,$,U){if(h)return V(Y,null),h;var G=Math.random().toString(36).slice(2);return h=a(function(ae){function le(Q){Q.data.callback===G&&(delete H[G],F.removeEventListener("message",le),h=null,m.clear(),U(),ae())}F.addEventListener("message",le),V(Y,G),H[G]=le.bind(null,{data:{callback:G}})}),h},F.reset=function(){F.postMessage({reset:!0});for(var Y in H)H[Y](),delete H[Y]}}return function(){if(y)return y;if(!r&&l){var F=["var CONFETTI, SIZE = {}, module = {};","("+s.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([F])))}catch(V){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",V),null}k(y)}return y}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(y,h){return h?h(y):y}function v(y){return y!=null}function C(y,h,H){return _(y&&v(y[h])?y[h]:g[h],H)}function x(y){return y<0?0:Math.floor(y)}function M(y,h){return Math.floor(Math.random()*(h-y))+y}function R(y){return parseInt(y,16)}function N(y){return y.map(O)}function O(y){var h=String(y).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:R(h.substring(0,2)),g:R(h.substring(2,4)),b:R(h.substring(4,6))}}function T(y){var h=C(y,"origin",Object);return h.x=C(h,"x",Number),h.y=C(h,"y",Number),h}function K(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function S(y){var h=y.getBoundingClientRect();y.width=h.width,y.height=h.height}function W(y){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=y,h}function I(y,h,H,k,F,V,ee,Y,$){y.save(),y.translate(h,H),y.rotate(V),y.scale(k,F),y.arc(0,0,1,ee,Y,$),y.restore()}function D(y){var h=y.angle*(Math.PI/180),H=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-h+(.5*H-Math.random()*H),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function z(y,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var H=h.tick++/h.totalTicks,k=h.x+h.random*h.tiltCos,F=h.y+h.random*h.tiltSin,V=h.wobbleX+h.random*h.tiltCos,ee=h.wobbleY+h.random*h.tiltSin;if(y.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-H)+")",y.beginPath(),o&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))y.fill(Z(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(V-k)*.1,Math.abs(ee-F)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var Y=Math.PI/10*h.wobble,$=Math.abs(V-k)*.1,U=Math.abs(ee-F)*.1,G=h.shape.bitmap.width*h.scalar,ae=h.shape.bitmap.height*h.scalar,le=new DOMMatrix([Math.cos(Y)*$,Math.sin(Y)*$,-Math.sin(Y)*U,Math.cos(Y)*U,h.x,h.y]);le.multiplySelf(new DOMMatrix(h.shape.matrix));var Q=y.createPattern(m.transform(h.shape.bitmap),"no-repeat");Q.setTransform(le),y.globalAlpha=1-H,y.fillStyle=Q,y.fillRect(h.x-G/2,h.y-ae/2,G,ae),y.globalAlpha=1}else if(h.shape==="circle")y.ellipse?y.ellipse(h.x,h.y,Math.abs(V-k)*h.ovalScalar,Math.abs(ee-F)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):I(y,h.x,h.y,Math.abs(V-k)*h.ovalScalar,Math.abs(ee-F)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var J=Math.PI/2*3,ue=4*h.scalar,ve=8*h.scalar,ye=h.x,_e=h.y,Ne=5,Ae=Math.PI/Ne;Ne--;)ye=h.x+Math.cos(J)*ve,_e=h.y+Math.sin(J)*ve,y.lineTo(ye,_e),J+=Ae,ye=h.x+Math.cos(J)*ue,_e=h.y+Math.sin(J)*ue,y.lineTo(ye,_e),J+=Ae;else y.moveTo(Math.floor(h.x),Math.floor(h.y)),y.lineTo(Math.floor(h.wobbleX),Math.floor(F)),y.lineTo(Math.floor(V),Math.floor(ee)),y.lineTo(Math.floor(k),Math.floor(h.wobbleY));return y.closePath(),y.fill(),h.tick<h.totalTicks}function se(y,h,H,k,F){var V=h.slice(),ee=y.getContext("2d"),Y,$,U=a(function(G){function ae(){Y=$=null,ee.clearRect(0,0,k.width,k.height),m.clear(),F(),G()}function le(){r&&!(k.width===n.width&&k.height===n.height)&&(k.width=y.width=n.width,k.height=y.height=n.height),!k.width&&!k.height&&(H(y),k.width=y.width,k.height=y.height),ee.clearRect(0,0,k.width,k.height),V=V.filter(function(Q){return z(ee,Q)}),V.length?Y=p.frame(le):ae()}Y=p.frame(le),$=ae});return{addFettis:function(G){return V=V.concat(G),U},canvas:y,promise:U,reset:function(){Y&&p.cancel(Y),$&&$()}}}function P(y,h){var H=!y,k=!!C(h||{},"resize"),F=!1,V=C(h,"disableForReducedMotion",Boolean),ee=l&&!!C(h||{},"useWorker"),Y=ee?b():null,$=H?K:S,U=y&&Y?!!y.__confetti_initialized:!1,G=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ae;function le(J,ue,ve){for(var ye=C(J,"particleCount",x),_e=C(J,"angle",Number),Ne=C(J,"spread",Number),Ae=C(J,"startVelocity",Number),pt=C(J,"decay",Number),qt=C(J,"gravity",Number),ht=C(J,"drift",Number),rt=C(J,"colors",N),Kt=C(J,"ticks",Number),Nt=C(J,"shapes"),Ye=C(J,"scalar"),$e=!!C(J,"flat"),Ge=T(J),nt=ye,gt=[],bt=y.width*Ge.x,yt=y.height*Ge.y;nt--;)gt.push(D({x:bt,y:yt,angle:_e,spread:Ne,startVelocity:Ae,color:rt[nt%rt.length],shape:Nt[M(0,Nt.length)],ticks:Kt,decay:pt,gravity:qt,drift:ht,scalar:Ye,flat:$e}));return ae?ae.addFettis(gt):(ae=se(y,gt,$,ue,ve),ae.promise)}function Q(J){var ue=V||C(J,"disableForReducedMotion",Boolean),ve=C(J,"zIndex",Number);if(ue&&G)return a(function(Ae){Ae()});H&&ae?y=ae.canvas:H&&!y&&(y=W(ve),document.body.appendChild(y)),k&&!U&&$(y);var ye={width:y.width,height:y.height};Y&&!U&&Y.init(y),U=!0,Y&&(y.__confetti_initialized=!0);function _e(){if(Y){var Ae={getBoundingClientRect:function(){if(!H)return y.getBoundingClientRect()}};$(Ae),Y.postMessage({resize:{width:Ae.width,height:Ae.height}});return}ye.width=ye.height=null}function Ne(){ae=null,k&&(F=!1,e.removeEventListener("resize",_e)),H&&y&&(document.body.contains(y)&&document.body.removeChild(y),y=null,U=!1)}return k&&!F&&(F=!0,e.addEventListener("resize",_e,!1)),Y?Y.fire(J,ye,Ne):le(J,ye,Ne)}return Q.reset=function(){Y&&Y.reset(),ae&&ae.reset()},Q}var B;function j(){return B||(B=P(null,{useWorker:!0,resize:!0})),B}function Z(y,h,H,k,F,V,ee){var Y=new Path2D(y),$=new Path2D;$.addPath(Y,new DOMMatrix(h));var U=new Path2D;return U.addPath($,new DOMMatrix([Math.cos(ee)*F,Math.sin(ee)*F,-Math.sin(ee)*V,Math.cos(ee)*V,H,k])),U}function oe(y){if(!o)throw new Error("path confetti are not supported in this browser");var h,H;typeof y=="string"?h=y:(h=y.path,H=y.matrix);var k=new Path2D(h),F=document.createElement("canvas"),V=F.getContext("2d");if(!H){for(var ee=1e3,Y=ee,$=ee,U=0,G=0,ae,le,Q=0;Q<ee;Q+=2)for(var J=0;J<ee;J+=2)V.isPointInPath(k,Q,J,"nonzero")&&(Y=Math.min(Y,Q),$=Math.min($,J),U=Math.max(U,Q),G=Math.max(G,J));ae=U-Y,le=G-$;var ue=10,ve=Math.min(ue/ae,ue/le);H=[ve,0,0,ve,-Math.round(ae/2+Y)*ve,-Math.round(le/2+$)*ve]}return{type:"path",path:h,matrix:H}}function te(y){var h,H=1,k="#000000",F='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?h=y:(h=y.text,H="scalar"in y?y.scalar:H,F="fontFamily"in y?y.fontFamily:F,k="color"in y?y.color:k);var V=10*H,ee=""+V+"px "+F,Y=new OffscreenCanvas(V,V),$=Y.getContext("2d");$.font=ee;var U=$.measureText(h),G=Math.ceil(U.actualBoundingBoxRight+U.actualBoundingBoxLeft),ae=Math.ceil(U.actualBoundingBoxAscent+U.actualBoundingBoxDescent),le=2,Q=U.actualBoundingBoxLeft+le,J=U.actualBoundingBoxAscent+le;G+=le+le,ae+=le+le,Y=new OffscreenCanvas(G,ae),$=Y.getContext("2d"),$.font=ee,$.fillStyle=k,$.fillText(h,Q,J);var ue=1/H;return{type:"bitmap",bitmap:Y.transferToImageBitmap(),matrix:[ue,0,0,ue,-G*ue/2,-ae*ue/2]}}t.exports=function(){return j().apply(this,arguments)},t.exports.reset=function(){j().reset()},t.exports.create=P,t.exports.shapeFromPath=oe,t.exports.shapeFromText=te})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Gs,!1);const Us=Gs.exports;Gs.exports.create;function Jr(s,e,t){const r=s.slice();return r[23]=e[t].profile,r[24]=e[t].status,r}function io(s){let e;return{c(){e=L("ðŸ” Search")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function oo(s){let e,t;return{c(){e=f("span"),t=L(`
						Checking membership...`),c(e,"class","loading-spinner svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(E(e),E(t))}}}function ao(s){let e,t;return{c(){e=f("span"),t=L(`
						Searching...`),c(e,"class","loading-spinner svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(E(e),E(t))}}}function qr(s){let e,t,r;return{c(){e=f("div"),t=f("p"),r=L(s[5]),c(t,"class","text-red-700"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 mb-6")},m(n,l){A(n,e,l),i(e,t),i(t,r)},p(n,l){l&32&&q(r,n[5])},d(n){n&&E(e)}}}function co(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">ðŸ”</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">Ready to Search</h3> <p class="text-slate-600">Enter keywords above to find profiles to add to your list.</p></div>',c(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:ne,i:ne,o:ne,d(t){t&&E(e)}}}function uo(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">ðŸ”</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">No Results Found</h3> <p class="text-slate-600">Try different keywords or check your spelling.</p></div>',c(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:ne,i:ne,o:ne,d(t){t&&E(e)}}}function fo(s){let e,t,r,n=ge(s[8]),l=[];for(let d=0;d<n.length;d+=1)l[d]=Vr(Jr(s,n,d));const o=d=>de(l[d],1,1,()=>{l[d]=null});let u=s[6]&&Yr(s);return{c(){e=f("div");for(let d=0;d<l.length;d+=1)l[d].c();t=w(),u&&u.c(),c(e,"class","space-y-4")},m(d,a){A(d,e,a);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);i(e,t),u&&u.m(e,null),r=!0},p(d,a){if(a&6530){n=ge(d[8]);let m;for(m=0;m<n.length;m+=1){const p=Jr(d,n,m);l[m]?(l[m].p(p,a),ce(l[m],1)):(l[m]=Vr(p),l[m].c(),ce(l[m],1),l[m].m(e,t))}for(ft(),m=n.length;m<l.length;m+=1)o(m);mt()}d[6]?u?u.p(d,a):(u=Yr(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(d){if(!r){for(let a=0;a<n.length;a+=1)ce(l[a]);r=!0}},o(d){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)de(l[a]);r=!1},d(d){d&&E(e),Ve(l,d),u&&u.d()}}}function mo(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="loading-spinner mx-auto mb-4 svelte-165a6uh"></div> <p class="text-slate-600">Checking membership status...</p>',c(e,"class","text-center py-8")},m(t,r){A(t,e,r)},p:ne,i:ne,o:ne,d(t){t&&E(e)}}}function Vr(s){let e,t;return e=new lo({props:{profile:s[23],isSelected:s[1].has(s[23].did),onSelect:s[11],statusTag:s[24],clickable:!0,onAddToList:s[12],isAddingToList:s[7].has(s[23].did)}}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},p(r,n){const l={};n&256&&(l.profile=r[23]),n&258&&(l.isSelected=r[1].has(r[23].did)),n&256&&(l.statusTag=r[24]),n&384&&(l.isAddingToList=r[7].has(r[23].did)),e.$set(l)},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Yr(s){let e,t,r,n;function l(d,a){return d[3]?ho:po}let o=l(s),u=o(s);return{c(){e=f("div"),t=f("button"),u.c(),t.disabled=s[3],c(t,"class","bg-gray-100 hover:bg-gray-200 text-slate-700 border border-gray-300 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(e,"class","text-center pt-4 border-t border-gray-200")},m(d,a){A(d,e,a),i(e,t),u.m(t,null),r||(n=ie(t,"click",s[10]),r=!0)},p(d,a){o!==(o=l(d))&&(u.d(1),u=o(d),u&&(u.c(),u.m(t,null))),a&8&&(t.disabled=d[3])},d(d){d&&E(e),u.d(),r=!1,n()}}}function po(s){let e;return{c(){e=L("Load More Results")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function ho(s){let e,t;return{c(){e=f("span"),t=L(`
								Loading...`),c(e,"class","loading-spinner mr-2 svelte-165a6uh")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(E(e),E(t))}}}function go(s){let e,t,r,n,l,o,u,d,a,m,p,b,g,_,v,C,x,M;function R(I,D){return I[3]?ao:I[4]?oo:io}let N=R(s),O=N(s),T=s[5]&&qr(s);const K=[mo,fo,uo,co],S=[];function W(I,D){return I[4]?0:I[0].length>0?1:I[2]&&!I[3]?2:I[2]?-1:3}return~(_=W(s))&&(v=S[_]=K[_](s)),{c(){e=f("div"),t=f("div"),t.innerHTML='<h3 class="text-lg font-semibold text-slate-800 mb-2">Search profiles to add to this list</h3> <p class="text-sm text-slate-600">Search for profiles by keywords in their bio, display name, or handle</p>',r=w(),n=f("div"),l=f("form"),o=f("div"),u=f("label"),u.textContent="Search for:",d=w(),a=f("input"),m=w(),p=f("button"),O.c(),b=w(),T&&T.c(),g=w(),v&&v.c(),c(t,"class","p-6 border-b border-gray-200"),c(u,"for","search-input"),c(u,"class","text-sm font-medium text-slate-700 whitespace-nowrap"),c(a,"id","search-input"),c(a,"type","text"),c(a,"placeholder","e.g., belge, artist, developer..."),c(a,"class","flex-1 min-w-48 px-4 py-2.5 border border-gray-300 rounded-lg text-base outline-none shadow-sm text-slate-800 placeholder-gray-400 focus:border-slate-500 focus:ring-1 focus:ring-slate-500"),a.required=!0,c(p,"type","submit"),p.disabled=s[3],c(p,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-6 py-2.5 rounded-lg text-base font-medium cursor-pointer transition-colors duration-200 whitespace-nowrap flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed"),c(o,"class","flex gap-4 items-center flex-wrap"),c(l,"class","mb-6"),c(n,"id","profile-search-container"),c(n,"class","p-6"),c(e,"class","bg-white rounded-lg shadow-sm border border-gray-200"),c(e,"id","profile-search")},m(I,D){A(I,e,D),i(e,t),i(e,r),i(e,n),i(n,l),i(l,o),i(o,u),i(o,d),i(o,a),be(a,s[2]),i(o,m),i(o,p),O.m(p,null),i(n,b),T&&T.m(n,null),i(n,g),~_&&S[_].m(n,null),C=!0,x||(M=[ie(a,"input",s[16]),ie(l,"submit",js(s[9]))],x=!0)},p(I,[D]){D&4&&a.value!==I[2]&&be(a,I[2]),N!==(N=R(I))&&(O.d(1),O=N(I),O&&(O.c(),O.m(p,null))),(!C||D&8)&&(p.disabled=I[3]),I[5]?T?T.p(I,D):(T=qr(I),T.c(),T.m(n,g)):T&&(T.d(1),T=null);let z=_;_=W(I),_===z?~_&&S[_].p(I,D):(v&&(ft(),de(S[z],1,1,()=>{S[z]=null}),mt()),~_?(v=S[_],v?v.p(I,D):(v=S[_]=K[_](I),v.c()),ce(v,1),v.m(n,null)):v=null)},i(I){C||(ce(v),C=!0)},o(I){de(v),C=!1},d(I){I&&E(e),O.d(),T&&T.d(),~_&&S[_].d(),x=!1,Me(M)}}}function bo(s,e,t){let r,n,l;Ie(s,je,S=>t(18,n=S)),Ie(s,pe,S=>t(15,l=S));let o="",u=[],d=!1,a=!1,m="",p=new Set,b=null,g=!1,_=new Set;async function v(){if(!(!o.trim()||!n.session)){t(3,d=!0),t(4,a=!1),t(5,m=""),t(0,u=[]),p.clear(),b=null,t(6,g=!1);try{const S=await Le.searchProfiles(n.session,o,n.authType);t(4,a=!0);const W=await T(S.actors||[]);t(0,u=W),b=S.cursor,t(6,g=!!S.cursor)}catch(S){t(5,m=S.message||"Failed to search profiles")}finally{t(3,d=!1),t(4,a=!1)}}}async function C(){if(!(!g||d||!n.session)){t(3,d=!0),t(4,a=!1),t(5,m="");try{const S=await Le.searchProfiles(n.session,o,n.authType,25,b);t(4,a=!0);const W=await T(S.actors||[]);t(0,u=[...u,...W]),b=S.cursor,t(6,g=!!S.cursor)}catch(S){t(5,m=S.message||"Failed to load more profiles")}finally{t(3,d=!1),t(4,a=!1)}}}function x(S){p.has(S.did)?p.delete(S.did):p.add(S.did),t(1,p)}let M=null,R=!0;async function N(S){if(!(!n.session||!l.selectedList||_.has(S.did))){_.add(S.did),t(7,_);try{await Le.addToList(n.session,S.did,l.selectedList.uri),await pe.fetchAndAddProfile(n.session,S.did),O()}catch(W){console.error("Failed to add profile to list:",W)}finally{_.delete(S.did),t(7,_)}}}function O(){Us({particleCount:50,spread:80,origin:{y:.6},colors:["#3b82f6","#1d4ed8","#1e40af","#60a5fa","#93c5fd"],scalar:1.5,ticks:300,gravity:.6,drift:.3,startVelocity:35,decay:.92,shapes:["circle","square"],zIndex:9999}),setTimeout(()=>{Us({particleCount:30,spread:60,origin:{y:.7,x:.3},colors:["#3b82f6","#1d4ed8","#60a5fa"],scalar:1.2,ticks:200,gravity:.7,drift:-.2,startVelocity:25,decay:.94})},150),setTimeout(()=>{Us({particleCount:30,spread:60,origin:{y:.7,x:.7},colors:["#1e40af","#3b82f6","#93c5fd"],scalar:1.2,ticks:200,gravity:.7,drift:.2,startVelocity:25,decay:.94})},300)}async function T(S){if(!S.length||!l.selectedList)return S;const W=await pe.getAllListMemberDids(n.session,n.authType);return S.map(D=>({...D,_isInList:W.has(D.did)}))}function K(){o=this.value,t(2,o),t(15,l),t(14,R),t(13,M),t(1,p)}return s.$$.update=()=>{s.$$.dirty&57346&&l.selectedList&&(!R&&M&&M!==l.selectedList.uri&&(t(2,o=""),t(0,u=[]),p.clear(),b=null,t(6,g=!1),t(5,m="")),t(13,M=l.selectedList.uri),t(14,R=!1)),s.$$.dirty&32769&&t(8,r=u.map(S=>({profile:S,status:S._isInList||l.listMembers.includes(S.did)?"Already in list":"New candidate"})))},[u,p,o,d,a,m,g,_,r,v,C,x,N,M,R,l,K]}class yo extends De{constructor(e){super(),Oe(this,e,bo,go,Ee,{})}}function $r(s,e,t){const r=s.slice();return r[15]=e[t],r}function Gr(s,e,t){const r=s.slice();return r[18]=e[t],r}function Zr(s){let e,t=s[2].selectedList.description+"",r;return{c(){e=f("p"),r=L(t),c(e,"class","text-slate-600 mt-1")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l&4&&t!==(t=n[2].selectedList.description+"")&&q(r,t)},d(n){n&&E(e)}}}function Xr(s){let e,t,r,n,l,o,u,d,a,m=s[4].length.toLocaleString()+"",p,b,g=s[0].totalMembers.toLocaleString()+"",_,v,C,x,M,R,N;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("div"),o=f("div"),o.textContent="Calculating comprehensive statistics...",u=w(),d=f("div"),a=L("Processing "),p=L(m),b=L(" of "),_=L(g),v=L(`
						members (`),C=L(s[3]),x=L("%)"),M=w(),R=f("div"),N=f("div"),c(r,"class","loading-spinner svelte-1myfg8v"),c(o,"class","text-blue-700 font-medium"),c(d,"class","text-blue-600 text-sm"),c(t,"class","flex items-center justify-center space-x-3"),c(N,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),fe(N,"width",s[3]+"%"),c(R,"class","mt-3 w-full bg-blue-200 rounded-full h-2"),c(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6")},m(O,T){A(O,e,T),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(l,u),i(l,d),i(d,a),i(d,p),i(d,b),i(d,_),i(d,v),i(d,C),i(d,x),i(e,M),i(e,R),i(R,N)},p(O,T){T&16&&m!==(m=O[4].length.toLocaleString()+"")&&q(p,m),T&1&&g!==(g=O[0].totalMembers.toLocaleString()+"")&&q(_,g),T&8&&q(C,O[3]),T&8&&fe(N,"width",O[3]+"%")},d(O){O&&E(e)}}}function vo(s){let e,t,r,n,l,o=s[0].avgBioLength+"",u,d,a,m,p,b,g,_=s[0].accountsWithBios.toLocaleString()+"",v,C,x=s[0].totalMembers.toLocaleString()+"",M,R,N,O,T,K,S=s[0].accountsWithDisplayNames.toLocaleString()+"",W,I,D=s[0].totalMembers.toLocaleString()+"",z,se,P=s[0].mostCommonWords.length>0&&Qr(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average bio length:",n=w(),l=f("span"),u=L(o),d=L(" characters"),a=w(),m=f("div"),p=f("span"),p.textContent="Bios with content:",b=w(),g=f("span"),v=L(_),C=L(" / "),M=L(x),R=w(),N=f("div"),O=f("span"),O.textContent="Display names:",T=w(),K=f("span"),W=L(S),I=L(" / "),z=L(D),se=w(),P&&P.c(),c(r,"class","text-gray-600"),c(l,"class","font-medium"),c(t,"class","flex justify-between text-sm"),c(p,"class","text-gray-600"),c(g,"class","font-medium"),c(m,"class","flex justify-between text-sm"),c(O,"class","text-gray-600"),c(K,"class","font-medium"),c(N,"class","flex justify-between text-sm"),c(e,"class","space-y-2")},m(B,j){A(B,e,j),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,a),i(e,m),i(m,p),i(m,b),i(m,g),i(g,v),i(g,C),i(g,M),i(e,R),i(e,N),i(N,O),i(N,T),i(N,K),i(K,W),i(K,I),i(K,z),i(e,se),P&&P.m(e,null)},p(B,j){j&1&&o!==(o=B[0].avgBioLength+"")&&q(u,o),j&1&&_!==(_=B[0].accountsWithBios.toLocaleString()+"")&&q(v,_),j&1&&x!==(x=B[0].totalMembers.toLocaleString()+"")&&q(M,x),j&1&&S!==(S=B[0].accountsWithDisplayNames.toLocaleString()+"")&&q(W,S),j&1&&D!==(D=B[0].totalMembers.toLocaleString()+"")&&q(z,D),B[0].mostCommonWords.length>0?P?P.p(B,j):(P=Qr(B),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(B){B&&E(e),P&&P.d()}}}function _o(s){let e;return{c(){e=f("div"),e.textContent="Calculating comprehensive bio statistics...",c(e,"class","text-gray-500 text-sm")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function Qr(s){let e,t,r,n,l=ge(s[0].mostCommonWords),o=[];for(let u=0;u<l.length;u+=1)o[u]=en(Gr(s,l,u));return{c(){e=f("div"),t=f("div"),t.textContent="Most common words:",r=w(),n=f("div");for(let u=0;u<o.length;u+=1)o[u].c();c(t,"class","text-xs text-gray-500 mb-2"),c(n,"class","flex flex-wrap gap-1"),c(e,"class","mt-3")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(u,d){if(d&1){l=ge(u[0].mostCommonWords);let a;for(a=0;a<l.length;a+=1){const m=Gr(u,l,a);o[a]?o[a].p(m,d):(o[a]=en(m),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(u){u&&E(e),Ve(o,u)}}}function en(s){let e,t=s[18].word+"",r,n,l=s[18].count+"",o,u;return{c(){e=f("span"),r=L(t),n=L(" ("),o=L(l),u=L(`)
									`),c(e,"class","bg-white px-2 py-1 rounded text-xs border")},m(d,a){A(d,e,a),i(e,r),i(e,n),i(e,o),i(e,u)},p(d,a){a&1&&t!==(t=d[18].word+"")&&q(r,t),a&1&&l!==(l=d[18].count+"")&&q(o,l)},d(d){d&&E(e)}}}function wo(s){let e,t,r,n,l,o=s[0].avgHandleLength+"",u,d,a,m=s[0].topDomains.length>0&&tn(s);return{c(){e=f("div"),t=f("div"),r=f("span"),r.textContent="Average handle length:",n=w(),l=f("span"),u=L(o),d=L(" characters"),a=w(),m&&m.c(),c(r,"class","text-gray-600"),c(l,"class","font-medium"),c(t,"class","flex justify-between text-sm"),c(e,"class","space-y-2")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(t,n),i(t,l),i(l,u),i(l,d),i(e,a),m&&m.m(e,null)},p(p,b){b&1&&o!==(o=p[0].avgHandleLength+"")&&q(u,o),p[0].topDomains.length>0?m?m.p(p,b):(m=tn(p),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(p){p&&E(e),m&&m.d()}}}function So(s){let e;return{c(){e=f("div"),e.textContent="Calculating handle statistics...",c(e,"class","text-gray-500 text-sm")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function tn(s){let e,t,r,n,l=ge(s[0].topDomains),o=[];for(let u=0;u<l.length;u+=1)o[u]=sn($r(s,l,u));return{c(){e=f("div"),t=f("div"),t.textContent="Top domains:",r=w(),n=f("div");for(let u=0;u<o.length;u+=1)o[u].c();c(t,"class","text-xs text-gray-500 mb-2"),c(n,"class","space-y-1"),c(e,"class","mt-3")},m(u,d){A(u,e,d),i(e,t),i(e,r),i(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(u,d){if(d&1){l=ge(u[0].topDomains);let a;for(a=0;a<l.length;a+=1){const m=$r(u,l,a);o[a]?o[a].p(m,d):(o[a]=sn(m),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=l.length}},d(u){u&&E(e),Ve(o,u)}}}function sn(s){let e,t,r,n=s[15].domain+"",l,o,u,d=s[15].count+"",a,m,p;return{c(){e=f("div"),t=f("span"),r=L("."),l=L(n),o=w(),u=f("span"),a=L(d),m=L(" users"),p=w(),c(t,"class","font-medium"),c(u,"class","text-gray-600"),c(e,"class","flex justify-between text-xs")},m(b,g){A(b,e,g),i(e,t),i(t,r),i(t,l),i(e,o),i(e,u),i(u,a),i(u,m),i(e,p)},p(b,g){g&1&&n!==(n=b[15].domain+"")&&q(l,n),g&1&&d!==(d=b[15].count+"")&&q(a,d)},d(b){b&&E(e)}}}function ko(s){let e;return{c(){e=L("Unknown")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function Lo(s){let e=new Date(s[2].selectedList.createdAt).toLocaleDateString()+"",t;return{c(){t=L(e)},m(r,n){A(r,t,n)},p(r,n){n&4&&e!==(e=new Date(r[2].selectedList.createdAt).toLocaleDateString()+"")&&q(t,e)},d(r){r&&E(t)}}}function Co(s){var vr,_r,wr,Sr,kr;let e,t,r,n,l=(((vr=s[2].selectedList)==null?void 0:vr.name)||"List")+"",o,u,d,a,m,p=s[0].totalMembers.toLocaleString()+"",b,g,_,v,C,x,M,R,N,O,T,K,S=s[1]?"...":Mt(s[0].accountsWithBios,s[0].totalMembers)+"%",W,I,D,z,se,P=s[1]?"Calculating...":`${s[0].accountsWithBios.toLocaleString()} have bios`,B,j,Z,oe,te,y,h,H,k=s[1]?"...":Mt(s[0].verifiedAccounts,s[0].totalMembers)+"%",F,V,ee,Y,$,U=s[1]?"Calculating...":`${s[0].verifiedAccounts.toLocaleString()} verified accounts`,G,ae,le,Q,J,ue,ve,ye,_e=s[1]?"...":Mt(s[0].accountsWithAvatars,s[0].totalMembers)+"%",Ne,Ae,pt,qt,ht,rt=s[1]?"Calculating...":`${s[0].accountsWithAvatars.toLocaleString()} have avatars`,Kt,Nt,Ye,$e,Ge,nt,gt,bt,yt=(s[1]?"...":(_r=s[2].selectedList)!=null&&_r.createdAt?s[0].growthRate||0:"N/A")+"",Ms,Zs,Vt,Xs,Yt,$t=s[1]?"Calculating...":(wr=s[2].selectedList)!=null&&wr.createdAt?s[0].growthRate>0?`${s[0].growthRate} members/day`:"No growth data":"Creation date unavailable",Es,Qs,Ze,lt,Gt,er,tr,it,Zt,sr,rr,vt,Xt,nr,Ue,_t,Qt,lr,es,ts=((Sr=s[2].selectedList)==null?void 0:Sr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List",As,ir,wt,ss,or,Bt,ar,St,rs,cr,Ut,ns=s[0].growthRate+"",Ps,ur,dr,kt,ls,fr,is,os=s[1]?"Calculating...":`${s[0].recentAdditions} in last batch`,Ts,mr,as,Lt,Wt,pr,ot,cs=s[1]?"Calculating...":"Refresh Stats",Is,Rs,hr,we=((kr=s[2].selectedList)==null?void 0:kr.description)&&Zr(s),Se=s[1]&&Xr(s);function gr(X,me){return X[1]?_o:vo}let us=gr(s),We=us(s);function br(X,me){return X[1]?So:wo}let ds=br(s),He=ds(s);function yr(X,me){var Ht;return(Ht=X[2].selectedList)!=null&&Ht.createdAt?Lo:ko}let fs=yr(s),ze=fs(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("h2"),o=L(l),u=w(),we&&we.c(),d=w(),a=f("div"),m=f("div"),b=L(p),g=w(),_=f("div"),_.textContent="Total Members",v=w(),Se&&Se.c(),C=w(),x=f("div"),M=f("div"),R=f("div"),N=f("div"),O=f("div"),O.textContent="ðŸ“Š Engagement",T=w(),K=f("div"),W=L(S),I=w(),D=f("div"),D.textContent="ðŸ’¬",z=w(),se=f("div"),B=L(P),j=w(),Z=f("div"),oe=f("div"),te=f("div"),y=f("div"),y.textContent="âœ… Verified",h=w(),H=f("div"),F=L(k),V=w(),ee=f("div"),ee.textContent="âœ“",Y=w(),$=f("div"),G=L(U),ae=w(),le=f("div"),Q=f("div"),J=f("div"),ue=f("div"),ue.textContent="ðŸ–¼ï¸ Complete",ve=w(),ye=f("div"),Ne=L(_e),Ae=w(),pt=f("div"),pt.textContent="ðŸ‘¤",qt=w(),ht=f("div"),Kt=L(rt),Nt=w(),Ye=f("div"),$e=f("div"),Ge=f("div"),nt=f("div"),nt.textContent="ï¿½ï¿½ Growth Rate",gt=w(),bt=f("div"),Ms=L(yt),Zs=w(),Vt=f("div"),Vt.textContent="ðŸš€",Xs=w(),Yt=f("div"),Es=L($t),Qs=w(),Ze=f("div"),lt=f("div"),Gt=f("h3"),Gt.textContent="ðŸ“ Bio Analysis",er=w(),We.c(),tr=w(),it=f("div"),Zt=f("h3"),Zt.textContent="ðŸ”— Handle Analysis",sr=w(),He.c(),rr=w(),vt=f("div"),Xt=f("h3"),Xt.textContent="ðŸ“‹ List Details",nr=w(),Ue=f("div"),_t=f("div"),Qt=f("span"),Qt.textContent="Type:",lr=w(),es=f("span"),As=L(ts),ir=w(),wt=f("div"),ss=f("span"),ss.textContent="Created:",or=w(),Bt=f("span"),ze.c(),ar=w(),St=f("div"),rs=f("span"),rs.textContent="Growth rate:",cr=w(),Ut=f("span"),Ps=L(ns),ur=L(" members/day"),dr=w(),kt=f("div"),ls=f("span"),ls.textContent="Recent activity:",fr=w(),is=f("span"),Ts=L(os),mr=w(),as=f("div"),Lt=f("div"),Wt=f("button"),Wt.textContent="View on Bluesky",pr=w(),ot=f("button"),Is=L(cs),c(n,"class","text-xl font-bold text-slate-800"),c(m,"class","text-3xl font-bold text-blue-600"),c(_,"class","text-sm text-slate-500"),c(a,"class","text-right"),c(t,"class","flex items-center justify-between mb-6"),c(O,"class","text-blue-600 font-semibold text-sm"),c(K,"class","text-2xl font-bold text-blue-700"),c(D,"class","text-blue-400 text-3xl"),c(R,"class","flex items-center justify-between"),c(se,"class","text-xs text-blue-600 mt-1"),c(M,"class","bg-blue-50 p-4 rounded-lg"),c(y,"class","text-green-600 font-semibold text-sm"),c(H,"class","text-2xl font-bold text-green-700"),c(ee,"class","text-green-400 text-3xl"),c(oe,"class","flex items-center justify-between"),c($,"class","text-xs text-green-600 mt-1"),c(Z,"class","bg-green-50 p-4 rounded-lg"),c(ue,"class","text-purple-600 font-semibold text-sm"),c(ye,"class","text-2xl font-bold text-purple-700"),c(pt,"class","text-purple-400 text-3xl"),c(Q,"class","flex items-center justify-between"),c(ht,"class","text-xs text-purple-600 mt-1"),c(le,"class","bg-purple-50 p-4 rounded-lg"),c(nt,"class","text-orange-600 font-semibold text-sm"),c(bt,"class","text-2xl font-bold text-orange-700"),c(Vt,"class","text-orange-400 text-3xl"),c($e,"class","flex items-center justify-between"),c(Yt,"class","text-xs text-orange-600 mt-1"),c(Ye,"class","bg-orange-50 p-4 rounded-lg"),c(x,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"),c(Gt,"class","text-sm font-semibold text-gray-700 mb-3"),c(lt,"class","bg-gray-50 p-4 rounded-lg"),c(Zt,"class","text-sm font-semibold text-gray-700 mb-3"),c(it,"class","bg-gray-50 p-4 rounded-lg"),c(Xt,"class","text-sm font-semibold text-gray-700 mb-3"),c(Qt,"class","text-gray-600"),c(es,"class","font-medium"),c(_t,"class","flex justify-between text-sm"),c(ss,"class","text-gray-600"),c(Bt,"class","font-medium"),c(wt,"class","flex justify-between text-sm"),c(rs,"class","text-gray-600"),c(Ut,"class","font-medium"),c(St,"class","flex justify-between text-sm"),c(ls,"class","text-gray-600"),c(is,"class","font-medium"),c(kt,"class","flex justify-between text-sm"),c(Ue,"class","space-y-2"),c(vt,"class","bg-gray-50 p-4 rounded-lg"),c(Ze,"class","grid grid-cols-1 lg:grid-cols-3 gap-6"),c(Wt,"class","bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),c(ot,"class","bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-full text-xs font-medium transition-colors"),ot.disabled=s[1],c(Lt,"class","flex flex-wrap gap-2"),c(as,"class","mt-6 pt-4 border-t border-gray-200"),c(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),c(e,"id","list-statistics")},m(X,me){A(X,e,me),i(e,t),i(t,r),i(r,n),i(n,o),i(r,u),we&&we.m(r,null),i(t,d),i(t,a),i(a,m),i(m,b),i(a,g),i(a,_),i(e,v),Se&&Se.m(e,null),i(e,C),i(e,x),i(x,M),i(M,R),i(R,N),i(N,O),i(N,T),i(N,K),i(K,W),i(R,I),i(R,D),i(M,z),i(M,se),i(se,B),i(x,j),i(x,Z),i(Z,oe),i(oe,te),i(te,y),i(te,h),i(te,H),i(H,F),i(oe,V),i(oe,ee),i(Z,Y),i(Z,$),i($,G),i(x,ae),i(x,le),i(le,Q),i(Q,J),i(J,ue),i(J,ve),i(J,ye),i(ye,Ne),i(Q,Ae),i(Q,pt),i(le,qt),i(le,ht),i(ht,Kt),i(x,Nt),i(x,Ye),i(Ye,$e),i($e,Ge),i(Ge,nt),i(Ge,gt),i(Ge,bt),i(bt,Ms),i($e,Zs),i($e,Vt),i(Ye,Xs),i(Ye,Yt),i(Yt,Es),i(e,Qs),i(e,Ze),i(Ze,lt),i(lt,Gt),i(lt,er),We.m(lt,null),i(Ze,tr),i(Ze,it),i(it,Zt),i(it,sr),He.m(it,null),i(Ze,rr),i(Ze,vt),i(vt,Xt),i(vt,nr),i(vt,Ue),i(Ue,_t),i(_t,Qt),i(_t,lr),i(_t,es),i(es,As),i(Ue,ir),i(Ue,wt),i(wt,ss),i(wt,or),i(wt,Bt),ze.m(Bt,null),i(Ue,ar),i(Ue,St),i(St,rs),i(St,cr),i(St,Ut),i(Ut,Ps),i(Ut,ur),i(Ue,dr),i(Ue,kt),i(kt,ls),i(kt,fr),i(kt,is),i(is,Ts),i(e,mr),i(e,as),i(as,Lt),i(Lt,Wt),i(Lt,pr),i(Lt,ot),i(ot,Is),Rs||(hr=[ie(Wt,"click",s[8]),ie(ot,"click",s[6])],Rs=!0)},p(X,[me]){var Ht,Lr,Cr,xr,Mr;me&4&&l!==(l=(((Ht=X[2].selectedList)==null?void 0:Ht.name)||"List")+"")&&q(o,l),(Lr=X[2].selectedList)!=null&&Lr.description?we?we.p(X,me):(we=Zr(X),we.c(),we.m(r,null)):we&&(we.d(1),we=null),me&1&&p!==(p=X[0].totalMembers.toLocaleString()+"")&&q(b,p),X[1]?Se?Se.p(X,me):(Se=Xr(X),Se.c(),Se.m(e,C)):Se&&(Se.d(1),Se=null),me&3&&S!==(S=X[1]?"...":Mt(X[0].accountsWithBios,X[0].totalMembers)+"%")&&q(W,S),me&3&&P!==(P=X[1]?"Calculating...":`${X[0].accountsWithBios.toLocaleString()} have bios`)&&q(B,P),me&3&&k!==(k=X[1]?"...":Mt(X[0].verifiedAccounts,X[0].totalMembers)+"%")&&q(F,k),me&3&&U!==(U=X[1]?"Calculating...":`${X[0].verifiedAccounts.toLocaleString()} verified accounts`)&&q(G,U),me&3&&_e!==(_e=X[1]?"...":Mt(X[0].accountsWithAvatars,X[0].totalMembers)+"%")&&q(Ne,_e),me&3&&rt!==(rt=X[1]?"Calculating...":`${X[0].accountsWithAvatars.toLocaleString()} have avatars`)&&q(Kt,rt),me&7&&yt!==(yt=(X[1]?"...":(Cr=X[2].selectedList)!=null&&Cr.createdAt?X[0].growthRate||0:"N/A")+"")&&q(Ms,yt),me&7&&$t!==($t=X[1]?"Calculating...":(xr=X[2].selectedList)!=null&&xr.createdAt?X[0].growthRate>0?`${X[0].growthRate} members/day`:"No growth data":"Creation date unavailable")&&q(Es,$t),us===(us=gr(X))&&We?We.p(X,me):(We.d(1),We=us(X),We&&(We.c(),We.m(lt,null))),ds===(ds=br(X))&&He?He.p(X,me):(He.d(1),He=ds(X),He&&(He.c(),He.m(it,null))),me&4&&ts!==(ts=((Mr=X[2].selectedList)==null?void 0:Mr.purpose)==="app.bsky.graph.defs#modlist"?"Moderation List":"Curated List")&&q(As,ts),fs===(fs=yr(X))&&ze?ze.p(X,me):(ze.d(1),ze=fs(X),ze&&(ze.c(),ze.m(Bt,null))),me&1&&ns!==(ns=X[0].growthRate+"")&&q(Ps,ns),me&3&&os!==(os=X[1]?"Calculating...":`${X[0].recentAdditions} in last batch`)&&q(Ts,os),me&2&&cs!==(cs=X[1]?"Calculating...":"Refresh Stats")&&q(Is,cs),me&2&&(ot.disabled=X[1])},i:ne,o:ne,d(X){X&&E(e),we&&we.d(),Se&&Se.d(),We.d(),He.d(),ze.d(),Rs=!1,Me(hr)}}}function Mt(s,e){return e===0?0:Math.round(s/e*100)}function xo(s,e,t){let r,n;Ie(s,pe,M=>t(2,r=M)),Ie(s,je,M=>t(5,n=M));let l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0},o=!1,u=0,d=[],a=null,m=!1,p=null;function b(){t(0,l={totalMembers:0,recentAdditions:0,verifiedAccounts:0,accountsWithAvatars:0,accountsWithBios:0,avgBioLength:0,mostCommonWords:[],listAge:0,accountsWithDisplayNames:0,avgHandleLength:0,topDomains:[],growthRate:0}),t(3,u=0),t(4,d=[])}function g(){var T,K;r.listMemberProfiles;const M=((T=r.selectedList)==null?void 0:T.listItemCount)||0,R=(K=r.selectedList)==null?void 0:K.createdAt,N=R?Math.floor((Date.now()-new Date(R).getTime())/(1e3*60*60*24)):0,O=N>0?Math.round(M/N):0;t(0,l={...l,totalMembers:M,listAge:N,growthRate:O})}async function _(){if(!n.session||!r.selectedList||o)return;const M=Date.now();a=M,t(1,o=!0),t(3,u=0),t(4,d=[]);try{const R=r.selectedList.listItemCount||0;if(R===0){v([]),m=!0;return}let N=null,O=0;const T=100;do{O++,t(3,u=Math.round(d.length/R*100));const K=await Le.getListMembers(n.session,r.selectedList.uri,n.authType,T,N);if(a!==M)return;t(4,d=[...d,...K.profiles]),N=K.cursor,t(3,u=Math.round(d.length/R*100))}while(N&&d.length<R);if(a!==M)return;v(d),m=!0}catch(R){console.error("Error loading all members for statistics:",R),g(),m=!0}finally{a===M&&(t(1,o=!1),t(3,u=0))}}function v(M){var H;const R=M.length,N=M.filter(k=>k.verified).length,O=M.filter(k=>k.avatar).length,T=M.filter(k=>k.description&&k.description.trim().length>0).length,K=M.filter(k=>k.displayName&&k.displayName.trim().length>0).length,S=M.map(k=>k.description||"").filter(k=>k.trim().length>0),W=S.length>0?Math.round(S.reduce((k,F)=>k+F.length,0)/S.length):0,I=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their","mine","yours","his","hers","ours","theirs"],D=S.join(" ").toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(k=>k.length>2&&!I.includes(k)),z={};D.forEach(k=>{z[k]=(z[k]||0)+1});const se=Object.entries(z).sort(([,k],[,F])=>F-k).slice(0,5).map(([k,F])=>({word:k,count:F})),P=M.map(k=>k.handle||"").filter(k=>k.length>0),B=P.length>0?Math.round(P.reduce((k,F)=>k+F.length,0)/P.length):0,j=P.map(k=>{const F=k.split(".");return F.length>1?F[F.length-1]:null}).filter(k=>k&&k.length>0),Z={};j.forEach(k=>{Z[k]=(Z[k]||0)+1});const oe=Object.entries(Z).sort(([,k],[,F])=>F-k).slice(0,3).map(([k,F])=>({domain:k,count:F})),te=(H=r.selectedList)==null?void 0:H.createdAt,y=te?Math.floor((Date.now()-new Date(te).getTime())/(1e3*60*60*24)):0,h=y>0?Math.round(R/y):0;Math.min(25,M.length),t(0,l={totalMembers:R,recentAdditions:h,verifiedAccounts:N,accountsWithAvatars:O,accountsWithBios:T,avgBioLength:W,mostCommonWords:se,listAge:y,accountsWithDisplayNames:K,avgHandleLength:B,topDomains:oe,growthRate:h})}function C(){o||(m=!1,_())}const x=()=>{var R,N,O;const M=(R=r.selectedList)==null?void 0:R.uri;if(M){const T=M.split("/"),K=T[T.length-1],S=`https://bsky.app/profile/${(N=n.session)==null?void 0:N.handle}/lists/${K}`;window.open(S,"_blank")}else window.open(`https://bsky.app/profile/${(O=n.session)==null?void 0:O.handle}/lists`,"_blank")};return s.$$.update=()=>{var M,R;s.$$.dirty&4&&r.selectedList&&g(),s.$$.dirty&7&&((M=r.selectedList)==null?void 0:M.listItemCount)!==l.totalMembers&&!o&&(console.log("ListStatistics: Member count changed, recalculating stats"),console.log("New listItemCount:",(R=r.selectedList)==null?void 0:R.listItemCount),console.log("Current stats.totalMembers:",l.totalMembers),g()),s.$$.dirty&132&&!r.selectedList&&p!==null&&(t(7,p=null),m=!1,b()),s.$$.dirty&134&&r.selectedList&&r.selectedList.uri!==p&&!o&&(t(7,p=r.selectedList.uri),m=!1,b(),_())},[l,o,r,u,d,n,C,p,x]}class Mo extends De{constructor(e){super(),Oe(this,e,xo,Co,Ee,{})}}function rn(s,e,t){const r=s.slice();return r[29]=e[t],r}function nn(s,e,t){const r=s.slice();return r[35]=e[t],r}function ln(s,e,t){const r=s.slice();return r[32]=e[t],r}function on(s,e,t){const r=s.slice();return r[38]=e[t],r}function an(s,e,t){const r=s.slice();return r[38]=e[t],r}function cn(s){let e,t,r,n,l,o,u=s[4].size+"",d,a,m,p;function b(v,C){return v[5]?Ao:Eo}let g=b(s),_=g(s);return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("button"),_.c(),l=w(),o=f("div"),d=L(u),a=L(" profiles selected"),n.disabled=s[5],c(n,"class","bg-slate-800 hover:bg-slate-700 text-white border-0 px-4 py-2.5 rounded-lg cursor-pointer transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium text-sm"),c(r,"class","flex items-center gap-3"),c(o,"class","text-sm text-slate-600"),c(t,"class","flex items-center justify-between"),c(e,"class","sticky top-20 z-40 bg-white border border-gray-200 rounded-lg p-4 shadow-sm"),c(e,"id","action-bar")},m(v,C){A(v,e,C),i(e,t),i(t,r),i(r,n),_.m(n,null),i(t,l),i(t,o),i(o,d),i(o,a),m||(p=ie(n,"click",s[14]),m=!0)},p(v,C){g===(g=b(v))&&_?_.p(v,C):(_.d(1),_=g(v),_&&(_.c(),_.m(n,null))),C[0]&32&&(n.disabled=v[5]),C[0]&16&&u!==(u=v[4].size+"")&&q(d,u)},d(v){v&&E(e),_.d(),m=!1,p()}}}function Eo(s){let e,t=s[4].size+"",r,n;return{c(){e=L("Add "),r=L(t),n=L(" to List")},m(l,o){A(l,e,o),A(l,r,o),A(l,n,o)},p(l,o){o[0]&16&&t!==(t=l[4].size+"")&&q(r,t)},d(l){l&&(E(e),E(r),E(n))}}}function Ao(s){let e,t;return{c(){e=f("span"),t=L(`
							Adding...`),c(e,"class","loading-spinner mr-2 svelte-qhxb3n")},m(r,n){A(r,e,n),A(r,t,n)},p:ne,d(r){r&&(E(e),E(t))}}}function un(s){let e,t,r,n=s[6].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=L("âœ… Successfully added "),l=L(n),o=L(" profiles to your list!"),c(t,"class","text-green-700 font-medium"),c(e,"class","bg-green-50 border border-green-200 rounded-lg p-4")},m(u,d){A(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&64&&n!==(n=u[6].success.length+"")&&q(l,n)},d(u){u&&E(e)}}}function dn(s){let e,t,r,n=s[6].errors.length+"",l,o,u,d,a=ge(s[6].errors),m=[];for(let p=0;p<a.length;p+=1)m[p]=fn(an(s,a,p));return{c(){e=f("div"),t=f("p"),r=L("âŒ Failed to add "),l=L(n),o=L(" profiles:"),u=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();c(t,"class","text-red-700 font-medium mb-2"),c(d,"class","text-red-600 text-sm space-y-1"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(d,null)},p(p,b){if(b[0]&64&&n!==(n=p[6].errors.length+"")&&q(l,n),b[0]&64){a=ge(p[6].errors);let g;for(g=0;g<a.length;g+=1){const _=an(p,a,g);m[g]?m[g].p(_,b):(m[g]=fn(_),m[g].c(),m[g].m(d,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=a.length}},d(p){p&&E(e),Ve(m,p)}}}function fn(s){let e,t,r=s[38].error+"",n;return{c(){e=f("li"),t=L("â€¢ "),n=L(r)},m(l,o){A(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&64&&r!==(r=l[38].error+"")&&q(n,r)},d(l){l&&E(e)}}}function mn(s){let e,t,r,n=s[7].success.length+"",l,o;return{c(){e=f("div"),t=f("p"),r=L("ðŸ—‘ï¸ Successfully removed "),l=L(n),o=L(" profiles from your list!"),c(t,"class","text-blue-700 font-medium"),c(e,"class","bg-blue-50 border border-blue-200 rounded-lg p-4")},m(u,d){A(u,e,d),i(e,t),i(t,r),i(t,l),i(t,o)},p(u,d){d[0]&128&&n!==(n=u[7].success.length+"")&&q(l,n)},d(u){u&&E(e)}}}function pn(s){let e,t,r,n=s[7].errors.length+"",l,o,u,d,a=ge(s[7].errors),m=[];for(let p=0;p<a.length;p+=1)m[p]=hn(on(s,a,p));return{c(){e=f("div"),t=f("p"),r=L("âŒ Failed to remove "),l=L(n),o=L(" profiles:"),u=w(),d=f("ul");for(let p=0;p<m.length;p+=1)m[p].c();c(t,"class","text-red-700 font-medium mb-2"),c(d,"class","text-red-600 text-sm space-y-1"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4")},m(p,b){A(p,e,b),i(e,t),i(t,r),i(t,l),i(t,o),i(e,u),i(e,d);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(d,null)},p(p,b){if(b[0]&128&&n!==(n=p[7].errors.length+"")&&q(l,n),b[0]&128){a=ge(p[7].errors);let g;for(g=0;g<a.length;g+=1){const _=on(p,a,g);m[g]?m[g].p(_,b):(m[g]=hn(_),m[g].c(),m[g].m(d,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=a.length}},d(p){p&&E(e),Ve(m,p)}}}function hn(s){let e,t,r=s[38].error+"",n;return{c(){e=f("li"),t=L("â€¢ "),n=L(r)},m(l,o){A(l,e,o),i(e,t),i(e,n)},p(l,o){o[0]&128&&r!==(r=l[38].error+"")&&q(n,r)},d(l){l&&E(e)}}}function Po(s){let e,t,r;function n(d,a){return d[9]?Ko:d[1].listMemberProfiles.length>0?Do:Oo}let l=n(s),o=l(s),u=s[10]>1&&_n(s);return{c(){e=f("div"),t=f("div"),o.c(),r=w(),u&&u.c(),c(t,"class","space-y-4 flex-1 overflow-y-auto"),c(e,"class","flex flex-col flex-1")},m(d,a){A(d,e,a),i(e,t),o.m(t,null),i(e,r),u&&u.m(e,null)},p(d,a){l===(l=n(d))&&o?o.p(d,a):(o.d(1),o=l(d),o&&(o.c(),o.m(t,null))),d[10]>1?u?u.p(d,a):(u=_n(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&E(e),o.d(),u&&u.d()}}}function To(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="text-4xl mb-4">ðŸ¦‹</div> <h3 class="text-lg font-semibold text-slate-800 mb-2">This list is brand new</h3> <p class="text-slate-600">Use the search on the right to find profiles and start building your list.</p></div>',c(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function Io(s){let e,t,r,n,l,o,u,d;return{c(){e=f("div"),t=f("div"),r=f("p"),n=L(s[3]),l=w(),o=f("button"),o.textContent="Try again",c(r,"class","text-red-700 mb-4"),c(o,"class","text-red-600 hover:text-red-800 underline"),c(t,"class","text-center"),c(e,"class","bg-red-50 border border-red-200 rounded-lg p-4 flex-1 flex items-center justify-center")},m(a,m){A(a,e,m),i(e,t),i(t,r),i(r,n),i(t,l),i(t,o),u||(d=ie(o,"click",s[12]),u=!0)},p(a,m){m[0]&8&&q(n,a[3])},d(a){a&&E(e),u=!1,d()}}}function Ro(s){let e;return{c(){e=f("div"),e.innerHTML='<div><div class="loading-spinner mx-auto mb-4 svelte-qhxb3n"></div> <p class="text-slate-600">Loading list members...</p></div>',c(e,"class","text-center py-12 flex-1 flex items-center justify-center")},m(t,r){A(t,e,r)},p:ne,d(t){t&&E(e)}}}function Oo(s){let e,t,r=s[3]&&gn(s),n=ge(s[1].listMembers.slice(0,100)),l=[];for(let o=0;o<n.length;o+=1)l[o]=bn(nn(s,n,o));return{c(){r&&r.c(),e=w();for(let o=0;o<l.length;o+=1)l[o].c();t=st()},m(o,u){r&&r.m(o,u),A(o,e,u);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(o,u);A(o,t,u)},p(o,u){if(o[3]?r?r.p(o,u):(r=gn(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u[0]&2){n=ge(o[1].listMembers.slice(0,100));let d;for(d=0;d<n.length;d+=1){const a=nn(o,n,d);l[d]?l[d].p(a,u):(l[d]=bn(a),l[d].c(),l[d].m(t.parentNode,t))}for(;d<l.length;d+=1)l[d].d(1);l.length=n.length}},d(o){o&&(E(e),E(t)),r&&r.d(o),Ve(l,o)}}}function Do(s){let e,t=ge(s[1].listMemberProfiles),r=[];for(let n=0;n<t.length;n+=1)r[n]=vn(ln(s,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=st()},m(n,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(n,l);A(n,e,l)},p(n,l){if(l[0]&34818){t=ge(n[1].listMemberProfiles);let o;for(o=0;o<t.length;o+=1){const u=ln(n,t,o);r[o]?r[o].p(u,l):(r[o]=vn(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=t.length}},d(n){n&&E(e),Ve(r,n)}}}function Ko(s){let e,t,r,n,l,o,u;return{c(){e=f("div"),t=f("div"),r=w(),n=f("p"),l=L("Loading page "),o=L(s[8]),u=L("..."),c(t,"class","loading-spinner mx-auto mb-4 svelte-qhxb3n"),c(n,"class","text-slate-600"),c(e,"class","text-center py-8")},m(d,a){A(d,e,a),i(e,t),i(e,r),i(e,n),i(n,l),i(n,o),i(n,u)},p(d,a){a[0]&256&&q(o,d[8])},d(d){d&&E(e)}}}function gn(s){let e,t,r,n,l,o,u,d,a,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("p"),n.textContent="âš ï¸ Profile loading issue",l=w(),o=f("p"),u=L(s[3]),d=w(),a=f("button"),a.textContent="Retry",c(n,"class","text-yellow-800 font-medium"),c(o,"class","text-yellow-700 text-sm mt-1"),c(a,"class","bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-3 py-1 rounded text-sm font-medium transition-colors"),c(t,"class","flex items-center justify-between"),c(e,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4")},m(b,g){A(b,e,g),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(o,u),i(t,d),i(t,a),m||(p=ie(a,"click",s[23]),m=!0)},p(b,g){g[0]&8&&q(u,b[3])},d(b){b&&E(e),m=!1,p()}}}function bn(s){let e,t,r,n,l,o,u=s[35]+"",d,a,m,p;return{c(){e=f("div"),t=f("div"),r=f("div"),r.innerHTML='<span class="text-gray-600 font-medium">?</span>',n=w(),l=f("div"),o=f("div"),d=L(u),a=w(),m=f("div"),m.textContent="Member of list",p=w(),c(r,"class","w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center"),c(o,"class","text-sm text-gray-600 font-mono break-all"),c(m,"class","text-xs text-gray-500"),c(l,"class","flex-1"),c(t,"class","flex items-center space-x-3"),c(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4")},m(b,g){A(b,e,g),i(e,t),i(t,r),i(t,n),i(t,l),i(l,o),i(o,d),i(l,a),i(l,m),i(e,p)},p(b,g){g[0]&2&&u!==(u=b[35]+"")&&q(d,u)},d(b){b&&E(e)}}}function yn(s){let e,t=s[32].description+"",r;return{c(){e=f("p"),r=L(t),c(e,"class","text-xs text-gray-600 line-clamp-2 svelte-qhxb3n")},m(n,l){A(n,e,l),i(e,r)},p(n,l){l[0]&2&&t!==(t=n[32].description+"")&&q(r,t)},d(n){n&&E(e)}}}function No(s){let e;return{c(){e=L("ðŸ—‘ï¸ Remove")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function Bo(s){let e,t;return{c(){e=f("span"),t=L(`
														Removing...`),c(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(r,n){A(r,e,n),A(r,t,n)},d(r){r&&(E(e),E(t))}}}function vn(s){let e,t,r,n,l,o,u,d,a,m,p,b,g=(s[32].displayName||s[32].handle)+"",_,v,C,x,M=s[32].handle+"",R,N,O,T,K,S,W,I,D,z,se,P,B,j,Z=s[32].description&&yn(s);function oe(H,k){return k[0]&2&&(z=null),z==null&&(z=!!H[11].has(H[32].did)),z?Bo:No}let te=oe(s,[-1,-1]),y=te(s);function h(){return s[22](s[32])}return{c(){e=f("div"),t=f("div"),r=f("div"),n=f("img"),d=w(),a=f("div"),m=f("a"),p=f("div"),b=f("h4"),_=L(g),v=w(),C=f("span"),x=L("@"),R=L(M),N=w(),O=_s("svg"),T=_s("path"),K=w(),Z&&Z.c(),W=w(),I=f("div"),D=f("button"),y.c(),P=w(),tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)||c(n,"src",l),c(n,"alt",o=s[32].displayName||s[32].handle),c(n,"class","w-12 h-12 rounded-full object-cover border-2 border-gray-100"),c(n,"onerror",u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'"),c(r,"class","flex-shrink-0"),c(b,"class","text-sm font-semibold text-gray-900 truncate"),c(C,"class","text-xs text-gray-600 truncate"),c(T,"stroke-linecap","round"),c(T,"stroke-linejoin","round"),c(T,"stroke-width","2"),c(T,"d","M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"),c(O,"class","w-3 h-3 text-gray-400"),c(O,"fill","none"),c(O,"stroke","currentColor"),c(O,"viewBox","0 0 24 24"),c(p,"class","flex items-center space-x-2 mb-1"),c(m,"href",S="https://bsky.app/profile/"+s[32].handle),c(m,"target","_blank"),c(m,"rel","noopener noreferrer"),c(m,"class","block hover:underline"),c(a,"class","flex-1 min-w-0"),D.disabled=se=s[11].has(s[32].did),c(D,"class","bg-red-100 hover:bg-red-200 text-red-700 border border-red-300 px-3 py-1.5 rounded text-xs font-medium cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"),c(D,"title","Remove from list"),c(I,"class","flex-shrink-0"),c(t,"class","flex items-center space-x-3"),c(e,"class","bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 hover:border-gray-300 transition-colors duration-200")},m(H,k){A(H,e,k),i(e,t),i(t,r),i(r,n),i(t,d),i(t,a),i(a,m),i(m,p),i(p,b),i(b,_),i(p,v),i(p,C),i(C,x),i(C,R),i(p,N),i(p,O),i(O,T),i(m,K),Z&&Z.m(m,null),i(t,W),i(t,I),i(I,D),y.m(D,null),i(e,P),B||(j=ie(D,"click",h),B=!0)},p(H,k){s=H,k[0]&2&&!tt(n.src,l=s[32].avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(s[32].displayName||s[32].handle)}&background=6366f1&color=fff&size=64`)&&c(n,"src",l),k[0]&2&&o!==(o=s[32].displayName||s[32].handle)&&c(n,"alt",o),k[0]&2&&u!==(u="this.src='https://ui-avatars.com/api/?name=$"+encodeURIComponent(s[32].displayName||s[32].handle)+"&background=6366f1&color=fff&size=64'")&&c(n,"onerror",u),k[0]&2&&g!==(g=(s[32].displayName||s[32].handle)+"")&&q(_,g),k[0]&2&&M!==(M=s[32].handle+"")&&q(R,M),s[32].description?Z?Z.p(s,k):(Z=yn(s),Z.c(),Z.m(m,null)):Z&&(Z.d(1),Z=null),k[0]&2&&S!==(S="https://bsky.app/profile/"+s[32].handle)&&c(m,"href",S),te!==(te=oe(s,k))&&(y.d(1),y=te(s),y&&(y.c(),y.m(D,null))),k[0]&2&&se!==(se=s[11].has(s[32].did))&&(D.disabled=se)},d(H){H&&E(e),Z&&Z.d(),y.d(),B=!1,j()}}}function _n(s){let e,t,r,n,l,o,u,d,a,m,p,b,g,_,v,C,x,M,R,N,O,T,K,S=s[9]&&s[8]>1&&wn(),W=ge(Array.from({length:Math.min(5,s[10])},s[24])),I=[];for(let z=0;z<W.length;z+=1)I[z]=Sn(rn(s,W,z));let D=s[9]&&s[8]<s[10]&&kn();return{c(){e=f("div"),t=f("div"),r=f("div"),n=L("Page "),l=L(s[8]),o=L(" of "),u=L(s[10]),d=L(" ("),a=L(s[0]),m=L(" total members)"),p=w(),b=f("div"),g=f("button"),S&&S.c(),_=L(`
											Previous`),C=w(),x=f("div");for(let z=0;z<I.length;z+=1)I[z].c();M=w(),R=f("button"),N=L(`Next
											`),D&&D.c(),c(r,"class","text-sm text-gray-600"),g.disabled=v=s[8]===1||s[9],c(g,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),c(x,"class","flex items-center space-x-1"),R.disabled=O=s[8]===s[10]||s[9],c(R,"class","px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"),c(b,"class","flex items-center space-x-2"),c(t,"class","flex items-center justify-between"),c(e,"class","mt-6 pt-4 border-t border-gray-200")},m(z,se){A(z,e,se),i(e,t),i(t,r),i(r,n),i(r,l),i(r,o),i(r,u),i(r,d),i(r,a),i(r,m),i(t,p),i(t,b),i(b,g),S&&S.m(g,null),i(g,_),i(b,C),i(b,x);for(let P=0;P<I.length;P+=1)I[P]&&I[P].m(x,null);i(b,M),i(b,R),i(R,N),D&&D.m(R,null),T||(K=[ie(g,"click",s[18]),ie(R,"click",s[17])],T=!0)},p(z,se){if(se[0]&256&&q(l,z[8]),se[0]&1024&&q(u,z[10]),se[0]&1&&q(a,z[0]),z[9]&&z[8]>1?S||(S=wn(),S.c(),S.m(g,_)):S&&(S.d(1),S=null),se[0]&768&&v!==(v=z[8]===1||z[9])&&(g.disabled=v),se[0]&67328){W=ge(Array.from({length:Math.min(5,z[10])},z[24]));let P;for(P=0;P<W.length;P+=1){const B=rn(z,W,P);I[P]?I[P].p(B,se):(I[P]=Sn(B),I[P].c(),I[P].m(x,null))}for(;P<I.length;P+=1)I[P].d(1);I.length=W.length}z[9]&&z[8]<z[10]?D||(D=kn(),D.c(),D.m(R,null)):D&&(D.d(1),D=null),se[0]&1792&&O!==(O=z[8]===z[10]||z[9])&&(R.disabled=O)},d(z){z&&E(e),S&&S.d(),Ve(I,z),D&&D.d(),T=!1,Me(K)}}}function wn(s){let e;return{c(){e=f("span"),c(e,"class","loading-spinner mr-1 svelte-qhxb3n")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function Sn(s){let e,t=s[29]+"",r,n,l,o,u;function d(){return s[25](s[29])}return{c(){e=f("button"),r=L(t),n=w(),e.disabled=s[9],c(e,"class",l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")},m(a,m){A(a,e,m),i(e,r),i(e,n),o||(u=ie(e,"click",d),o=!0)},p(a,m){s=a,m[0]&1280&&t!==(t=s[29]+"")&&q(r,t),m[0]&512&&(e.disabled=s[9]),m[0]&1280&&l!==(l="px-3 py-1 text-sm border rounded transition-colors duration-200 "+(s[8]===s[29]?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50")+" disabled:opacity-50 disabled:cursor-not-allowed")&&c(e,"class",l)},d(a){a&&E(e),o=!1,u()}}}function kn(s){let e;return{c(){e=f("span"),c(e,"class","loading-spinner ml-1 svelte-qhxb3n")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function Uo(s){let e,t,r,n,l,o,u,d,a,m,p,b,g,_,v,C=(s[9]?"...":s[1].listMemberProfiles.length)+"",x,M,R,N,O,T,K,S,W,I,D=s[1].listMemberProfiles.length+"",z,se,P=s[1].listMembers.length+"",B,j,Z,oe,te,y;t=new Mo({});let h=s[4].size>0&&cn(s),H=s[6].success.length>0&&un(s),k=s[6].errors.length>0&&dn(s),F=s[7].success.length>0&&mn(s),V=s[7].errors.length>0&&pn(s);function ee(U,G){return U[2]?Ro:U[3]?Io:U[1].listMembers.length===0?To:Po}let Y=ee(s),$=Y(s);return te=new yo({}),{c(){e=f("div"),Re(t.$$.fragment),r=w(),h&&h.c(),n=w(),H&&H.c(),l=w(),k&&k.c(),o=w(),F&&F.c(),u=w(),V&&V.c(),d=w(),a=f("div"),m=f("div"),p=f("div"),b=f("h3"),b.textContent="Latest list members",g=w(),_=f("p"),v=L("Showing "),x=L(C),M=L(" of "),R=L(s[0]),N=L(`
					total members`),O=w(),T=f("div"),K=f("div"),S=L("Debug: isLoadingMembers="),W=L(s[2]),I=L(", profiles="),z=L(D),se=L(", members="),B=L(P),j=w(),$.c(),Z=w(),oe=f("div"),Re(te.$$.fragment),c(b,"class","text-lg font-semibold text-slate-800 mb-2"),c(_,"class","text-sm text-slate-600"),c(p,"class","p-6 border-b border-gray-200"),c(K,"class","text-xs text-gray-500 mb-2 hidden"),c(T,"class","p-6 flex flex-col flex-1"),c(m,"id","list-members-container"),c(m,"class","bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col"),c(a,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),c(a,"id","list-manager-layout"),c(e,"class","space-y-6 relative z-100"),c(e,"id","list-manager")},m(U,G){A(U,e,G),Ce(t,e,null),i(e,r),h&&h.m(e,null),i(e,n),H&&H.m(e,null),i(e,l),k&&k.m(e,null),i(e,o),F&&F.m(e,null),i(e,u),V&&V.m(e,null),i(e,d),i(e,a),i(a,m),i(m,p),i(p,b),i(p,g),i(p,_),i(_,v),i(_,x),i(_,M),i(_,R),i(_,N),i(m,O),i(m,T),i(T,K),i(K,S),i(K,W),i(K,I),i(K,z),i(K,se),i(K,B),i(T,j),$.m(T,null),i(a,Z),i(a,oe),Ce(te,oe,null),y=!0},p(U,G){U[4].size>0?h?h.p(U,G):(h=cn(U),h.c(),h.m(e,n)):h&&(h.d(1),h=null),U[6].success.length>0?H?H.p(U,G):(H=un(U),H.c(),H.m(e,l)):H&&(H.d(1),H=null),U[6].errors.length>0?k?k.p(U,G):(k=dn(U),k.c(),k.m(e,o)):k&&(k.d(1),k=null),U[7].success.length>0?F?F.p(U,G):(F=mn(U),F.c(),F.m(e,u)):F&&(F.d(1),F=null),U[7].errors.length>0?V?V.p(U,G):(V=pn(U),V.c(),V.m(e,d)):V&&(V.d(1),V=null),(!y||G[0]&514)&&C!==(C=(U[9]?"...":U[1].listMemberProfiles.length)+"")&&q(x,C),(!y||G[0]&1)&&q(R,U[0]),(!y||G[0]&4)&&q(W,U[2]),(!y||G[0]&2)&&D!==(D=U[1].listMemberProfiles.length+"")&&q(z,D),(!y||G[0]&2)&&P!==(P=U[1].listMembers.length+"")&&q(B,P),Y===(Y=ee(U))&&$?$.p(U,G):($.d(1),$=Y(U),$&&($.c(),$.m(T,null)))},i(U){y||(ce(t.$$.fragment,U),ce(te.$$.fragment,U),y=!0)},o(U){de(t.$$.fragment,U),de(te.$$.fragment,U),y=!1},d(U){U&&E(e),xe(t),h&&h.d(),H&&H.d(),k&&k.d(),F&&F.d(),V&&V.d(),$.d(),xe(te)}}}const hs=25;function Wo(s,e,t){let r,n;Ie(s,pe,P=>t(1,r=P)),Ie(s,je,P=>t(21,n=P));let l=!1,o="",u=new Set,d=!1,a={success:[],errors:[]},m=new Set,p={success:[],errors:[]},b=1,g=!1,_=!1,v=0,C=new Map,x=0,M=null;async function R(){if(!(!r.selectedList||!n.session||_)){t(19,_=!0),t(2,l=!0),t(3,o=""),t(8,b=1),C.clear();try{const P=await Le.getListInfo(n.session,r.selectedList.uri,n.authType),B={...r.selectedList,name:P.name,description:P.description,createdAt:P.createdAt,listItemCount:P.listItemCount};pe.setSelectedList(B),t(0,x=P.listItemCount||0),t(10,v=Math.ceil(x/hs)),console.log("Total pages:",v,"Total count:",x),await N(1),pe.setListLoading(!1)}catch(P){console.error("Error loading list members:",P),t(3,o=P.message||"Failed to load list members"),pe.setListLoading(!1)}finally{console.log("Setting isLoadingMembers to false"),t(2,l=!1),t(19,_=!1),console.log("Final state - isLoadingMembers:",l,"isCurrentlyLoadingMembers:",_)}}}async function N(P){if(!(!n.session||!r.selectedList)){t(9,g=!0),t(8,b=P);try{let B=C.get(P-1);const j=await Le.getListMembers(n.session,r.selectedList.uri,n.authType,hs,B);console.log(`Fetched ${j.members.length} members for page ${P}`),console.log("Members received:",j.members),j.cursor&&C.set(P,j.cursor),j.members.length===0?x===0?t(3,o=""):(console.warn("No members returned from API for page",P),t(3,o="We couldnâ€™t load members right now.")):t(3,o="");const Z=j.profiles||[];console.log(`Using ${Z.length} profiles from API response for page ${P}`),console.log("Setting profiles in store:",Z.length),pe.setListMembers(j.members),pe.setListMemberProfiles(Z),console.log("Profiles set in store, current count:",r.listMemberProfiles.length)}catch(B){console.error("Error loading members page:",B),t(3,o=B.message||"Failed to load page"),pe.setListMemberProfiles([])}finally{t(9,g=!1)}}}async function O(){if(u.size===0)return;t(5,d=!0),t(6,a={success:[],errors:[]});const P=Array.from(u);for(const B of P)try{await Le.addToList(n.session,B,r.selectedList.uri,n.authType),a.success.push(B),await pe.fetchAndAddProfile(n.session,B,n.authType)}catch(j){a.errors.push({did:B,error:j.message})}u.clear(),t(4,u),t(5,d=!1)}async function T(P){if(!(!P||!r.selectedList||!n.session)){m.add(P);try{await Le.removeFromList(n.session,P,r.selectedList.uri,n.authType),p.success.push(P);const B=r.listMemberProfiles.filter(oe=>oe.did!==P);pe.setListMemberProfiles(B);const j=r.listMembers.filter(oe=>oe!==P);pe.setListMembers(j),t(0,x=Math.max(0,x-1)),t(10,v=Math.ceil(x/hs));const Z=r.userLists.map(oe=>oe.uri===r.selectedList.uri?{...oe,memberCount:Math.max(0,(oe.memberCount||0)-1)}:oe);pe.setUserLists(Z)}catch(B){console.error("Failed to remove profile from list:",B),p.errors.push({profileDid:P,error:B.message})}finally{m.delete(P),setTimeout(()=>{t(7,p={success:[],errors:[]})},5e3)}}}async function K(P){P>=1&&P<=v&&await N(P)}async function S(){b<v&&await N(b+1)}async function W(){b>1&&await N(b-1)}const I=P=>T(P.did),D=()=>N(b),z=(P,B)=>{let j;return v<=5||b<=3?j=B+1:b>=v-2?j=v-4+B:j=b-2+B,j},se=P=>K(P);return s.$$.update=()=>{var P,B,j;s.$$.dirty[0]&2&&r.refreshTrigger&&R(),s.$$.dirty[0]&2&&console.log("Profile count changed:",r.listMemberProfiles.length),s.$$.dirty[0]&3&&((P=r.selectedList)==null?void 0:P.listItemCount)!==x&&(console.log("ListManager: Member count changed in store"),console.log("New listItemCount:",(B=r.selectedList)==null?void 0:B.listItemCount),console.log("Current totalMemberCount:",x),t(0,x=((j=r.selectedList)==null?void 0:j.listItemCount)||0),t(10,v=Math.ceil(x/hs))),s.$$.dirty[0]&3670018&&r.selectedList&&n.session&&!_&&M!==r.selectedList.uri&&(console.log("List changed, loading members for:",r.selectedList.name),t(20,M=r.selectedList.uri),R())},[x,r,l,o,u,d,a,p,b,g,v,m,R,N,O,T,K,S,W,_,M,n,I,D,z,se]}class Ho extends De{constructor(e){super(),Oe(this,e,Wo,Uo,Ee,{},null,[-1,-1])}}function Ln(s){let e,t,r,n,l,o,u,d;return{c(){e=f("div"),t=f("div"),r=f("div"),n=w(),l=f("h3"),l.textContent="Getting Ready",o=w(),u=f("p"),d=L(s[1]),c(r,"class","loading-spinner mx-auto mb-4 svelte-847qwb"),c(l,"class","text-lg font-semibold text-slate-800 mb-2"),c(u,"class","text-slate-600"),c(t,"class","bg-white rounded-lg p-8 shadow-xl max-w-md mx-4 text-center"),c(t,"id","loading-overlay-content"),c(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"),c(e,"id","loading-overlay")},m(a,m){A(a,e,m),i(e,t),i(t,r),i(t,n),i(t,l),i(t,o),i(t,u),i(u,d)},p(a,m){m&2&&q(d,a[1])},d(a){a&&E(e)}}}function zo(s){let e,t=s[0]&&Ln(s);return{c(){t&&t.c(),e=st()},m(r,n){t&&t.m(r,n),A(r,e,n)},p(r,[n]){r[0]?t?t.p(r,n):(t=Ln(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(r){r&&E(e),t&&t.d(r)}}}function Fo(s,e,t){let{isLoading:r=!1}=e,{message:n="Loading list data..."}=e;return s.$$set=l=>{"isLoading"in l&&t(0,r=l.isLoading),"message"in l&&t(1,n=l.message)},[r,n]}class jo extends De{constructor(e){super(),Oe(this,e,Fo,zo,Ee,{isLoading:0,message:1})}}function Cn(s,e,t){const r=s.slice();return r[8]=e[t],r}function xn(s,e){let t,r,n;return{key:s,first:null,c(){t=f("div"),r=_s("svg"),n=_s("path"),c(n,"d","m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"),c(n,"fill","#1185fe"),c(n,"opacity","0.4"),c(r,"width","100%"),c(r,"height","100%"),c(r,"viewBox","0 0 600 530"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(r,"class","butterfly-svg svelte-1l7ozht"),c(t,"class","butterfly svelte-1l7ozht"),fe(t,"left",e[8].x+"%"),fe(t,"top",e[8].y+"%"),fe(t,"width",e[8].size+"px"),fe(t,"height",e[8].size+"px"),fe(t,"animation-duration",e[8].speed+"s"),fe(t,"animation-delay",e[8].delay+"s"),fe(t,"transform","rotate("+e[8].rotation+"deg)"),fe(t,"opacity",.6+Math.random()*.4),this.first=t},m(l,o){A(l,t,o),i(t,r),i(r,n)},p(l,o){e=l,o&1&&fe(t,"left",e[8].x+"%"),o&1&&fe(t,"top",e[8].y+"%"),o&1&&fe(t,"width",e[8].size+"px"),o&1&&fe(t,"height",e[8].size+"px"),o&1&&fe(t,"animation-duration",e[8].speed+"s"),o&1&&fe(t,"animation-delay",e[8].delay+"s"),o&1&&fe(t,"transform","rotate("+e[8].rotation+"deg)")},d(l){l&&E(t)}}}function Mn(s){let e;return{c(){e=f("div"),e.innerHTML='<div class="message-content svelte-1l7ozht" id="empty-list-content"><svg width="60" height="53" viewBox="0 0 600 530" xmlns="http://www.w3.org/2000/svg" class="svelte-1l7ozht"><path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z" fill="#1185fe" opacity="0.3"></path></svg> <p class="svelte-1l7ozht">Add members to your list to see butterflies flutter by!</p></div>',c(e,"class","empty-list-message svelte-1l7ozht"),c(e,"id","empty-list-message")},m(t,r){A(t,e,r)},d(t){t&&E(e)}}}function Jo(s){let e,t=[],r=new Map,n,l=ge(s[0]);const o=d=>d[8].id;for(let d=0;d<l.length;d+=1){let a=Cn(s,l,d),m=o(a);r.set(m,t[d]=xn(m,a))}let u=s[2].selectedList&&s[1]===0&&Mn();return{c(){e=f("div");for(let d=0;d<t.length;d+=1)t[d].c();n=w(),u&&u.c(),c(e,"class","butterfly-background svelte-1l7ozht"),c(e,"id","butterfly-background")},m(d,a){A(d,e,a);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i(e,n),u&&u.m(e,null),s[5](e)},p(d,[a]){a&1&&(l=ge(d[0]),t=ul(t,a,o,1,d,l,r,e,cl,xn,n,Cn)),d[2].selectedList&&d[1]===0?u||(u=Mn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:ne,o:ne,d(d){d&&E(e);for(let a=0;a<t.length;a+=1)t[a].d();u&&u.d(),s[5](null)}}}function qo(s,e,t){let r,n,l;Ie(s,pe,p=>t(2,l=p));let o,u=[];const d={baseCount:12,maxCount:50,minSize:20,maxSize:45,minSpeed:15,maxSpeed:45,minDelay:0,maxDelay:15};Cs(()=>{a()});function a(){t(0,u=[]);for(let p=0;p<n;p++)u.push({id:p,x:Math.random()*100,y:Math.random()*100,size:Math.random()*(d.maxSize-d.minSize)+d.minSize,speed:Math.random()*(d.maxSpeed-d.minSpeed)+d.minSpeed,delay:Math.random()*(d.maxDelay-d.minDelay)+d.minDelay,rotation:Math.random()*60-30,rotationSpeed:(Math.random()-.5)*2,floatingDirection:Math.random()*360,floatingSpeed:Math.random()*.5+.1})}function m(p){ws[p?"unshift":"push"](()=>{o=p,t(3,o)})}return s.$$.update=()=>{var p;s.$$.dirty&4&&t(1,r=((p=l.selectedList)==null?void 0:p.listItemCount)||0),s.$$.dirty&6&&t(4,n=l.selectedList?Math.min(d.maxCount,Math.max(d.baseCount,Math.floor(r/2))):d.baseCount),s.$$.dirty&17&&n!==u.length&&a()},[u,r,l,o,n,m]}class Vo extends De{constructor(e){super(),Oe(this,e,qo,Jo,Ee,{})}}function En(s){let e,t;return e=new _i({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Yo(s){let e,t;return e=new Ho({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function $o(s){let e,t;return e=new zi({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Go(s){let e,t;return e=new Ni({}),{c(){Re(e.$$.fragment)},m(r,n){Ce(e,r,n),t=!0},i(r){t||(ce(e.$$.fragment,r),t=!0)},o(r){de(e.$$.fragment,r),t=!1},d(r){xe(e,r)}}}function Zo(s){let e,t,r,n,l,o,u,d,a,m;t=new Vo({});let p=s[1]!=="auth"&&En();const b=[Go,$o,Yo],g=[];function _(v,C){return v[1]==="auth"?0:v[1]==="list-selector"?1:v[1]==="manager"?2:-1}return~(o=_(s))&&(u=g[o]=b[o](s)),a=new jo({props:{isLoading:s[0].isLoadingList,message:"Loading list data and members..."}}),{c(){e=f("main"),Re(t.$$.fragment),r=w(),p&&p.c(),n=w(),l=f("div"),u&&u.c(),d=w(),Re(a.$$.fragment),c(l,"class","max-w-6xl mx-auto p-6"),c(l,"id","app-content"),c(e,"class","min-h-screen bg-gray-50"),c(e,"id","app-main")},m(v,C){A(v,e,C),Ce(t,e,null),i(e,r),p&&p.m(e,null),i(e,n),i(e,l),~o&&g[o].m(l,null),i(e,d),Ce(a,e,null),m=!0},p(v,[C]){v[1]!=="auth"?p?C&2&&ce(p,1):(p=En(),p.c(),ce(p,1),p.m(e,n)):p&&(ft(),de(p,1,1,()=>{p=null}),mt());let x=o;o=_(v),o!==x&&(u&&(ft(),de(g[x],1,1,()=>{g[x]=null}),mt()),~o?(u=g[o],u||(u=g[o]=b[o](v),u.c()),ce(u,1),u.m(l,null)):u=null);const M={};C&1&&(M.isLoading=v[0].isLoadingList),a.$set(M)},i(v){m||(ce(t.$$.fragment,v),ce(p),ce(u),ce(a.$$.fragment,v),m=!0)},o(v){de(t.$$.fragment,v),de(p),de(u),de(a.$$.fragment,v),m=!1},d(v){v&&E(e),xe(t),p&&p.d(),~o&&g[o].d(),xe(a)}}}function Xo(s,e,t){let r,n;Ie(s,pe,o=>t(0,r=o)),Ie(s,je,o=>t(2,n=o));let l="auth";return Cs(async()=>{const{session:o,authType:u}=await je.initializeSession();o&&(console.log("Session restored:",{authType:u,handle:o.handle||o.did}),t(1,l="list-selector"))}),s.$$.update=()=>{s.$$.dirty&5&&(n.session?r.selectedList?t(1,l="manager"):t(1,l="list-selector"):t(1,l="auth"))},[r,l,n]}class Qo extends De{constructor(e){super(),Oe(this,e,Xo,Zo,Ee,{})}}new Qo({target:document.getElementById("app")});
